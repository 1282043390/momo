define("collectError",["require","exports","module"],function(e){var t=function(e,t,n){if(t&&!(e.indexOf("未指明的错误")>-1)){var a={app:"webmomo",momoid:window.momoid,message:encodeURIComponent(e),file:t,line:n,ua:window.navigator.userAgent},i=[];for(var o in a)i.push(o+"="+a[o]);return i=i.join("&"),(new Image).src="https://web.immomo.com/webmomo/api/warn/log?"+i+"&t="+Math.random(),!0}},n=function(e,t){var n=[];for(var a in e)n.push(a+"="+e[a]);return n=n.join("&"),(new Image).src=t+n+"&t="+Math.random(),!0};return{init:t,postDot:n}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(){var e=new r.HandlebarsEnvironment;return m.extend(e,r),e.SafeString=s["default"],e.Exception=u["default"],e.Utils=m,e.escapeExpression=m.escapeExpression,e.VM=p,e.template=function(t){return p.template(t,e)},e}var i=n(7)["default"];t.__esModule=!0;var o=n(1),r=i(o),l=n(2),s=i(l),c=n(3),u=i(c),d=n(4),m=i(d),f=n(5),p=i(f),h=n(6),g=i(h),v=a();v.create=a,g["default"](v),v["default"]=v,t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function a(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new u["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||null==t)return a(this);if(p(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var r=o(n.data);r.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:r}}return i(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,i){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!i,d&&(c.contextPath=d+t)),l+=a(e[t],{data:c,blockParams:s.blockParams([e[t],t],[d+t,null])})}if(!t)throw new u["default"]("Must pass iterator to #each");var a=t.fn,i=t.inverse,r=0,l="",c=void 0,d=void 0;if(t.data&&t.ids&&(d=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),h(e)&&(e=e.call(this)),t.data&&(c=o(t.data)),e&&"object"==typeof e)if(p(e))for(var m=e.length;r<m;r++)n(r,r,r===e.length-1);else{var f=void 0;for(var g in e)e.hasOwnProperty(g)&&(f&&n(f,r-1),f=g,r++);f&&n(f,r-1,!0)}return 0===r&&(l=i(this)),l}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){h(e)&&(e=e.call(this));var n=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var a=o(t.data);a.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:a}}return n(e,t)}),e.registerHelper("log",function(t,n){var a=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(a,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}function o(e){var t=s.extend({},e);return t._parent=e,t}var r=n(7)["default"];t.__esModule=!0,t.HandlebarsEnvironment=a,t.createFrame=o;var l=n(4),s=r(l),c=n(3),u=r(c),d="3.0.1";t.VERSION=d;var m=6;t.COMPILER_REVISION=m;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=f;var p=s.isArray,h=s.isFunction,g=s.toString,v="[object Object]";a.prototype={constructor:a,logger:y,log:b,registerHelper:function(e,t){if(g.call(e)===v){if(t)throw new u["default"]("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(g.call(e)===v)s.extend(this.partials,e);else{if("undefined"==typeof t)throw new u["default"]("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&y.level<=e){var n=y.methodMap[e];(console[n]||console.log).call(console,t)}}};t.logger=y;var b=y.log;t.log=b},function(e,t,n){"use strict";function a(e){this.string=e}t.__esModule=!0,a.prototype.toString=a.prototype.toHTML=function(){return""+this.string},t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function a(e,t){var n=t&&t.loc,o=void 0,r=void 0;n&&(o=n.start.line,r=n.start.column,e+=" - "+o+":"+r);for(var l=Error.prototype.constructor.call(this,e),s=0;s<i.length;s++)this[i[s]]=l[i[s]];Error.captureStackTrace&&Error.captureStackTrace(this,a),n&&(this.lineNumber=o,this.column=r)}t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return u[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function o(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1}function r(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return m.test(e)?e.replace(d,a):e}function l(e){return!e&&0!==e||!(!h(e)||0!==e.length)}function s(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=i,t.indexOf=o,t.escapeExpression=r,t.isEmpty=l,t.blockParams=s,t.appendContextPath=c;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,m=/[&<>"'`]/,f=Object.prototype.toString;t.toString=f;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===f.call(e)});var p;t.isFunction=p;var h=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===f.call(e)};t.isArray=h},function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=h.COMPILER_REVISION;if(t!==n){if(t<n){var a=h.REVISION_CHANGES[n],i=h.REVISION_CHANGES[t];throw new p["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+i+").")}throw new p["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function n(n,a,i){i.hash&&(a=m.extend({},a,i.hash)),n=t.VM.resolvePartial.call(this,n,a,i);var o=t.VM.invokePartial.call(this,n,a,i);if(null==o&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),o=i.partials[i.name](a,i)),null!=o){if(i.indent){for(var r=o.split("\n"),l=0,s=r.length;l<s&&(r[l]||l+1!==s);l++)r[l]=i.indent+r[l];o=r.join("\n")}return o}throw new p["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function a(t){var n=void 0===arguments[1]?{}:arguments[1],o=n.data;a._setup(n),!n.partial&&e.useData&&(o=c(t,o));var r=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(r=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,l,r)}if(!t)throw new p["default"]("No environment passed to template");if(!e||!e.main)throw new p["default"]("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new p["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,a=0;a<n;a++)if(e[a]&&null!=e[a][t])return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:m.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,a,i){var r=this.programs[e],l=this.fn(e);return t||i||a||n?r=o(this,e,l,t,n,a,i):r||(r=this.programs[e]=o(this,e,l)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=m.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},a._child=function(t,n,a,r){if(e.useBlockParams&&!a)throw new p["default"]("must pass block params");if(e.useDepths&&!r)throw new p["default"]("must pass parent depths");return o(i,t,e[t],n,0,a,r)},a}function o(e,t,n,a,i,o,r){function l(t){var i=void 0===arguments[1]?{}:arguments[1];return n.call(e,t,e.helpers,e.partials,i.data||a,o&&[i.blockParams].concat(o),r&&[t].concat(r))}return l.program=t,l.depth=r?r.length:0,l.blockParams=i||0,l}function r(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function l(e,t,n){if(n.partial=!0,void 0===e)throw new p["default"]("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function s(){return""}function c(e,t){return t&&"root"in t||(t=t?h.createFrame(t):{},t.root=e),t}var u=n(7)["default"];t.__esModule=!0,t.checkRevision=a,t.template=i,t.wrapProgram=o,t.resolvePartial=r,t.invokePartial=l,t.noop=s;var d=n(4),m=u(d),f=n(3),p=u(f),h=n(1)},function(e,t,n){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof n?n:window,a=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=a)}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0}])}),define("helper/isEqual",["handlebars"],function(e){e.registerHelper("isEqual",function(e,t){return e==t.hash.equals?t.fn(this):t.inverse(this)})}),define("helper/getValue",["handlebars"],function(e){e.registerHelper("getValue",function(e,t){return e[t]})}),define("helper/compare",["handlebars"],function(e){e.registerHelper("compare",function(e,t,n){var a=n.hash.operator||"==",i={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e==t}},o=i[a](e,t);return o?n.fn(this):n.inverse(this)})}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("lib/es5-shim.min",[],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){var e,t=Array,n=t.prototype,a=Object,i=a.prototype,o=Function.prototype,r=String,l=r.prototype,s=Number,c=s.prototype,u=n.slice,d=n.splice,m=n.push,f=n.unshift,p=n.concat,h=o.call,g=Math.max,v=Math.min,y=i.toString,b="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,x=Function.prototype.toString,w=function(e){try{return x.call(e),!0}catch(t){return!1}},$="[object Function]",k="[object GeneratorFunction]";e=function(e){if("function"!=typeof e)return!1;if(b)return w(e);var t=y.call(e);return t===$||t===k};var M,C=RegExp.prototype.exec,I=function(e){try{return C.call(e),!0}catch(t){return!1}},V="[object RegExp]";M=function(e){return"object"==typeof e&&(b?I(e):y.call(e)===V)};var T,L=String.prototype.valueOf,E=function(e){try{return L.call(e),!0}catch(t){return!1}},S="[object String]";T=function(e){return"string"==typeof e||"object"==typeof e&&(b?E(e):y.call(e)===S)};var P=function(e){var t,n=a.defineProperty&&function(){try{var e={};a.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(n){return!1}}();return t=n?function(e,t,n,i){!i&&t in e||a.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,a){!a&&t in e||(e[t]=n)},function(n,a,i){for(var o in a)e.call(a,o)&&t(n,o,a[o],i)}}(i.hasOwnProperty),A=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},_=s.isNaN||function(e){return e!==e},q={ToInteger:function(e){var t=+e;return _(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(t){var n,a,i;if(A(t))return t;if(a=t.valueOf,e(a)&&(n=a.call(t),A(n)))return n;if(i=t.toString,e(i)&&(n=i.call(t),A(n)))return n;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return a(e)},ToUint32:function(e){return e>>>0}},H=function(){};P(o,{bind:function(t){var n=this;if(!e(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,o=u.call(arguments,1),r=function(){if(this instanceof i){var e=n.apply(this,p.call(o,u.call(arguments)));return a(e)===e?e:this}return n.apply(t,p.call(o,u.call(arguments)))},l=g(0,n.length-o.length),s=[],c=0;c<l;c++)m.call(s,"$"+c);return i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(r),n.prototype&&(H.prototype=n.prototype,i.prototype=new H,H.prototype=null),i}});var j=h.bind(i.hasOwnProperty),O=h.bind(i.toString),N=h.bind(l.slice),D=h.bind(l.split),B=h.bind(l.indexOf),R=h.bind(m),F=t.isArray||function(e){return"[object Array]"===O(e)},W=1!==[].unshift(0);P(n,{unshift:function(){return f.apply(this,arguments),this.length}},W),P(t,{isArray:F});var U=a("a"),G="a"!==U[0]||!(0 in U),Y=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,a){"object"!=typeof a&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")),!!e&&t&&n};P(n,{forEach:function(t){var n,a=q.ToObject(this),i=G&&T(this)?D(this,""):a,o=-1,r=q.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<r;)o in i&&("undefined"==typeof n?t(i[o],o,a):t.call(n,i[o],o,a))}},!Y(n.forEach)),P(n,{map:function(n){var a,i=q.ToObject(this),o=G&&T(this)?D(this,""):i,r=q.ToUint32(o.length),l=t(r);if(arguments.length>1&&(a=arguments[1]),!e(n))throw new TypeError("Array.prototype.map callback must be a function");for(var s=0;s<r;s++)s in o&&("undefined"==typeof a?l[s]=n(o[s],s,i):l[s]=n.call(a,o[s],s,i));return l}},!Y(n.map)),P(n,{filter:function(t){var n,a,i=q.ToObject(this),o=G&&T(this)?D(this,""):i,r=q.ToUint32(o.length),l=[];if(arguments.length>1&&(a=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var s=0;s<r;s++)s in o&&(n=o[s],("undefined"==typeof a?t(n,s,i):t.call(a,n,s,i))&&R(l,n));return l}},!Y(n.filter)),P(n,{every:function(t){var n,a=q.ToObject(this),i=G&&T(this)?D(this,""):a,o=q.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var r=0;r<o;r++)if(r in i&&!("undefined"==typeof n?t(i[r],r,a):t.call(n,i[r],r,a)))return!1;return!0}},!Y(n.every)),P(n,{some:function(t){var n,a=q.ToObject(this),i=G&&T(this)?D(this,""):a,o=q.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var r=0;r<o;r++)if(r in i&&("undefined"==typeof n?t(i[r],r,a):t.call(n,i[r],r,a)))return!0;return!1}},!Y(n.some));var J=!1;n.reduce&&(J="object"==typeof n.reduce.call("es5",function(e,t,n,a){return a})),P(n,{reduce:function(t){var n=q.ToObject(this),a=G&&T(this)?D(this,""):n,i=q.ToUint32(a.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,r=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in a){o=a[r++];break}if(++r>=i)throw new TypeError("reduce of empty array with no initial value")}for(;r<i;r++)r in a&&(o=t(o,a[r],r,n));return o}},!J);var X=!1;n.reduceRight&&(X="object"==typeof n.reduceRight.call("es5",function(e,t,n,a){return a})),P(n,{reduceRight:function(t){var n=q.ToObject(this),a=G&&T(this)?D(this,""):n,i=q.ToUint32(a.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,r=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in a){o=a[r--];break}if(--r<0)throw new TypeError("reduceRight of empty array with no initial value")}if(r<0)return o;do r in a&&(o=t(o,a[r],r,n));while(r--);return o}},!X);var z=n.indexOf&&[0,1].indexOf(1,2)!==-1;P(n,{indexOf:function(e){var t=G&&T(this)?D(this,""):q.ToObject(this),n=q.ToUint32(t.length);if(0===n)return-1;var a=0;for(arguments.length>1&&(a=q.ToInteger(arguments[1])),a=a>=0?a:g(0,n+a);a<n;a++)if(a in t&&t[a]===e)return a;return-1}},z);var Q=n.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(n,{lastIndexOf:function(e){var t=G&&T(this)?D(this,""):q.ToObject(this),n=q.ToUint32(t.length);if(0===n)return-1;var a=n-1;for(arguments.length>1&&(a=v(a,q.ToInteger(arguments[1]))),a=a>=0?a:n-Math.abs(a);a>=0;a--)if(a in t&&e===t[a])return a;return-1}},Q);var K=function(){var e=[1,2],t=e.splice();return 2===e.length&&F(t)&&0===t.length}();P(n,{splice:function(e,t){return 0===arguments.length?[]:d.apply(this,arguments)}},!K);var Z=function(){var e={};return n.splice.call(e,0,0,1),1===e.length}();P(n,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=g(q.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=u.call(arguments),n.length<2?R(n,this.length-e):n[1]=q.ToInteger(t)),d.apply(this,n)}},!Z);var ee=function(){var e=new t(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),te=function(){var e=256,t=[];return t[e]="a",t.splice(e+1,0,"b"),"a"===t[e]}();P(n,{splice:function(e,t){for(var n,a=q.ToObject(this),i=[],o=q.ToUint32(a.length),l=q.ToInteger(e),s=l<0?g(o+l,0):v(l,o),c=v(g(q.ToInteger(t),0),o-s),d=0;d<c;)n=r(s+d),j(a,n)&&(i[d]=a[n]),d+=1;var m,f=u.call(arguments,2),p=f.length;if(p<c){for(d=s;d<o-c;)n=r(d+c),m=r(d+p),j(a,n)?a[m]=a[n]:delete a[m],d+=1;for(d=o;d>o-c+p;)delete a[d-1],d-=1}else if(p>c)for(d=o-c;d>s;)n=r(d+c-1),m=r(d+p-1),j(a,n)?a[m]=a[n]:delete a[m],d-=1;d=s;for(var h=0;h<f.length;++h)a[d]=f[h],d+=1;return a.length=o-c+p,i}},!ee||!te);var ne="1,2"!==[1,2].join(void 0),ae=n.join;P(n,{join:function(e){return ae.call(this,"undefined"==typeof e?",":e)}},ne);var ie=function(e){for(var t=q.ToObject(this),n=q.ToUint32(t.length),a=0;a<arguments.length;)t[n+a]=arguments[a],a+=1;return t.length=n+a,n+a},oe=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!j(e,0)}();P(n,{push:function(e){return F(this)?m.apply(this,arguments):ie.apply(this,arguments)}},oe);var re=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!j(e,0)}();P(n,{push:ie},re);var le=!{toString:null}.propertyIsEnumerable("toString"),se=function(){}.propertyIsEnumerable("prototype"),ce=!j("x","0"),ue=function(e){var t=e.constructor;return t&&t.prototype===e},de={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0},me=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!de["$"+e]&&j(window,e)&&null!==window[e]&&"object"==typeof window[e]&&ue(window[e])}catch(t){return!0}return!1}(),fe=function(e){if("undefined"==typeof window||!me)return ue(e);try{return ue(e)}catch(t){return!1}},pe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],he=pe.length,ge=function(e){return"[object Arguments]"===O(e)},ve=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!F(t)&&e(t.callee)},ye=ge(arguments)?ge:ve;P(a,{keys:function(t){var n=e(t),a=ye(t),i=null!==t&&"object"==typeof t,o=i&&T(t);if(!i&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var l=[],s=se&&n;if(o&&ce||a)for(var c=0;c<t.length;++c)R(l,r(c));if(!a)for(var u in t)s&&"prototype"===u||!j(t,u)||R(l,r(u));if(le)for(var d=fe(t),m=0;m<he;m++){var f=pe[m];d&&"constructor"===f||!j(t,f)||R(l,f)}return l}});var be=a.keys&&function(){return 2===a.keys(arguments).length}(1,2),xe=a.keys&&function(){var e=a.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),we=a.keys;P(a,{keys:function(e){return we(ye(e)?u.call(e):e)}},!be||xe);var $e=-621987552e5,ke="-000001",Me=Date.prototype.toISOString&&new Date($e).toISOString().indexOf(ke)===-1,Ce=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date((-1)).toISOString();P(Date.prototype,{toISOString:function(){var e,t,n,a,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(a=this.getUTCFullYear(),i=this.getUTCMonth(),a+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],a=(a<0?"-":a>9999?"+":"")+N("00000"+Math.abs(a),0<=a&&a<=9999?-4:-6),t=e.length;t--;)n=e[t],n<10&&(e[t]="0"+n);return a+"-"+u.call(e,0,2).join("-")+"T"+u.call(e,2).join(":")+"."+N("000"+this.getUTCMilliseconds(),-3)+"Z"}},Me||Ce);var Ie=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date($e).toJSON().indexOf(ke)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();Ie||(Date.prototype.toJSON=function(t){var n=a(this),i=q.ToPrimitive(n);if("number"==typeof i&&!isFinite(i))return null;var o=n.toISOString;if(!e(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var Ve=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),Te=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),Le=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(Le||Te||!Ve){var Ee=Math.pow(2,31)-1,Se=(Math.floor(Ee/1e3),_(new Date(1970,0,1,0,0,0,Ee+1).getTime()));Date=function(e){var t=function(n,a,i,o,l,s,c){var u,d=arguments.length;if(this instanceof e){var m=s,f=c;if(Se&&d>=7&&c>Ee){var p=Math.floor(c/Ee)*Ee,h=Math.floor(p/1e3);m+=h,f-=1e3*h}u=1===d&&r(n)===n?new e(t.parse(n)):d>=7?new e(n,a,i,o,l,m,f):d>=6?new e(n,a,i,o,l,m):d>=5?new e(n,a,i,o,l):d>=4?new e(n,a,i,o):d>=3?new e(n,a,i):d>=2?new e(n,a):d>=1?new e(n):new e}else u=e.apply(this,arguments);return A(u)||P(u,{constructor:t},!0),u},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),a=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(e,t){var n=t>1?1:0;return a[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},o=function(t){var n=0,a=t;if(Se&&a>Ee){var i=Math.floor(a/Ee)*Ee,o=Math.floor(i/1e3);n+=o,a-=1e3*o}return s(new e(1970,0,1,0,0,n,a))};for(var l in e)j(e,l)&&(t[l]=e[l]);P(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,P(t.prototype,{constructor:t},!0);var c=function(t){var a=n.exec(t);if(a){var r,l=s(a[1]),c=s(a[2]||1)-1,u=s(a[3]||1)-1,d=s(a[4]||0),m=s(a[5]||0),f=s(a[6]||0),p=Math.floor(1e3*s(a[7]||0)),h=Boolean(a[4]&&!a[8]),g="-"===a[9]?1:-1,v=s(a[10]||0),y=s(a[11]||0),b=m>0||f>0||p>0;return d<(b?24:25)&&m<60&&f<60&&p<1e3&&c>-1&&c<12&&v<24&&y<60&&u>-1&&u<i(l,c+1)-i(l,c)&&(r=60*(24*(i(l,c)+u)+d+v*g),r=1e3*(60*(r+m+y*g)+f)+p,h&&(r=o(r)),-864e13<=r&&r<=864e13)?r:NaN}return e.parse.apply(this,arguments)};return P(t,{parse:c}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var Pe=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),Ae={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,a=t;++n<Ae.size;)a+=e*Ae.data[n],Ae.data[n]=a%Ae.base,a=Math.floor(a/Ae.base)},divide:function(e){for(var t=Ae.size,n=0;--t>=0;)n+=Ae.data[t],Ae.data[t]=Math.floor(n/e),n=n%e*Ae.base},numToString:function(){for(var e=Ae.size,t="";--e>=0;)if(""!==t||0===e||0!==Ae.data[e]){var n=r(Ae.data[e]);""===t?t=n:t+=N("0000000",0,7-n.length)+n}return t},pow:function ze(e,t,n){return 0===t?n:t%2===1?ze(e,t-1,n*e):ze(e*e,t/2,n)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}},_e=function(e){var t,n,a,i,o,l,c,u;if(t=s(e),t=_(t)?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=s(this),_(n))return"NaN";if(n<=-1e21||n>=1e21)return r(n);if(a="",n<0&&(a="-",n=-n),i="0",n>1e-21)if(o=Ae.log(n*Ae.pow(2,69,1))-69,l=o<0?n*Ae.pow(2,-o,1):n/Ae.pow(2,o,1),l*=4503599627370496,o=52-o,o>0){for(Ae.multiply(0,l),c=t;c>=7;)Ae.multiply(1e7,0),c-=7;for(Ae.multiply(Ae.pow(10,c,1),0),c=o-1;c>=23;)Ae.divide(1<<23),c-=23;Ae.divide(1<<c),Ae.multiply(1,1),Ae.divide(2),i=Ae.numToString()}else Ae.multiply(0,l),Ae.multiply(1<<-o,0),i=Ae.numToString()+N("0.00000000000000000000",2,2+t);return t>0?(u=i.length,i=u<=t?a+N("0.0000000000000000000",0,t-u+2)+i:a+N(i,0,u-t)+"."+N(i,u-t)):i=a+i,i};P(c,{toFixed:_e},Pe);var qe=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),He=c.toPrecision;P(c,{toPrecision:function(e){return"undefined"==typeof e?He.call(this):He.call(this,e)}},qe),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1],t=Math.pow(2,32)-1;l.split=function(n,a){var i=this;if("undefined"==typeof n&&0===a)return[];if(!M(n))return D(this,n,a);var o,r,l,s,c=[],d=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),m=0,f=new RegExp(n.source,d+"g");i+="",e||(o=new RegExp("^"+f.source+"$(?!\\s)",d));var p="undefined"==typeof a?t:q.ToUint32(a);for(r=f.exec(i);r&&(l=r.index+r[0].length,!(l>m&&(R(c,N(i,m,r.index)),!e&&r.length>1&&r[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(r[e]=void 0)}),r.length>1&&r.index<i.length&&R(c,u.call(r,1)),s=r[0].length,m=l,c.length>=p)));)f.lastIndex===r.index&&f.lastIndex++,r=f.exec(i);return m===i.length?!s&&f.test("")||R(c,""):R(c,N(i,m)),c.length>p?N(c,0,p):c}}():"0".split(void 0,0).length&&(l.split=function(e,t){return"undefined"==typeof e&&0===t?[]:D(this,e,t)});var je=l.replace,Oe=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){R(e,n)}),1===e.length&&"undefined"==typeof e[0]}();Oe||(l.replace=function(t,n){var a=e(n),i=M(t)&&/\)[*?]/.test(t.source);if(a&&i){var o=function(e){var a=arguments.length,i=t.lastIndex;t.lastIndex=0;var o=t.exec(e)||[];return t.lastIndex=i,R(o,arguments[a-2],arguments[a-1]),n.apply(this,o)};return je.call(this,t,o)}return je.call(this,t,n)});var Ne=l.substr,De="".substr&&"b"!=="0b".substr(-1);P(l,{substr:function(e,t){var n=e;return e<0&&(n=g(this.length+e,0)),Ne.call(this,n,t)}},De);var Be="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Re="​",Fe="["+Be+"]",We=new RegExp("^"+Fe+Fe+"*"),Ue=new RegExp(Fe+Fe+"*$"),Ge=l.trim&&(Be.trim()||!Re.trim());P(l,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return r(this).replace(We,"").replace(Ue,"")}},Ge);var Ye=l.lastIndexOf&&"abcあい".lastIndexOf("あい",2)!==-1;P(l,{lastIndexOf:function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=r(this),n=r(e),a=arguments.length>1?s(arguments[1]):NaN,i=_(a)?1/0:q.ToInteger(a),o=v(g(i,0),t.length),l=n.length,c=o+l;c>0;){c=g(0,c-l);var u=B(N(t,c,o+l),n);if(u!==-1)return c+u}return-1}},Ye);var Je=l.lastIndexOf;if(P(l,{lastIndexOf:function(e){return Je.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(Be+"08")&&22===parseInt(Be+"0x16")||(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,a){var i=r(n).trim(),o=s(a)||(t.test(i)?16:10);return e(i,o)}}(parseInt)),"RangeError: test"!==String(new RangeError("test"))){var Xe=(Error.prototype.toString,function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=r(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=r(t)),e?t?e+": "+t:e:t});Error.prototype.toString=Xe}}),define("module/V2-C-Observe",["require","exports","module"],function(e){"use strict";function t(){this.subscribersList=[]}t.prototype={updateSubscriber:function(e,t){if(1!==this.list(e).length)return void console.error(e+" is not only");for(var n,a=0;n=this.subscribersList[a++];)if("function"==typeof n[e])return n[e]=t},subscriber:function(e,t,n){if(n)for(var a,i=0;a=this.subscribersList[i++];)"function"==typeof a[e]&&console.error('"'+e+'" is defined only, please remove it or chose other name');else{if("function"!=typeof t)return console.error('second parameter "'+t+'" must be function');var o={};o[e]=t,this.subscribersList.unshift(o)}},trigger:function(e){for(var t,n=0;t=this.subscribersList[n++];)"function"==typeof t[e]&&t[e].apply(t,Array.prototype.slice.call(arguments,1))},removeSubscriber:function(e){for(var t,n=0;t=this.subscribersList[n++];)"function"==typeof t[e]&&this.subscribersList.splice(this.subscribersList[n-1],1)},list:function(e){if("boolean"==typeof e&&e){var t,n,a=[];for(t=0,n;n=this.subscribersList[t++];)for(var i in n)a.push(i);return a}if("string"!=typeof e)return this.subscribersList;for(t=0,n;n=this.subscribersList[t++];)if("function"==typeof n[e])return{index:t-1,name:e,method:n[e]}}};var n=new t;return $?$.fn.observe=$.observe=n:window.observe=n,n}),define("module/V2-storage",["require","exports","module"],function(e){var t={storage:window.localStorage||{},get:function(e){return this.storage[e]&&"undefined"!==this.storage[e]?JSON.parse(decodeURIComponent(this.storage[e])):null},set:function(e,t){"string"!=typeof t&&(t=JSON.stringify(t));try{this.storage[e]=encodeURIComponent(t)}catch(n){if("QuotaExceededError"==n.name){var a=confirm("本地存储已满，帮你清除并刷新吗？");return void(a&&(this.storage.clear(),window.location.reload()))}}},has:function(e){return!!this.storage[e]},remove:function(e){delete this.storage[e]},clear:function(){this.storage.clear()}};return t}),define("module/V2-V-Variable",["require","exports","module"],function(e){var t={emotion:$(".chat-container .emotion-list"),file:$(".chat-container .icon-file"),msgListWrapper:$(".chat-container .msg-screen-box"),msgList:$(".chat-container .msg-list"),friendList:$(".chat-container .friend-list"),groupList:$(".chat-container .group-list"),talkingList:$(".chat-container .talking-list"),recentBox:$(".chat-container .recentBox"),talking:$(".chat-container .talking-box-inner"),talkingBox:$(".chat-container .talking-box"),talk_to:$(".chat-container .talking-to"),remindNotifyBox:$(".chat-container .remind-content"),atNotifyBox:$(".chat-container .at-content"),hiNotifyBox:$(".chat-container .hi-content"),hiList:$(".chat-container .hi-list-box"),atList:$(".chat-container .at-list-box"),atNotifyList:$(".chat-container .at-list"),hiList:$(".chat-container .hi-list"),overLayer:$(".layer"),edit:$(".chat-container .edit-box"),editBtnBox:$(".chat-container .edit-btn-box"),editAtBox:$(".chat-container .edit-at-list-box"),editAtList:$(".chat-container .edit-at-list"),search:$(".chat-container .search-list-box"),searchList:$(".chat-container .search-list"),chatBox:$(".chat-container .chat-box"),account:$(".account-box")},n={textarea:$(".chat-container .edit-content"),file:$(".chat-container .send-file"),msgLast:$(".chat-container .msg-list .msg:last"),newMsgTips:$("#newMsgTips"),send:$(".chat-container .send"),ignoreAllUnread:$(".chat-container .btn-ignore-unread"),pushFeedBack:$(".chat-container .btn-push-feedback"),hiBtn:$(".chat-container .icon-hi"),atBtn:$(".chat-container .icon-at"),hiUnreadNum:$(".chat-container .hi-unread"),atUnreadNum:$(".chat-container .at-unread"),
remindUnreadNum:$(".chat-container .remind-unread"),searchBtn:$(".chat-container .icon-search"),search:$(".chat-container .search-key"),changePageBtn:$(".change-btn")},a={"哭笑":"em173","滑稽":"em169","冷":"em170","可怜":"em171","喷":"em172","微笑":"em101","哈哈":"em102","嘻嘻":"em103","偷笑":"em104","得意":"em105","飞吻":"em106","挖鼻孔":"em107","摊手":"em108","无聊":"em109","惊讶":"em110","疑问":"em111","委屈":"em112","害羞":"em113","汗":"em114","斜眼":"em115","尴尬":"em116","鼓掌":"em117","咆哮":"em118","不开心":"em119","泪":"em120","思考":"em121","仰慕":"em122","酷":"em123","流鼻血":"em124","吐舌头":"em125","愤怒":"em126",No:"em127","鄙视":"em128","生病":"em129","鬼脸":"em130","悲剧":"em131","安慰":"em132","抓狂":"em133","囧":"em134","花心":"em135","拜拜":"em136","砸死你":"em137","呕吐":"em138","闭嘴":"em139","晕":"em140","瞌睡":"em141","衰":"em142","饿":"em143","奋斗":"em144","财迷":"em145","中指":"em146",GOOD:"em147",BAD:"em148","握手":"em149","拉勾":"em150",OK:"em151","勾引":"em152","剪刀手":"em153","抱抱":"em154","恶魔":"em155","猪头":"em156","喵":"em157","咖啡":"em158","蛋糕":"em159","碰杯":"em160","礼物":"em161","路过":"em162","大便":"em163","心":"em164","心碎":"em165","花":"em166","晚安":"em167","肥皂":"em168"},i={"哭笑":"em201","哈哈":"em202","嘻嘻":"em203","偷笑":"em204","得意":"em205","滑稽":"em206","飞吻":"em207","打脸":"em208","挖鼻孔":"em209","摊手":"em210","无聊":"em211",BINGO:"em212","疑问":"em213","委屈":"em214","害羞":"em215","汗":"em216","冷":"em217","斜眼":"em218","尴尬":"em219","鼓掌":"em220","咆哮":"em221","微笑":"em222","泪":"em223","可怜":"em224","思考":"em225","仰慕":"em226","酷":"em227","流鼻血":"em228","吐舌头":"em229","愤怒":"em230",NO:"em231","鄙视":"em232","喷":"em233","生病":"em234","鬼脸":"em235","悲剧":"em236","摸头":"em237","抓狂":"em238","凝视":"em239","花心":"em240","再见":"em241","目瞪口呆":"em242","呕吐":"em243","闭嘴":"em244","晕":"em245","瞌睡":"em246","衰":"em247","饿":"em248","加油":"em249","财迷":"em250","竖中指":"em251","剪刀手":"em252","坏笑":"em253","不开心":"em254","惊讶":"em255","舔屏":"em256","砸死你":"em257","白眼":"em258","囧":"em259","左哼哼":"em260","右哼哼":"em261","屁股":"em262","雷焦":"em263",GOOD:"em264",BAD:"em265",OK:"em266",ROCK:"em267","握手":"em268","举个例子":"em269","比心":"em270","勾引":"em271","加一":"em272","拉勾":"em273","抱抱":"em274","围观":"em275","花":"em276","大便":"em277","咖啡":"em278","蛋糕":"em279","晚安":"em280","礼物":"em281","心":"em282","心碎":"em283","肥皂":"em284","猪鼻子":"em285","干杯":"em286","狗":"em287","猫":"em288"},o={hi:"bf001",hello:"bf002","啪":"bf003","调皮":"bf004",no:"bf005",yes:"bf006","啵":"bf007","壁咚":"bf008","吃货":"bf009","伤心":"bf010","恶作剧":"bf011","撒花":"bf012","生气":"bf013","震惊":"bf014","不开心":"bf015","唔":"bf016","吓哭":"bf017","哈哈":"bf018","郁闷":"bf019","哇塞":"bf020"},r={},l={},s=$(".from-login-page .pre-momoid"),c=$(".from-login-page .pre-password"),u=$(".from-login-page .login-info .submit"),d=$(".from-login-page .theCodeNav"),m=$(".from-login-page .theCodeImg"),f=$(".from-login-page p.msg");return{box:t,ele:n,faceList:a,faceList2:i,bfList:o,bigEmotionData:l,bigEmotionDetail:r,momoidEle:s,passEle:c,submitBtn:u,theCodeNav:d,theCodeImg:m,msgInfo:f}}),define("module/V2-M-Variable",["require","exports","module"],function(e){var t,n,a,i,o,r,l,s,c,u,d=!1,m=!0,f="",p="",h=!1,g=30,v=10,y=200,b=!1,x={},w={friend:{},group:{},discuss:{},follow:{},fans:{},hi:[],talking:[]},$={},k={user:{},group:{},discuss:{},store:{}},M={},C=[],I={url:/((http|ftp|https)\:\/\/|www\.)[^@\s\[<>]*/g},V={isNewMsgTipsShow:!1,sendText:null,sendType:1,cancelListenner:!1,maxRecentMsgCount:50,localMessageMaxCount:300,currentTalkingUnreadNum:0,isTextareaFocus:!1,isSearchFocus:!1,isTalkingFocus:!1,isFriendFocus:!1,isGroupFocus:!1,talkingItemIndex:-1,talkingLength:0,searchItemIndex:0,searchLength:0,atItemIndex:0,atLength:0,friendItemIndex:-1,friendLength:0,groupItemIndex:-1,groupLength:0,platform:"",bigFace:"",loadHistoryMsgs:!1,bfHasTail:!1,innerLogin:!1},T="",L={name:""},E=!0,S=null,P={user:{},group:{},discuss:{},store:{},receiveQueue:[],proxyWatcher:{}},A={hi:{},local:{},ignore:{},cache:{}},_={notify_on_off:1,voice_on_off:0,history_on_off:1,ignoreMsg:{}},q={uploadFile:"/file/upload",uploadImg:"/file/image",uploadImgBase64:"/file/image/base64",getPersonalSetting:"/setting/getPersonalSetting",setPersonalSetting:"/setting/setPersonalSettingV2",loginDot:"/dot?",downLoadDot:"/webmomo/api/dotting/free_dotting?",emotionDot:"/webmomo/api/warn/log?",qrcCode:"/webmomo/api/download/free_qrcode?"},H={ating:!1,members:{},atmsgs:{},tipflag:!0},j=!1,O={},N=[],D={group:{},discuss:{}},B="",R={},F=!1,W={},U="",G=!1,Y=!1,J=!1,X="chat",z="",Q={did:{},gid:{},momoid:{}},K={specialFriend:{},ordinaryFriend:{},group:{},discuss:{},follow:{},fans:{}},Z=window.Audio?new Audio("/media/ms.ogg"):{play:function(){}},ee="陌陌网页版 - 陌陌电脑版 - 陌陌直播",te=(new Date).getTime();return{list:w,account:$,noResponseSendMsg:M,recentMsg:C,reg:I,status:V,talk_to:T,msgs:P,unread:A,setting:_,profile:k,uploadFileXHR:S,_cache:H,file:L,url:q,isWindowFocus:E,atMsg:j,recentList:N,sendTooFast:d,membersList:D,fetchHistoryMsg:b,scrollTimer:f,showLoadTimer:p,maxCacheMsg:g,msgScreen:t,msgScreenAPI:n,msgsRenderTimmer:o,searchTimmer:i,fetchAllMsgs:h,notifySended:m,maxCheckMsgNum:v,checkMsgRecord:x,atScroll:a,lastPostLog:B,corlorfulEgg:R,showColorfulEgg:F,sendedColorEgg:W,eggSendId:U,loadChat:G,loadChatRoom:Y,loadLive:J,currentPage:X,atList:O,maxtextAreaLength:y,loginFlag:r,msgScrollTimmer:l,prevTab:z,textAreaCache:Q,relation:K,audio:Z,specialFriend:s,ordinaryFriend:c,pageTitle:ee,loginTimeStamp:te,liveSource:u}}),function(e,t){function n(e){var t=e.length,n=se.type(e);return!se.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function a(e){var t=ke[e]={};return se.each(e.match(ue)||[],function(e,n){t[n]=!0}),t}function i(e,n,a,i){if(se.acceptData(e)){var o,r,l=se.expando,s="string"==typeof n,c=e.nodeType,u=c?se.cache:e,d=c?e[l]:e[l]&&l;if(d&&u[d]&&(i||u[d].data)||!s||a!==t)return d||(c?e[l]=d=Z.pop()||se.guid++:d=l),u[d]||(u[d]={},c||(u[d].toJSON=se.noop)),("object"==typeof n||"function"==typeof n)&&(i?u[d]=se.extend(u[d],n):u[d].data=se.extend(u[d].data,n)),o=u[d],i||(o.data||(o.data={}),o=o.data),a!==t&&(o[se.camelCase(n)]=a),s?(r=o[n],null==r&&(r=o[se.camelCase(n)])):r=o,r}}function o(e,t,n){if(se.acceptData(e)){var a,i,o,r=e.nodeType,s=r?se.cache:e,c=r?e[se.expando]:se.expando;if(s[c]){if(t&&(o=n?s[c]:s[c].data)){se.isArray(t)?t=t.concat(se.map(t,se.camelCase)):t in o?t=[t]:(t=se.camelCase(t),t=t in o?[t]:t.split(" "));for(a=0,i=t.length;i>a;a++)delete o[t[a]];if(!(n?l:se.isEmptyObject)(o))return}(n||(delete s[c].data,l(s[c])))&&(r?se.cleanData([e],!0):se.support.deleteExpando||s!=s.window?delete s[c]:s[c]=null)}}}function r(e,n,a){if(a===t&&1===e.nodeType){var i="data-"+n.replace(Ce,"-$1").toLowerCase();if(a=e.getAttribute(i),"string"==typeof a){try{a="true"===a||"false"!==a&&("null"===a?null:+a+""===a?+a:Me.test(a)?se.parseJSON(a):a)}catch(o){}se.data(e,n,a)}else a=t}return a}function l(e){var t;for(t in e)if(("data"!==t||!se.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!0}function c(){return!1}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function d(e,t,n){if(t=t||0,se.isFunction(t))return se.grep(e,function(e,a){var i=!!t.call(e,a,e);return i===n});if(t.nodeType)return se.grep(e,function(e){return e===t===n});if("string"==typeof t){var a=se.grep(e,function(e){return 1===e.nodeType});if(Fe.test(t))return se.filter(t,a,!n);t=se.filter(t,a)}return se.grep(e,function(e){return se.inArray(e,t)>=0===n})}function m(e){var t=Ge.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function p(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function h(e){var t=it.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n,a=0;null!=(n=e[a]);a++)se._data(n,"globalEval",!t||se._data(t[a],"globalEval"))}function v(e,t){if(1===t.nodeType&&se.hasData(e)){var n,a,i,o=se._data(e),r=se._data(t,o),l=o.events;if(l){delete r.handle,r.events={};for(n in l)for(a=0,i=l[n].length;i>a;a++)se.event.add(t,n,l[n][a])}r.data&&(r.data=se.extend({},r.data))}}function y(e,t){var n,a,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!se.support.noCloneEvent&&t[se.expando]){i=se._data(t);for(a in i.events)se.removeEvent(t,a,i.handle);t.removeAttribute(se.expando)}"script"===n&&t.text!==e.text?(p(t).text=e.text,h(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),se.support.html5Clone&&e.innerHTML&&!se.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var a,i,o=0,r=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(n||"*"):t;if(!r)for(r=[],a=e.childNodes||e;null!=(i=a[o]);o++)!n||se.nodeName(i,n)?r.push(i):se.merge(r,b(i,n));return n===t||n&&se.nodeName(e,n)?se.merge([e],r):r}function x(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),a=t,i=Mt.length;i--;)if(t=Mt[i]+n,t in e)return t;return a}function $(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)}function k(e,t){for(var n,a,i,o=[],r=0,l=e.length;l>r;r++)a=e[r],a.style&&(o[r]=se._data(a,"olddisplay"),n=a.style.display,t?(o[r]||"none"!==n||(a.style.display=""),""===a.style.display&&$(a)&&(o[r]=se._data(a,"olddisplay",V(a.nodeName)))):o[r]||(i=$(a),(n&&"none"!==n||!i)&&se._data(a,"olddisplay",i?n:se.css(a,"display"))));for(r=0;l>r;r++)a=e[r],a.style&&(t&&"none"!==a.style.display&&""!==a.style.display||(a.style.display=t?o[r]||"":"none"));return e}function M(e,t,n){var a=vt.exec(t);return a?Math.max(0,a[1]-(n||0))+(a[2]||"px"):t}function C(e,t,n,a,i){for(var o=n===(a?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===n&&(r+=se.css(e,n+kt[o],!0,i)),a?("content"===n&&(r-=se.css(e,"padding"+kt[o],!0,i)),"margin"!==n&&(r-=se.css(e,"border"+kt[o]+"Width",!0,i))):(r+=se.css(e,"padding"+kt[o],!0,i),"padding"!==n&&(r+=se.css(e,"border"+kt[o]+"Width",!0,i)));return r}function I(e,t,n){var a=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ut(e),r=se.support.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=dt(e,t,o),(0>i||null==i)&&(i=e.style[t]),yt.test(i))return i;a=r&&(se.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+C(e,t,n||(r?"border":"content"),a,o)+"px"}function V(e){var t=J,n=xt[e];return n||(n=T(e,t),"none"!==n&&n||(ct=(ct||se("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=T(e,t),ct.detach()),xt[e]=n),n}function T(e,t){var n=se(t.createElement(e)).appendTo(t.body),a=se.css(n[0],"display");return n.remove(),a}function L(e,t,n,a){var i;if(se.isArray(t))se.each(t,function(t,i){n||It.test(e)?a(e,i):L(e+"["+("object"==typeof i?t:"")+"]",i,n,a)});else if(n||"object"!==se.type(t))a(e,t);else for(i in t)L(e+"["+i+"]",t[i],n,a)}function E(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var a,i=0,o=t.toLowerCase().match(ue)||[];if(se.isFunction(n))for(;a=o[i++];)"+"===a[0]?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function S(e,n,a,i){function o(s){var c;return r[s]=!0,se.each(e[s]||[],function(e,s){var u=s(n,a,i);return"string"!=typeof u||l||r[u]?l?!(c=u):t:(n.dataTypes.unshift(u),o(u),!1)}),c}var r={},l=e===Ft;return o(n.dataTypes[0])||!r["*"]&&o("*")}function P(e,n){var a,i,o=se.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:a||(a={}))[i]=n[i]);return a&&se.extend(!0,e,a),e}function A(e,n,a){var i,o,r,l,s=e.contents,c=e.dataTypes,u=e.responseFields;for(l in u)l in a&&(n[u[l]]=a[l]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(l in s)if(s[l]&&s[l].test(o)){c.unshift(l);break}if(c[0]in a)r=c[0];else{for(l in a){if(!c[0]||e.converters[l+" "+c[0]]){r=l;break}i||(i=l)}r=r||i}return r?(r!==c[0]&&c.unshift(r),a[r]):t}function _(e,t){var n,a,i,o,r={},l=0,s=e.dataTypes.slice(),c=s[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s[1])for(i in e.converters)r[i.toLowerCase()]=e.converters[i];for(;a=s[++l];)if("*"!==a){if("*"!==c&&c!==a){if(i=r[c+" "+a]||r["* "+a],!i)for(n in r)if(o=n.split(" "),o[1]===a&&(i=r[c+" "+o[0]]||r["* "+o[0]])){i===!0?i=r[n]:r[n]!==!0&&(a=o[0],s.splice(l--,0,a));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(u){return{state:"parsererror",error:i?u:"No conversion from "+c+" to "+a}}}c=a}return{state:"success",data:t}}function q(){try{return new e.XMLHttpRequest}catch(t){}}function H(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function j(){return setTimeout(function(){Kt=t}),Kt=se.now()}function O(e,t){se.each(t,function(t,n){for(var a=(on[t]||[]).concat(on["*"]),i=0,o=a.length;o>i;i++)if(a[i].call(e,t,n))return})}function N(e,t,n){var a,i,o=0,r=an.length,l=se.Deferred().always(function(){delete s.elem}),s=function(){if(i)return!1;for(var t=Kt||j(),n=Math.max(0,c.startTime+c.duration-t),a=n/c.duration||0,o=1-a,r=0,s=c.tweens.length;s>r;r++)c.tweens[r].run(o);return l.notifyWith(e,[c,o,n]),1>o&&s?n:(l.resolveWith(e,[c]),!1)},c=l.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Kt||j(),duration:n.duration,tweens:[],createTween:function(t,n){var a=se.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(a),a},stop:function(t){var n=0,a=t?c.tweens.length:0;if(i)return this;for(i=!0;a>n;n++)c.tweens[n].run(1);return t?l.resolveWith(e,[c,t]):l.rejectWith(e,[c,t]),this}}),u=c.props;for(D(u,c.opts.specialEasing);r>o;o++)if(a=an[o].call(c,e,u,c.opts))return a;return O(c,u),se.isFunction(c.opts.start)&&c.opts.start.call(e,c),se.fx.timer(se.extend(s,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function D(e,t){var n,a,i,o,r;for(i in e)if(a=se.camelCase(i),o=t[a],n=e[i],se.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==a&&(e[a]=n,delete e[i]),r=se.cssHooks[a],r&&"expand"in r){n=r.expand(n),delete e[a];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[a]=o}function B(e,t,n){var a,i,o,r,l,s,c,u,d,m=this,f=e.style,p={},h=[],g=e.nodeType&&$(e);n.queue||(u=se._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,d=u.empty.fire,u.empty.fire=function(){u.unqueued||d()}),u.unqueued++,m.always(function(){m.always(function(){u.unqueued--,se.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===se.css(e,"display")&&"none"===se.css(e,"float")&&(se.support.inlineBlockNeedsLayout&&"inline"!==V(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",se.support.shrinkWrapBlocks||m.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],en.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(g?"hide":"show"))continue;h.push(i)}if(o=h.length){l=se._data(e,"fxshow")||se._data(e,"fxshow",{}),"hidden"in l&&(g=l.hidden),s&&(l.hidden=!g),g?se(e).show():m.done(function(){se(e).hide()}),m.done(function(){var t;se._removeData(e,"fxshow");for(t in p)se.style(e,t,p[t])});for(i=0;o>i;i++)a=h[i],c=m.createTween(a,g?l[a]:0),p[a]=l[a]||se.style(e,a),a in l||(l[a]=c.start,g&&(c.end=c.start,c.start="width"===a||"height"===a?1:0))}}function R(e,t,n,a,i){return new R.prototype.init(e,t,n,a,i)}function F(e,t){var n,a={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=kt[i],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function W(e){return se.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var U,G,Y=typeof t,J=e.document,X=e.location,z=e.jQuery,Q=e.$,K={},Z=[],ee="1.9.1",te=Z.concat,ne=Z.push,ae=Z.slice,ie=Z.indexOf,oe=K.toString,re=K.hasOwnProperty,le=ee.trim,se=function(e,t){return new se.fn.init(e,t,G)},ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=/\S+/g,de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,me=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^[\],:{}\s]*$/,he=/(?:^|:|,)(?:\s*\[)+/g,ge=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ye=/^-ms-/,be=/-([\da-z])/gi,xe=function(e,t){return t.toUpperCase()},we=function(e){(J.addEventListener||"load"===e.type||"complete"===J.readyState)&&($e(),se.ready())},$e=function(){J.addEventListener?(J.removeEventListener("DOMContentLoaded",we,!1),e.removeEventListener("load",we,!1)):(J.detachEvent("onreadystatechange",we),e.detachEvent("onload",we))};se.fn=se.prototype={jquery:ee,constructor:se,init:function(e,n,a){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||a).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof se?n[0]:n,se.merge(this,se.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:J,!0)),fe.test(i[1])&&se.isPlainObject(n))for(i in n)se.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=J.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return a.find(e);this.length=1,this[0]=o}return this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?a.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ae.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return se.each(this,e,t)},ready:function(e){return se.ready.promise().done(e),this},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(se.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},se.fn.init.prototype=se.fn,se.extend=se.fn.extend=function(){var e,n,a,i,o,r,l=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},s=2),"object"==typeof l||se.isFunction(l)||(l={}),c===s&&(l=this,--s);c>s;s++)if(null!=(o=arguments[s]))for(i in o)e=l[i],a=o[i],l!==a&&(u&&a&&(se.isPlainObject(a)||(n=se.isArray(a)))?(n?(n=!1,r=e&&se.isArray(e)?e:[]):r=e&&se.isPlainObject(e)?e:{},l[i]=se.extend(u,r,a)):a!==t&&(l[i]=a));return l},se.extend({noConflict:function(t){return e.$===se&&(e.$=Q),t&&e.jQuery===se&&(e.jQuery=z),se},isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){if(e===!0?!--se.readyWait:!se.isReady){if(!J.body)return setTimeout(se.ready);se.isReady=!0,e!==!0&&--se.readyWait>0||(U.resolveWith(J,[se]),se.fn.trigger&&se(J).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray||function(e){return"array"===se.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?K[oe.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;try{if(e.constructor&&!re.call(e,"constructor")&&!re.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var a;for(a in e);return a===t||re.call(e,a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var a=fe.exec(e),i=!n&&[];return a?[t.createElement(a[1])]:(a=se.buildFragment([e],t,i),i&&se(i).remove(),se.merge([],a.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=se.trim(n),n&&pe.test(n.replace(ge,"@").replace(ve,"]").replace(he,"")))?Function("return "+n)():(se.error("Invalid JSON: "+n),t)},parseXML:function(n){var a,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,a=i.parseFromString(n,"text/xml")):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(n))}catch(o){a=t}return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+n),a},noop:function(){},globalEval:function(t){t&&se.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ye,"ms-").replace(be,xe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,a){var i,o=0,r=e.length,l=n(e);if(a){if(l)for(;r>o&&(i=t.apply(e[o],a),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],a),i===!1)break}else if(l)for(;r>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:le&&!le.call("\ufeff ")?function(e){return null==e?"":le.call(e)}:function(e){return null==e?"":(e+"").replace(de,"")},makeArray:function(e,t){var a=t||[];return null!=e&&(n(Object(e))?se.merge(a,"string"==typeof e?[e]:e):ne.call(a,e)),a},inArray:function(e,t,n){var a;if(t){if(ie)return ie.call(t,e,n);for(a=t.length,n=n?0>n?Math.max(0,a+n):n:0;a>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var a=n.length,i=e.length,o=0;if("number"==typeof a)for(;a>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var a,i=[],o=0,r=e.length;for(n=!!n;r>o;o++)a=!!t(e[o],o),n!==a&&i.push(e[o]);return i},map:function(e,t,a){var i,o=0,r=e.length,l=n(e),s=[];if(l)for(;r>o;o++)i=t(e[o],o,a),null!=i&&(s[s.length]=i);else for(o in e)i=t(e[o],o,a),null!=i&&(s[s.length]=i);return te.apply([],s)},guid:1,proxy:function(e,n){var a,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),se.isFunction(e)?(a=ae.call(arguments,2),i=function(){return e.apply(n||this,a.concat(ae.call(arguments)))},i.guid=e.guid=e.guid||se.guid++,i):t},access:function(e,n,a,i,o,r,l){var s=0,c=e.length,u=null==a;if("object"===se.type(a)){o=!0;for(s in a)se.access(e,n,s,a[s],!0,r,l)}else if(i!==t&&(o=!0,se.isFunction(i)||(l=!0),u&&(l?(n.call(e,i),n=null):(u=n,n=function(e,t,n){return u.call(se(e),n)})),n))for(;c>s;s++)n(e[s],a,l?i:i.call(e[s],s,n(e[s],a)));return o?e:u?n.call(e):c?n(e[0],a):r},now:function(){return(new Date).getTime()}}),se.ready.promise=function(t){if(!U)if(U=se.Deferred(),"complete"===J.readyState)setTimeout(se.ready);else if(J.addEventListener)J.addEventListener("DOMContentLoaded",we,!1),e.addEventListener("load",we,!1);else{J.attachEvent("onreadystatechange",we),e.attachEvent("onload",we);var n=!1;try{n=null==e.frameElement&&J.documentElement}catch(a){}n&&n.doScroll&&function i(){if(!se.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}$e(),se.ready()}}()}return U.promise(t)},se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),G=se(J);var ke={};se.Callbacks=function(e){e="string"==typeof e?ke[e]||a(e):se.extend({},e);var n,i,o,r,l,s,c=[],u=!e.once&&[],d=function(t){for(i=e.memory&&t,o=!0,l=s||0,s=0,r=c.length,n=!0;c&&r>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,c&&(u?u.length&&d(u.shift()):i?c=[]:m.disable())},m={add:function(){if(c){var t=c.length;!function a(t){se.each(t,function(t,n){var i=se.type(n);"function"===i?e.unique&&m.has(n)||c.push(n):n&&n.length&&"string"!==i&&a(n)})}(arguments),n?r=c.length:i&&(s=t,d(i))}return this},remove:function(){return c&&se.each(arguments,function(e,t){for(var a;(a=se.inArray(t,c,a))>-1;)c.splice(a,1),n&&(r>=a&&r--,l>=a&&l--)}),this},has:function(e){return e?se.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],this},disable:function(){return c=u=i=t,this},disabled:function(){return!c},lock:function(){return u=t,i||m.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!u||(n?u.push(t):d(t)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!o}};return m},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",a={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(n){se.each(t,function(t,o){var r=o[0],l=se.isFunction(e[t])&&e[t];i[o[1]](function(){var e=l&&l.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r+"With"](this===a?n.promise():this,l?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,a):a}},i={};return a.pipe=a.then,se.each(t,function(e,o){var r=o[2],l=o[3];a[o[1]]=r.add,l&&r.add(function(){n=l},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?a:this,arguments),this},i[o[0]+"With"]=r.fireWith}),a.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,a,i=0,o=ae.call(arguments),r=o.length,l=1!==r||e&&se.isFunction(e.promise)?r:0,s=1===l?e:se.Deferred(),c=function(e,n,a){return function(i){n[e]=this,a[e]=arguments.length>1?ae.call(arguments):i,a===t?s.notifyWith(n,a):--l||s.resolveWith(n,a)}};if(r>1)for(t=Array(r),n=Array(r),a=Array(r);r>i;i++)o[i]&&se.isFunction(o[i].promise)?o[i].promise().done(c(i,a,o)).fail(s.reject).progress(c(i,n,t)):--l;return l||s.resolveWith(a,o),s.promise()}}),se.support=function(){var t,n,a,i,o,r,l,s,c,u,d=J.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),a=d.getElementsByTagName("a")[0],!n||!a||!n.length)return{};o=J.createElement("select"),l=o.appendChild(J.createElement("option")),i=d.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!i.value,optSelected:l.selected,enctype:!!J.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==J.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===J.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(m){t.deleteExpando=!1}i=J.createElement("input"),i.setAttribute("value",""),t.input=""===i.getAttribute("value"),i.value="t",i.setAttribute("type","radio"),t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),r=J.createDocumentFragment(),r.appendChild(i),t.appendChecked=i.checked,t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(s="on"+u,"t"),t[u+"Bubbles"]=s in e||d.attributes[s].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,se(function(){var n,a,i,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=J.getElementsByTagName("body")[0];r&&(n=J.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=d.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=c&&0===i[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==r.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,a=d.appendChild(J.createElement("div")),a.style.cssText=d.style.cssText=o,a.style.marginRight=a.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),typeof d.style.zoom!==Y&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(n),n=d=i=a=null)}),n=o=r=l=a=i=null,t}();var Me=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ce=/([A-Z])/g;se.extend({cache:{},expando:"jQuery"+(ee+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?se.cache[e[se.expando]]:e[se.expando],!!e&&!l(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&se.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),se.fn.extend({data:function(e,n){var a,i,o=this[0],l=0,s=null;if(e===t){if(this.length&&(s=se.data(o),1===o.nodeType&&!se._data(o,"parsedAttrs"))){for(a=o.attributes;a.length>l;l++)i=a[l].name,i.indexOf("data-")||(i=se.camelCase(i.slice(5)),r(o,i,s[i]));se._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){se.data(this,e)}):se.access(this,function(n){return n===t?o?r(o,e,se.data(o,e)):null:(this.each(function(){se.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){se.removeData(this,e)})}}),se.extend({queue:function(e,n,a){var i;return e?(n=(n||"fx")+"queue",i=se._data(e,n),a&&(!i||se.isArray(a)?i=se._data(e,n,se.makeArray(a)):i.push(a)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=se.queue(e,t),a=n.length,i=n.shift(),o=se._queueHooks(e,t),r=function(){se.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),a--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,r,o)),!a&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se._data(e,n)||se._data(e,n,{empty:se.Callbacks("once memory").add(function(){se._removeData(e,t+"queue"),se._removeData(e,n)})})}}),se.fn.extend({queue:function(e,n){var a=2;return"string"!=typeof e&&(n=e,e="fx",a--),a>arguments.length?se.queue(this[0],e):n===t?this:this.each(function(){var t=se.queue(this,e,n);se._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},delay:function(e,t){return e=se.fx?se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var a=setTimeout(t,e);n.stop=function(){clearTimeout(a)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){
var a,i=1,o=se.Deferred(),r=this,l=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";l--;)a=se._data(r[l],e+"queueHooks"),a&&a.empty&&(i++,a.empty.add(s));return s(),o.promise(n)}});var Ie,Ve,Te=/[\t\r\n]/g,Le=/\r/g,Ee=/^(?:input|select|textarea|button|object)$/i,Se=/^(?:a|area)$/i,Pe=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ae=/^(?:checked|selected)$/i,_e=se.support.getSetAttribute,qe=se.support.input;se.fn.extend({attr:function(e,t){return se.access(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})},prop:function(e,t){return se.access(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return e=se.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,a,i,o,r=0,l=this.length,s="string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ue)||[];l>r;r++)if(n=this[r],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Te," "):" ")){for(o=0;i=t[o++];)0>a.indexOf(" "+i+" ")&&(a+=i+" ");n.className=se.trim(a)}return this},removeClass:function(e){var t,n,a,i,o,r=0,l=this.length,s=0===arguments.length||"string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ue)||[];l>r;r++)if(n=this[r],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Te," "):"")){for(o=0;i=t[o++];)for(;a.indexOf(" "+i+" ")>=0;)a=a.replace(" "+i+" "," ");n.className=e?se.trim(a):""}return this},toggleClass:function(e,t){var n=typeof e,a="boolean"==typeof t;return se.isFunction(e)?this.each(function(n){se(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var i,o=0,r=se(this),l=t,s=e.match(ue)||[];i=s[o++];)l=a?l:!r.hasClass(i),r[l?"addClass":"removeClass"](i);else(n===Y||"boolean"===n)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||e===!1?"":se._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,a=this.length;a>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Te," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,a,i,o=this[0];return arguments.length?(i=se.isFunction(e),this.each(function(n){var o,r=se(this);1===this.nodeType&&(o=i?e.call(this,n,r.val()):e,null==o?o="":"number"==typeof o?o+="":se.isArray(o)&&(o=se.map(o,function(e){return null==e?"":e+""})),a=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],a&&"set"in a&&a.set(this,o,"value")!==t||(this.value=o))})):o?(a=se.valHooks[o.type]||se.valHooks[o.nodeName.toLowerCase()],a&&"get"in a&&(n=a.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(Le,""):null==n?"":n)):void 0}}),se.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,a=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,r=o?null:[],l=o?i+1:a.length,s=0>i?l:o?i:0;l>s;s++)if(n=a[s],!(!n.selected&&s!==i||(se.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&se.nodeName(n.parentNode,"optgroup"))){if(t=se(n).val(),o)return t;r.push(t)}return r},set:function(e,t){var n=se.makeArray(t);return se(e).find("option").each(function(){this.selected=se.inArray(se(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,a){var i,o,r,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return typeof e.getAttribute===Y?se.prop(e,n,a):(o=1!==l||!se.isXMLDoc(e),o&&(n=n.toLowerCase(),i=se.attrHooks[n]||(Pe.test(n)?Ve:Ie)),a===t?i&&o&&"get"in i&&null!==(r=i.get(e,n))?r:(typeof e.getAttribute!==Y&&(r=e.getAttribute(n)),null==r?t:r):null!==a?i&&o&&"set"in i&&(r=i.set(e,a,n))!==t?r:(e.setAttribute(n,a+""),a):(se.removeAttr(e,n),t))},removeAttr:function(e,t){var n,a,i=0,o=t&&t.match(ue);if(o&&1===e.nodeType)for(;n=o[i++];)a=se.propFix[n]||n,Pe.test(n)?!_e&&Ae.test(n)?e[se.camelCase("default-"+n)]=e[a]=!1:e[a]=!1:se.attr(e,n,""),e.removeAttribute(_e?n:a)},attrHooks:{type:{set:function(e,t){if(!se.support.radioValue&&"radio"===t&&se.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,a){var i,o,r,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r=1!==l||!se.isXMLDoc(e),r&&(n=se.propFix[n]||n,o=se.propHooks[n]),a!==t?o&&"set"in o&&(i=o.set(e,a,n))!==t?i:e[n]=a:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ee.test(e.nodeName)||Se.test(e.nodeName)&&e.href?0:t}}}}),Ve={get:function(e,n){var a=se.prop(e,n),i="boolean"==typeof a&&e.getAttribute(n),o="boolean"==typeof a?qe&&_e?null!=i:Ae.test(n)?e[se.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?se.removeAttr(e,n):qe&&_e||!Ae.test(n)?e.setAttribute(!_e&&se.propFix[n]||n,n):e[se.camelCase("default-"+n)]=e[n]=!0,n}},qe&&_e||(se.attrHooks.value={get:function(e,n){var a=e.getAttributeNode(n);return se.nodeName(e,"input")?e.defaultValue:a&&a.specified?a.value:t},set:function(e,n,a){return se.nodeName(e,"input")?(e.defaultValue=n,t):Ie&&Ie.set(e,n,a)}}),_e||(Ie=se.valHooks.button={get:function(e,n){var a=e.getAttributeNode(n);return a&&("id"===n||"name"===n||"coords"===n?""!==a.value:a.specified)?a.value:t},set:function(e,n,a){var i=e.getAttributeNode(a);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(a)),i.value=n+="","value"===a||n===e.getAttribute(a)?n:t}},se.attrHooks.contenteditable={get:Ie.get,set:function(e,t,n){Ie.set(e,""!==t&&t,n)}},se.each(["width","height"],function(e,n){se.attrHooks[n]=se.extend(se.attrHooks[n],{set:function(e,a){return""===a?(e.setAttribute(n,"auto"),a):t}})})),se.support.hrefNormalized||(se.each(["href","src","width","height"],function(e,n){se.attrHooks[n]=se.extend(se.attrHooks[n],{get:function(e){var a=e.getAttribute(n,2);return null==a?t:a}})}),se.each(["href","src"],function(e,t){se.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),se.support.style||(se.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),se.support.optSelected||(se.propHooks.selected=se.extend(se.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),se.support.enctype||(se.propFix.enctype="encoding"),se.support.checkOn||se.each(["radio","checkbox"],function(){se.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]=se.extend(se.valHooks[this],{set:function(e,n){return se.isArray(n)?e.checked=se.inArray(se(e).val(),n)>=0:t}})});var He=/^(?:input|select|textarea)$/i,je=/^key/,Oe=/^(?:mouse|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(e,n,a,i,o){var r,l,s,c,u,d,m,f,p,h,g,v=se._data(e);if(v){for(a.handler&&(c=a,a=c.handler,o=c.selector),a.guid||(a.guid=se.guid++),(l=v.events)||(l=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof se===Y||e&&se.event.triggered===e.type?t:se.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ue)||[""],s=n.length;s--;)r=De.exec(n[s])||[],p=g=r[1],h=(r[2]||"").split(".").sort(),u=se.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=se.event.special[p]||{},m=se.extend({type:p,origType:g,data:i,handler:a,guid:a.guid,selector:o,needsContext:o&&se.expr.match.needsContext.test(o),namespace:h.join(".")},c),(f=l[p])||(f=l[p]=[],f.delegateCount=0,u.setup&&u.setup.call(e,i,h,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),u.add&&(u.add.call(e,m),m.handler.guid||(m.handler.guid=a.guid)),o?f.splice(f.delegateCount++,0,m):f.push(m),se.event.global[p]=!0;e=null}},remove:function(e,t,n,a,i){var o,r,l,s,c,u,d,m,f,p,h,g=se.hasData(e)&&se._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ue)||[""],c=t.length;c--;)if(l=De.exec(t[c])||[],f=h=l[1],p=(l[2]||"").split(".").sort(),f){for(d=se.event.special[f]||{},f=(a?d.delegateType:d.bindType)||f,m=u[f]||[],l=l[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=m.length;o--;)r=m[o],!i&&h!==r.origType||n&&n.guid!==r.guid||l&&!l.test(r.namespace)||a&&a!==r.selector&&("**"!==a||!r.selector)||(m.splice(o,1),r.selector&&m.delegateCount--,d.remove&&d.remove.call(e,r));s&&!m.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||se.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)se.event.remove(e,f+t[c],n,a,!0);se.isEmptyObject(u)&&(delete g.handle,se._removeData(e,"events"))}},trigger:function(n,a,i,o){var r,l,s,c,u,d,m,f=[i||J],p=re.call(n,"type")?n.type:n,h=re.call(n,"namespace")?n.namespace.split("."):[];if(s=d=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Ne.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),l=0>p.indexOf(":")&&"on"+p,n=n[se.expando]?n:new se.Event(p,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=h.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),a=null==a?[n]:se.makeArray(a,[n]),u=se.event.special[p]||{},o||!u.trigger||u.trigger.apply(i,a)!==!1)){if(!o&&!u.noBubble&&!se.isWindow(i)){for(c=u.delegateType||p,Ne.test(c+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),d=s;d===(i.ownerDocument||J)&&f.push(d.defaultView||d.parentWindow||e)}for(m=0;(s=f[m++])&&!n.isPropagationStopped();)n.type=m>1?c:u.bindType||p,r=(se._data(s,"events")||{})[n.type]&&se._data(s,"handle"),r&&r.apply(s,a),r=l&&s[l],r&&se.acceptData(s)&&r.apply&&r.apply(s,a)===!1&&n.preventDefault();if(n.type=p,!(o||n.isDefaultPrevented()||u._default&&u._default.apply(i.ownerDocument,a)!==!1||"click"===p&&se.nodeName(i,"a")||!se.acceptData(i)||!l||!i[p]||se.isWindow(i))){d=i[l],d&&(i[l]=null),se.event.triggered=p;try{i[p]()}catch(g){}se.event.triggered=t,d&&(i[l]=d)}return n.result}},dispatch:function(e){e=se.event.fix(e);var n,a,i,o,r,l=[],s=ae.call(arguments),c=(se._data(this,"events")||{})[e.type]||[],u=se.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(l=se.event.handlers.call(this,e,c),n=0;(o=l[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,a=((se.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),a!==t&&(e.result=a)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var a,i,o,r,l=[],s=n.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],r=0;s>r;r++)i=n[r],a=i.selector+" ",o[a]===t&&(o[a]=i.needsContext?se(a,this).index(c)>=0:se.find(a,this,null,[c]).length),o[a]&&o.push(i);o.length&&l.push({elem:c,handlers:o})}return n.length>s&&l.push({elem:this,handlers:n.slice(s)}),l},fix:function(e){if(e[se.expando])return e;var t,n,a,i=e.type,o=e,r=this.fixHooks[i];for(r||(this.fixHooks[i]=r=Oe.test(i)?this.mouseHooks:je.test(i)?this.keyHooks:{}),a=r.props?this.props.concat(r.props):this.props,e=new se.Event(o),t=a.length;t--;)n=a[t],e[n]=o[n];return e.target||(e.target=o.srcElement||J),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var a,i,o,r=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||J,o=i.documentElement,a=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==J.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===J.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,a){var i=se.extend(new se.Event,n,{type:e,isSimulated:!0,originalEvent:{}});a?se.event.trigger(i,null,t):se.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=J.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var a="on"+t;e.detachEvent&&(typeof e[a]===Y&&(e[a]=null),e.detachEvent(a,n))},se.Event=function(e,n){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?s:c):this.type=e,n&&se.extend(this,n),this.timeStamp=e&&e.timeStamp||se.now(),this[se.expando]=!0,t):new se.Event(e,n)},se.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,a=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==a&&!se.contains(a,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),se.support.submitBubbles||(se.event.special.submit={setup:function(){return!se.nodeName(this,"form")&&(se.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,a=se.nodeName(n,"input")||se.nodeName(n,"button")?n.form:t;a&&!se._data(a,"submitBubbles")&&(se.event.add(a,"submit._submit",function(e){e._submit_bubble=!0}),se._data(a,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&se.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!se.nodeName(this,"form")&&(se.event.remove(this,"._submit"),t)}}),se.support.changeBubbles||(se.event.special.change={setup:function(){return He.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,e,!0)})),!1):(se.event.add(this,"beforeactivate._change",function(e){var t=e.target;He.test(t.nodeName)&&!se._data(t,"changeBubbles")&&(se.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||se.event.simulate("change",this.parentNode,e,!0)}),se._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return se.event.remove(this,"._change"),!He.test(this.nodeName)}}),se.support.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,a=function(e){se.event.simulate(t,e.target,se.event.fix(e),!0)};se.event.special[t]={setup:function(){0===n++&&J.addEventListener(e,a,!0)},teardown:function(){0===--n&&J.removeEventListener(e,a,!0)}}}),se.fn.extend({on:function(e,n,a,i,o){var r,l;if("object"==typeof e){"string"!=typeof n&&(a=a||n,n=t);for(r in e)this.on(r,n,a,e[r],o);return this}if(null==a&&null==i?(i=n,a=n=t):null==i&&("string"==typeof n?(i=a,a=t):(i=a,a=n,n=t)),i===!1)i=c;else if(!i)return this;return 1===o&&(l=i,i=function(e){return se().off(e),l.apply(this,arguments)},i.guid=l.guid||(l.guid=se.guid++)),this.each(function(){se.event.add(this,e,i,a,n)})},one:function(e,t,n,a){return this.on(e,t,n,a,1)},off:function(e,n,a){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,se(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(a=n,n=t),a===!1&&(a=c),this.each(function(){se.event.remove(this,e,a,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,a){return this.on(t,e,n,a)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,n){var a=this[0];return a?se.event.trigger(e,n,a,!0):t}}),function(e,t){function n(e){return pe.test(e+"")}function a(){var e,t=[];return e=function(n,a){return t.push(n+=" ")>M.cacheLength&&delete e[t.shift()],e[n]=a}}function i(e){return e[N]=!0,e}function o(e){var t=S.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function r(e,t,n,a){var i,o,r,l,s,c,u,f,p,h;if((t?t.ownerDocument||t:D)!==S&&E(t),t=t||S,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(!A&&!a){if(i=he.exec(e))if(r=i[1]){if(9===l){if(o=t.getElementById(r),!o||!o.parentNode)return n;if(o.id===r)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&j(t,o)&&o.id===r)return n.push(o),n}else{if(i[2])return Q.apply(n,K.call(t.getElementsByTagName(e),0)),n;if((r=i[3])&&B.getByClassName&&t.getElementsByClassName)return Q.apply(n,K.call(t.getElementsByClassName(r),0)),n}if(B.qsa&&!_.test(e)){if(u=!0,f=N,p=t,h=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(u=t.getAttribute("id"))?f=u.replace(ye,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",s=c.length;s--;)c[s]=f+m(c[s]);p=fe.test(e)&&t.parentNode||t,h=c.join(",")}if(h)try{return Q.apply(n,K.call(p.querySelectorAll(h),0)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return x(e.replace(re,"$1"),t,n,a)}function l(e,t){var n=t&&e,a=n&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(a)return a;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,a){for(var i,o=e([],n.length,t),r=o.length;r--;)n[i=o[r]]&&(n[i]=!(a[i]=n[i]))})})}function d(e,t){var n,a,i,o,l,s,c,u=U[e+" "];if(u)return t?0:u.slice(0);for(l=e,s=[],c=M.preFilter;l;){(!n||(a=le.exec(l)))&&(a&&(l=l.slice(a[0].length)||l),s.push(i=[])),n=!1,(a=ce.exec(l))&&(n=a.shift(),i.push({value:n,type:a[0].replace(re," ")}),l=l.slice(n.length));for(o in M.filter)!(a=me[o].exec(l))||c[o]&&!(a=c[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),l=l.slice(n.length));if(!n)break}return t?l.length:l?r.error(e):U(e,s).slice(0)}function m(e){for(var t=0,n=e.length,a="";n>t;t++)a+=e[t].value;return a}function f(e,t,n){var a=t.dir,i=n&&"parentNode"===a,o=F++;return t.first?function(t,n,o){for(;t=t[a];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,r){var l,s,c,u=R+" "+o;if(r){for(;t=t[a];)if((1===t.nodeType||i)&&e(t,n,r))return!0}else for(;t=t[a];)if(1===t.nodeType||i)if(c=t[N]||(t[N]={}),(s=c[a])&&s[0]===u){if((l=s[1])===!0||l===k)return l===!0}else if(s=c[a]=[u],s[1]=e(t,n,r)||k,s[1]===!0)return!0}}function p(e){return e.length>1?function(t,n,a){for(var i=e.length;i--;)if(!e[i](t,n,a))return!1;return!0}:e[0]}function h(e,t,n,a,i){for(var o,r=[],l=0,s=e.length,c=null!=t;s>l;l++)(o=e[l])&&(!n||n(o,a,i))&&(r.push(o),c&&t.push(l));return r}function g(e,t,n,a,o,r){return a&&!a[N]&&(a=g(a)),o&&!o[N]&&(o=g(o,r)),i(function(i,r,l,s){var c,u,d,m=[],f=[],p=r.length,g=i||b(t||"*",l.nodeType?[l]:l,[]),v=!e||!i&&t?g:h(g,m,e,l,s),y=n?o||(i?e:p||a)?[]:r:v;if(n&&n(v,y,l,s),a)for(c=h(y,f),a(c,[],l,s),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(v[f[u]]=d));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(v[u]=d);o(null,y=[],c,s)}for(u=y.length;u--;)(d=y[u])&&(c=o?Z.call(i,d):m[u])>-1&&(i[c]=!(r[c]=d))}}else y=h(y===r?y.splice(p,y.length):y),o?o(null,r,y,s):Q.apply(r,y)})}function v(e){for(var t,n,a,i=e.length,o=M.relative[e[0].type],r=o||M.relative[" "],l=o?1:0,s=f(function(e){return e===t},r,!0),c=f(function(e){return Z.call(t,e)>-1},r,!0),u=[function(e,n,a){return!o&&(a||n!==L)||((t=n).nodeType?s(e,n,a):c(e,n,a))}];i>l;l++)if(n=M.relative[e[l].type])u=[f(p(u),n)];else{if(n=M.filter[e[l].type].apply(null,e[l].matches),n[N]){for(a=++l;i>a&&!M.relative[e[a].type];a++);return g(l>1&&p(u),l>1&&m(e.slice(0,l-1)).replace(re,"$1"),n,a>l&&v(e.slice(l,a)),i>a&&v(e=e.slice(a)),i>a&&m(e))}u.push(n)}return p(u)}function y(e,t){var n=0,a=t.length>0,o=e.length>0,l=function(i,l,s,c,u){var d,m,f,p=[],g=0,v="0",y=i&&[],b=null!=u,x=L,w=i||o&&M.find.TAG("*",u&&l.parentNode||l),$=R+=null==x?1:Math.random()||.1;for(b&&(L=l!==S&&l,k=n);null!=(d=w[v]);v++){if(o&&d){for(m=0;f=e[m++];)if(f(d,l,s)){c.push(d);break}b&&(R=$,k=++n)}a&&((d=!f&&d)&&g--,i&&y.push(d))}if(g+=v,a&&v!==g){for(m=0;f=t[m++];)f(y,p,l,s);if(i){if(g>0)for(;v--;)y[v]||p[v]||(p[v]=z.call(c));p=h(p)}Q.apply(c,p),b&&!i&&p.length>0&&g+t.length>1&&r.uniqueSort(c)}return b&&(R=$,L=x),y};return a?i(l):l}function b(e,t,n){for(var a=0,i=t.length;i>a;a++)r(e,t[a],n);return n}function x(e,t,n,a){var i,o,r,l,s,c=d(e);if(!a&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&9===t.nodeType&&!A&&M.relative[o[1].type]){if(t=M.find.ID(r.matches[0].replace(xe,we),t)[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=me.needsContext.test(e)?0:o.length;i--&&(r=o[i],!M.relative[l=r.type]);)if((s=M.find[l])&&(a=s(r.matches[0].replace(xe,we),fe.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=a.length&&m(o),!e)return Q.apply(n,K.call(a,0)),n;break}}return V(e,c)(a,t,A,n,fe.test(e)),n}function w(){}var $,k,M,C,I,V,T,L,E,S,P,A,_,q,H,j,O,N="sizzle"+-new Date,D=e.document,B={},R=0,F=0,W=a(),U=a(),G=a(),Y=typeof t,J=1<<31,X=[],z=X.pop,Q=X.push,K=X.slice,Z=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=te.replace("w","w#"),ae="([*^$|!~]?=)",ie="\\["+ee+"*("+te+")"+ee+"*(?:"+ae+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+ee+"*\\]",oe=":("+te+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ie.replace(3,8)+")*)|.*)\\)|)",re=RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=RegExp("^"+ee+"*,"+ee+"*"),ce=RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ue=RegExp(oe),de=RegExp("^"+ne+"$"),me={ID:RegExp("^#("+te+")"),CLASS:RegExp("^\\.("+te+")"),NAME:RegExp("^\\[name=['\"]?("+te+")['\"]?\\]"),TAG:RegExp("^("+te.replace("w","w*")+")"),ATTR:RegExp("^"+ie),PSEUDO:RegExp("^"+oe),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/[\x20\t\r\n\f]*[+~]/,pe=/^[^{]+\{\s*\[native code/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,xe=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,we=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(D.documentElement.childNodes,0)[0].nodeType}catch($e){K=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}I=r.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},E=r.setDocument=function(e){var a=e?e.ownerDocument||e:D;return a!==S&&9===a.nodeType&&a.documentElement?(S=a,P=a.documentElement,A=I(a),B.tagNameNoComments=o(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),B.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),B.getByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),B.getByName=o(function(e){e.id=N+0,e.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",P.insertBefore(e,P.firstChild);var t=a.getElementsByName&&a.getElementsByName(N).length===2+a.getElementsByName(N+0).length;return B.getIdNotName=!a.getElementById(N),P.removeChild(e),t}),M.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==Y&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},B.getIdNotName?(M.find.ID=function(e,t){if(typeof t.getElementById!==Y&&!A){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},M.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(M.find.ID=function(e,n){if(typeof n.getElementById!==Y&&!A){var a=n.getElementById(e);return a?a.id===e||typeof a.getAttributeNode!==Y&&a.getAttributeNode("id").value===e?[a]:t:[]}},M.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),M.find.TAG=B.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(e):t}:function(e,t){var n,a=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&a.push(n);return a}return o},M.find.NAME=B.getByName&&function(e,n){return typeof n.getElementsByName!==Y?n.getElementsByName(name):t},M.find.CLASS=B.getByClassName&&function(e,n){return typeof n.getElementsByClassName===Y||A?t:n.getElementsByClassName(e)},q=[],_=[":focus"],(B.qsa=n(a.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||_.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||_.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&_.push("[*^$]="+ee+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(B.matchesSelector=n(H=P.matchesSelector||P.mozMatchesSelector||P.webkitMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){B.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),q.push("!=",oe)}),_=RegExp(_.join("|")),q=RegExp(q.join("|")),j=n(P.contains)||P.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=P.compareDocumentPosition?function(e,t){var n;return e===t?(T=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===a||j(D,e)?-1:t===a||j(D,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],c=[t];if(e===t)return T=!0,0;if(!o||!r)return e===a?-1:t===a?1:o?-1:r?1:0;if(o===r)return l(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[i]===c[i];)i++;return i?l(s[i],c[i]):s[i]===D?-1:c[i]===D?1:0},T=!1,[0,0].sort(O),B.detectDuplicates=T,S):S},r.matches=function(e,t){return r(e,null,null,t)},r.matchesSelector=function(e,t){if((e.ownerDocument||e)!==S&&E(e),t=t.replace(be,"='$1']"),!(!B.matchesSelector||A||q&&q.test(t)||_.test(t)))try{var n=H.call(e,t);if(n||B.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(a){}return r(t,S,null,[e]).length>0},r.contains=function(e,t){return(e.ownerDocument||e)!==S&&E(e),j(e,t)},r.attr=function(e,t){var n;return(e.ownerDocument||e)!==S&&E(e),A||(t=t.toLowerCase()),(n=M.attrHandle[t])?n(e):A||B.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},r.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},r.uniqueSort=function(e){var t,n=[],a=1,i=0;if(T=!B.detectDuplicates,e.sort(O),T){for(;t=e[a];a++)t===e[a-1]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return e},C=r.getText=function(e){var t,n="",a=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[a];a++)n+=C(t);return n},M=r.selectors={cacheLength:50,createPseudo:i,match:me,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||r.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&r.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return me.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ue.test(n)&&(t=d(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(xe,we).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(a){var i=r.attr(a,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,a,i){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),l="of-type"===t;return 1===a&&0===i?function(e){return!!e.parentNode}:function(t,n,s){var c,u,d,m,f,p,h=o!==r?"nextSibling":"previousSibling",g=t.parentNode,v=l&&t.nodeName.toLowerCase(),y=!s&&!l;if(g){if(o){for(;h;){for(d=t;d=d[h];)if(l?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=h="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?g.firstChild:g.lastChild],
r&&y){for(u=g[N]||(g[N]={}),c=u[e]||[],f=c[0]===R&&c[1],m=c[0]===R&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[h]||(m=f=0)||p.pop();)if(1===d.nodeType&&++m&&d===t){u[e]=[R,f,m];break}}else if(y&&(c=(t[N]||(t[N]={}))[e])&&c[0]===R)m=c[1];else for(;(d=++f&&d&&d[h]||(m=f=0)||p.pop())&&((l?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++m||(y&&((d[N]||(d[N]={}))[e]=[R,m]),d!==t)););return m-=i,m===a||0===m%a&&m/a>=0}}},PSEUDO:function(e,t){var n,a=M.pseudos[e]||M.setFilters[e.toLowerCase()]||r.error("unsupported pseudo: "+e);return a[N]?a(t):a.length>1?(n=[e,e,"",t],M.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,o=a(e,t),r=o.length;r--;)i=Z.call(e,o[r]),e[i]=!(n[i]=o[r])}):function(e){return a(e,0,n)}):a}},pseudos:{not:i(function(e){var t=[],n=[],a=V(e.replace(re,"$1"));return a[N]?i(function(e,t,n,i){for(var o,r=a(e,null,i,[]),l=e.length;l--;)(o=r[l])&&(e[l]=!(t[l]=o))}):function(e,i,o){return t[0]=e,a(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return r(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return de.test(e||"")||r.error("unsupported lang: "+e),e=e.replace(xe,we).toLowerCase(),function(t){var n;do if(n=A?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!M.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var a=0>n?n+t:n;--a>=0;)e.push(a);return e}),gt:u(function(e,t,n){for(var a=0>n?n+t:n;t>++a;)e.push(a);return e})}};for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[$]=s($);for($ in{submit:!0,reset:!0})M.pseudos[$]=c($);V=r.compile=function(e,t){var n,a=[],i=[],o=G[e+" "];if(!o){for(t||(t=d(e)),n=t.length;n--;)o=v(t[n]),o[N]?a.push(o):i.push(o);o=G(e,y(i,a))}return o},M.pseudos.nth=M.pseudos.eq,M.filters=w.prototype=M.pseudos,M.setFilters=new w,E(),r.attr=se.attr,se.find=r,se.expr=r.selectors,se.expr[":"]=se.expr.pseudos,se.unique=r.uniqueSort,se.text=r.getText,se.isXMLDoc=r.isXML,se.contains=r.contains}(e);var Be=/Until$/,Re=/^(?:parents|prev(?:Until|All))/,Fe=/^.[^:#\[\.,]*$/,We=se.expr.match.needsContext,Ue={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({find:function(e){var t,n,a,i=this.length;if("string"!=typeof e)return a=this,this.pushStack(se(e).filter(function(){for(t=0;i>t;t++)if(se.contains(a[t],this))return!0}));for(n=[],t=0;i>t;t++)se.find(e,this[t],n);return n=this.pushStack(i>1?se.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=se(e,this),a=n.length;return this.filter(function(){for(t=0;a>t;t++)if(se.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(d(this,e,!1))},filter:function(e){return this.pushStack(d(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?We.test(e)?se(e,this.context).index(this[0])>=0:se.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,a=0,i=this.length,o=[],r=We.test(e)||"string"!=typeof e?se(e,t||this.context):0;i>a;a++)for(n=this[a];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(r?r.index(n)>-1:se.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?se.unique(o):o)},index:function(e){return e?"string"==typeof e?se.inArray(this[0],se(e)):se.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?se(e,t):se.makeArray(e&&e.nodeType?[e]:e),a=se.merge(this.get(),n);return this.pushStack(se.unique(a))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.fn.andSelf=se.fn.addBack,se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return se.dir(e,"parentNode")},parentsUntil:function(e,t,n){return se.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return se.dir(e,"nextSibling")},prevAll:function(e){return se.dir(e,"previousSibling")},nextUntil:function(e,t,n){return se.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return se.dir(e,"previousSibling",n)},siblings:function(e){return se.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return se.sibling(e.firstChild)},contents:function(e){return se.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(n,a){var i=se.map(this,t,n);return Be.test(e)||(a=n),a&&"string"==typeof a&&(i=se.filter(a,i)),i=this.length>1&&!Ue[e]?se.unique(i):i,this.length>1&&Re.test(e)&&(i=i.reverse()),this.pushStack(i)}}),se.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?se.find.matchesSelector(t[0],e)?[t[0]]:[]:se.find.matches(e,t)},dir:function(e,n,a){for(var i=[],o=e[n];o&&9!==o.nodeType&&(a===t||1!==o.nodeType||!se(o).is(a));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ge="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ye=/ jQuery\d+="(?:null|\d+)"/g,Je=RegExp("<(?:"+Ge+")[\\s/>]","i"),Xe=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qe=/<([\w:]+)/,Ke=/<tbody/i,Ze=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,it=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:se.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},lt=m(J),st=lt.appendChild(J.createElement("div"));rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,se.fn.extend({text:function(e){return se.access(this,function(e){return e===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(se.isFunction(e))return this.each(function(t){se(this).wrapAll(e.call(this,t))});if(this[0]){var t=se(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(n){se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,a=0;null!=(n=this[a]);a++)(!e||se.filter(e,[n]).length>0)&&(t||1!==n.nodeType||se.cleanData(b(n)),n.parentNode&&(t&&se.contains(n.ownerDocument,n)&&g(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&se.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&se.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return se.access(this,function(e){var n=this[0]||{},a=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Ye,""):t;if(!("string"!=typeof e||et.test(e)||!se.support.htmlSerialize&&Je.test(e)||!se.support.leadingWhitespace&&Xe.test(e)||rt[(Qe.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ze,"<$1></$2>");try{for(;i>a;a++)n=this[a]||{},1===n.nodeType&&(se.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=se.isFunction(e);return t||"string"==typeof e||(e=se(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(se(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,a){e=te.apply([],e);var i,o,r,l,s,c,u=0,d=this.length,m=this,g=d-1,v=e[0],y=se.isFunction(v);if(y||!(1>=d||"string"!=typeof v||se.support.checkClone)&&nt.test(v))return this.each(function(i){var o=m.eq(i);y&&(e[0]=v.call(this,i,n?o.html():t)),o.domManip(e,n,a)});if(d&&(c=se.buildFragment(e,this[0].ownerDocument,!1,this),i=c.firstChild,1===c.childNodes.length&&(c=i),i)){for(n=n&&se.nodeName(i,"tr"),l=se.map(b(c,"script"),p),r=l.length;d>u;u++)o=c,u!==g&&(o=se.clone(o,!0,!0),r&&se.merge(l,b(o,"script"))),a.call(n&&se.nodeName(this[u],"table")?f(this[u],"tbody"):this[u],o,u);if(r)for(s=l[l.length-1].ownerDocument,se.map(l,h),u=0;r>u;u++)o=l[u],at.test(o.type||"")&&!se._data(o,"globalEval")&&se.contains(s,o)&&(o.src?se.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):se.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ot,"")));c=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var n,a=0,i=[],o=se(e),r=o.length-1;r>=a;a++)n=a===r?this:this.clone(!0),se(o[a])[t](n),ne.apply(i,n.get());return this.pushStack(i)}}),se.extend({clone:function(e,t,n){var a,i,o,r,l,s=se.contains(e.ownerDocument,e);if(se.support.html5Clone||se.isXMLDoc(e)||!Je.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(st.innerHTML=e.outerHTML,st.removeChild(o=st.firstChild)),!(se.support.noCloneEvent&&se.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(a=b(o),l=b(e),r=0;null!=(i=l[r]);++r)a[r]&&y(i,a[r]);if(t)if(n)for(l=l||b(e),a=a||b(o),r=0;null!=(i=l[r]);r++)v(i,a[r]);else v(e,o);return a=b(o,"script"),a.length>0&&g(a,!s&&b(e,"script")),a=l=i=null,o},buildFragment:function(e,t,n,a){for(var i,o,r,l,s,c,u,d=e.length,f=m(t),p=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===se.type(o))se.merge(p,o.nodeType?[o]:o);else if(Ze.test(o)){for(l=l||f.appendChild(t.createElement("div")),s=(Qe.exec(o)||["",""])[1].toLowerCase(),u=rt[s]||rt._default,l.innerHTML=u[1]+o.replace(ze,"<$1></$2>")+u[2],i=u[0];i--;)l=l.lastChild;if(!se.support.leadingWhitespace&&Xe.test(o)&&p.push(t.createTextNode(Xe.exec(o)[0])),!se.support.tbody)for(o="table"!==s||Ke.test(o)?"<table>"!==u[1]||Ke.test(o)?0:l:l.firstChild,i=o&&o.childNodes.length;i--;)se.nodeName(c=o.childNodes[i],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(se.merge(p,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=f.lastChild}else p.push(t.createTextNode(o));for(l&&f.removeChild(l),se.support.appendChecked||se.grep(b(p,"input"),x),h=0;o=p[h++];)if((!a||-1===se.inArray(o,a))&&(r=se.contains(o.ownerDocument,o),l=b(f.appendChild(o),"script"),r&&g(l),n))for(i=0;o=l[i++];)at.test(o.type||"")&&n.push(o);return l=null,f},cleanData:function(e,t){for(var n,a,i,o,r=0,l=se.expando,s=se.cache,c=se.support.deleteExpando,u=se.event.special;null!=(n=e[r]);r++)if((t||se.acceptData(n))&&(i=n[l],o=i&&s[i])){if(o.events)for(a in o.events)u[a]?se.event.remove(n,a):se.removeEvent(n,a,o.handle);s[i]&&(delete s[i],c?delete n[l]:typeof n.removeAttribute!==Y?n.removeAttribute(l):n[l]=null,Z.push(i))}}});var ct,ut,dt,mt=/alpha\([^)]*\)/i,ft=/opacity\s*=\s*([^)]*)/,pt=/^(top|right|bottom|left)$/,ht=/^(none|table(?!-c[ea]).+)/,gt=/^margin/,vt=RegExp("^("+ce+")(.*)$","i"),yt=RegExp("^("+ce+")(?!px)[a-z%]+$","i"),bt=RegExp("^([+-])=("+ce+")","i"),xt={BODY:"block"},wt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:0,fontWeight:400},kt=["Top","Right","Bottom","Left"],Mt=["Webkit","O","Moz","ms"];se.fn.extend({css:function(e,n){return se.access(this,function(e,n,a){var i,o,r={},l=0;if(se.isArray(n)){for(o=ut(e),i=n.length;i>l;l++)r[n[l]]=se.css(e,n[l],!1,o);return r}return a!==t?se.style(e,n,a):se.css(e,n)},e,n,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:$(this))?se(this).show():se(this).hide()})}}),se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=dt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":se.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,a,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,l,s=se.camelCase(n),c=e.style;if(n=se.cssProps[s]||(se.cssProps[s]=w(c,s)),l=se.cssHooks[n]||se.cssHooks[s],a===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:c[n];if(r=typeof a,"string"===r&&(o=bt.exec(a))&&(a=(o[1]+1)*o[2]+parseFloat(se.css(e,n)),r="number"),!(null==a||"number"===r&&isNaN(a)||("number"!==r||se.cssNumber[s]||(a+="px"),se.support.clearCloneStyle||""!==a||0!==n.indexOf("background")||(c[n]="inherit"),l&&"set"in l&&(a=l.set(e,a,i))===t)))try{c[n]=a}catch(u){}}},css:function(e,n,a,i){var o,r,l,s=se.camelCase(n);return n=se.cssProps[s]||(se.cssProps[s]=w(e.style,s)),l=se.cssHooks[n]||se.cssHooks[s],l&&"get"in l&&(r=l.get(e,!0,a)),r===t&&(r=dt(e,n,i)),"normal"===r&&n in $t&&(r=$t[n]),""===a||a?(o=parseFloat(r),a===!0||se.isNumeric(o)?o||0:r):r},swap:function(e,t,n,a){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,a||[]);for(o in t)e.style[o]=r[o];return i}}),e.getComputedStyle?(ut=function(t){return e.getComputedStyle(t,null)},dt=function(e,n,a){var i,o,r,l=a||ut(e),s=l?l.getPropertyValue(n)||l[n]:t,c=e.style;return l&&(""!==s||se.contains(e.ownerDocument,e)||(s=se.style(e,n)),yt.test(s)&&gt.test(n)&&(i=c.width,o=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=s,s=l.width,c.width=i,c.minWidth=o,c.maxWidth=r)),s}):J.documentElement.currentStyle&&(ut=function(e){return e.currentStyle},dt=function(e,n,a){var i,o,r,l=a||ut(e),s=l?l[n]:t,c=e.style;return null==s&&c&&c[n]&&(s=c[n]),yt.test(s)&&!pt.test(n)&&(i=c.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),c.left="fontSize"===n?"1em":s,s=c.pixelLeft+"px",c.left=i,r&&(o.left=r)),""===s?"auto":s}),se.each(["height","width"],function(e,n){se.cssHooks[n]={get:function(e,a,i){return a?0===e.offsetWidth&&ht.test(se.css(e,"display"))?se.swap(e,wt,function(){return I(e,n,i)}):I(e,n,i):t},set:function(e,t,a){var i=a&&ut(e);return M(e,t,a?C(e,n,a,se.support.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,i),i):0)}}}),se.support.opacity||(se.cssHooks.opacity={get:function(e,t){return ft.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,a=e.currentStyle,i=se.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=a&&a.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===se.trim(o.replace(mt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||a&&!a.filter)||(n.filter=mt.test(o)?o.replace(mt,i):o+" "+i)}}),se(function(){se.support.reliableMarginRight||(se.cssHooks.marginRight={get:function(e,n){return n?se.swap(e,{display:"inline-block"},dt,[e,"marginRight"]):t}}),!se.support.pixelPosition&&se.fn.position&&se.each(["top","left"],function(e,n){se.cssHooks[n]={get:function(e,a){return a?(a=dt(e,n),yt.test(a)?se(e).position()[n]+"px":a):t}}})}),se.expr&&se.expr.filters&&(se.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!se.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||se.css(e,"display"))},se.expr.filters.visible=function(e){return!se.expr.filters.hidden(e)}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(n){for(var a=0,i={},o="string"==typeof n?n.split(" "):[n];4>a;a++)i[e+kt[a]+t]=o[a]||o[a-2]||o[0];return i}},gt.test(e)||(se.cssHooks[e+t].set=M)});var Ct=/%20/g,It=/\[\]$/,Vt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Lt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),se.param=function(e,n){var a,i=[],o=function(e,t){t=se.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){o(this.name,this.value)});else for(a in e)L(a,e[a],n,o);return i.join("&").replace(Ct,"+")},se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),se.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var Et,St,Pt=se.now(),At=/\?/,_t=/#.*$/,qt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ot=/^(?:GET|HEAD)$/,Nt=/^\/\//,Dt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bt=se.fn.load,Rt={},Ft={},Wt="*/".concat("*");try{St=X.href}catch(Ut){St=J.createElement("a"),St.href="",St=St.href}Et=Dt.exec(St.toLowerCase())||[],se.fn.load=function(e,n,a){if("string"!=typeof e&&Bt)return Bt.apply(this,arguments);var i,o,r,l=this,s=e.indexOf(" ");return s>=0&&(i=e.slice(s,e.length),e=e.slice(0,s)),se.isFunction(n)?(a=n,n=t):n&&"object"==typeof n&&(r="POST"),l.length>0&&se.ajax({url:e,type:r,dataType:"html",data:n}).done(function(e){o=arguments,l.html(i?se("<div>").append(se.parseHTML(e)).find(i):e)}).complete(a&&function(e,t){l.each(a,o||[e.responseText,t,e])}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.each(["get","post"],function(e,n){se[n]=function(e,a,i,o){return se.isFunction(a)&&(o=o||i,i=a,a=t),se.ajax({url:e,type:n,dataType:o,data:a,success:i})}}),se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St,type:"GET",isLocal:jt.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?P(P(e,se.ajaxSettings),t):P(se.ajaxSettings,e)},ajaxPrefilter:E(Rt),ajaxTransport:E(Ft),ajax:function(e,n){function a(e,n,a,i){var o,d,y,b,w,k=n;2!==x&&(x=2,s&&clearTimeout(s),u=t,l=i||"",$.readyState=e>0?4:0,a&&(b=A(m,$,a)),e>=200&&300>e||304===e?(m.ifModified&&(w=$.getResponseHeader("Last-Modified"),w&&(se.lastModified[r]=w),w=$.getResponseHeader("etag"),w&&(se.etag[r]=w)),204===e?(o=!0,k="nocontent"):304===e?(o=!0,k="notmodified"):(o=_(m,b),k=o.state,d=o.data,y=o.error,o=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),$.status=e,$.statusText=(n||k)+"",o?h.resolveWith(f,[d,k,$]):h.rejectWith(f,[$,k,y]),$.statusCode(v),v=t,c&&p.trigger(o?"ajaxSuccess":"ajaxError",[$,m,o?d:y]),g.fireWith(f,[$,k]),c&&(p.trigger("ajaxComplete",[$,m]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,r,l,s,c,u,d,m=se.ajaxSetup({},n),f=m.context||m,p=m.context&&(f.nodeType||f.jquery)?se(f):se.event,h=se.Deferred(),g=se.Callbacks("once memory"),v=m.statusCode||{},y={},b={},x=0,w="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!d)for(d={};t=Ht.exec(l);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?l:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else $.always(e[$.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),a(0,t),this}};if(h.promise($).complete=g.add,$.success=$.done,$.error=$.fail,m.url=((e||m.url||St)+"").replace(_t,"").replace(Nt,Et[1]+"//"),m.type=n.method||n.type||m.method||m.type,m.dataTypes=se.trim(m.dataType||"*").toLowerCase().match(ue)||[""],null==m.crossDomain&&(i=Dt.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===Et[1]&&i[2]===Et[2]&&(i[3]||("http:"===i[1]?80:443))==(Et[3]||("http:"===Et[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=se.param(m.data,m.traditional)),S(Rt,m,n,$),2===x)return $;c=m.global,c&&0===se.active++&&se.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Ot.test(m.type),r=m.url,m.hasContent||(m.data&&(r=m.url+=(At.test(r)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=qt.test(r)?r.replace(qt,"$1_="+Pt++):r+(At.test(r)?"&":"?")+"_="+Pt++)),m.ifModified&&(se.lastModified[r]&&$.setRequestHeader("If-Modified-Since",se.lastModified[r]),se.etag[r]&&$.setRequestHeader("If-None-Match",se.etag[r])),(m.data&&m.hasContent&&m.contentType!==!1||n.contentType)&&$.setRequestHeader("Content-Type",m.contentType),$.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Wt+"; q=0.01":""):m.accepts["*"]);for(o in m.headers)$.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(m.beforeSend.call(f,$,m)===!1||2===x))return $.abort();w="abort";for(o in{success:1,error:1,complete:1})$[o](m[o]);if(u=S(Ft,m,n,$)){$.readyState=1,c&&p.trigger("ajaxSend",[$,m]),m.async&&m.timeout>0&&(s=setTimeout(function(){$.abort("timeout")},m.timeout));try{x=1,u.send(y,a)}catch(k){if(!(2>x))throw k;a(-1,k)}}else a(-1,"No Transport");return $},getScript:function(e,n){return se.get(e,t,n,"script")},getJSON:function(e,t,n){return se.get(e,t,n,"json")}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),se.ajaxTransport("script",function(e){if(e.crossDomain){var n,a=J.head||se("head")[0]||J.documentElement;return{send:function(t,i){n=J.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},a.insertBefore(n,a.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||se.expando+"_"+Pt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(n,a,i){var o,r,l,s=n.jsonp!==!1&&(Yt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(n.data)&&"data");return s||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=se.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,s?n[s]=n[s].replace(Yt,"$1"+o):n.jsonp!==!1&&(n.url+=(At.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return l||se.error(o+" was not called"),l[0]},n.dataTypes[0]="json",r=e[o],e[o]=function(){l=arguments},i.always(function(){e[o]=r,n[o]&&(n.jsonpCallback=a.jsonpCallback,Gt.push(o)),l&&se.isFunction(r)&&r(l[0]),l=r=t}),"script"):t});var Jt,Xt,zt=0,Qt=e.ActiveXObject&&function(){var e;for(e in Jt)Jt[e](t,!0)};se.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&q()||H()}:q,Xt=se.ajaxSettings.xhr(),se.support.cors=!!Xt&&"withCredentials"in Xt,Xt=se.support.ajax=!!Xt,Xt&&se.ajaxTransport(function(n){if(!n.crossDomain||se.support.cors){var a;return{send:function(i,o){var r,l,s=n.xhr();if(n.username?s.open(n.type,n.url,n.async,n.username,n.password):s.open(n.type,n.url,n.async),n.xhrFields)for(l in n.xhrFields)s[l]=n.xhrFields[l];n.mimeType&&s.overrideMimeType&&s.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(l in i)s.setRequestHeader(l,i[l])}catch(c){}s.send(n.hasContent&&n.data||null),a=function(e,i){var l,c,u,d;try{if(a&&(i||4===s.readyState))if(a=t,r&&(s.onreadystatechange=se.noop,Qt&&delete Jt[r]),i)4!==s.readyState&&s.abort();else{d={},l=s.status,c=s.getAllResponseHeaders(),"string"==typeof s.responseText&&(d.text=s.responseText);try{u=s.statusText}catch(m){u=""}l||!n.isLocal||n.crossDomain?1223===l&&(l=204):l=d.text?200:404}}catch(f){i||o(-1,f)}d&&o(l,u,d,c)},n.async?4===s.readyState?setTimeout(a):(r=++zt,Qt&&(Jt||(Jt={},se(e).unload(Qt)),Jt[r]=a),s.onreadystatechange=a):a()},abort:function(){a&&a(t,!0)}}}});var Kt,Zt,en=/^(?:toggle|show|hide)$/,tn=RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),nn=/queueHooks$/,an=[B],on={"*":[function(e,t){var n,a,i=this.createTween(e,t),o=tn.exec(t),r=i.cur(),l=+r||0,s=1,c=20;if(o){if(n=+o[2],a=o[3]||(se.cssNumber[e]?"":"px"),"px"!==a&&l){l=se.css(i.elem,e,!0)||n||1;do s=s||".5",l/=s,se.style(i.elem,e,l+a);while(s!==(s=i.cur()/r)&&1!==s&&--c)}i.unit=a,i.start=l,i.end=o[1]?l+(o[1]+1)*n:n}return i}]};se.Animation=se.extend(N,{tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,a=0,i=e.length;i>a;a++)n=e[a],on[n]=on[n]||[],on[n].unshift(t)},prefilter:function(e,t){t?an.unshift(e):an.push(e)}}),se.Tween=R,R.prototype={constructor:R,init:function(e,t,n,a,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=o||(se.cssNumber[n]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,n=R.propHooks[this.prop];return this.pos=t=this.options.duration?se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[se.cssProps[e.prop]]||se.cssHooks[e.prop])?se.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.each(["toggle","show","hide"],function(e,t){var n=se.fn[t];se.fn[t]=function(e,a,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,a,i)}}),se.fn.extend({fadeTo:function(e,t,n,a){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,a)},animate:function(e,t,n,a){var i=se.isEmptyObject(e),o=se.speed(t,n,a),r=function(){var t=N(this,se.extend({},e),o);r.finish=function(){t.stop(!0)},(i||se._data(this,"finish"))&&t.stop(!0)};return r.finish=r,i||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,n,a){var i=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof e&&(a=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=se.timers,r=se._data(this);if(n)r[n]&&r[n].stop&&i(r[n]);else for(n in r)r[n]&&r[n].stop&&nn.test(n)&&i(r[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(a),t=!1,o.splice(n,1));(t||!a)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=se._data(this),a=n[e+"queue"],i=n[e+"queueHooks"],o=se.timers,r=a?a.length:0;for(n.finish=!0,se.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete n.finish})}}),se.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,n,a){return this.animate(t,e,n,a)}}),se.speed=function(e,t,n){var a=e&&"object"==typeof e?se.extend({},e):{complete:n||!n&&t||se.isFunction(e)&&e,duration:e,easing:n&&t||t&&!se.isFunction(t)&&t};return a.duration=se.fx.off?0:"number"==typeof a.duration?a.duration:a.duration in se.fx.speeds?se.fx.speeds[a.duration]:se.fx.speeds._default,(null==a.queue||a.queue===!0)&&(a.queue="fx"),a.old=a.complete,a.complete=function(){se.isFunction(a.old)&&a.old.call(this),a.queue&&se.dequeue(this,a.queue)},a},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},se.timers=[],se.fx=R.prototype.init,se.fx.tick=function(){var e,n=se.timers,a=0;for(Kt=se.now();n.length>a;a++)e=n[a],e()||n[a]!==e||n.splice(a--,1);n.length||se.fx.stop(),Kt=t},se.fx.timer=function(e){e()&&se.timers.push(e)&&se.fx.start()},se.fx.interval=13,se.fx.start=function(){Zt||(Zt=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(Zt),Zt=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fx.step={},se.expr&&se.expr.filters&&(se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length}),se.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){se.offset.setOffset(this,e,t);
});var n,a,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;return r?(n=r.documentElement,se.contains(n,o)?(typeof o.getBoundingClientRect!==Y&&(i=o.getBoundingClientRect()),a=W(r),{top:i.top+(a.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(a.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i):void 0},se.offset={setOffset:function(e,t,n){var a=se.css(e,"position");"static"===a&&(e.style.position="relative");var i,o,r=se(e),l=r.offset(),s=se.css(e,"top"),c=se.css(e,"left"),u=("absolute"===a||"fixed"===a)&&se.inArray("auto",[s,c])>-1,d={},m={};u?(m=r.position(),i=m.top,o=m.left):(i=parseFloat(s)||0,o=parseFloat(c)||0),se.isFunction(t)&&(t=t.call(e,n,l)),null!=t.top&&(d.top=t.top-l.top+i),null!=t.left&&(d.left=t.left-l.left+o),"using"in t?t.using.call(e,d):r.css(d)}},se.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},a=this[0];return"fixed"===se.css(a,"position")?t=a.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(n=e.offset()),n.top+=se.css(e[0],"borderTopWidth",!0),n.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-se.css(a,"marginTop",!0),left:t.left-n.left-se.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||J.documentElement;e&&!se.nodeName(e,"html")&&"static"===se.css(e,"position");)e=e.offsetParent;return e||J.documentElement})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var a=/Y/.test(n);se.fn[e]=function(i){return se.access(this,function(e,i,o){var r=W(e);return o===t?r?n in r?r[n]:r.document.documentElement[i]:e[i]:(r?r.scrollTo(a?se(r).scrollLeft():o,a?o:se(r).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),se.each({Height:"height",Width:"width"},function(e,n){se.each({padding:"inner"+e,content:n,"":"outer"+e},function(a,i){se.fn[i]=function(i,o){var r=arguments.length&&(a||"boolean"!=typeof i),l=a||(i===!0||o===!0?"margin":"border");return se.access(this,function(n,a,i){var o;return se.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?se.css(n,a,l):se.style(n,a,i,l)},n,r?i:t,r,null)}})}),e.jQuery=e.$=se,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return se})}(window),function(e){"function"==typeof define&&define.amd?define("lib/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,l=s.call(arguments,1),c=0,d=0,m=0,f=0,p=0,h=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(m=r.detail*-1),"wheelDelta"in r&&(m=r.wheelDelta),"wheelDeltaY"in r&&(m=r.wheelDeltaY),"wheelDeltaX"in r&&(d=r.wheelDeltaX*-1),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=m*-1,m=0),c=0===m?d:m,"deltaY"in r&&(m=r.deltaY*-1,c=m),"deltaX"in r&&(d=r.deltaX,0===m&&(c=d*-1)),0!==m||0!==d){if(1===r.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,m*=g,d*=g}else if(2===r.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,m*=v,d*=v}if(f=Math.max(Math.abs(m),Math.abs(d)),(!o||f<o)&&(o=f,a(r,f)&&(o/=40)),a(r,f)&&(c/=40,d/=40,m/=40),c=Math[c>=1?"floor":"ceil"](c/o),d=Math[d>=1?"floor":"ceil"](d/o),m=Math[m>=1?"floor":"ceil"](m/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=t.clientX-y.left,h=t.clientY-y.top}return t.deltaX=d,t.deltaY=m,t.deltaFactor=o,t.offsetX=p,t.offsetY=h,t.deltaMode=0,l.unshift(t,c,d,m),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function n(){o=null}function a(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(e.event.fixHooks)for(var c=r.length;c;)e.event.fixHooks[r[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=l.length;n;)this.addEventListener(l[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=l.length;n;)this.removeEventListener(l[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),a=n["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e){"function"==typeof define&&define.amd?define("lib/jquery.jscrollpane.min",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.fn.jScrollPane=function(t){function n(t,n){function a(n){var o,l,c,u,d,p,h=!1,g=!1;if(N=n,void 0===D)d=t.scrollTop(),p=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),B=t.innerWidth()+ve,R=t.innerHeight(),t.width(B),D=e('<div class="jspPane" />').css("padding",ge).append(t.children()),F=e('<div class="jspContainer" />').css({width:B+"px",height:R+"px"}).append(D).appendTo(t);else{if(t.css("width",""),h=N.stickToBottom&&I(),g=N.stickToRight&&V(),u=t.innerWidth()+ve!=B||t.outerHeight()!=R,u&&(B=t.innerWidth()+ve,R=t.innerHeight(),F.css({width:B+"px",height:R+"px"})),!u&&ye==W&&D.outerHeight()==U)return void t.width(B);ye=W,D.css("width",""),t.width(B),F.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}D.css("overflow","auto"),W=n.contentWidth?n.contentWidth:D[0].scrollWidth,U=D[0].scrollHeight,D.css("overflow",""),G=W/B,Y=U/R,J=Y>1,X=G>1,X||J?(t.addClass("jspScrollable"),o=N.maintainPosition&&(K||te),o&&(l=M(),c=C()),i(),r(),s(),o&&($(g?W-B:l,!1),w(h?U-R:c,!1)),S(),T(),j(),N.enableKeyboardNavigation&&A(),N.clickOnTrack&&m(),q(),N.hijackInternalLinks&&H()):(t.removeClass("jspScrollable"),D.css({top:0,left:0,width:F.width()-ve}),L(),P(),_(),f()),N.autoReinitialise&&!he?he=setInterval(function(){a(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&he&&clearInterval(he),d&&t.scrollTop(0)&&w(d,!1),p&&t.scrollLeft(0)&&$(p,!1),t.trigger("jsp-initialised",[X||J])}function i(){J&&(F.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ne=F.find(">.jspVerticalBar"),ae=ne.find(">.jspTrack"),z=ae.find(">.jspDrag"),N.showArrows&&(le=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",u(0,-1)).bind("click.jsp",E),se=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",u(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(le.bind("mouseover.jsp",u(0,-1,le)),se.bind("mouseover.jsp",u(0,1,se))),c(ae,N.verticalArrowPositions,le,se)),oe=R,F.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){oe-=e(this).outerHeight()}),z.hover(function(){z.addClass("jspHover")},function(){z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",E),z.addClass("jspActive");var n=t.pageY-z.position().top;return e("html").bind("mousemove.jsp",function(e){h(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",p),!1}),o())}function o(){ae.height(oe+"px"),K=0,ie=N.verticalGutter+ae.outerWidth(),D.width(B-ie-ve);try{0===ne.position().left&&D.css("margin-left",ie+"px")}catch(e){}}function r(){X&&(F.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ce=F.find(">.jspHorizontalBar"),ue=ce.find(">.jspTrack"),Z=ue.find(">.jspDrag"),N.showArrows&&(fe=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",u(-1,0)).bind("click.jsp",E),pe=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",u(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(fe.bind("mouseover.jsp",u(-1,0,fe)),pe.bind("mouseover.jsp",u(1,0,pe))),c(ue,N.horizontalArrowPositions,fe,pe)),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",E),Z.addClass("jspActive");var n=t.pageX-Z.position().left;return e("html").bind("mousemove.jsp",function(e){v(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",p),!1}),de=F.innerWidth(),l())}function l(){F.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){de-=e(this).outerWidth()}),ue.width(de+"px"),te=0}function s(){if(X&&J){var t=ue.outerHeight(),n=ae.outerWidth();oe-=t,e(ce).find(">.jspCap:visible,>.jspArrow").each(function(){de+=e(this).outerWidth()}),de-=n,R-=n,B-=t,ue.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),o(),l()}X&&D.width(F.outerWidth()-ve+"px"),U=D.outerHeight(),Y=U/R,X&&(me=Math.ceil(1/G*de),me>N.horizontalDragMaxWidth?me=N.horizontalDragMaxWidth:me<N.horizontalDragMinWidth&&(me=N.horizontalDragMinWidth),Z.width(me+"px"),ee=de-me,y(te)),J&&(re=Math.ceil(1/Y*oe),re>N.verticalDragMaxHeight?re=N.verticalDragMaxHeight:re<N.verticalDragMinHeight&&(re=N.verticalDragMinHeight),z.height(re+"px"),Q=oe-re,g(K))}function c(e,t,n,a){var i,o="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?r=t:t==r&&(o=t,i=n,n=a,a=i),e[o](n)[r](a)}function u(e,t,n){return function(){return d(e,t,this,n),this.blur(),!1}}function d(t,n,a,i){a=e(a).addClass("jspActive");var o,r,l=!0,s=function(){0!==t&&be.scrollByX(t*N.arrowButtonSpeed),0!==n&&be.scrollByY(n*N.arrowButtonSpeed),r=setTimeout(s,l?N.initialDelay:N.arrowRepeatFreq),l=!1};s(),o=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(o,function(){a.removeClass("jspActive"),r&&clearTimeout(r),r=null,i.unbind(o)})}function m(){f(),J&&ae.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var n,a=e(this),i=a.offset(),o=t.pageY-i.top-K,r=!0,l=function(){var e=a.offset(),i=t.pageY-e.top-re/2,c=R*N.scrollPagePercent,u=Q*c/(U-R);if(0>o)K-u>i?be.scrollByY(-c):h(i);else{if(!(o>0))return void s();i>K+u?be.scrollByY(c):h(i)}n=setTimeout(l,r?N.initialDelay:N.trackClickRepeatFreq),r=!1},s=function(){n&&clearTimeout(n),n=null,e(document).unbind("mouseup.jsp",s)};return l(),e(document).bind("mouseup.jsp",s),!1}}),X&&ue.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var n,a=e(this),i=a.offset(),o=t.pageX-i.left-te,r=!0,l=function(){var e=a.offset(),i=t.pageX-e.left-me/2,c=B*N.scrollPagePercent,u=ee*c/(W-B);if(0>o)te-u>i?be.scrollByX(-c):v(i);else{if(!(o>0))return void s();i>te+u?be.scrollByX(c):v(i)}n=setTimeout(l,r?N.initialDelay:N.trackClickRepeatFreq),r=!1},s=function(){n&&clearTimeout(n),n=null,e(document).unbind("mouseup.jsp",s)};return l(),e(document).bind("mouseup.jsp",s),!1}})}function f(){ue&&ue.unbind("mousedown.jsp"),ae&&ae.unbind("mousedown.jsp")}function p(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),z&&z.removeClass("jspActive"),Z&&Z.removeClass("jspActive")}function h(n,a){if(J){0>n?n=0:n>Q&&(n=Q);var i=new e.Event("jsp-will-scroll-y");if(t.trigger(i,[n]),!i.isDefaultPrevented()){var o=n||0,r=0===o,l=o==Q,s=n/Q,c=-s*(U-R);void 0===a&&(a=N.animateScroll),a?be.animate(z,"top",n,g,function(){t.trigger("jsp-user-scroll-y",[-c,r,l])}):(z.css("top",n),g(n),t.trigger("jsp-user-scroll-y",[-c,r,l]))}}}function g(e){void 0===e&&(e=z.position().top),F.scrollTop(0),K=e||0;var n=0===K,a=K==Q,i=e/Q,o=-i*(U-R);(xe!=n||$e!=a)&&(xe=n,$e=a,t.trigger("jsp-arrow-change",[xe,$e,we,ke])),b(n,a),D.css("top",o),t.trigger("jsp-scroll-y",[-o,n,a]).trigger("scroll")}function v(n,a){if(X){0>n?n=0:n>ee&&(n=ee);var i=new e.Event("jsp-will-scroll-x");if(t.trigger(i,[n]),!i.isDefaultPrevented()){var o=n||0,r=0===o,l=o==ee,s=n/ee,c=-s*(W-B);void 0===a&&(a=N.animateScroll),a?be.animate(Z,"left",n,y,function(){t.trigger("jsp-user-scroll-x",[-c,r,l])}):(Z.css("left",n),y(n),t.trigger("jsp-user-scroll-x",[-c,r,l]))}}}function y(e){void 0===e&&(e=Z.position().left),F.scrollTop(0),te=e||0;var n=0===te,a=te==ee,i=e/ee,o=-i*(W-B);(we!=n||ke!=a)&&(we=n,ke=a,t.trigger("jsp-arrow-change",[xe,$e,we,ke])),x(n,a),D.css("left",o),t.trigger("jsp-scroll-x",[-o,n,a]).trigger("scroll")}function b(e,t){N.showArrows&&(le[e?"addClass":"removeClass"]("jspDisabled"),se[t?"addClass":"removeClass"]("jspDisabled"))}function x(e,t){N.showArrows&&(fe[e?"addClass":"removeClass"]("jspDisabled"),pe[t?"addClass":"removeClass"]("jspDisabled"))}function w(e,t){var n=e/(U-R);h(n*Q,t)}function $(e,t){var n=e/(W-B);v(n*ee,t)}function k(t,n,a){var i,o,r,l,s,c,u,d,m,f=0,p=0;try{i=e(t)}catch(h){return}for(o=i.outerHeight(),r=i.outerWidth(),F.scrollTop(0),F.scrollLeft(0);!i.is(".jspPane");)if(f+=i.position().top,p+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;l=C(),c=l+R,l>f||n?d=f-N.horizontalGutter:f+o>c&&(d=f-R+o+N.horizontalGutter),isNaN(d)||w(d,a),s=M(),u=s+B,s>p||n?m=p-N.horizontalGutter:p+r>u&&(m=p-B+r+N.horizontalGutter),isNaN(m)||$(m,a)}function M(){return-D.position().left}function C(){return-D.position().top}function I(){var e=U-R;return e>20&&e-C()<10}function V(){var e=W-B;return e>20&&e-M()<10}function T(){F.unbind(Ce).bind(Ce,function(e,t,n,a){te||(te=0),K||(K=0);var i=te,o=K,r=e.deltaFactor||N.mouseWheelSpeed;return be.scrollBy(n*r,-a*r,!1),i==te&&o==K})}function L(){F.unbind(Ce)}function E(){return!1}function S(){D.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){k(e.target,!1)})}function P(){D.find(":input,a").unbind("focus.jsp")}function A(){function n(){var e=te,t=K;switch(a){case 40:be.scrollByY(N.keyboardSpeed,!1);break;case 38:be.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:be.scrollByY(R*N.scrollPagePercent,!1);break;case 33:be.scrollByY(-R*N.scrollPagePercent,!1);break;case 39:be.scrollByX(N.keyboardSpeed,!1);break;case 37:be.scrollByX(-N.keyboardSpeed,!1)}return i=e!=te||t!=K}var a,i,o=[];X&&o.push(ce[0]),J&&o.push(ne[0]),D.bind("focus.jsp",function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||o.length&&e(t.target).closest(o).length){var r=te,l=K;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:a=t.keyCode,n();break;case 35:w(U-R),a=null;break;case 36:w(0),a=null}return i=t.keyCode==a&&r!=te||l!=K,!i}}).bind("keypress.jsp",function(t){return t.keyCode==a&&n(),t.target===this||o.length&&e(t.target).closest(o).length?!i:void 0}),N.hideFocus?(t.css("outline","none"),"hideFocus"in F[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in F[0]&&t.attr("hideFocus",!1))}function _(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),D.unbind(".jsp")}function q(){if(location.hash&&location.hash.length>1){var t,n,a=escape(location.hash.substr(1));try{t=e("#"+a+', a[name="'+a+'"]')}catch(i){return}t.length&&D.find(a)&&(0===F.scrollTop()?n=setInterval(function(){F.scrollTop()>0&&(k(t,!0),e(document).scrollTop(F.position().top),clearInterval(n))},50):(k(t,!0),e(document).scrollTop(F.position().top)))}}function H(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(t){var n,a,i,o,r,l,s=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(-1!==location.href.indexOf("#")&&(c=location.href.substr(0,location.href.indexOf("#"))),s===c){n=escape(this.href.substr(this.href.indexOf("#")+1));try{a=e("#"+n+', a[name="'+n+'"]')}catch(u){return}a.length&&(i=a.closest(".jspScrollable"),o=i.data("jsp"),o.scrollToElement(a,!0),i[0].scrollIntoView&&(r=e(window).scrollTop(),l=a.offset().top,(r>l||l>r+e(window).height())&&i[0].scrollIntoView()),t.preventDefault())}}))}function j(){var e,t,n,a,i,o=!1;F.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var l=r.originalEvent.touches[0];e=M(),t=C(),n=l.pageX,a=l.pageY,i=!1,o=!0}).bind("touchmove.jsp",function(r){if(o){var l=r.originalEvent.touches[0],s=te,c=K;return be.scrollTo(e+n-l.pageX,t+a-l.pageY),i=i||Math.abs(n-l.pageX)>5||Math.abs(a-l.pageY)>5,s==te&&c==K}}).bind("touchend.jsp",function(){o=!1}).bind("click.jsp-touchclick",function(){return i?(i=!1,!1):void 0})}function O(){var e=C(),n=M();t.removeClass("jspScrollable").unbind(".jsp"),D.unbind(".jsp"),t.replaceWith(Me.append(D.children())),Me.scrollTop(e),Me.scrollLeft(n),he&&clearInterval(he)}var N,D,B,R,F,W,U,G,Y,J,X,z,Q,K,Z,ee,te,ne,ae,ie,oe,re,le,se,ce,ue,de,me,fe,pe,he,ge,ve,ye,be=this,xe=!0,we=!0,$e=!1,ke=!1,Me=t.clone(!1,!1).empty(),Ce=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===t.css("box-sizing")?(ge=0,ve=0):(ge=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),ve=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0)),e.extend(be,{reinitialise:function(t){t=e.extend({},N,t),a(t)},scrollToElement:function(e,t,n){k(e,t,n)},scrollTo:function(e,t,n){$(e,n),w(t,n)},scrollToX:function(e,t){$(e,t)},scrollToY:function(e,t){w(e,t)},scrollToPercentX:function(e,t){$(e*(W-B),t)},scrollToPercentY:function(e,t){w(e*(U-R),t)},scrollBy:function(e,t,n){be.scrollByX(e,n),be.scrollByY(t,n)},scrollByX:function(e,t){var n=M()+Math[0>e?"floor":"ceil"](e),a=n/(W-B);v(a*ee,t)},scrollByY:function(e,t){var n=C()+Math[0>e?"floor":"ceil"](e),a=n/(U-R);h(a*Q,t)},positionDragX:function(e,t){v(e,t)},positionDragY:function(e,t){h(e,t)},animate:function(e,t,n,a){var i={};i[t]=n,e.animate(i,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:a})},getContentPositionX:function(){return M()},getContentPositionY:function(){return C()},getContentWidth:function(){return W},getContentHeight:function(){return U},getPercentScrolledX:function(){return M()/(W-B)},getPercentScrolledY:function(){return C()/(U-R)},getIsScrollableH:function(){return X},getIsScrollableV:function(){return J},getContentPane:function(){return D},scrollToBottom:function(e){h(Q,e)},hijackInternalLinks:e.noop,destroy:function(){O()}}),a(n)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var a=e(this),i=a.data("jsp");i?i.reinitialise(t):(e("script",a).filter('[type="text/javascript"],:not([type])').remove(),i=new n(a,t),a.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),define("view/relationList",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'<li class="member-list-item change-talk-to '+(null!=(i=t["if"].call(e,null!=e?e.momoid:e,{name:"if",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+'" '+(null!=(i=t["if"].call(e,null!=e?e.momoid:e,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.gid:e,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.did:e,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+'>\n\t<div class="member-item-content clearfix '+(null!=(i=t["if"].call(e,null!=e?e.special:e,{name:"if",hash:{},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+'">\n\t\t<img  '+(null!=(i=t["if"].call(e,null!=e?e.avatar:e,{name:"if",hash:{},fn:this.program(14,a,0),inverse:this.program(16,a,0),data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.momoid:e,{name:"if",hash:{},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.gid:e,{name:"if",hash:{},fn:this.program(20,a,0),inverse:this.noop,data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.did:e,{name:"if",hash:{},fn:this.program(22,a,0),inverse:this.noop,data:a}))?i:"")+' class="avatar" alt="">\n\t\t<p class="username">'+(null!=(i=t["if"].call(e,null!=e?e.remarkname:e,{name:"if",hash:{},fn:this.program(24,a,0),inverse:this.program(26,a,0),data:a}))?i:"")+"</p>\n"+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"F"},fn:this.program(28,a,0),inverse:this.program(30,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.sign:e,{name:"if",hash:{},fn:this.program(33,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.special:e,{name:"if",hash:{},fn:this.program(41,a,0),inverse:this.noop,data:a}))?i:"")+"\t</div>\n</li>\n"},2:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.is_vip:e,{name:"isEqual",hash:{equals:"1"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:""},3:function(e,t,n,a){return"vip-user"},5:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.momoid||(null!=e?e.momoid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"momoid",hash:{},data:a}):i))+'" data-type="user" '},7:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.gid||(null!=e?e.gid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"gid",hash:{},data:a}):i))+'" data-type="group" '},9:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.did||(null!=e?e.did:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"did",hash:{},data:a}):i))+'" data-type="discuss" '},11:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.special:e,{name:"isEqual",hash:{equals:"1"},fn:this.program(12,a,0),inverse:this.noop,data:a}))?i:""},12:function(e,t,n,a){return"special"},14:function(e,t,n,a){var i;return' src="'+this.escapeExpression((i=null!=(i=t.avatar||(null!=e?e.avatar:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"avatar",hash:{},data:a}):i))+'" '},16:function(e,t,n,a){return' src="/img/default-avatar.jpg" '},18:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.momoid||(null!=e?e.momoid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"momoid",hash:{},data:a}):i))+'" data-idType="momoid" '},20:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.gid||(null!=e?e.gid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"gid",hash:{},data:a}):i))+'" data-idType="gid" '},22:function(e,t,n,a){var i;return' data-id="'+this.escapeExpression((i=null!=(i=t.did||(null!=e?e.did:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"did",hash:{},data:a}):i))+'" data-idType="did" '},24:function(e,t,n,a){var i;return this.escapeExpression((i=null!=(i=t.remarkname||(null!=e?e.remarkname:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"remarkname",hash:{},data:a}):i))},26:function(e,t,n,a){var i;return this.escapeExpression((i=null!=(i=t.name||(null!=e?e.name:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"name",hash:{},data:a}):i))},28:function(e,t,n,a){var i;return'\t\t\t<span class="info gender female"><i class="icon-female"></i><span class="age">'+this.escapeExpression((i=null!=(i=t.age||(null!=e?e.age:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"age",hash:{},data:a}):i))+"</span></span>\n"},30:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"M"},fn:this.program(31,a,0),inverse:this.noop,data:a}))?i:""},31:function(e,t,n,a){var i;return'\t\t\t\t<span class="info gender male"><i class="icon-male"></i><span class="age">'+this.escapeExpression((i=null!=(i=t.age||(null!=e?e.age:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"age",hash:{},data:a}):i))+"</span></span>\n"},33:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.momoid:e,{name:"if",hash:{},fn:this.program(34,a,0),inverse:this.program(39,a,0),data:a}))?i:""},34:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.momoid:e,{name:"isEqual",hash:{equals:"10000"},fn:this.program(35,a,0),inverse:this.program(37,a,0),data:a}))?i:""},35:function(e,t,n,a){return""},37:function(e,t,n,a){var i;return'\t\t\t\t\t<p class="sign">'+this.escapeExpression((i=null!=(i=t.sign||(null!=e?e.sign:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"sign",hash:{},data:a}):i))+"</p>\n"},39:function(e,t,n,a){var i;return'\t\t\t\t<p class="sign">'+this.escapeExpression((i=null!=(i=t.sign||(null!=e?e.sign:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"sign",hash:{},data:a}):i))+"</p>\n"},41:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.special:e,{name:"isEqual",hash:{equals:"1"},fn:this.program(42,a,0),inverse:this.noop,data:a}))?i:""},42:function(e,t,n,a){return'\t\t\t<span class="special-mark">特别好友</span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return(null!=(i=t.each.call(e,null!=e?e.relationData:e,{name:"each",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+"\n"},useData:!0})}),define("view/colorfulEgg",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.type:i,{name:"isEqual",hash:{equals:"5"},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'    <img data-type="5" class="face-egg" src="'+r(o(null!=(i=null!=e?e.data:e)?i.Pre:i,e))+'"/>\n    <p class="egg-name">「'+r(o(null!=(i=null!=e?e.data:e)?i.tipName:i,e))+"」</p>\t\n"},4:function(e,t,n,a){return'    <img class="egg-holder" src="/img/icon-egg.png"/>\n\t<p class="no-egg-msg">暂无可用彩蛋</p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.type:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(4,a,0),data:a}))?i:""},useData:!0})}),define("view/liveRoomItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='liveShowItem roomDetail left' data-rid=\""+s((o=null!=(o=t.rid||(null!=e?e.rid:e))?o:r,typeof o===l?o.call(e,{name:"rid",hash:{},data:a}):o))+'" data-rtype="'+s((o=null!=(o=t.rtype||(null!=e?e.rtype:e))?o:r,typeof o===l?o.call(e,{name:"rtype",hash:{},data:a}):o))+'" data-momoid="'+s((o=null!=(o=t.stid||(null!=e?e.stid:e))?o:r,typeof o===l?o.call(e,{name:"stid",hash:{},data:a}):o))+"\">\n            <div class=\"roomImgWrap\">\n                <img class='roomImg' src='"+s((o=null!=(o=t.cover||(null!=e?e.cover:e))?o:r,typeof o===l?o.call(e,{name:"cover",hash:{},data:a}):o))+"' alt=''/>\n            </div>\n            <div class='roomMsg'>\n                <p class='liveShowRoom'>"+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:r,typeof o===l?o.call(e,{name:"title",hash:{},data:a}):o))+'</p>\n                <p class="onWatchUser">'+s((o=null!=(o=t.on||(null!=e?e.on:e))?o:r,typeof o===l?o.call(e,{name:"on",hash:{},data:a}):o))+"在看</p>\n            </div>\n            <img class='deviceIcon' src='"+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.rtype:e,{name:"isEqual",hash:{equals:"1"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.rtype:e,{name:"isEqual",hash:{equals:"2"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"' alt=''/>\n        </li>\n"},3:function(e,t,n,a){return"/img/movieIcon.png"},5:function(e,t,n,a){return"/img/phoneIcon.png"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/roomChannelItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a,i,o){var r,l=this.lambda,s=this.escapeExpression;return'<li class="room-channel-item clearfix '+(null!=(r=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(r=null!=o[1]?o[1].data:o[1])?r.category:r,{name:"isEqual",hash:{equals:"000000"},fn:this.program(2,a,0,i,o),inverse:this.noop,data:a}))?r:"")+'" data-id="'+s(l(null!=e?e.rid:e,e))+'" data-category="'+s(l(null!=(r=null!=o[1]?o[1].data:o[1])?r.category:r,e))+'">\n\t<i class="fa fa-times-circle cancle-collect" data-id="'+s(l(null!=e?e.hostor:e,e))+'"></i>\n\t<div class="online-box clearfix">\n'+(null!=(r=t["if"].call(e,null!=e?e.recommend:e,{name:"if",hash:{},fn:this.program(4,a,0,i,o),inverse:this.program(6,a,0,i,o),data:a}))?r:"")+'\t</div>\n\t<div class="channel-detial clearfix">\n\t\t<p class="room-name">'+s(l(null!=e?e.name:e,e))+'</p>\n\t\t<p class="status-info">\n\t\t\t<span class="room-pos">'+s(l(null!=e?e.cityname:e,e))+"</span>\n\t\t</p>\n\t</div>\n</li>\n"},2:function(e,t,n,a){return" collection"},4:function(e,t,n,a){return'\t\t\t<img src="/img/lose.png" alt="">\n\t\t\t<p class="status">推荐</p>\n'},6:function(e,t,n,a){return'\t\t\t<p class="online-num">'+this.escapeExpression(this.lambda(null!=e?e.member_count:e,e))+'</p>\n\t\t\t<p class="status">在线</p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a,i,o){var r;return null!=(r=t.each.call(e,null!=(r=null!=e?e.data:e)?r.list:r,{name:"each",hash:{},fn:this.program(1,a,0,i,o),inverse:this.noop,data:a}))?r:""},useData:!0,useDepths:!0})}),define("module/V2-M-Helper",["require","exports","module","lib/jquery.mousewheel","lib/jquery.jscrollpane.min","module/V2-storage","module/V2-V-Variable","module/V2-M-Variable","view/relationList","view/colorfulEgg","view/liveRoomItem","view/roomChannelItem"],function(e){e("lib/jquery.mousewheel"),e("lib/jquery.jscrollpane.min");var t=e("./V2-storage"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=(e("../view/relationList"),e("../view/colorfulEgg")),o=o||{},r=e("../view/liveRoomItem"),l=e("../view/roomChannelItem");return o.clearUnread=function(){a.status.currentTalkingUnreadNum=0,a.unread={hi:{},local:{},ignore:{},cache:{}},1==a.setting.history_on_off&&t.set(window.enMomoid+"unread",a.unread),document.title=a.pageTitle,$(".unread-msg-num").html("").addClass("hide"),$(".go-msg-bord-box span").text("").addClass("hide"),winObs.trigger("title-update",0)},o.clearMsgStorage=function(){t.has(window.enMomoid+"msgs")&&t.remove(window.enMomoid+"msgs"),t.has(window.enMomoid+"unread")&&t.remove(window.enMomoid+"unread")},o.clearMsgs=function(){a.msgs.user={},a.msgs.discuss={},a.msgs.group={},a.msgs.store={}},o.isRecentMsg=function(e){var t=a.recentMsg;return $.inArray(e,t)!==-1||(t.push(e),t.length>a.status.maxRecentMsgCount&&t.shift(),!1)},o.hoverOut=function(e){$(".edit-at-list-box").hasClass("hide")||($(".edit-at-list-box").addClass("hide"),n.box.editAtList.html(""),a._cache.ating=!1,
a.status.atItemIndex=0,a.status.atLength=0,a.atScroll&&a.atScroll.data().jsp&&a.atScroll.data().jsp.destroy()),n.box.editAtBox.hasClass("hide")||n.box.editAtBox.addClass("hide"),$(".account-info-box").hasClass("hide")||$(".account-info-box").addClass("hide"),$(".account-info-box").hasClass("show")&&$(".account-info-box").removeClass("show"),e&&e.target&&!$(e.target).hasClass("icon-face")&&!$(".emotions-wrap").hasClass("hide")&&$(".emotions-wrap").addClass("hide"),$(".collect-content").addClass("hide"),$(".shareContainer").hasClass("show")&&$(".shareContainer").removeClass("show")},o.noRemindTips=function(e,t){var n='<p class="no-remind-tips">'+e+"</p>";t.prepend(n)},o.QueryString=function(e,t){var n=new RegExp(""+t+"=([^&?]*)","ig");return e.match(n)?e.match(n)[0].substr(t.length+1):null},o.renderList=function(e,t,n){return t<e.length?($.extend(e[t],{special:1}),void o.renderList(e,++t,n)):void(n&&n(null,e))},o.updateCacheProfile=function(){var e={user:"friend",group:"group",discuss:"discuss"},t={user:"momoid",group:"gid",discuss:"did"};a.profile=a.profile?a.profile:{user:{},group:{},discuss:{},store:{}},$.each(["user","group","discuss"],function(n,i){$.each(a.list[e[i]],function(e,n){n.idType=t[i],a.profile[i][e]=n})}),a.profile.user[a.account.momoid]=a.account},o.initialPane=function(){a.chatBox=$(".chat-box .tab_content").on("jsp-initialised",function(e,t){$(this).find(".jspVerticalBar").hide()}).jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),a.chatBoxAPI=a.chatBox.data("jsp"),a.msgScreen=$(".msg-screen-box").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),a.msgScreenAPI=a.msgScreen.data("jsp")},o.clampEllipls=function(e,t){if(!(t>e.height()))for(var n=e.text(),a=n.length-1;a>0;a--){if(t>e.height())return e.text(e.text().replace(/(\s)*([a-zA-Z0-9]+|\W)(\.\.\.)?$/,"...")),!1;n=n.substring(0,a),e.text(n)}},o.checkColorfulEgg=function(e,t){var n=!1;a.eggSendId=null,$(".pre-egg-box").html(i({data:{}})).attr("data-id","").addClass("hide"),a.corlorfulEgg&&!$.isEmptyObject(a.corlorfulEgg)&&$.each(a.corlorfulEgg,function(o,r){if(a.sendedColorEgg[o][e].indexOf(t)<0){if(1==r.trigger.type){var l=parseInt(r.trigger.condition.min,10),s=parseInt(r.trigger.condition.max,10),c=""+(new Date).getHours(),u=""+(new Date).getMinutes();(new Date).getMinutes()<10&&(u="0"+u);var d=""+c+u;if(l<parseInt(d,10)&&parseInt(d,10)<s)return $(".pre-egg-box").html(i({data:r})).attr("data-id",o),n=!0,!1}if(2==r.trigger.type){var m={momoid:"user",gid:"group",did:"discuss"},f=m[e];if(a.msgs[f]&&a.msgs[f][t]&&a.msgs[f][t].length>r.trigger.condition.max)return $(".pre-egg-box").html(i({data:r})).attr("data-id",o),n=!0,!1}}}),n?$(".colorful-egg").addClass("useful"):$(".colorful-egg").removeClass("useful")},o.select=function(e,t,n){e.on("click",function(t){var n=e.find(".selected-item").attr("data-id");e.find(".option-item i.selected").remove(),e.find(".option-list .option-item[data-id="+n+"]").append('<i class="selected fa fa-check"></i>'),e.find(".option-list").toggleClass("show"),t.stopPropagation()}),e.find(".option-list").on("click",".option-item",function(){var a=$(this).attr("data-id");if(n!=a){if(e.find(".option-item i.selected").remove(),$(this).append('<i class="selected fa fa-check"></i>'),$(this).find("img")){var i=$(this).find("img").attr("src");e.find(".selected-item").find("img").attr("src",i)}var o=$(this).find(".option-name").text();e.find(".selected-item").attr("data-id",a).find(".selectname").text(o)}t&&t(null,a)})},o.pushState=function(e,t,n){t=t||a.pageTitle;var i=o.QueryString(window.location.href,"rf"),r=i?n+"?rf="+i:n;window.history&&window.history.pushState&&(window.history.pushState(e,t,r),a.lastPostLog!==n&&($.get("/data/log"+r),a.lastPostLog=n))},o.supportLocalStorage=function(){var e=!1;return"object"==typeof window.localStorage&&(window.localStorage.flowplayerTestStorage="test",e=!0),e},o.getHotLiveList=function(){$.get("/webmomo/api/scene/recommend/lists",function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e&&e.data&&e.data.r_infos&&e.data.r_infos.length>0&&$(".preview-live-list").html(r({list:e.data.r_infos}))})},o.getHotChatList=function(){$.get("/webmomo/api/chatroom/list/index",{category:1},function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e.data.list&&e.data.list.length>0&&(e.data.list.length=6,e.data.list=$.map(e.data.list,function(e){return e.member_count=~~(4*Math.random()+5),e}),$(".preview-chatroom-list").html(l({data:e.data})))})},o.timeChunk=function(e,t,n){var a,i,o=function(){var i=Math.min(n||1,e.length);a=e.splice(0,i),t(a)};return function(){i=setInterval(function(){return 0==e.length?clearInterval(i):void o()},200)}},o.getTalkingList=function(){a.recentList=[],n.box.talkingList.children().each(function(e,t){var n=$(this).attr("data-id"),i=$(this).attr("data-type").substring(0,1);a.recentList.push(i+"_"+n)})},o.unreadNumOnTitleFisrtTime=function(){var e=a.unread,t=a.status.currentTalkingUnreadNum;$(".chat-box ul.talking-list").children().each(function(n,a){var i=$(this).attr("data-id");void 0!==e.local[i]?t+=e.local[i]:void 0!==e.hi[i]&&(t+=e.hi[i])}),0!==t?(t>999&&(t="999+"),document.title=t+"条未读 - "+a.pageTitle,$(".chat-box .new-msg-icon").removeClass("hide"),"chat"!=a.currentPage&&$(".operate-content .notify-box .go-msg-bord-box span").text(t).removeClass("hide")):(document.title=a.pageTitle,$(".chat-box .new-msg-icon").addClass("hide")),winObs.trigger("title-update",t)},o}),function(e){if("function"==typeof define&&define.amd)define("lib/js.cookie",[],e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(n){function a(t,i,o){var r;if(arguments.length>1){if(o=e({path:"/"},a.defaults,o),"number"==typeof o.expires){var l=new Date;l.setMilliseconds(l.getMilliseconds()+864e5*o.expires),o.expires=l}try{r=JSON.stringify(i),/^[\{\[]/.test(r)&&(i=r)}catch(s){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(r={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var m=c[d].split("="),f=m[0].replace(u,decodeURIComponent),p=m.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=n.read?n.read(p,f):n(p,f)||p.replace(u,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(s){}if(t===f){r=p;break}t||(r[f]=p)}catch(s){}}return r}return a.get=a.set=a,a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(t,n){a(t,"",e(n,{expires:-1}))},a.withConverter=t,a}return t(function(){})}),define("module/chatroom/room-M-Variable",["require","exports","module"],function(e){var t,n,a,i,o,r,l,s,c,u,d=window.momoid,m=!1,f=!1,p=!1,h=!1,g=[],v={isTextareaFocus:!1,atItemIndex:0,atLength:0,isNewMsgTipsShow:!1},y={ating:!1},b=300,x=!1,w={loginDot:"/dot?"},$=200,k=[];return{accountId:d,roomMembers:t,offline:m,sendTooFast:f,curRoomId:n,atMsg:h,atList:g,_cache:y,status:v,ChatroomScreen:a,ChatroomScreenAPI:i,ChatroomList:o,ChatroomListAPI:r,heartTimeout:c,maxMsgCount:b,membersScrollAPI:s,membersScroll:l,checkProfile:x,url:w,joinRoomFaste:p,maxtextAreaLength:$,downtimer:u,noResponseMsg:k}}),define("module/chatroom/room-M-Helper",["require","exports","module","lib/js.cookie","module/chatroom/room-M-Variable"],function(e){var t=e("../../lib/js.cookie"),n=e("./room-M-Variable"),a={};return a.resetBord=function(){$(".chatroom-container .talking-room .room-talk-to-box").html(""),$(".chatroom-container .talking-room .online-people-box").addClass("hide").html('<ul class="online-avatar-list clearfix"></ul>'),$(".room-channel-item").removeClass("item-select"),$(".room-msg-list").html(""),n.ChatroomScreenAPI.reinitialise(),$(".room-edit-box .edit-content").val("").blur().attr("disabled","disabled"),$(".chatroom-container .icon-face").css("visibility","hidden"),$(".room-edit-box .edit-content").css("visibility","hidden"),n.curRoomId=""},a.focusOut=function(){$(".account-box .account-info-box").addClass("hide"),$(".chatroom-container .select-box .option-list").removeClass("show"),$(".chatroom-container .room-edit-box .edit-at-list-box").addClass("hide"),$(".chatroom-container .room-edit-box .edit-at-list-box .edit-at-list").html(""),$(".room-profile-box")[0]&&($(".room-profile-box").remove(),$(".room-msg .room-avatar-box").removeClass("checking"),n.checkProfile=!1,$(".room-screen-box").css("overflow","hidden"),$(".room-screen-box .jspContainer").css("overflow","hidden"),n.ChatroomScreenAPI.reinitialise(),$(".chatroom-container .talking-box .avatar-item").removeClass("checking"),$(".online-avatar-list").css("overflow","hidden"),$(".online-avatar-list .jspContainer").css("overflow","hidden"),n.membersScrollAPI&&n.membersScrollAPI.reinitialise())},a.initScroll=function(){n.ChatroomScreen=$(".chatroom-container .room-screen-box").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.ChatroomScreenAPI=n.ChatroomScreen.data("jsp")},a.initListScroll=function(){n.ChatroomList=$(".chatroom-container .room-list").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.ChatroomListAPI=n.ChatroomList.data("jsp")},a.initVertialScroll=function(){n.membersScroll=$(".chatroom-container .talking-room .online-people-box .online-avatar-list").jScrollPane({}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)})},a.socketControl=function(e,n,a,i){if(window.room){var o={cId:t.get("cId"),chatroomId:e,liveId:n,skey:t.get("webmomo")};"jc"==a&&(o.jc=!0),i&&(o.showId=i),window.room.emit("sconfig",JSON.stringify(o))}},a.liveControl=function(e,n){if(window.room&&e.liveId&&e.showId&&e.starId){var a={cId:t.get("cId"),skey:t.get("webmomo"),liveInfo:e,data:n};window.room.emit("lconfig",JSON.stringify(a))}},a}),define("module/V2-Tips",["require","exports","module"],function(e){var t=t||{};return t.System=function(e,t,n){2===arguments.length&&"number"==typeof t&&(n=t,t="success"),t=t||"success",$("body").append('<div class="tips fadeInLeft animated '+t+'" id="tips">'+e+"</div>");var a=$("#tips").show(),i="",o="";i&&clearTimeout(i),o&&clearTimeout(o),"number"==typeof n&&(o=setTimeout(function(){a.removeClass("fadeInLeft").addClass("fadeOutLeft"),i=setTimeout(function(){a.remove()},550)},n))},t.Warning=function(e,t,n,a,i){var o="";o=n?n:$("body"),$(".tips-warning").get(0)&&$(".tips-warning").remove(),o.append('<div class="tips-warning '+a+'"><p>'+e+"</p></div>"),$(".tips-warning").fadeIn(100);var r="";r&&clearTimeout(r),"number"==typeof t&&(r=setTimeout(function(){$(".tips-warning").fadeOut(100,function(){$(this).remove()}),i&&i()},t))},t.clean=function(){$("#tips").remove()},t}),define("module/V2-C-IsClient",[],function(){var e=function(){return window.navigator.userAgent.indexOf("client")!=-1},t=function(e,t){var n=!1;if(e=e.toLowerCase(),t=t.toLowerCase(),!/\d*\.\d*\.\d*/.test(e)||!/\d*\.\d*\.\d*/.test(t))return!1;e===t&&(n=0);var a=e.split("."),i=t.split(".");return n=a[0]>i[0]?-1:a[0]<i[0]?1:a[1]>i[1]?-1:a[1]<i[1]?1:a[2]>i[2]?-1:a[2]<i[2]?1:0},n=function(){var e=window.navigator.userAgent.match(/client\sv\d*\.\d*\.\d*/gi);return e&&(0==e.length?0:e[0].match(/\d*\.\d*\.\d*/)[0])};return{isClient:e(),fnCompareVersion:t,clientVersion:n()}}),define("view/talkToItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" checkout-hi"},3:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.fromStore:e,{name:"if",hash:{},fn:this.program(4,a,0),inverse:this.program(6,a,0),data:a}))?i:""},4:function(e,t,n,a){return" checkout-storeMsg"},6:function(e,t,n,a){return" change-talk-to"},8:function(e,t,n,a){return" has-at-tip"},10:function(e,t,n,a){return"forceTop"},12:function(e,t,n,a){var i;return'id="hi-'+this.escapeExpression((i=null!=(i=t.id||(null!=e?e.id:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"id",hash:{},data:a}):i))+'" '},14:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return' id="talking-'+l((i=null!=(i=t.type||(null!=e?e.type:e))?i:o,typeof i===r?i.call(e,{name:"type",hash:{},data:a}):i))+"-"+l((i=null!=(i=t.id||(null!=e?e.id:e))?i:o,typeof i===r?i.call(e,{name:"id",hash:{},data:a}):i))+'"'},16:function(e,t,n,a){var i;return'data-storeid="'+this.escapeExpression((i=null!=(i=t.storeid||(null!=e?e.storeid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"storeid",hash:{},data:a}):i))+'"'},18:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.forbidden:e,{name:"isEqual",hash:{equals:"forbidden"},fn:this.program(19,a,0),inverse:this.noop,data:a}))?i:""},19:function(e,t,n,a){return"ignore"},21:function(e,t,n,a){return'\t\t\t<img class="avatar" src="/img/hi.png">\n'},23:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.fromStore:e,{name:"if",hash:{},fn:this.program(24,a,0),inverse:this.program(26,a,0),data:a}))?i:""},24:function(e,t,n,a){return'\t\t\t\t<img class="avatar" src="/img/store-avatar.jpg">\n'},26:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'\t\t\t\t<img class="avatar" src="'+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+'" data-idType="'+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.type:e,{name:"isEqual",hash:{equals:"user"},fn:this.program(27,a,0),inverse:this.program(29,a,0),data:a}))?i:"")+'" data-id="'+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,typeof o===l?o.call(e,{name:"id",hash:{},data:a}):o))+'" data-type="'+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.type:e,{name:"isEqual",hash:{equals:"store"},fn:this.program(37,a,0),inverse:this.noop,data:a}))?i:"")+'">\n'},27:function(e,t,n,a){return"momoid"},29:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.type:e,{name:"isEqual",hash:{equals:"group"},fn:this.program(30,a,0),inverse:this.program(32,a,0),data:a}))?i:""},30:function(e,t,n,a){return"gid"},32:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.type:e,{name:"isEqual",hash:{equals:"discuss"},fn:this.program(33,a,0),inverse:this.program(35,a,0),data:a}))?i:""},33:function(e,t,n,a){return"did"},35:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=e?e.type:e,{name:"isEqual",hash:{equals:"store"},fn:this.program(27,a,0),inverse:this.noop,data:a}))?i:""},37:function(e,t,n,a){return"store"},39:function(e,t,n,a){return" have-sign"},41:function(e,t,n,a){return'<p class="at"><span>[有人@你]</span></p>'},43:function(e,t,n,a){var i;return'\t\t<span class="unread-msg-num">'+this.escapeExpression((i=null!=(i=t.unreadNum||(null!=e?e.unreadNum:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"unreadNum",hash:{},data:a}):i))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'<li class="member-list-item'+(null!=(i=t["if"].call(e,null!=e?e.fromhi:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.hasAt:e,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")+" "+(null!=(i=t["if"].call(e,null!=e?e.top:e,{name:"if",hash:{},fn:this.program(10,a,0),inverse:this.noop,data:a}))?i:"")+'" '+(null!=(i=t["if"].call(e,null!=e?e.hiItem:e,{name:"if",hash:{},fn:this.program(12,a,0),inverse:this.program(14,a,0),data:a}))?i:"")+' data-id="'+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,typeof o===l?o.call(e,{name:"id",hash:{},data:a}):o))+'" data-type="'+s((o=null!=(o=t.type||(null!=e?e.type:e))?o:r,typeof o===l?o.call(e,{name:"type",hash:{},data:a}):o))+'" '+(null!=(i=t["if"].call(e,null!=e?e.storeid:e,{name:"if",hash:{},fn:this.program(16,a,0),inverse:this.noop,data:a}))?i:"")+'>\n\t<div class="member-item-content clearfix '+(null!=(i=t["if"].call(e,null!=e?e.forbidden:e,{name:"if",hash:{},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+'">\n\t\t<i class="fa fa-times-circle del-talkto-item"></i>\n'+(null!=(i=t["if"].call(e,null!=e?e.fromhi:e,{name:"if",hash:{},fn:this.program(21,a,0),inverse:this.program(23,a,0),data:a}))?i:"")+'\t\t<p class="username '+(null!=(i=t["if"].call(e,null!=e?e.hasAt:e,{name:"if",hash:{},fn:this.program(39,a,0),inverse:this.noop,data:a}))?i:"")+'">'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:r,typeof o===l?o.call(e,{name:"name",hash:{},data:a}):o))+'</p>\n\t\t<p class="last-msg">'+(null!=(i=t["if"].call(e,null!=e?e.hasAt:e,{name:"if",hash:{},fn:this.program(41,a,0),inverse:this.noop,data:a}))?i:"")+'</p>\n\t\t<i class="fa fa-ban"></i>\n'+(null!=(i=t["if"].call(e,null!=e?e.unreadNum:e,{name:"if",hash:{},fn:this.program(43,a,0),inverse:this.noop,data:a}))?i:"")+"\t</div>\n</li>"},useData:!0})}),define("view/groupMemberItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a,i,o){var r,l=this.lambda,s=this.escapeExpression;return'<li class="photo-item" data-momoid="'+s(l(null!=e?e.momoid:e,e))+'" data-from="'+s(l(null!=(r=null!=o[1]?o[1].memberData:o[1])?r.fromId:r,e))+'"><img src="'+s(l(null!=e?e.avatar:e,e))+'" /><p>'+(null!=(r=t["if"].call(e,null!=e?e.remarkname:e,{name:"if",hash:{},fn:this.program(2,a,0,i,o),inverse:this.program(4,a,0,i,o),data:a}))?r:"")+"</p></li>\n"},2:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.remarkname:e,e))},4:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.name:e,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a,i,o){var r;return null!=(r=t.each.call(e,null!=(r=null!=e?e.memberData:e)?r.lists:r,{name:"each",hash:{},fn:this.program(1,a,0,i,o),inverse:this.noop,data:a}))?r:""},useData:!0,useDepths:!0})}),define("view/account",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=this.escapeExpression,l=this.lambda;return'<div class="account-box-childern clearfix '+r((o=null!=(o=t.live||(null!=e?e.live:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"live",hash:{},data:a}):o))+'">\n    <div class="goDownloads">\n        <a href="/downloads" target="_blank">下载电脑版</a>\n    </div>\n    <div class="goPay">\n        <img class="goToPay" src="/img/iWantPay.png"/>\n        <p class="iWantPay">充值</p>\n    </div>\n    <div class="goLive">\n        <a href="https://live-star.immomo.com/admin/welcome/index" target="_blank"><img  class="goToLive" src="/img/iWantTo.png"/></a>\n        <p class="iWantTo"><a href="https://live-star.immomo.com/admin/welcome/index" target="_blank">我要直播</a></p>\n    </div>\n\t<img src="'+r(l(null!=(i=null!=e?e.user:e)?i.avatar:i,e))+'" class="avatar oneself" alt="'+r(l(null!=(i=null!=e?e.user:e)?i.name:i,e))+'" data-id="'+r(l(null!=(i=null!=e?e.user:e)?i.momoid:i,e))+'" data-gender="'+r(l(null!=(i=null!=e?e.user:e)?i.sex:i,e))+'" data-idType="momoid"/>\n\n    <div class="account-info-box hide">\n\t\t<div class="account-pro">\n\t\t\t<img src="'+r(l(null!=(i=null!=e?e.user:e)?i.avatar:i,e))+'" class="avatar" alt="'+r(l(null!=(i=null!=e?e.user:e)?i.name:i,e))+'" data-id="'+r(l(null!=(i=null!=e?e.user:e)?i.momoid:i,e))+'" data-idType="momoid"/>\n\t\t\t<p class="username">'+r(l(null!=(i=null!=e?e.user:e)?i.name:i,e))+'</p>\n\t\t\t<p class="account-momoid">陌陌号：'+r(l(null!=(i=null!=e?e.user:e)?i.momoid:i,e))+'</p>\n\t\t</div>\n\t\t<ul class="account-list">\n\t\t\t<li class="account-item oneself-profile" data-id="'+r(l(null!=(i=null!=e?e.user:e)?i.momoid:i,e))+'" data-idType="momoid">个人资料</li>\n\t\t\t<li class="account-item set-notify">设置</li>\n\t\t\t<li class="account-item btn-ignore-unread">忽略未读</li>\n\t\t\t<li class="account-item btn-push-feedback">提交反馈</li>\n\t\t\t<li class="account-item exit-btn">退出登录</li>\n\t\t</ul>\n\t</div>\n</div>'},useData:!0})}),define("view/emotionList",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li class="nav bf bf-'+s((o=null!=(o=t.weid||(null!=e?e.weid:e))?o:r,typeof o===l?o.call(e,{name:"weid",hash:{},data:a}):o))+'" data-list-weid="'+s((o=null!=(o=t.weid||(null!=e?e.weid:e))?o:r,typeof o===l?o.call(e,{name:"weid",hash:{},data:a}):o))+'">\n            <a href="javascript:;">'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:r,typeof o===l?o.call(e,{name:"name",hash:{},data:a}):o))+'</a>\n            <i class="'+(null!=(i=t["if"].call(e,null!=e?e.rflag:e,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'"></i>\n        </li>\n'},3:function(e,t,n,a){return"bf-flag"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/emotionDetail",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return'        <div class="tab_content">\n            <ul class="bf-list bf-list-'+l((i=null!=(i=t.weid||(null!=e?e.weid:e))?i:o,typeof i===r?i.call(e,{name:"weid",hash:{},data:a}):i))+' clearfix" data-detail-weid="'+l((i=null!=(i=t.weid||(null!=e?e.weid:e))?i:o,typeof i===r?i.call(e,{name:"weid",hash:{},data:a}):i))+'">\n            </ul>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/bigFaceItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li class="'+s((o=null!=(o=t.key||a&&a.key)?o:r,typeof o===l?o.call(e,{name:"key",hash:{},data:a}):o))+'">\n            <img class="'+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.eid:e,{name:"isEqual",hash:{equals:"custom"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'" src="'+s((o=null!=(o=t.surl||(null!=e?e.surl:e))?o:r,typeof o===l?o.call(e,{name:"surl",hash:{},data:a}):o))+'" alt="" />\n'+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.eid:e,{name:"isEqual",hash:{equals:"custom"},fn:this.program(5,a,0),inverse:this.program(7,a,0),data:a}))?i:"")+"        </li>\n"},3:function(e,t,n,a){return"custom"},5:function(e,t,n,a){return""},7:function(e,t,n,a){var i;return"            <p>"+this.escapeExpression((i=null!=(i=t.key||a&&a.key)?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"key",hash:{},data:a}):i))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("module/V2-API",["require","exports","module","module/V2-storage","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-Helper","module/chatroom/room-M-Helper","module/V2-Tips","module/V2-C-IsClient","view/talkToItem","view/groupMemberItem","view/relationList","view/account","view/emotionList","view/emotionDetail","view/bigFaceItem"],function(e){var t=e("./V2-storage"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i={};i.Helper=e("./V2-M-Helper"),i.roomHelper=e("./chatroom/room-M-Helper");var o=e("./V2-Tips"),r=e("./V2-C-IsClient").isClient,l=e("../view/talkToItem"),s=e("../view/groupMemberItem"),c=e("../view/relationList"),u=e("../view/account"),d=e("../view/emotionList"),m=e("../view/emotionDetail"),f=e("../view/bigFaceItem"),p=window.location.protocol+"//"+window.location.host+"/webmomo/api/",h="user/contact/g_d",g="group/setting/get",v="user/follow/follow",y="user/contact/friend",b="user/contact/following",x="user/contact/fans",w="user/recent/contact",k="user/expression/emotions",M="user/expression/emotioninfo",C="user/profile/oneself",I="user/setting/setItem",V="init/index",T="log/actions",L="user/expression/collect",E="user/recent/top",S="user/recent/untop",P="user/profile/remark",A="user/file/transform",_="/setting/recentlyUpdateV2",q="/feedback",H="/storeinfo/get",j=function(e,t){var n=e.type,i=e.id;if(n){if(!i){if("cacheMsgs"!=e.from)return;if(t)return t(null,!0)}if(e.hiUpdate)var r=r;if(e.update)var l=e.update;var s="",c="";if(l)var u=2;else var u=1;var d=a.profile&&a.profile[n]&&a.profile[n][i];if("user"==n&&(c=r&&d&&"none"==a.profile.user[i].relation),l||!d||c){var m={user:"momoid",group:"gid",discuss:"did",store:"momoid"},f=m[n],h={user:"remoteid",group:"gid",discuss:"did",store:"storeid"},g={};g.cf=e.from,i!=window.momoid&&(g[h[n]]=i);var v="";"store"==n?v=H:(g.wmo=u,v=p+n+"/profile/info"),$.ajax({asyc:!0,url:v,data:g,type:"POST",cache:!1}).fail(function(){return s={},s[f]=i,s.name=i,"store"==n?s.avatar="/img/store-avatar.jpg":s.avatar="/img/default-avatar.jpg",s.error="error",s.idType=f,"user"==n?s.relation="both":"discuss"!=n&&"group"!=n||(s.setting={push:1}),"user"==n&&i==a.account.momoid&&(s.relation="self"),t?t(null,s):s}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(r){}if("store"==n){if(200===e.ec&&e.result){var l;try{l="string"==typeof e.result?JSON.parse(e.result):e.result}catch(r){}if(l){if(l.idType="momoid",s=l,s.momoid=l.store_id,s.typeName=n,l.photos&&l.photos.length>0?s.avatar=l.photos[0]:s.avatar="/img/store-avatar.jpg",a.account.store=l.store_id,a.profile.store[i]=s,!t)return s;t(null,s)}}}else{if(200===e.ec&&e.data&&e.data.profile)return e.data.profile.idType=f,s=e.data.profile,s.typeName=n,a.profile[n][i]=s,"group"!=n&&"discuss"!=n||(a.setting.ignoreMsg[s.gid]=s.setting.push),"user"==n&&i==a.account.momoid&&(s.relation="self"),t?t(null,s):s;if(400===e.ec)return s={},s[f]=i,s.name=i,s.avatar="./img/default-avatar.jpg",s.error="error",s.idType=f,"user"==n?s.relation="both":s.setting={push:1},"user"==n&&i==window.momoid&&(s.relation="self"),t?t(null,s):s;408===e.ec&&i!=window.momoid?2==u&&"chat"==a.currentPage&&o.Warning(e.em,3e3):403===e.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)}})}else{if(s=a.profile[n][i],s&&(s.typeName=n,"user"==n&&i==a.account.momoid&&(s.relation="self")),!t)return s;t(null,s)}}},O=function(e,t,n){if(a.membersList&&a.membersList[e]&&a.membersList[e][t]){var i=a.membersList[e][t];if(n)n(null,i);else{i.fromId=t;var r="";r+=s({memberData:i}),$(".member-list").html(r),$(".member-list .loading-holder").remove()}}else{var l={group:"gid",discuss:"did"},c={};c[l[e]]=t,c.wmo=2,$.ajax({asyc:!0,url:p+e+"/member/lists",data:c,type:"get",cache:!1}).fail(function(){"chat"==a.currentPage&&($(".member-list").html(""),o.Warning("服务器繁忙，请稍后重试",3e3))}).done(function(i){try{i="string"==typeof i?JSON.parse(i):i}catch(r){}if(200===i.ec&&i.data&&i.data.members&&i.data.members.lists){var l=i.data.members,c="";n?n(null,l.lists):(l.fromId=t,c+=s({memberData:l}),a.membersList[e][t]=l,$(".member-list").html(c))}else 403===i.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&($(".member-list").html(""),o.Warning("服务器繁忙，请稍后重试",3e3))})}},N=function(e){$.ajax({asyc:!0,url:p+y,type:"get",data:{wmo:1},cache:!1}).fail(function(){"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(r){}if(200===t.ec&&t.data){if(t.data.special_friends&&t.data.special_friends.length>0?i.Helper.renderList(t.data.special_friends,0,function(e,n){n&&(a.specialFriend=n,$.each(n,function(e,t){a.relation.specialFriend[t.momoid]=t,a.list.friend[t.momoid]=t}),t.data.ordinary_friends&&t.data.ordinary_friends.length>0&&(a.ordinaryFriend=t.data.ordinary_friends,$.each(t.data.ordinary_friends,function(e,t){a.relation.ordinaryFriend[t.momoid]=t,a.list.friend[t.momoid]=t})))}):t.data.ordinary_friends&&t.data.ordinary_friends.length>0&&(a.ordinaryFriend=t.data.ordinary_friends,$.each(t.data.ordinary_friends,function(e,t){a.relation.ordinaryFriend[t.momoid]=t,a.list.friend[t.momoid]=t})),!~window.location.pathname.indexOf("live")&&Object.keys(a.list.friend).length<2&&$(".operate-content .myAnchor-guide-tip").hasClass("wx-regist")&&$(".operate-content .myAnchor-guide-tip .ShowAnchor-tip .onShowAnchor").text()<1&&($(".operate-content .myAnchor-guide-tip").removeClass("hide"),$(".operate-content .myAnchor-guide-tip .ShowAnchor-tip").addClass("hide"),$(".operate-content .myAnchor-guide-tip .wx-reg-tip").removeClass("hide"),setTimeout(function(){$(".operate-content .myAnchor-guide-tip").addClass("hide"),$(".operate-content .myAnchor-guide-tip .wx-reg-tip").addClass("hide"),$(".operate-content .myAnchor-guide-tip .ShowAnchor-tip").removeClass("hide")},6e3)),i.Helper.updateCacheProfile(),e)return e()}else 403===t.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))})},D=function(){$.ajax({asyc:!0,url:p+b,type:"get",data:{wmo:1},cache:!1}).fail(function(){"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}if(200===e.ec&&e.data){var i=e.data;$(".follow-list").html(c({relationData:e.data})),$.each(i,function(e,t){a.relation.follow[t.momoid]=t,a.list.follow[t.momoid]=t,t.idType="momoid"})}else 403===e.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))})},B=function(){$.ajax({asyc:!0,url:p+x,type:"get",data:{wmo:1},cache:!1}).fail(function(){"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}if(200===e.ec&&e.data){var i=e.data;$(".fans-list").html(c({relationData:e.data})),$.each(i,function(e,t){a.relation.fans[t.momoid]=t,a.list.fans[t.momoid]=t,t.idType="momoid"})}else 403===e.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&(n.box.friendList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))})},R=function(e){$.ajax({asyc:!0,url:p+h,type:"get",data:{wmo:1},cache:!1}).fail(function(){"chat"==a.currentPage&&(n.box.groupList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(r){}if(200===t.ec&&t.data&&t.data.contact){var l=t.data.contact;if($.each(l,function(e,t){t.gid?(a.list.group[t.gid]=t,a.relation.group[t.gid]=t,a.setting.ignoreMsg[t.gid]=t.setting.push):t.did&&(a.list.discuss[t.did]=t,a.relation.discuss[t.did]=t,a.setting.ignoreMsg[t.did]=t.setting.push)}),i.Helper.updateCacheProfile(),e)return e()}else 403===t.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&(n.box.groupList.html(""),o.Warning("服务器繁忙，请稍后重试",3e3))})},F=function(e,t,i){
a.setting.ignoreMsg&&a.setting.ignoreMsg[t]?t==a.talk_to[e]&&0==a.setting.ignoreMsg[t]&&n.box.talk_to.find(".toggle-btn-check").attr("checked","checked"):$.ajax({asyc:!0,url:p+g,type:"get",data:{gid:t,wmo:1},cache:!1}).fail(function(){}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(r){}if(200===t.ec&&t.data&&t.data.setting){var l=t.data;i?i(null,l.setting.push):(l[e]==a.talk_to[e]&&0==l.setting.push&&n.box.talk_to.find(".toggle-btn-check").attr("checked","checked"),a.setting.ignoreMsg[l[e]]=l.setting.push)}else 403===t.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},W=function(e,t,n){var i={gid:"group",did:"discuss"},r=i[e],l={};l[e]=t,l.push=n,l.wmo=2,$.ajax({asyc:!0,url:p+r+"/setting/set",type:"post",data:l,cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(i){}200==e.ec?a.setting.ignoreMsg[t]=n:403===e.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&o.Warning(e.em,3e3)})},U=function(e){$.ajax({asyc:!0,url:p+v,type:"post",data:{remoteid:e,wmo:2},cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(i){}200===t.ec?(o.Warning(t.em,3e3,$(".talking-box")),n.box.talk_to.find(".add-friend").addClass("hide"),a.profile.user[e]&&t.data.relation&&(a.profile.user[e].relation=t.data.relation)):403===t.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&o.Warning(t.em,3e3)})},G=function(e){$.ajax({asyc:!0,url:a.url.getPersonalSetting,type:"get",cache:!1}).fail(function(){}).done(function(t){if(t="string"==typeof t?JSON.parse(t):t,200===t.ec){if(t.data){var n=t.data;n.voice_on_off&&(a.setting.voice_on_off=n.voice_on_off),n.notify_on_off&&(a.setting.notify_on_off=n.notify_on_off),n.history_on_off&&(a.setting.history_on_off=n.history_on_off)}e&&e()}else 403===t.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},Y=function(e,t){$.ajax({asyc:!0,url:a.url.setPersonalSetting,data:{name:e,value:t,token:window.token},type:"POST",cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){e="string"==typeof e?JSON.parse(e):e,200===e.ec||(403===e.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3))})},J=function(){i.Helper.getTalkingList(),$.ajax({asyc:!0,url:_,data:{momoid:window.momoid,list:a.recentList,token:window.token},type:"post",cache:!1}).fail(function(){}).done(function(e){e="string"==typeof e?JSON.parse(e):e,200===e.ec||403===e.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},X=function(e){var r="";e&&(r="?count="+e),$.ajax({asyc:!0,url:p+w+r,type:"get",cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("请刷新重试",3e3)}).done(function(r){if(r="string"==typeof r?JSON.parse(r):r,200===r.ec&&r.data&&r.data.recent_contact){var s,c=r.data.recent_contact,u=a.unread;e||(s={}),$.each(c,function(e,t){var i="",o="";if("undefined"!=typeof s&&(s[t.idType]=1),"group"!=t.t&&"discuss"!=t.t||0!=t.setting.push?o=u.local[t[t.idType]]||"":(i="forbidden",o=u.ignore[t[t.idType]]||""),t[t.idType]&&t.t){var r=l({id:t[t.idType],type:t.t,unreadNum:o,avatar:t.avatar,name:t.remarkname||t.name,forbidden:i,top:t.top||""});$("#talking-"+t.t+"-"+t[t.idType])[0]||n.box.talkingList.append(r)}c.length-1==e&&a.chatBoxAPI&&a.chatBoxAPI.reinitialise()}),$.isEmptyObject(s)||($.each(u,function(e,t){"local"!==e&&"igonre"!==e||$.each(t,function(e,t){t?s[e]||delete u.local[e]:delete u.local[e]})}),a.unread=u,1==a.setting.history_on_off&&t.set(window.enMomoid+"unread",a.unread)),i.Helper.unreadNumOnTitleFisrtTime()}else 403===r.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},z=function(){$.ajax({asyc:!0,url:p+k,type:"get",cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){if(e="string"==typeof e?JSON.parse(e):e,200===e.ec&&e.data&&e.data.elist){var t='<li class="nav df"><a href="javascript:;" class="on">默认</a></li><span class="emotion-slide-border"></span>'+d({list:e.data.elist});$(".emotions-wrap .emotion-nav").html(t),$(".tab_content.df-content").siblings().remove(),$(".tab_content.df-content").after(m({list:e.data.elist})),$(".emotions-wrap").lt_tab({minItems:e.data.elist.length+1,slideBoder:$(".emotion-slide-border"),callBack:function(e){if("chat"==a.currentPage)var t=$($(".chat-edit-box .emotion-nav .nav")[e]).attr("data-list-weid");else var t=$($(".room-edit-box .emotion-nav .nav")[e]).attr("data-list-weid");$(".chat-edit-box .emotion-nav .nav.bf-"+t+" i").hasClass("bf-flag")?Q(t,"",!0):Q(t)}})}else 403===e.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},Q=function(e,t,a){!n.bigEmotionDetail[e]||a?$.ajax({asyc:!0,url:p+M,type:"post",data:{weid:e},cache:!1}).fail(function(){o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(a){a="string"==typeof a?JSON.parse(a):a,200===a.ec&&a.data&&a.data["package"]?(n.bigEmotionDetail[e]=a.data["package"],2==e&&$("i.bf-flag").remove(),$(".bf-list-"+e).html(f({list:n.bigEmotionDetail[e]})),t&&t(n.bigEmotionDetail)):403===a.ec&&o.Warning("当前登录已断开",3e3)}):($(".bf-list-"+e).html(f({list:n.bigEmotionDetail[e]})),t&&t(n.bigEmotionDetail))},K=function(e){$.ajax({url:q,data:{text:e},type:"post",cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3),n.box.overLayer.find(".feedback-btn").removeAttr("disabled")}).done(function(e){e="string"==typeof e?JSON.parse(e):e,200===e.ec?o.Warning("反馈成功！",3e3,$(".setting-box"),"middle",function(){n.box.overLayer.addClass("hide"),n.box.overLayer.html("")}):403===e.ec&&"chat"==a.currentPage?o.Warning("当前登录已断开",3e3):"chat"==a.currentPage&&o.Warning(e.em,3e3,$(".setting-box"),"middle",function(){n.box.overLayer.addClass("hide"),n.box.overLayer.html("")})})},Z=function(){$.ajax({asyc:!0,url:p+C,type:"get",cache:!1}).fail(function(){"chat"==a.currentPage&&o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){if(e="string"==typeof e?JSON.parse(e):e,200===e.ec&&e.data&&e.data.profile){var t=u({user:e.data.profile});n.box.account.html(t),$.extend(a.account,e.data.profile);var l=i.Helper.QueryString(window.location.href,"rf");if($(".goDownloads>a").eq(0).attr("href",l?"/downloads?rf="+l:"/downloads"),r&&$(".goDownloads").remove(),e.data.profile.personal){var s=e.data.profile.personal.guide;if("function"==typeof window.Notification)if("denied"==Notification.permission){var c=s.substring(1,2);if(0==c&&!$(".member-list-item.notifyNav")[0]&&($(".chat-box .tab_header").after("<div class='member-list-item notifyNav'><div class='member-item-content clearfix ignore'><i class='icon-notify avatar'></i><p class='username' >开启通知提醒</p></div></div>"),$(".tab_content_container").height())){$(".tab_content_container").height();if($(".member-list-item.notifyNav").height()){var d=$(".tab_content_container").height()-$(".member-list-item.notifyNav").height()-10;$(".tab_content_container").css("height",d)}}}else $(".talking-list li:first-child").hasClass("notifyNav")&&$(".notifyNav").remove();var m=s.substring(0,1);0==m?$(".icon-set .settingAlert").addClass("first"):$(".icon-set .settingAlert").hasClass("first")&&$(".icon-set .settingAlert").removeClass("first")}}else 403===e.ec&&"chat"==a.currentPage&&o.Warning("当前登录已断开",3e3)})},ee=function(){$.ajax({url:p+I,type:"post",data:{type:2,item:"notify__1"},cache:!1}).fail(function(){}).done(function(e){e="string"==typeof e?JSON.parse(e):e,200==e.ec&&(a.notifySended=!1)})},te=function(){$.ajax({url:p+I,type:"post",data:{type:2,item:"setting__1"},cache:!1}).fail(function(){}).done(function(e){})},ne=function(){$.ajax({url:p+V,type:"get",data:{},cache:!1}).fail(function(){}).done(function(e){if(e="string"==typeof e?JSON.parse(e):e,200==e.ec&&e.data&&e.data.eggs){var t,e=e.data.eggs;$.each(e,function(e,n){t=n.eggsid,a.corlorfulEgg[t]={Pre:n.pic,Suffix:n.re_title,type:n.type,tipName:n.name,tipDes:n.desc,trigger:n.trigger,eggsid:n.eggsid,sendText:n.text},a.sendedColorEgg[n.eggsid]={gid:[],momoid:[],did:[]}})}})},ae=function(e){var t=JSON.stringify(e);$.ajax({url:p+T,type:"post",data:{data:t},cache:!1}).fail(function(){}).done(function(){})},ie=function(e){$.post(p+L,{customid:e},function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e&&200==e.ec?(o.Warning("已添加",3e3),Q(3,"",!0)):e&&408==e.ec&&o.Warning("添加过了",3e3)})},oe=function(e,t){$.post(p+E,{remoteid:e,type:t},function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e&&200==e.ec})},re=function(e,t){$.post(p+S,{remoteid:e,type:t},function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e&&200==e.ec})},le=function(e,t,n){$.post(p+P,{remoteid:e,remarkname:t},function(i){try{i="string"==typeof i?JSON.parse(i):i}catch(r){}return i&&200==i.ec&&n?(a.profile.user[e].remark=t,n()):void o.Warning(i.em,3e3)})},se=function(e,t,n){$.post(p+A,{type:e,guid:t},function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}var o;o=e&&200==e.ec?e.data.text:e.em,$(n).find(".audio-text").html(o),$(n).removeAttr("style"),"chat"==a.currentPage?a.msgScreenAPI.reinitialise():"chatroom"==a.currentPage&&i.roomHelper.initScroll()})};return{getProfile:j,getMemberProfile:O,getPersonalSetting:G,setPersonalSetting:Y,getGroupDiscuss:R,getGroupDisturbs:F,followPeople:U,getFriendList:N,setGroupDisturbs:W,recentlyUpdate:J,pushFeedBack:K,getRecentTalkTo:X,getBigEmotionList:z,getBigEmotionDetail:Q,getVisited:Z,postNotify:ee,postSetting:te,getColorfulEgg:ne,pushEggCount:ae,collectEmotion:ie,getFollowingList:D,getFansList:B,forceRecentTop:oe,cancelRecentTop:re,setRmarkName:le,audioTranslate:se}}),define("module/mylive/MYLIVE-M-Variable",["require","exports","module"],function(e){var t,n,a,i,o,r,l,s,c="",u="",d={},m={},f=30,p=0,h=-1,g={},v={},y=0,b=!0,x="",w="",$="登录状态已过期，请重新登录",k=100,M=100,C=3,I=3,p=0,V={},T=[],L={},E={onScroll:!0,isMyliveNewMsgTipsShow:!1,isBarrage:!1,isGetMoreUserList:!1};return{myliveFlowPlayer:t,shareDom:c,anchorDom:u,myliveInfo:d,profile:m,maxProfileLength:f,curBarrageSumItem:p,isStar:h,ranksList:n,ranksListAPI:a,onlineUserPage:y,onlineListNext:b,onlineList:i,onlineListAPI:o,onlineUserObj:g,onlineManagerObj:v,chatMsgBox:r,chatMsgBoxAPI:l,firstBarrage:x,firstGift:w,disconnectMsg:$,maxMsgShow:k,maxGiftListItemShow:M,maxGiftEffectItemShow:C,maxEnterListItemShow:I,chatScrollTimer:s,curBarrageSumItem:p,giftList:V,giftEffectQueue:T,giftManyTime:L,status:E}}),define("module/mylive/MYLIVE-M-Helper",["require","exports","module","module/mylive/MYLIVE-M-Variable"],function(e){var t=e("./MYLIVE-M-Variable"),n=function(e){var t,n,a,i;t=rName=n=a=i="";var o,r;o=r="",o=0===e.rtype?"https://web.immomo.com/live/0"+e.rid:"https://web.immomo.com/live/"+e.stid;var l=!0;return"345348180"===e.stid&&(l=!1),t=rName=e.title,a=n="我在陌陌网页版观看["+rName+"]的直播，快来和我一起!",i=window.location.protocol+"//"+window.location.host+e.avatar,r="http://connect.qq.com/widget/shareqq/index.html?url="+o+"&desc="+a+"&title="+t+"&summary="+n+"&pics="+i+"&flash=&site=&style=202&width=24&height=24&showcount=",{copyUrl:o,shareUrl:r,codeUrl:e.rid,isShowOfficialShare:l}},a=function(e,n){if(Object.keys(t.profile).length<t.maxProfileLength)t.profile[e]=n;else{var a=Object.keys(t.profile)[0];delete t.profile[a]}},i=function(e,n){var a=n+"API";t[n]=e.jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),t[a]=t[n].data("jsp")},o=function(e){if(e&&e.length>0)for(var n=e.length-1;n>=0;n--)t.giftList[e[n].pid]=e[n]},r=function(e){return parseInt(e.bd.buyTimes)>1},l=function(e){e=parseInt(e);var t="";switch(!0){case e<5:t="0-4";break;case e>=5&&e<10:t="5-9";break;case e>=10&&e<20:t="10-19";break;case e>=20&&e<30:t="20-29";break;case e>=30:t="30-";break;default:t="0-4"}return t},s=function(e){e=parseInt(e);var t="";switch(!0){case e<50:t="0-49";break;case e>=50&&e<100:t="50-99";break;case e>=100&&e<1e3:t="100-999";break;case e>=1e3&&e<1e4:t="1000-9999";break;case e>=1e4:t="10000-";break;default:t="0-49"}return t};return{createShare:n,cacheProfile:a,initScrollFn:i,cacheGiftList:o,getIfGiftManyTimes:r,getLevelRange:l,getPriceLevel:s}}),define("module/mylive/MYLIVE-API",["require","exports","module","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-M-Helper","module/V2-Tips"],function(e){var t=e("./MYLIVE-M-Variable");t.Helper=e("./MYLIVE-M-Helper");var n=e("../V2-Tips"),a=window.location.protocol+"//"+window.location.host+"/webmomo/api/",i="scene/profile/exp",o="scene/profile/isstar",r="scene/profile/isadmin",l="scene/profile/silenceuser",s="scene/profile/kickuser",c="scene/profile/roominfos",u="scene/profile/userinfo",d="scene/product/ranklist",m="scene/pay/buysgift",f="scene/room/onlineusers",p="scene/product/productsv2",h="scene/room/waitlist",g=function(e){$.ajax({async:!0,url:a+o,type:"POST",cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(a){}200===t.ec&&null!=t.data?e&&e(null,t.data):(n.Warning(t.em,3e3),e&&e({ec:t.ec,em:t.em},null))})},v=function(){$.ajax({async:!0,url:a+r,type:"POST",cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec&&null!=e.data?e.data:n.Warning("服务器繁忙，请稍后重试",3e3)})},y=function(e){$.ajax({async:!0,url:a+i,type:"POST",cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(a){}200===t.ec&&null!=t.data?e&&e(null,t.data):(n.Warning(t.em,3e3),e&&e({ec:t.ec,em:t.em},null))})},b=function(e,t){var i={mtoken:e.mtoken,targetid:e.targetid,roomid:e.roomid,rtype:e.rtype};$.ajax({async:!0,url:a+l,type:"POST",data:i,cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec?t&&t(null,e.data):(n.Warning("服务器繁忙，请稍后重试",3e3),t&&t({ec:e.ec,em:e.em},null))})},x=function(e,t){var i={mtoken:e.mtoken,targetid:e.targetid,roomid:e.roomid,rtype:e.rtype};$.ajax({async:!0,url:a+s,type:"POST",data:i,cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec?t&&t(null,e.data):(n.Warning("服务器繁忙，请稍后重试",3e3),t&&t({ec:e.ec,em:e.em},null))})},w=function(e,t){$.ajax({async:!0,url:a+c,type:"POST",data:{stid:e},cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec&&e.data?t&&t(null,e.data):(n.Warning(e.em,3e3),t&&t({ec:e.ec,em:e.em},null))})},k=function(e,t){$.ajax({async:!0,url:a+f,type:"post",data:{page:e.page,stid:e.stid,rd:e.rd,rt:e.rt},cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec&&e.data?t&&t(null,e.data):(n.Warning(e.em,3e3),t&&t({ec:e.ec,em:e.em},null))})},M=function(e,i){t.profile&&t.profile[e.dmid]?i&&i(null,t.profile[e.dmid]):$.ajax({async:!0,url:a+u,type:"post",data:{dmid:e.dmid,rd:e.rid,token:e.token},cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(a){try{a="string"==typeof a?JSON.parse(a):a}catch(o){}200===a.ec&&a.data?(t.Helper.cacheProfile(e.dmid,a.data),i&&i(null,a.data)):(n.Warning(a.em,3e3),i&&i({ec:a.ec,em:a.em},null))})},C=function(e,t){var i={rd:e.rd,rt:e.rt,sid:e.sid,stid:e.stid};$.ajax({async:!0,url:a+d,type:"post",data:i,cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec&&e.data?t&&t(null,e.data):(n.Warning(e.em,3e3),t&&t({ec:e.ec,em:e.em},null))})},I=function(e,t){$.ajax({async:!0,url:a+m,type:"POST",data:{rd:e.rd,sid:e.sid,stid:e.stid,mtoken:e.mtoken,text:e.text,apiToken:window.token},cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec?t&&t(null,e.data):(n.Warning(e.em,3e3),t&&t({ec:e.ec,em:e.em},null))})},V=function(e,t){var i={rd:e.rd,stid:e.stid};$.ajax({async:!0,url:a+p,type:"post",data:i,cache:!1}).fail(function(){n.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}200===e.ec&&e.data?t&&t(null,e.data):(n.Warning(e.em,3e3),t&&t({ec:e.ec,em:e.em},null))})},T=function(e,t){if(!e.rd||!e.stid)return t&&t({ec:400,em:"参数不全"},null);var n={rd:e.rd,stid:e.stid};$.ajax({async:!0,url:a+h,type:"POST",data:n}).fail(function(){t&&t({ec:500,em:"服务器错误，获取等待连线列表失败"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})};return{getIfIsStar:g,getIfIsAdmin:v,getStarExp:y,postSilenceUser:b,postKickUser:x,getMyliveInfo:w,getOnlineUsers:k,getUserProfile:M,getStarValue:C,postTextBarrage:I,getGiftList:V,getWaitList:T}}),define("lib/collectError",["require","exports","module"],function(e){var t=function(e,t,n){if(t&&!(e.indexOf("未指明的错误")>-1)){var a={app:"webmomo",momoid:window.momoid,message:encodeURIComponent(e),file:t,line:n,ua:window.navigator.userAgent},i=[];for(var o in a)i.push(o+"="+a[o]);return i=i.join("&"),(new Image).src="https://web.immomo.com/webmomo/api/warn/log?"+i+"&t="+Math.random(),!0}},n=function(e,t){var n=[];for(var a in e)n.push(a+"="+e[a]);return n=n.join("&"),(new Image).src=t+n+"&t="+Math.random(),!0};return{init:t,postDot:n}}),define("module/momolive/LIVE-M-Variable",["require","exports","module"],function(e){var t,n,a,i,o,r,l,s,c,u,d,m,f,p,h,g,v,y={},b={},x={},w={},$={},k={},M="",C=0,I=0,V="",T="",L={},E=[],S={},P="",A="",_="",q="",H="",j=0,O=!0,N=!0,D={},B={},R=2e3,F="",W=50,U=0,G=[],Y=!1,J=3,X=!1,z=!1,Q={isScroll:!0,isLiveNewMsgTipsShow:!1,isBarrage:!1,firstBarrageLine:!0,isGetMoreLiveList:!1,updateOnlineUser:!0,isOnlineUserListScroll:!1,isGetMoreUserList:!1,isPostBarrage:!1,isPostProfile:!1,isPostGift:!1,isShareMomo:!1,isShareOfficial:!1,isShareWeixin:!1,isHasPK:!1,pkShowHasScroll:!1,hasGetPlayer:!1,isChatBoxScroll:!1,firstPkShow:!0,myAnchor:!1,closePlayer:!1,hasAnchorOnLive:!1,showAnchor:!1},K={loginDot:"/dot?"},Z=(new Date).getTime(),ee="",te=!1,ne="登录状态已过期，请重新登录",ae=[],ie=!1;return{moreLiveListLive:M,moreLiveListPage:C,roomListPage:I,firstGift:V,giftName:T,giftList:L,giftEffectQueue:E,giftManyTime:S,fansName:P,anchorName:A,liveRoomData:_,playerMsgData:q,firstBarrage:H,onlineUserPage:j,onlineListNext:N,moreLiveNext:O,account:D,isAdmin:Y,maxEnterItemShow:J,playerErrorTimer:f,livePlayer:p,giftDisplayOff:X,danmuDisplayOff:z,status:Q,profile:B,profileToken:F,hasLive:t,hasLiveAPI:n,roomObj:y,liveInfo:b,ranksList:a,ranksListAPI:i,onlineList:o,onlineListAPI:r,onlineUserObj:x,onlineManagerObj:w,chatMsgBox:l,chatMsgBoxAPI:s,fodObj:$,btnFodObj:k,pkList:c,pkListAPI:u,giftBox:d,giftBoxAPI:m,url:K,maxProfileLength:R,heartTimeout:h,chatScrollTimer:g,onShowAnchor:U,anchorOnLive:G,maxTextAreaLength:W,showShareStr:v,startLiveTime:Z,endLiveTime:ee,sendTooFast:te,disconnectMsg:ne,barrageQueue:ae,bindedPlayerEvent:ie}}),define("module/momolive/LIVE-V-Variable",["require","exports","module"],function(e){var t={informationBox:$(".information-box"),anchor:$(".anchor"),roomListContainer:$(".roomListContainer"),liveShowList:$(".liveShow-list"),groupList:$(".groupList"),liveRoomBox:$(".liveRoom-box"),liveRoomContent:$(".liveRoomContent"),playerHeader:$(".playerHeader"),playerContainer:$(".playerContainer"),chatBox:$(".live-chat-box "),msgList:$(".live-msg-list"),floatCalled:$(".float_called"),editBox:$(".live-edit-box"),attraction:$(".attraction"),rankingList:$(".rankingList"),onlineList:$(".onlineList"),userList:$(".userList"),layfolkList:$(".layfolkList"),masterList:$(".masterList"),pkShow:$(".pkShow"),giftBox:$(".gift-box-wrap"),giftToolTip:$(".giftToolTip"),profile:$(".profile"),loginBoxContainer:$("login-box-container"),liveChatBox:$(".live-chat-box"),giftEffectList:$(".liveGiftEffectList"),giftDrawerBox:$(".liveGiftDrawerBox")},n={textarea:$(".editArea"),send:$(".send"),liveGiftEffectFirstEle:$(".liveGiftEffectList .liveGiftEffectItem.first"),liveGiftEffectSecondEle:$(".liveGiftEffectList .liveGiftEffectItem.second"),liveGiftEffectThirdEle:$(".liveGiftEffectList .liveGiftEffectItem.third")};return{box:t,ele:n}}),!function(e){function t(e,t){return e.data("tier-fn",t||function(){}),e}t.box='<div id="tierBox" class="box"></div>',t.createCard=function(e){var n='<div class="profile-box clearfix box"><div class="column-left">'+t.createCard.leftBox(e)+'</div><div class="column-right">'+t.createCard.rightBox(e)+"</div></div>";return n},t.createCard.leftBox=function(e){var n="",a=e.userinfo.profile||{},i=a.sex,o=1==a.normal_vip?'<i class="icon-vip"></i>':"",o=1==a.year_vip?'<i class="icon-vip-year"></i>':o;if(n+='<p class="tit"><span class="'+i+'"><i class="icon-'+i+'"></i><span class="momoid">'+a.momoid+"</span>"+o+'</span></p><ul class="clearfix">',a.photos)for(var r=0,l=a.photos.length;r<l;r++)n+='<li><img src="'+a.photos[r].s+'"></li>';return n+='</ul><p class="tit">'+t.createCard.dealBind(e.userinfo.bind)+"</p>",e.userinfo.spam_regip&&(n+='<p class="normal_user_tip tit">注册IP:<a target="_blank" href="/admin/q1w2e3/userlist/?regip='+e.userinfo.spam_regip.regip+'">'+e.userinfo.spam_regip.regip+'</a></p><p class="normal_user_tip tit">SPAM封禁：'+e.userinfo.spam_regip.count+"次</p>"),e.userinfo.spam_loginip&&(n+='<p class="normal_user_tip tit">登录IP:<a target="_blank" href="/admin/q1w2e3/userlist/?device_ip='+e.userinfo.spam_loginip.loginip+'">'+e.userinfo.spam_loginip.loginip+'</a></p><p class="normal_user_tip tit">SPAM封禁：'+e.userinfo.spam_loginip.count+"次</p>"),e.userinfo.spam_uid&&(n+='<p class="normal_user_tip tit">UID:<a target="_blank" href="/admin/q1w2e3/userlist/?uid='+e.userinfo.spam_uid.uid+'">'+e.userinfo.spam_uid.uid+'</a></p><p class="normal_user_tip tit">SPAM封禁：'+e.userinfo.spam_uid.count+"次</p>"),e.userinfo.spam_mac&&(n+='<p class="normal_user_tip tit">MAC:<a target="_blank" href="/admin/q1w2e3/userlist/?'+a.device.client+"_mac="+e.userinfo.spam_mac.mac+'">'+e.userinfo.spam_mac.mac+'</a></p><p class="normal_user_tip tit">SPAM封禁：'+e.userinfo.spam_mac.count+"次</p>"),e.userinfo.phone_city&&(n+='<p class="normal_user_tip tit">手机归属地：'+e.userinfo.phone_city+"</p>"),e.userinfo.vip&&(n+='<p class="normal_user_tip tit">是会员</p>'),e.userinfo.groups_count&&(n+='<p class="normal_user_tip tit">加入了'+e.userinfo.groups_count+"个群</p>"),e.userinfo.hot_city&&(n+='<p class="normal_user_tip tit">重点城市：'+e.userinfo.hot_city+"</p>"),e.userinfo.friends_count&&(n+='<p class="normal_user_tip tit">共有'+e.userinfo.friends_count+"个双向好友！</p>"),n},t.createCard.rightBox=function(e){var t="",n=e.userinfo.profile||{};return t+='<dl class="dl-horizontal">',n.name&&(t+='<dt><i class="icon-user"></i></dt><dd>'+n.name+"</dd>"),n.sign&&(t+='<dt><i class="icon-pencil"></i></dt><dd>'+n.sign+"</dd>"),n.interest&&(t+='<dt><i class="icon-heart"></i></dt><dd>'+n.interest+"</dd>"),n.job&&(t+='<dt><i class="icon-briefcase"></i></dt><dd>'+n.job+"</dd>"),n.company&&(t+='<dt><i class="icon-map-marker"></i></dt><dd>'+n.company+"</dd>"),n.school&&(t+='<dt><i class="icon-book"></i></dt><dd>'+n.school+"</dd>"),n.hangout&&(t+='<dt><i class="icon-home"></i></dt><dd>'+n.hangout+"</dd>"),n.website&&(t+='<dt><i class="icon-leaf"></i></dt><dd>'+n.website+"</dd>"),n.languages&&(t+='<dt><i class="icon-font"></i></dt><dd>'+n.languages+"</dd>"),t+="</dl>"},t.createCard.dealBind=function(t){var n=["email","phone","sina_weibo","sina_weibo_vip","qqwb","facebook","renren","twitter","douban"],a="";if(t)for(var i=0,o=t.length;i<o;i++)e.inArray(t[i],n)&&(a+='<i class="icon-'+t[i].split("_").join("-")+'"></i>');return a},t.location=function(t,n){var a=t,i=a.outerHeight(),o=a.outerWidth(),r=n.outerHeight(),l=n.outerWidth(),s=a.offset().left+o+"px",c=a.offset().top+"px",u=a.offset().top+r,d=e(window).height()+e(document).scrollTop(),m=a.offset().left+o+l,f=e(window).width();u>d&&(c=Math.max(d-r-i-10,0)+"px"),m>f&&(s=parseFloat(s)-l-o+"px"),n.css({top:c,left:s})},t.getHtml=function(n){var a=n,i="",o=e.Deferred();if(a.attr("data-card")){var r=a.attr("data-card");"JsonData"in window&&JsonData.cardList&&JsonData.cardList[r]?(i=t.createCard(JsonData.cardList[r]),o.resolve(i)):e.when(e.post("/admin/q1w2e3/userinfo/"+r+"?action=getCardData")).then(function(e){i=t.createCard(JSON.parse(e)),o.resolve(i)})}else{if(a.attr("data-tier")){var l=a.attr("data-tier"),s=null!=l.match(/<.+>/g);i=s?l:e(l).html()}if(a.data("tier-fn")&&(i=a.data("tier-fn").call(a)),a.attr("data-img-src")){i=new Image;var c=a.attr("data-img-width")?a.attr("data-img-width"):"300px";i.src=a.attr("data-img-src"),e(i).css({width:c})}o.resolve(i)}return o.promise()},t.prototype={mouseenter:function(n){var a=e(this);e.when(t.getHtml(a)).then(function(n){var i=a.attr("data-tier-time"),o=a.attr("data-tier-class")||"";window.TIERLAZY&&clearTimeout(window.TIERLAZY),i?window.TIERLAZYTIME=setTimeout(function(){e("#tierBox").css("display","block").addClass(o).html(n)},1*i):e("#tierBox").css("display","block").addClass(o).html(n),t.location(a,e("#tierBox"))})},mouseleave:function(t){var n=e(this);window.TIERLAZYTIME&&clearTimeout(window.TIERLAZYTIME),n.is("[data-tier-lazy]")?window.TIERLAZY=setTimeout(function(){e("#tierBox").css("display","none").attr("class","box")},200):e("#tierBox").css("display","none").attr("class","box")}},e.Tier=t,e.fn.tier=function(n){return new t(e(this),n)},e.fn.showImg=function(){e(this).on("mouseenter",t.prototype.mouseenter).on("mouseleave",t.prototype.mouseleave)},e.fn.showTier=function(){e(this).on("mouseenter",t.prototype.mouseenter).on("mouseleave",t.prototype.mouseleave)},e(function(){e("body").append(e(t.box)),e("#tierBox").on("mouseleave",function(t){window.TIERLAZY=setTimeout(function(){e("#tierBox").css("display","none")},200)}).on("mouseenter",function(){window.TIERLAZY&&clearTimeout(window.TIERLAZY)}),e("[data-tier],[data-img-src],[data-card]").on("mouseenter",t.prototype.mouseenter).on("mouseleave",t.prototype.mouseleave)})}($),define("lib/showImg",[],function(){}),define("view/windowSetting",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t<div class="setting-rmarkname layer-content fadeInDown animated">\n\t\t\t<p><i class="fa fa-times-circle cancel"></i></p>\n\t\t\t<h1 class="tip-title">为&nbsp;<i class="name">'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'</i>&nbsp;设置备注：</h1>\n\t\t\t<input class="remark-value" type="text" placeholder="请输入备注名"/>\n\t\t\t<div class="setting-btn-box">\n\t\t\t\t<input class="cancel oper-btn" type="button" value="取消"/>\n\t\t\t\t<input data-id="'+r(o(null!=(i=null!=e?e.data:e)?i.id:i,e))+'" class="submit-rmname oper-btn" type="button" value="保存"/>\n\t\t\t</div>\n\t\t</div>\n'},3:function(e,t,n,a){var i,o=t.helperMissing;return'\t\t<div class="setting-box layer-content fadeInDown animated">\n\t\t\t<h4 class="setting-tilte">网页版设置</h4>\n\t\t\t<ul class="setting-list">\n\t\t\t\t<li class="setting-item">\n\t\t\t\t\t<label class="setting-label">声音</label>\n\t\t\t\t\t<label class="setting-toggle" data-bind="voice_on_off">\n\t\t\t\t\t\t<input type="checkbox" class="toggle-btn-check voice"  '+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.data:e)?i.voice_on_off:i,{name:"isEqual",hash:{equals:1},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+' />\n\t\t\t\t\t\t<span class="toggle-btn"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t\t<li class="setting-item">\n\t\t\t\t\t<label class="setting-label">消息通知</label>\n\t\t\t\t\t<label class="setting-toggle" data-bind="notify_on_off">\n\t\t\t\t\t\t<input type="checkbox" class="toggle-btn-check notify" '+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.data:e)?i.notify_on_off:i,{name:"isEqual",hash:{equals:1},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+'/>\n\t\t\t\t\t\t<span class="toggle-btn"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t\t<li class="setting-item">\n\t\t\t\t\t<label class="setting-label">保留聊天记录</label>\n\t\t\t\t\t<label class="setting-toggle" data-bind="history_on_off">\n\t\t\t\t\t\t<input type="checkbox" class="toggle-btn-check history" '+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.data:e)?i.history_on_off:i,{name:"isEqual",hash:{equals:1},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+'/>\n\t\t\t\t\t\t<span class="toggle-btn"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t\t<li class="setting-item setting-btn">\n\t\t\t\t\t<div class="btn-clear-history">\n\t\t\t\t\t\t清空聊天记录\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t\n\t\t\t</ul>\n\t\t</div>\n'},4:function(e,t,n,a){return"checked"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="layer-window-content">\n<div class="layer-box">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.type:i,{name:"isEqual",hash:{equals:"rmarkname"},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+"</div>\n</div>\n"},useData:!0})}),define("view/windowProfile",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'\t\t\t\t<img class="bg-img" src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.background:i,e))+'" />\n'},3:function(e,t,n,a){return'\t\t\t\t<img class="bg-img" src="/img/group-bg.jpg" />\n'},5:function(e,t,n,a){return"group"},7:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.remarkname:i,e))},9:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.name:i,e))},11:function(e,t,n,a){var i,o=t.helperMissing;return'\n\t\t\t\t\t<p class="constellation">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.constellation:i,e))+'</p>\n\t\t\t\t\t<p class="profile-info">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.profile:e)?i.sex:i,{name:"isEqual",hash:{equals:"F"},fn:this.program(12,a,0),inverse:this.program(14,a,0),data:a}))?i:"")+"\n"+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.profile:e)?i.is_vip:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(16,a,0),inverse:this.program(22,a,0),data:a}))?i:"")},12:function(e,t,n,a){var i;return'\t\t\t\t\t\t<span class="info gender female"><i class="icon-female"></i><span class="age">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.age:i,e))+"</span></span>\n"},14:function(e,t,n,a){var i;return'\t\t\t\t\t\t<span class="info gender male"><i class="icon-male"></i><span class="age">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.age:i,e))+"</span></span>\n"},16:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=(i=null!=e?e.profile:e)?i.svip:i)?i.valid:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(17,a,0),inverse:this.program(20,a,0),data:a}))?i:""},17:function(e,t,n,a){var i;return'\t\t\t\t\t\t<span class="info svip s'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=(i=null!=e?e.profile:e)?i.vip:i)?i.year:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+"vip"+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.profile:e)?i.svip:i)?i.active_level:i,e))+'"> <a target=_blank href="https://www.immomo.com/pay_vip" class="pay-vip"></a> </span>\n'},18:function(e,t,n,a){return"y"},20:function(e,t,n,a){var i;return'\t\t\t\t\t\t<span class="info vip '+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=(i=null!=e?e.profile:e)?i.vip:i)?i.year:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+"vip"+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.profile:e)?i.vip:i)?i.active_level:i,e))+'"> <a target=_blank href="https://www.immomo.com/pay_vip" class="pay-vip"></a></span>\n'},22:function(e,t,n,a){var i;return"\t\t\t\t\t    "+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"self"},fn:this.program(23,a,0),
inverse:this.noop,data:a}))?i:"")+"\n"},23:function(e,t,n,a){return'<span class="info self-nvip"> <a target=_blank href="https://www.immomo.com/pay_vip" class="pay-vip"></a></span>'},25:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.gid:i,{name:"if",hash:{},fn:this.program(26,a,0),inverse:this.noop,data:a}))?i:""},26:function(e,t,n,a){var i,o=t.helperMissing;return'\t\t\t\t\t\t<p class="group-profile-info">\n\t\t\t\t\t\t<span class="level level'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.level:i,e))+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.profile:e)?i["super"]:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(27,a,0),inverse:this.noop,data:a}))?i:"")+'"></span>\n'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.profile:e)?i.is_full:i,{name:"isEqual",hash:{equals:"true"},fn:this.program(29,a,0),inverse:this.program(31,a,0),data:a}))?i:"")+"\t\t\t\t\t\t</p>\n"},27:function(e,t,n,a){return"-vip"},29:function(e,t,n,a){return"\t\t\t\t\t\t\t群已满\n"},31:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.profile:e)?i["super"]:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(32,a,0),inverse:this.program(34,a,0),data:a}))?i:"")+"\t\t\t\t\t\t\t"+r(o(null!=(i=null!=e?e.profile:e)?i.member_count:i,e))+"/"+r(o(null!=(i=null!=e?e.profile:e)?i.member_max:i,e))+"人\n"},32:function(e,t,n,a){return"\t\t\t\t\t\t\t\t会员群\n"},34:function(e,t,n,a){return"\t\t\t\t\t\t\t\t普通群\n"},36:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression,l=t.helperMissing;return' \n\t\t<div class="profiles-tab profiles-tab-user">\n\t\t\t<div class="tab_header">\n\t\t\t\t<ul class="clearfix">\n\t\t\t\t\t<li><a href="javascript:;" class="on">资料</a></li>\n\t\t\t\t\t<li class="photo-tab-title"><a href="javascript:;">相册</a></li>\n\t\t\t\t\t<span class="slider-border"></span>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="profile-detials-content tab_content_container">\n\t\t\t\t<div class="tab_content current">\n\t\t\t\t\t<ul class="profiles-list">\n\t\t\t\t\t<li class="profile-item"><span class="momoid item-title">陌陌号</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+"</span></li>\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.sign:i,{name:"if",hash:{},fn:this.program(37,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.emotion:i,{name:"if",hash:{},fn:this.program(39,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.job:i,{name:"if",hash:{},fn:this.program(41,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.school:i,{name:"if",hash:{},fn:this.program(43,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.home:i,{name:"if",hash:{},fn:this.program(45,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t\t\t\t</ul>\n\t\t\t\t\t<ul class="profiles-list part">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.interest:i,{name:"if",hash:{},fn:this.program(47,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t\t\t\t<li class="profile-item"><span class="sign-up-time item-title">注册日期</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.regtime:i,e))+'</span></li>\n\t\t\t\t\t<li class="profile-item"><span class="constellation item-title">关系</span>\n\t\t\t\t\t<span class="item-value">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"none"},fn:this.program(49,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"follow"},fn:this.program(51,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"fans"},fn:this.program(53,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"both"},fn:this.program(55,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"self"},fn:this.program(57,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t\t\t\t</span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="tab_content">\n\t\t\t\t\t<ul class="photos-list clearfix">\n'+(null!=(i=t.each.call(e,null!=(i=null!=e?e.profile:e)?i.photos:i,{name:"each",hash:{},fn:this.program(59,a,0),inverse:this.noop,data:a}))?i:"")+"\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n"+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"self"},fn:this.program(61,a,0),inverse:this.program(63,a,0),data:a}))?i:"")},37:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t\t\t\t<li class="profile-item"><span class="single-sign item-title">个人签名</span><span class="item-value more-clamp" title="'+r(o(null!=(i=null!=e?e.profile:e)?i.sign:i,e))+'">'+r(o(null!=(i=null!=e?e.profile:e)?i.sign:i,e))+"</span></li>\n"},39:function(e,t,n,a){var i;return'\t\t\t\t\t<li class="profile-item"><span class="emotion item-title">情感状况</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.emotion:i,e))+"</span></li>\n"},41:function(e,t,n,a){var i;return'\t\t\t\t\t<li class="profile-item"><span class="job item-title">职业</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.job:i,e))+"</span></li>\n"},43:function(e,t,n,a){var i;return'\t\t\t\t\t<li class="profile-item"><span class="school item-title">学校</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.school:i,e))+"</span></li>\n"},45:function(e,t,n,a){var i;return'\t\t\t\t\t<li class="profile-item"><span class="home item-title">家乡</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.home:i,e))+"</span></li>\n"},47:function(e,t,n,a){var i;return'\t\t\t\t\t<li class="profile-item"><span class="interest item-title">兴趣爱好</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.interest:i,e))+"</span></li>\n"},49:function(e,t,n,a){return"\t\t\t\t\t\t陌生人\n"},51:function(e,t,n,a){return"\t\t\t\t\t\t关注\n"},53:function(e,t,n,a){return"\t\t\t\t\t\t粉丝\n"},55:function(e,t,n,a){return"\t\t\t\t\t\t好友\n"},57:function(e,t,n,a){return"\t\t\t\t\t\t自己\n"},59:function(e,t,n,a){var i=this.lambda,o=this.escapeExpression;return'\t\t\t\t\t\t<li class="photo-item">\n\t\t\t\t\t\t\t\t<img src="'+o(i(null!=e?e.small:e,e))+'" data-img-src="'+o(i(null!=e?e.large:e,e))+'" />\n\t\t\t\t\t\t</li>\n'},61:function(e,t,n,a){return""},63:function(e,t,n,a){var i;return'\t\t\t<div class="talk-btn-content">\n\t\t\t\t<input type="button" value="'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.profile:e)?i.relation:i,{name:"isEqual",hash:{equals:"both"},fn:this.program(64,a,0),inverse:this.program(66,a,0),data:a}))?i:"")+'" '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.fromId:i,{name:"if",hash:{},fn:this.program(68,a,0),inverse:this.noop,data:a}))?i:"")+' class="talk-to-now" data-momoid="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'"/>\n\t\t\t</div>\n'},64:function(e,t,n,a){return"对话"},66:function(e,t,n,a){return"打招呼"},68:function(e,t,n,a){var i;return'data-from="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.fromId:i,e))+'" '},70:function(e,t,n,a){var i;return"\t\t\t"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.gid:i,{name:"if",hash:{},fn:this.program(71,a,0),inverse:this.program(82,a,0),data:a}))?i:"")},71:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return' \n\t\t\t\t<div class="profiles-tab profiles-gid-tab">\n\t\t\t\t\t<div class="tab_header">\n\t\t\t\t\t\t<ul class="clearfix">\n\t\t\t\t\t\t\t<li><a href="javascript:;" class="on">资料</a></li>\n\t\t\t\t\t\t\t<li class="get-groupMembers-tab"><a href="javascript:;">成员</a></li>\n\t\t\t\t\t\t\t<li><a class="profiles-tab-group" href="javascript:;">相册</a></li>\n\t\t\t\t\t\t\t<span class="slider-border"></span>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="profile-detials-content tab_content_container">\n\t\t\t\t\t\t<div class="tab_content current">\n\t\t\t\t\t\t\t<ul class="profiles-list">\n\t\t\t\t\t\t\t<li class="profile-item"><span class="momoid item-title">群组号</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.gid:i,e))+"</span></li>\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.site_name:i,{name:"if",hash:{},fn:this.program(72,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.distance:i,{name:"if",hash:{},fn:this.program(74,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.owner:i,{name:"if",hash:{},fn:this.program(76,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.sign:i,{name:"if",hash:{},fn:this.program(78,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t\t\t\t\t\t<li class="profile-item"><span class="sign-up-time item-title">创建日期</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.create_time:i,e))+'</span></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tab_content">\n\t\t\t\t\t\t\t<ul class="member-list clearfix">\n\t\t\t\t\t\t\t\t<img class="loading-holder" src="/img/wait.gif" />\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tab_content">\n\t\t\t\t\t\t\t<ul class="photos-list clearfix">\n'+(null!=(i=t.each.call(e,null!=(i=null!=e?e.profile:e)?i.photos:i,{name:"each",hash:{},fn:this.program(80,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="talk-btn-content">\n\t\t\t\t\t<input type="button" value="对话" class="talk-to-now" data-gid="'+r(o(null!=(i=null!=e?e.profile:e)?i.gid:i,e))+'"/>\n\t\t\t\t</div>\n'},72:function(e,t,n,a){var i;return'\t\t\t\t\t\t\t<li class="profile-item"><span class="site-name item-title">地点</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.site_name:i,e))+"</span></li>\n"},74:function(e,t,n,a){var i;return'\t\t\t\t\t\t\t<li class="profile-item"><span class="distance item-title">距离</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.distance:i,e))+"</span></li>\n"},76:function(e,t,n,a){var i;return'\t\t\t\t\t\t\t<li class="profile-item"><span class="owner item-title">群主</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.owner:i,e))+"</span></li>\n"},78:function(e,t,n,a){var i;return'\t\t\t\t\t\t\t<li class="profile-item"><span class="sign item-title">群介绍</span><span class="item-value more-clamp">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.sign:i,e))+"</span></li>\n"},80:function(e,t,n,a){var i=this.lambda,o=this.escapeExpression;return'\t\t\t\t\t\t\t\t<li class="photo-item">\n\t\t\t\t\t\t\t\t\t<img src="'+o(i(null!=e?e.small:e,e))+'" data-img-src="'+o(i(null!=e?e.large:e,e))+'" />\n\t\t\t\t\t\t\t\t</li>\n'},82:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t\t\t<div class="profiles-tab profiles-did-tab">\n\t\t\t\t\t<div class="tab_header">\n\t\t\t\t\t\t<ul class="clearfix">\n\t\t\t\t\t\t\t<li><a href="javascript:;" class="on">资料</a></li>\n\t\t\t\t\t\t\t<li class="get-discussMembers-tab"><a href="javascript:;">成员</a></li>\n\t\t\t\t\t\t\t<span class="slider-border"></span>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="profile-detials-content tab_content_container">\n\t\t\t\t\t\t<div class="tab_content current">\n\t\t\t\t\t\t\t<ul class="profiles-list">\n\t\t\t\t\t\t\t<li class="profile-item"><span class="did item-title">陌陌号</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.did:i,e))+'</span></li>\n\t\t\t\t\t\t\t<li class="profile-item"><span class="owner item-title">群主</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.owner:i,e))+'</span></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tab_content">\n\t\t\t\t\t\t\t<ul class="member-list clearfix">\n\t\t\t\t\t\t\t\t<img class="loading-holder" src="/img/wait.gif" />\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="talk-btn-content">\n\t\t\t\t\t<input type="button" value="对话" class="talk-to-now" data-did="'+r(o(null!=(i=null!=e?e.profile:e)?i.did:i,e))+'"/>\n\t\t\t\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="layer-window-content">\n<div class="layer-box">\n\t<div class="profile-box layer-content fadeInDown animated">\n\t\t<div class="background-content">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.background:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'\t\t\t<div class="main-info-content '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.gid:i,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+'">\n\t\t\t\t<img src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.avatar:i,e))+'" alt="" />\n\t\t\t\t<p class="profile-name">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.remarkname:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.program(9,a,0),data:a}))?i:"")+"</p>\n\t\t\t\t"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.momoid:i,{name:"if",hash:{},fn:this.program(11,a,0),inverse:this.program(25,a,0),data:a}))?i:"")+"\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.momoid:i,{name:"if",hash:{},fn:this.program(36,a,0),inverse:this.program(70,a,0),data:a}))?i:"")+"\t</div>\n\t</div>\n</div>"},useData:!0})}),define("view/windowProfileStore",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'\t\t\t\t<img class="bg-img" src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.background:i,e))+'" />\n'},3:function(e,t,n,a){return'\t\t\t\t<img class="bg-img" src="/img/store-avatar.jpg" />\n'},5:function(e,t,n,a){var i;return'                    <li class="profile-item">\n                    <span class="owner item-title">电话</span><span class="item-value">\n                    '+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.phone:i,e))+"\n                    </span></li>\n"},7:function(e,t,n,a){var i;return'                        <li class="profile-item">\n                            <span class="owner item-title">简介</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.sign:i,e))+"</span>\n                        </li>\n"},9:function(e,t,n,a){var i;return'                        <li class="profile-item">\n                            <span class="owner item-title">地址</span><span class="item-value">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.addr:i,e))+"</span>\n                        </li>\n"},11:function(e,t,n,a){var i=this.lambda,o=this.escapeExpression;return'                        <li class="photo-item">\n                            <img src="'+o(i(null!=e?e.small:e,e))+'" data-img-src="'+o(i(null!=e?e.large:e,e))+'" />\n                        </li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="layer-window-content">\n<div class="layer-box">\n\t<div class="profile-box layer-content fadeInDown animated">\n\t\t<div class="background-content">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.background:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'\t\t\t<div class="main-info-content">\n\t\t\t\t<img src="'+r(o(null!=(i=null!=e?e.profile:e)?i.avatar:i,e))+'" alt="" />\n\t\t\t\t<p class="profile-name">'+r(o(null!=(i=null!=e?e.profile:e)?i.name:i,e))+'</p>\n\t\t\t</div>\n\t\t</div>\n        <div class="profiles-tab profiles-store-tab">\n            <div class="tab_header">\n                <ul class="clearfix">\n                    <li><a href="javascript:;" class="on">资料</a></li>\n                    <li class="photo-tab-title"><a href="javascript:;">相册</a></li>\n                    <span class="slider-border"></span>\n                </ul>\n            </div>\n            <div class="profile-detials-content tab_content_container">\n                <div class="tab_content current">\n                    <ul class="profiles-list">\n                    <li class="profile-item"><span class="did item-title">商家号</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'</span></li>\n                    <li class="profile-item"><span class="owner item-title">店主</span><span class="item-value">'+r(o(null!=(i=null!=e?e.profile:e)?i.owner:i,e))+"</span></li>\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.phone:i,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.sign:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.addr:i,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+'                    </ul>\n                </div>\n                <div class="tab_content">\n                    <ul class="photos-list clearfix">\n'+(null!=(i=t.each.call(e,null!=(i=null!=e?e.profile:e)?i.photos:i,{name:"each",hash:{},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+"                    </ul>\n                </div>\n            </div>\n        </div>\n\t</div>\n\t</div>\n</div>"},useData:!0})}),define("view/windowBigImg",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return'<div class="layer-window-content">\n\t<div class="layer-box">\n\t\t<div class="layer-img">\n\t\t\t<img class="nx-img" src="'+l((i=null!=(i=t.data||(null!=e?e.data:e))?i:o,typeof i===r?i.call(e,{name:"data",hash:{},data:a}):i))+'">\n\t\t\t<a href="'+l((i=null!=(i=t.data||(null!=e?e.data:e))?i:o,typeof i===r?i.call(e,{name:"data",hash:{},data:a}):i))+'" target="_blank"><i class="fa fa-search-plus"></i>查看原图</a>\n\t\t</div>\n\t</div>\n</div>'},useData:!0})}),define("view/windowFeedBack",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return' placeholder="提交反馈请注明你的陌陌号，方便我们联系你" '},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="layer-window-content">\n<div class="layer-box">\n\t<div class="setting-box layer-content fadeInDown animated">\n\t\t<h4 class="setting-tilte">意见反馈</h4>\n\t\t<div class="feedback-content">\n\t\t\t<textarea class="feedback-area"'+(null!=(i=t["if"].call(e,null!=e?e.fromLogin:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'></textarea>\n\t\t</div>\n\t\t<div class="feedback-btn-content">\n\t\t\t<input class="feedback-btn" type="button" value="提交"/>\n\t\t\t<a href="https://live-api.immomo.com/h5/help/home/obshelp" target="_blank"><p class="faq"><span class="title">FAQ：</span><span class="content">电脑直播教程</span></p></a>\n\t\t</div>\n\t</div>\n</div>\n</div>'},useData:!0})}),define("view/windowWxNotSupport",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="layer-window-content">\n    <div class="layer-box">\n        <div class="client-download-box layer-content fadeInDown animated">\n            <h4 class="client-download-title">请下载新版以使用本功能</h4>\n            <div class="feedback-content clearfix">\n                <div class="download-btn-box left">\n                    <a class="download-btn" href="https://download.immomo.com/webmomo/momo_pc_beta_v0.2.3.exe"\n                       id="pc_download" target="_target">\n                        <i class="icon pc"></i>\n                        <p>Windows 7 或以上</p>\n                    </a>\n                </div>\n                <div class="download-btn-box last-ele left">\n                    <a class="download-btn" href="https://download.immomo.com/webmomo/momo_mac_beta_v0.2.3.dmg"\n                       id="mac_download" target="_target">\n                        <i class="icon mac"></i>\n                        <p>OS X10.8 或以上</p>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})}),define("view/liveProfile",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" isAdmin"},3:function(e,t,n,a){return" isStar"},5:function(e,t,n,a){return"/img/sex-male.png"},7:function(e,t,n,a){return"/img/sex-female.png"},9:function(e,t,n,a){var i;return"src='/img/fortuneLevel/ml_w_lv_"+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.fortune:i,e))+"@2x.png'"},11:function(e,t,n,a){var i;return"src='/img/charmLevel/ml_c_lv_"+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.charm:i,e))+"@2x.png'"},13:function(e,t,n,a){return""},15:function(e,t,n,a){return'                <p class="at">@TA</p>\n'},17:function(e,t,n,a){return'            <p class="slience">禁言</p>\n'},19:function(e,t,n,a){return'            <p class="kick">踢出</p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression,l=t.helperMissing;return'<div class="layer-window-content live-layer">\n    <div class="layer-box">\n        <div class="profileContent fadeInDown animated'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.isAdmin:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.isStar:i,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'"  data-fosAnchor="'+r(o(null!=(i=null!=e?e.data:e)?i.fosAnchor:i,e))+'" data-rid="'+r(o(null!=(i=null!=e?e.data:e)?i.rid:i,e))+'" data-dmid="'+r(o(null!=(i=null!=e?e.data:e)?i.dmid:i,e))+'" data-rtype="'+r(o(null!=(i=null!=e?e.data:e)?i.rtype:i,e))+'" data-token="'+r(o(null!=(i=null!=e?e.data:e)?i.token:i,e))+'" data-title="'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+'">\n            <img class="profileIcon" src="'+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" alt=""/>\n            <p class="profileName">'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'</p>\n            <p class="profileMsgIcon">\n                <img class=\'sexIcon\' src=" '+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.data:e)?i.sex:i,{name:"isEqual",hash:{equals:"M"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.data:e)?i.sex:i,{name:"isEqual",hash:{equals:"F"},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+"\"/>\n                <img class='fortunelevel level level"+r(o(null!=(i=null!=e?e.data:e)?i.fortune:i,e))+"' "+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.fortune:i,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+" data-fortune='"+r(o(null!=(i=null!=e?e.data:e)?i.fortune:i,e))+"'/>\n                <img class='charmlevel level level"+r(o(null!=(i=null!=e?e.data:e)?i.charm:i,e))+"' "+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.charm:i,{name:"if",hash:{},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+" data-charm='"+r(o(null!=(i=null!=e?e.data:e)?i.charm:i,e))+'\'/>\n            </p>\n            <p class="fos noFod">关注TA</p>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.isStar:i,{name:"if",hash:{},fn:this.program(13,a,0),inverse:this.program(15,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.slience:i,{name:"if",hash:{},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.kick:i,{name:"if",hash:{},fn:this.program(19,a,0),inverse:this.noop,data:a}))?i:"")+'           <p class="report">举报TA</p>\n            <ul class="reportReasonList">\n                <li class="reportReasonItem titleItem">请告诉我们你想举报该成员的理由：</li>\n                <li class="reportReasonItem reasonItem">色情／骚扰</li>\n                <li class="reportReasonItem reasonItem">垃圾广告</li>\n                <li class="reportReasonItem reasonItem">诽谤辱骂</li>\n                <li class="reportReasonItem reasonItem">血腥暴力</li>\n                <li class="reportReasonItem reasonItem">欺诈（酒托／话费托等骗钱行为）</li>\n                <li class="reportReasonItem reasonItem">违法行为（涉毒／暴恐／违禁品等）</li>\n\n            </ul>\n        </div>\n    </div>\n</div>\n\n'},useData:!0})}),define("view/liveBarrageToolTip",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="layer-window-content live-layer">\n    <div class="layer-box">\n        <div class="barrageToolTip toolTip fadeInDown animated clearfix">\n            <div class="barrageToolTipContent">\n                <p class="toolTipTitle">\n                    每条弹幕会消耗你 '+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.price:i,e))+' 陌币/陌豆\n                </p>\n\n                <p class="barrageSure">\n                    确认发送吗？\n                </p>\n                <input class="nextNoTip" type="checkbox" value="nonono"/>7天不再提醒</br>\n                <p class="btn cancel">取消</p>\n\n                <p class="btn sure right">确认</p>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0})}),define("view/liveGiftToolTip",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="layer-window-content live-layer">\n    <div class="layer-box">\n        <div class="giftToolTip toolTip fadeInDown animated clearfix">\n            <div class="giftToolTipContent">\n                <p class="toolTipTitle">\n                    本次消费为 <span class="consume"></span>陌币/陌豆\n                </p>\n                <p class="consumeSure">\n                    确认消费吗？\n                </p>\n                <input class="nextNoTip" type="checkbox" value="nonono"/>7天不再提醒</br>\n                <p class="btn cancel">取消</p>\n                <p class="btn sure right">确认</p>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0})}),define("view/livePayToolTip",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return"                官网充值温馨提示:\n"},3:function(e,t,n,a){return"                当前余额不足，请去官网充值\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="layer-window-content live-layer">\n    <div class="layer-box">\n        <div class="payToolTip toolTip fadeInDown animated clearfix">\n            <p class="toolTipTitle">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.type:i,{name:"isEqual",hash:{equals:"pay"},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'            </p>\n            <p class="prompt">\n                你的陌陌号是 : <span class="momoid">'+r(o(null!=(i=null!=e?e.data:e)?i.momoid:i,e))+'</span>\n            </p>\n\n            <p class="btn cancel">取消</p>\n            <a class="btn sure right" href="https://www.immomo.com/pay?momoid='+r(o(null!=(i=null!=e?e.data:e)?i.momoid:i,e))+'" target="_blank">去充值</a>\n        </div>\n    </div>\n</div>\n\n\n'},useData:!0})}),define("view/liveOfficialShareToolTip",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="layer-window-content live-layer">\n    <div class="layer-box">\n        <div class="officialShareToolTip toolTip fadeInDown animated clearfix">\n            <p class="toolTipTitle">\n                确认分享到陌陌动态\n            </p>\n            <p class="btn cancel">取消</p>\n            <p class="btn sure right">确认</p>\n        </div>\n    </div>\n</div>'},useData:!0})}),define("module/V2-V-Layer",["require","exports","module","module/V2-API","module/V2-V-Variable","lib/showImg","module/V2-M-Helper","view/windowSetting","view/windowProfile","view/windowProfileStore","view/windowBigImg","view/windowFeedBack","view/windowWxNotSupport","view/liveProfile","view/liveBarrageToolTip","view/liveGiftToolTip","view/livePayToolTip","view/liveOfficialShareToolTip"],function(e){var t=e("./V2-API"),n=e("./V2-V-Variable");e("./../lib/showImg");var a=a||{};a.MHelper=e("./V2-M-Helper");var i=e("../view/windowSetting"),o=e("../view/windowProfile"),r=e("../view/windowProfileStore"),l=e("../view/windowBigImg"),s=e("../view/windowFeedBack"),c=e("../view/windowWxNotSupport"),u=e("../view/liveProfile"),d=e("../view/liveBarrageToolTip"),m=e("../view/liveGiftToolTip"),f=e("../view/livePayToolTip"),p=e("../view/liveOfficialShareToolTip"),h=h||{};return h.onOff=function(e,h,g){if(window.momoid&&n.box.overLayer.find("div.layer-window-content").remove(),"notifyNav"==e&&(n.box.overLayer.append("<div class='layer-window-content notifyLayer'><p class='notifyDes'>请按照以下步骤开启消息通知提醒:</p><img class='notifyImg' src='./img/notifyNav.png' alt=''></div>"),n.box.overLayer.toggleClass("hide")),"liveProfile"==e&&(window.momoid?n.box.overLayer.html(u({data:h})):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(u({data:h}))),n.box.overLayer.toggleClass("hide")),"liveGiftToolTip"==e&&(window.momoid?n.box.overLayer.html(m):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(m)),$(".giftToolTipContent .consume").html(h),n.box.overLayer.toggleClass("hide")),"livePayToolTip"==e&&(window.momoid?n.box.overLayer.html(f({data:h})):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(f({data:h}))),n.box.overLayer.toggleClass("hide")),"liveInsufficientToolTip"==e&&(window.momoid?n.box.overLayer.html(f({data:h})):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(f({data:h}))),n.box.overLayer.toggleClass("hide")),"liveBarrageToolTip"==e&&(window.momoid?n.box.overLayer.html(d({data:h})):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(d({data:h}))),n.box.overLayer.toggleClass("hide")),"liveOfficialShareToolTip"==e&&(window.momoid?n.box.overLayer.html(p):(n.box.overLayer.find(".login-layer").addClass("hide"),n.box.overLayer.find(".live-layer").remove(),n.box.overLayer.append(p)),n.box.overLayer.toggleClass("hide")),"setting"==e&&(n.box.overLayer.append(i({data:h})),n.box.overLayer.toggleClass("hide"),n.box.overLayer.find(".layer-window-content.login-layer").addClass("hide"),$(".icon-set .settingAlert").hasClass("first")&&($(".icon-set .settingAlert").removeClass("first"),t.postSetting())),"bigImg"==e&&(n.box.overLayer.append(l({data:h})),n.box.overLayer.toggleClass("hide")),"feedback"==e&&(window.momoid?n.box.overLayer.append(s()):n.box.overLayer.append(s({fromLogin:!0})),n.box.overLayer.toggleClass("hide")),"momoid"==e&&h){var v={type:"user",id:h,update:!0,from:"ulayer"};t.getProfile(v,function(e,t){if(t){g&&(t.fromId=g);var i={};$.each(t.photos,function(e,t){var n=t.replace("_S","_L");i[e]={large:n,small:t}}),t.photos=i,n.box.overLayer.append(o({profile:t})),$(".profiles-tab").lt_tab({minItems:2,slideBoder:$(".slider-border")}),$(".profiles-tab .tab_content").jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),$(".profiles-tab-user .photo-tab-title").on("click",function(){
$(".photo-item img").showImg()}),n.box.overLayer.toggleClass("hide"),a.MHelper.clampEllipls($(".more-clamp"),1100)}})}if("gid"==e&&h){var v={type:"group",id:h,update:!0,from:"glayer"};t.getProfile(v,function(e,i){if(i){var r={};$.each(i.photos,function(e,t){var n=t.replace("_S","_L");r[e]={large:n,small:t}}),i.photos=r,n.box.overLayer.append(o({profile:i})),$(".profiles-gid-tab").lt_tab({minItems:3,slideBoder:$(".slider-border")}),$(".profiles-gid-tab .tab_content").jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),$(".get-groupMembers-tab").on("click",function(){t.getMemberProfile("group",h)}),$(".profiles-gid-tab .profiles-tab-group").on("click",function(){$(".photo-item img").showImg()}),n.box.overLayer.toggleClass("hide"),a.MHelper.clampEllipls($(".more-clamp"),1100)}})}if("did"==e&&h){var v={type:"discuss",id:h,update:!0,from:"dlayer"};t.getProfile(v,function(e,a){a&&(n.box.overLayer.append(o({profile:a})),$(".profiles-did-tab").lt_tab({minItems:2,slideBoder:$(".slider-border")}),$(".profiles-did-tab .tab_content").jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),$(".get-discussMembers-tab").on("click",function(){t.getMemberProfile("discuss",h)}),n.box.overLayer.toggleClass("hide"))})}if("notOnline"==e?($(".layer .live-layer")[0]&&$(".layer .live-layer").remove(),$(".layer .login-layer").removeClass("hide"),n.box.overLayer.removeClass("hide"),$(".layer .layer-window-content.login-layer").removeClass("hide"),setTimeout(function(){$(".pre-momoid").focus()},10),$(".layer .layer-window-content:not(.login-layer)").remove()):$(".layer .layer-window-content.login-layer").addClass("hide"),"download-new-client"==e&&n.box.overLayer.append(c({data:h})),"rmarkname"==e&&(h.type="rmarkname",n.box.overLayer.append(i({data:h})),n.box.overLayer.toggleClass("hide")),"store"===e){var v={type:"store",id:h,update:!0,from:"slayer"};t.getProfile(v,function(e,t){if(t){if(t.photos&&t.photos.length>0){var a={};$.each(t.photos,function(e,t){var n=t.replace("_S","_L");a[e]={large:n,small:t}}),t.photos=a}n.box.overLayer.append(r({profile:t})),$(".profiles-store-tab .tab_content").jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),n.box.overLayer.toggleClass("hide"),$(".profiles-store-tab").lt_tab({minItems:2,slideBoder:$(".slider-border")}),$(".profiles-store-tab .photo-tab-title").on("click",function(){$(".photo-item img").showImg()})}})}},h.Off=function(e){return $(".layer .live-layer")[0]&&$(".layer .live-layer").remove(),$(".layer .layer-window-content")[1]&&$(".layer .layer-window-content:last-child").remove(),n.box.overLayer.addClass("hide"),!1},h}),define("module/momolive/LIVE-API-V2",["require","exports","module"],function(e){var t=window.location.protocol+"//"+window.location.host+"/webmomo/api/",n="scene/profile/infos",a="scene/profile/roominfos",i=function(e,i){var o={},r="";e.stid?(o.stid=e.stid,r=t+a):e.rid&&e.rt&&(o.rd=e.rid,o.rt=e.rt,r=t+n),$.isEmptyObject(o)&&!r?i&&i({ec:400,em:"参数不全"},null):$.ajax({async:!0,cache:!1,url:r,data:o,type:"POST"}).fail(function(){i&&i({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}e&&200===e.ec&&e.data?i&&i(null,e.data):i&&i({ec:e.ec,em:e.em},null)})};return{getRoomInfo:i}}),define("view/livePlayerItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return'        <li class="playerItem" data-Playerstid="'+l((i=null!=(i=t.stid||(null!=e?e.stid:e))?i:o,typeof i===r?i.call(e,{name:"stid",hash:{},data:a}):i))+'" data-stid="'+l((i=null!=(i=t.stid||(null!=e?e.stid:e))?i:o,typeof i===r?i.call(e,{name:"stid",hash:{},data:a}):i))+'" data-PlayerName="'+l((i=null!=(i=t.name||(null!=e?e.name:e))?i:o,typeof i===r?i.call(e,{name:"name",hash:{},data:a}):i))+'" data-playerIndex="'+l((i=null!=(i=t.key||a&&a.key)?i:o,typeof i===r?i.call(e,{name:"key",hash:{},data:a}):i))+'" data-mtoken="" data-stoken="'+l((i=null!=(i=t.stoken||(null!=e?e.stoken:e))?i:o,typeof i===r?i.call(e,{name:"stoken",hash:{},data:a}):i))+'" data-token="'+l((i=null!=(i=t.token||(null!=e?e.token:e))?i:o,typeof i===r?i.call(e,{name:"token",hash:{},data:a}):i))+'">\n            <img class="playerIcon" src="'+l((i=null!=(i=t.avatar||(null!=e?e.avatar:e))?i:o,typeof i===r?i.call(e,{name:"avatar",hash:{},data:a}):i))+'" alt=""/>\n            <div class="playerMsg">\n                <p class="playerName">'+l((i=null!=(i=t.name||(null!=e?e.name:e))?i:o,typeof i===r?i.call(e,{name:"name",hash:{},data:a}):i))+'</p>\n                <p class="playerStarVal starVal">\n                    <span class="starNum">'+l((i=null!=(i=t.thus||(null!=e?e.thus:e))?i:o,typeof i===r?i.call(e,{name:"thus",hash:{},data:a}):i))+'</span>\n                    <img class="playerStarImg" src="/img/star.png" alt="">\n                </p>\n                <p class="playerFollowVal followVal">\n                    <span class="followNum">'+l((i=null!=(i=t.fos||(null!=e?e.fos:e))?i:o,typeof i===r?i.call(e,{name:"fos",hash:{},data:a}):i))+'</span>\n                    <!-- <img class="playerStarImg" src="/img/star.png" alt=""> -->\n                </p>\n            </div>\n            <img class="checkIcon" src="/img/check.png" alt=""/>\n        </li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/liveChatBox",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="chat-box-inner clearfix">\n    <p class="scrollBtn onScroll">\n        <span class="toggle-btn-top">滚屏</span>\n    </p>\n    <div class="chat-msg-box">\n        <ul class="live-msg-list clearfix">\n        </ul>\n    </div>\n</div>\n<div class="live-R-enter-box">\n    <ul class="live-R-enter-list">\n    </ul>\n</div>'},useData:!0})}),define("view/liveOnlineUserList",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<ul class="onlineList clearfix">\n    <li class="onlineItem onlineMaster">\n        <ul class="userList masterList">\n        </ul>\n    </li>\n    <li class="onlineItem onlineLayfolk">\n        <ul class="userList layfolkList">\n\n        </ul>\n    </li>\n</ul>\n'},useData:!0})}),define("module/momolive/LIVE-M-GiftModel",["require","exports","module"],function(e){var t=[],n=[],a=[],i={0:t,1:n,2:a},o={};t.name=0,n.name=1,a.name=2;var r=function(e){return!!(e.bd&&e.bd.buyTimes>1)},l=function(){var e=[t,n,a].sort(function(e,t){return e.length-t.length}),o=e[0];return i[o.name]},s=function(e){for(var t in i){var n=i[t];if(~n.indexOf(e))return t}return!1},c=function(e,t){o[e]=o[e]||[],o[e].push(t)},u=function(e){var t=l(),n=e.fr+"_"+e.bd.productId;return t.push(n),c(n,e),t.name},d=function(e){var t=e.fr+"_"+e.bd.productId,n=s(t);return n?(c(t,e),n):u(e)},m=function(e,t,n){var a={0:"first",1:"second",2:"third"},r=a[e],l=$("."+n+"GiftEffectItem."+r);if(l.children().length)return!1;var s=i[e],c=s[0];return!!c&&void(o[c]&&o[c].length?t(c,r):(s.shift(),m(e,t)))},f=function(e){var t=!!o[e]&&o[e].shift();return t},p=function(e,t){console.log(i[e]);var n=t.fr+"_"+t.bd.productId;console.log(n,o[n].length)},h=function(){t=[],n=[],a=[],o={},i={0:t,1:n,2:a},t.name=0,n.name=1,a.name=2};return{isBuyTimes:r,pushInRightQueue:d,consoleInfo:p,popQueue:m,getGiftMsg:f,resetQueue:h}}),define("view/liveLoadingMask",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="loading-mask-box">\n     <img class="loading-img" src="/img/loading.gif">\n</div>'},useData:!0})}),define("view/livePlayerError",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return'    <div class="error-message errorcode-'+l((i=null!=(i=t.errorcode||(null!=e?e.errorcode:e))?i:o,typeof i===r?i.call(e,{name:"errorcode",hash:{},data:a}):i))+'">Flash 版本过低或被禁用，请 <span class="download"><a class="download" target="_blank" href="'+l((i=null!=(i=t.downloadURL||(null!=e?e.downloadURL:e))?i:o,typeof i===r?i.call(e,{name:"downloadURL",hash:{},data:a}):i))+'">点击下载</a></span> 或启用 Flash</div>\n'},3:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return'    <div class="error-message errorcode-'+l((i=null!=(i=t.errorcode||(null!=e?e.errorcode:e))?i:o,typeof i===r?i.call(e,{name:"errorcode",hash:{},data:a}):i))+'">加载失败，请 <span class="retry" data-url="'+l((i=null!=(i=t.retryURL||(null!=e?e.retryURL:e))?i:o,typeof i===r?i.call(e,{name:"retryURL",hash:{},data:a}):i))+'" data-cover="'+l((i=null!=(i=t.errorImgURL||(null!=e?e.errorImgURL:e))?i:o,typeof i===r?i.call(e,{name:"errorImgURL",hash:{},data:a}):i))+'">点击重试</span> </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing;return'<div class="player-error-box">\n    <img class="error-img" src="'+this.escapeExpression((o=null!=(o=t.errorImgURL||(null!=e?e.errorImgURL:e))?o:r,"function"==typeof o?o.call(e,{name:"errorImgURL",hash:{},data:a}):o))+'" alt="player error image">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.errorcode:e,{name:"isEqual",hash:{equals:401},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.errorcode:e,{name:"isEqual",hash:{equals:402},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+"</div>"},useData:!0})}),define("module/momolive/LIVE-M-Helper",["require","exports","module","module/momolive/LIVE-V-Variable","module/momolive/LIVE-M-Variable","module/momolive/LIVE-API-V2","module/chatroom/room-M-Helper","lib/collectError","lib/js.cookie","module/V2-storage","view/livePlayerItem","view/liveChatBox","view/liveOnlineUserList","module/momolive/LIVE-M-GiftModel","view/liveLoadingMask","view/livePlayerError"],function(e){var t=e("./LIVE-V-Variable"),n=e("./LIVE-M-Variable"),a={},i=e("./LIVE-API-V2");a.roomHelper=e("../chatroom/room-M-Helper");var o={},r=e("../../lib/collectError"),l=e("../../lib/js.cookie"),s=e("../V2-storage"),c=e("../../view/livePlayerItem"),u=e("../../view/liveChatBox"),d=e("../../view/liveOnlineUserList"),m=e("./LIVE-M-GiftModel"),f=e("../../view/liveLoadingMask"),p=e("../../view/livePlayerError");return o.initListScroll=function(){n.onlineList=$(".live-container .attractionContent .fansAttraction .onlineUsers").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.onlineListAPI=n.onlineList.data("jsp")},o.initRankingListScroll=function(){n.ranksList=$(".live-container .attractionContent .fansAttraction .starCharts").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.ranksListAPI=n.ranksList.data("jsp")},o.initChatScroll=function(e){n.chatMsgBox=$(".live-container .liveRoomContent .chat-msg-box").jScrollPane({contentWidth:"0px",animateScroll:!0}),n.chatMsgBoxAPI=n.chatMsgBox.data("jsp"),e&&n.chatMsgBoxAPI.scrollToBottom()},o.initLiveScroll=function(){n.hasLive=$(".live-container .roomListContainer .roomList .recommend-live-list-box").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.hasLiveAPI=n.hasLive.data("jsp")},o.giftScroll=function(){n.giftBox=$(".live-container .attractionContent .gift-box-wrap").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.giftBoxAPI=n.giftBox.data("jsp")},o.initAllLiveScroll=function(){o.initListScroll(),o.initChatScroll(),o.initLiveScroll(),o.initRankingListScroll(),o.giftScroll()},o.initPk=function(e){e&&1==e.mode?(n.status.isHasPK=!0,n.playerMsgData=e.pkstars,$(".pkShow-box").css({display:"block",height:"62px"}),t.box.pkShow.html(c({list:e.pkstars})),t.box.pkShow.css("display","inline-block"),$(".gift-box-wrap").css("height","193px"),window.innerWidth>1400&&window.innerHeight>860&&$(".gift-box-wrap").addClass("max-hasPk"),window.innerHeight<640&&$(".gift-box-wrap").addClass("min-hasPk"),n.pkList=$(".live-container .attraction .pkShow-box").jScrollPane().hover(function(){$(this).find(".jspHorizontalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspHorizontalBar").stop().fadeTo("fast",0)}),n.pkListAPI=n.pkList.data("jsp"),setTimeout(function(){n.pkListAPI.reinitialise()},500)):(n.status.isHasPK=!1,$(".pkShow-box").css({display:"none"}),t.box.pkShow.html(""),$(".gift-box-wrap").css("height","253px"),window.innerWidth>1400&&window.innerHeight>860&&$(".gift-box-wrap").hasClass("max-hasPk")&&$(".gift-box-wrap").removeClass("max-hasPk"),window.innerHeight<640&&$(".gift-box-wrap").hasClass("min-hasPk")&&$(".gift-box-wrap").removeClass("min-hasPk"))},o.liveNewMsgTips=function(e){e?$("#liveNewMsgTips").removeClass("hide"):$("#liveNewMsgTips").addClass("hide"),n.status.isLiveNewMsgTipsShow=e},o.loginRefresh=function(){window.momoid&&($(".roomListContainer .myAnchor").removeClass("hide"),$(".attraction .gift-box .payItem a").attr("href","javascript:;"),window.room?window.room.disconnected?window.room.connect():window.room.connected&&a.roomHelper.socketControl($(".collect-room-btn").attr("data-id"),$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid")):window.room=window.roomSocket.init())},o.myAnchorGuide=function(){n.anchorOnLive[0]&&(setTimeout(function(){"/live"==window.location.pathname||window.location.pathname.match(/^\/live\/\d+/)||$(".operate-content .myAnchor-guide-tip").removeClass("hide")},1e3),setTimeout(function(){$(".operate-content .myAnchor-guide-tip").hasClass("hide")||$(".operate-content .myAnchor-guide-tip").addClass("hide")},6e4))},o.closePlayer=function(){$(".playerContent").hasClass("miniPlaying")&&$(".playerContent").removeClass("miniPlaying").css("top","100px").css("left","").css("right","10px"),$(".live-page-window .liveRoom-box").prepend('<div class="offPlaceHolder">请在左侧选择直播间</div>'),$(".liveRoomContent .playerContent").html("").attr("data-rd","").attr("data-momoid",""),$(".liveRoomContent .playerHeader .anchor").html(""),$(".live-chat-box").html(u()),t.box.giftEffectList.children().html(""),n.giftEffectQueue=[],n.giftManyTime={},m.resetQueue(),$(".live-gift-animation-box")[0]&&$(".live-gift-animation-box").remove(),$(".fansAttraction .rankingList").html(""),$(".fansAttraction .onlineList").html(d()),$(".gift-box-wrap .gift-box").html("");var e="";$(".room-talk-to-box .talk-room-operate")[0]&&$(".room-talk-to-box .talk-room-operate .collect-room-btn").attr("data-id")&&(e=$(".room-talk-to-box .talk-room-operate .collect-room-btn").attr("data-id")),window.room&&a.roomHelper.socketControl(e,null,null,null),n.endLiveTime=(new Date).getTime()},o.cacheGiftList=function(e){if(e&&e.length>0)for(var t=e.length-1;t>=0;t--)n.giftList[e[t].pid]=e[t]},o.getLevelRange=function(e){e=parseInt(e);var t="";switch(!0){case e<5:t="0-4";break;case e>=5&&e<10:t="5-9";break;case e>=10&&e<20:t="10-19";break;case e>=20&&e<30:t="20-29";break;case e>=30:t="30-";break;default:t="0-4"}return t},o.getPriceLevel=function(e){e=parseInt(e);var t="";switch(!0){case e<50:t="0-49";break;case e>=50&&e<100:t="50-99";break;case e>=100&&e<1e3:t="100-999";break;case e>=1e3&&e<1e4:t="1000-9999";break;case e>=1e4:t="10000-";break;default:t="0-49"}return t},o.storeUserSetting=function(e){var t="",a="";t=!e.live_gift_notice||1!==parseInt(e.live_gift_notice),a=!e.live_danmu_notice||1!==parseInt(e.live_danmu_notice),n.firstGift=t,n.firstBarrage=a},o.initPlayer=function(e,t,a){a=a||{},t.splitstatus&&2===t.splitstatus&&(a.forceObs=!0),$("#flowplayer").after(f()),n.playerErrorTimer&&clearTimeout(n.playerErrorTimer);var c=Number(s.get("volume"))||100,u=s.get("muted")||!1;n.livePlayer=$f(e,{src:"/media/flowplayer-3.2.18.swf",wmode:"opaque",quality:"best",buffering:!1,allowfullscreen:!1,onFail:function(){return n.playerErrorTimer&&clearTimeout(n.playerErrorTimer),$(".playerContent").children().hide(),$(".playerContent").append(p({errorcode:401,errorImgURL:t.cover,downloadURL:"https://get.adobe.com/cn/flashplayer"})),$f().stop(),$(".playerContent .loading-mask-box").remove(),!1}},{plugins:{controls:null},playlist:[{url:t.url,onStart:function(){(1===t.rtype||0===t.rtype||a.forceObs)&&n.livePlayer.getClip().metaData.height/n.livePlayer.getClip().metaData.width===.75&&$("#flowplayer object").addClass("scale-4-3"),clearTimeout(n.playerErrorTimer),setTimeout(function(){$(".playerContent .loading-mask-box").remove()},500),u?$f().mute():$f().unmute(),$f().setVolume(c),$f().setKeyboardShortcutsEnabled(!1);var e=$f().getStatus();e&&e.muted?$(".playerContent .control-bar .volume-btn").addClass("is-muted"):$(".playerContent .control-bar .volume-btn").removeClass("is-muted");var i=$f().getVolume();$(".playerContent .control-bar .volume-level").css("width",i+"%")},onError:function(){n.playerErrorTimer&&clearTimeout(n.playerErrorTimer),$(".playerContent").children().hide(),$(".playerContent").append(p({errorcode:402,errorImgURL:t.cover,retryURL:t.url})),$f().stop(),$(".playerContent .loading-mask-box").remove()},onBufferEmpty:function(){var e=n.liveInfo,t={};0===e.rtype?(t.rid=e.rid,t.rt=e.rtype):t.stid=e.stid,i.getRoomInfo(t,function(e,t){if(!e){var n=t;n.live&&n.url&&(n.url=n.url.replace("_momo352p",""),o.initPlayer("flowplayer",n))}})},onBeforeBegin:function(){n.playerErrorTimer=setTimeout(function(){$(".playerContent").children().hide(),$(".playerContent").append(p({errorcode:402,errorImgURL:t.cover,retryURL:t.url})),$f().stop(),$(".playerContent .loading-mask-box").remove()},1e4)}}]}),n.bindedPlayerEvent||(n.bindedPlayerEvent=!0,$(".playerContainer").on("click",function(e){var t=$(this).find(".playerContent");t.hasClass("miniPlaying")||(t.hasClass("is-pausing")?($f().resume(),t.removeClass("is-pausing")):($f().pause(),t.addClass("is-pausing")))}).on("click",".control-bar .right",function(e){e.stopPropagation()}).on("click",".control-bar .gift-btn",function(){$(this).toggleClass("off"),n.giftDisplayOff=!!$(this).hasClass("off"),m.resetQueue(),$(".giftEffectWrap").remove(),$(this).attr("title",$(this).hasClass("off")?"显示礼物":"隐藏礼物")}).on("click",".control-bar .danmu-btn",function(){$(this).toggleClass("off"),n.danmuDisplayOff=!!$(this).hasClass("off"),$(".flowplayer .worth_word").remove(),n.barrageQueue=[],$(this).attr("title",$(this).hasClass("off")?"打开弹幕":"关闭弹幕")}).on("click",".control-bar .volume-btn",function(){$(this).hasClass("is-muted")?($f().unmute(),s.set("muted",!1),$(this).removeClass("is-muted")):($f().mute(),s.set("muted",!0),$(this).addClass("is-muted"))}).on("click",".control-bar .fullscreen-btn",function(){if($(this).hasClass("fullscreen")){$(this).removeClass("fullscreen");var e=$(".playerContent"),t=$(".flowplayer");e.removeClass("fullscreen"),t.removeClass("fullscreen"),$(".layer").addClass("hide"),$(".liveRoom-box").removeClass("visible")}else{$(this).addClass("fullscreen");var e=$(".playerContent"),t=$(".flowplayer");e.addClass("fullscreen"),t.addClass("fullscreen"),$(".layer").removeClass("hide"),$(".layer .layer-window-content").addClass("hide"),$(".liveRoom-box").addClass("visible"),m.resetQueue(),$(".giftEffectWrap").remove();var a=window.momoid?"m-"+window.momoid:"c-"+l.get("cId");r.postDot({m:"live",a:"fullscreen",u:a},n.url.loginDot)}}).on("mouseup",".control-bar .volume-slider",function(e){var t=75,n=e.offsetX>t?t:e.offsetX;$(this).find(".volume-level").css("width",n/t*100+"%");var a=parseInt(n/t*100);$f().setVolume(a),s.set("volume",a)}))},o}),define("view/liveAnchor",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'        <div class="pkRoomMsg">\n            <p class="pkRoomName">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.title:i,e))+"</p>\n        </div>\n"},3:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <img class="anchorIcon" src=\''+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'\' alt=""/>\n        <div class="anchorMsg">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.name:i,{name:"isEqual",hash:{equals:null!=(i=null!=e?e.data:e)?i.title:i},fn:this.program(4,a,0),inverse:this.program(6,a,0),data:a}))?i:"")+'            <div class="fans">\n'+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.data:e)?i.self:i,{name:"unless",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")+'                <div class="starVal">\n                    <div class="starIcon"><img class="starImg" src="../img/star.png" alt=""/>星光</div>\n                    <strong class="starNum star">'+r(o(null!=(i=null!=e?e.data:e)?i.thus:i,e))+"</strong>\n                </div>\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.fos:i,{name:"if",hash:{},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:"")+"            </div>\n        </div>\n"},4:function(e,t,n,a){var i;return'            <p class="anchorName">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.name:i,e))+"</p>\n"},6:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <p class="anchorName">'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'： </p>\n            <p class="roomName">'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+"</p>\n"},8:function(e,t,n,a){var i;return'                <span class="focusBtn '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.fod:i,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.program(11,a,0),data:a}))?i:"")+'"> '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.fod:i,{name:"if",hash:{},fn:this.program(13,a,0),inverse:this.program(15,a,0),data:a}))?i:"")+" </span>\n"},9:function(e,t,n,a){return"fod"},11:function(e,t,n,a){return"noFod"},13:function(e,t,n,a){return"已关注"},15:function(e,t,n,a){return"关注"},17:function(e,t,n,a){var i;return'                <div class="starVal">\n                    <div class="starIcon">粉丝</div>\n                    <strong class="starNum fllow">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.fos:i,e))+"</strong>\n                </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="anchorMessage" data-stid="'+r(o(null!=(i=null!=e?e.data:e)?i.stid:i,e))+'" data-roomName="'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+'" data-anchorName="'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'" data-mtoken="'+r(o(null!=(i=null!=e?e.data:e)?i.mtoken:i,e))+'" data-stoken="'+r(o(null!=(i=null!=e?e.data:e)?i.stoken:i,e))+'">\n    <div class="anchorInfo">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.mode:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'        <div class="close right">\n            <span class="closeTitle">关闭</span>\n        </div>\n        <div class="share right">\n            <p class="goShare">\n                 分享\n                 <i class="fa fa-angle-down"></i>\n            </p>\n            <div class="shareContainer" id="shareContainer"></div>\n\n        </div>\n    </div>\n</div>\n'},useData:!0})}),define("view/liveEditBox",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="live-edit-box-inner">\n    <span id="liveNewMsgTips" class="live-new-msg-tips hide">底部有新消息</span>\n    <div class="editAreaWrap">\n        <p class="barrageBtn">\n            <label class="setting-toggle" data-bind="barrage-on-off">\n                <img class="toggle-btn barrage-toggle" src="../img/barrageBC.png" alt=""/>\n                <img class="toggle-btn-top" src="../img/barrageT.png" alt=""/>\n                <span class="barrageText">弹</span>\n            </label>\n        </p>\n        <input class="editArea" placeholder="快和大家一起聊天吧">\n    </div>\n    <span class="sendBtn">发送</span>\n</div>'},useData:!0})}),define("view/liveGiftItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li data-batterCount="0"\n             class="giftItem left"\n             data-index="'+s((o=null!=(o=t.key||a&&a.key)?o:r,typeof o===l?o.call(e,{name:"key",hash:{},data:a}):o))+'"\n             data-giftId="'+s((o=null!=(o=t.pid||(null!=e?e.pid:e))?o:r,typeof o===l?o.call(e,{name:"pid",hash:{},data:a}):o))+'"\n             data-giftPrice="'+s((o=null!=(o=t.price||(null!=e?e.price:e))?o:r,typeof o===l?o.call(e,{name:"price",hash:{},data:a}):o))+'"\n             data-giftName="'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:r,typeof o===l?o.call(e,{name:"name",hash:{},data:a}):o))+'"\n             data-giftImg="'+s((o=null!=(o=t.image||(null!=e?e.image:e))?o:r,typeof o===l?o.call(e,{name:"image",hash:{},data:a}):o))+'"\n             data-giftValue="'+s((o=null!=(o=t.descs||(null!=e?e.descs:e))?o:r,typeof o===l?o.call(e,{name:"descs",hash:{},data:a}):o))+'"\n             data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+'">\n            <img class="giftIcon" src="'+s((o=null!=(o=t.image||(null!=e?e.image:e))?o:r,typeof o===l?o.call(e,{name:"image",hash:{},data:a}):o))+'" alt=""/>\n            <p class="giftValue"> '+(null!=(i=t["if"].call(e,null!=e?e.price:e,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.program(5,a,0),data:a}))?i:"")+"</p>\n        </li>\n"},3:function(e,t,n,a){var i;return this.escapeExpression((i=null!=(i=t.price||(null!=e?e.price:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"price",hash:{},data:a}):i))+"&nbsp;陌币"},5:function(e,t,n,a){return"免费"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/liveOnlineUserItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='userItem layfolkItem clearfix' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\">\n            <img class='userIcon' src='"+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+"' alt=''/>\n            <div class='userMsg'>\n                <p class='userName'>"+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+"</p>\n                <img class='sexIcon'  src='"+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"M"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"F"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"'/>\n                <img class='fortunelevel level level"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.fortune:e,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+" data-fortune='"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"'/>\n                <img class='charmlevel level level"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.charm:e,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+" data-charm='"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"'/>\n            </div>\n        </li>\n"},3:function(e,t,n,a){return"/img/sex-male.png"},5:function(e,t,n,a){return"/img/sex-female.png"},7:function(e,t,n,a){var i;return"src='/img/fortuneLevel/ml_w_lv_"+this.escapeExpression((i=null!=(i=t.fortune||(null!=e?e.fortune:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"fortune",hash:{},data:a}):i))+"@2x.png'"},9:function(e,t,n,a){var i;return"src='/img/charmLevel/ml_c_lv_"+this.escapeExpression((i=null!=(i=t.charm||(null!=e?e.charm:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"charm",hash:{},data:a}):i))+"@2x.png'"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return(null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+"\n"},useData:!0})}),define("view/liveOnlineMasterItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='userItem masterItem clearfix' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\">\n            <img class='userIcon' src='"+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+"' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\"/>\n            <div class='userMsg'>\n                <p class='userName masterMsg'>"+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+'</p>\n                <img class="district" src="/img/masterIcon.png"/>\n                <img class=\'sexIcon\'  src=\''+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"M"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"F"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"'/>\n                <img class='fortunelevel level level"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.fortune:e,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+" data-fortune='"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"'/>\n                <img class='charmlevel level level"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.charm:e,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+" data-charm='"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"'/>\n            </div>\n        </li>\n"},3:function(e,t,n,a){return"/img/sex-male.png"},5:function(e,t,n,a){return"/img/sex-female.png"},7:function(e,t,n,a){
var i;return"src='/img/fortuneLevel/ml_w_lv_"+this.escapeExpression((i=null!=(i=t.fortune||(null!=e?e.fortune:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"fortune",hash:{},data:a}):i))+"@2x.png'"},9:function(e,t,n,a){var i;return"src='/img/charmLevel/ml_c_lv_"+this.escapeExpression((i=null!=(i=t.charm||(null!=e?e.charm:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"charm",hash:{},data:a}):i))+"@2x.png'"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/livePlayer",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" mobile-device"},3:function(e,t,n,a){var i,o=t.helperMissing;return'        <div id="flowplayer" class="flowplayer '+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.data:e)?i.rtype:i,{name:"isEqual",hash:{equals:0},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+'">\n        </div>\n'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.data:e)?i.master_push_mode:i,{name:"isEqual",hash:{equals:1},fn:this.program(6,a,0),inverse:this.noop,data:a}))?i:"")+'        <div class="fl-ui">\n            <div class="video clearfix">\n                <div class="float_called"></div>\n            </div>\n            <p class="onWatch">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.on:i,e))+"在看</p>\n"+(null!=(i=(t.compare||e&&e.compare||o).call(e,null!=(i=null!=e?e.data:e)?i.rtype:i,0,{name:"compare",hash:{operator:"!="},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")+'            <div class="control-bar">\n                <i class="play-btn"></i>\n                <div class="right">\n                    <i class="gift-btn'+(null!=(i=t["if"].call(e,null!=e?e.giftOnOff:e,{name:"if",hash:{},fn:this.program(10,a,0),inverse:this.noop,data:a}))?i:"")+'" title="关闭礼物"></i>\n                    <i class="danmu-btn'+(null!=(i=t["if"].call(e,null!=e?e.danmuOnOff:e,{name:"if",hash:{},fn:this.program(10,a,0),inverse:this.noop,data:a}))?i:"")+'" title="关闭弹幕"></i>\n                    <i class="volume-btn"></i>\n                    <div class="volume-slider"><div class="volume-level"></div></div>  \n                    <i class="fullscreen-btn"></i> \n                </div>\n            </div>\n        </div>\n'},4:function(e,t,n,a){return"officialLive"},6:function(e,t,n,a){var i;return'        <div class="voice-live-layer-box">\n            <div class="owner-box">\n                <div class="avatar">\n                    <img src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" alt="语音直播封面">\n                </div>\n                <div class="desc-box">\n                    <p class="desc">正在进行语音直播</p>\n                </div>\n            </div>\n        </div>\n'},8:function(e,t,n,a){var i;return'                <p class="anchor-info">\n                    <img class="live-layer-logo" src="/img/momo_word_bg_white.png">\n                    <span class="live-layer-momoid">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.stid:i,e))+"</span>\n                </p>\n"},10:function(e,t,n,a){return" off"},12:function(e,t,n,a){var i;return'        <img class="cover" src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.cover:i,e))+'" alt="">\n        <div class="goStroll">播主不在,去看看其他直播</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div id="playerContent" class="playerContent '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.vsplit:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'"  data-rd="'+r(o(null!=(i=null!=e?e.data:e)?i.rid:i,e))+'" data-sid="'+r(o(null!=(i=null!=e?e.data:e)?i.sid:i,e))+'" data-token="'+r(o(null!=(i=null!=e?e.data:e)?i.token:i,e))+'" data-mtoken="'+r(o(null!=(i=null!=e?e.data:e)?i.mtoken:i,e))+'" data-rtype="'+r(o(null!=(i=null!=e?e.data:e)?i.rtype:i,e))+'" data-title="'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+'" data-avatar="'+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" data-momoid="'+r(o(null!=(i=null!=e?e.data:e)?i.stid:i,e))+'" >\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.program(12,a,0),data:a}))?i:"")+"</div>"},useData:!0})}),define("view/liveRankingItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li class="rankingItem '+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"0"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"1"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"2"},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'" data-rl-mid="'+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+'">\n            <img class="fansIcon" src="'+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+'"/>\n            <div class="contributionMsg">\n                <p class="contributionTitle">'+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+'</p>\n                <p class="contributionVal">'+s((o=null!=(o=t.score||(null!=e?e.score:e))?o:r,typeof o===l?o.call(e,{name:"score",hash:{},data:a}):o))+'<img class="rankStarImg" src="/img/star.png" alt=""/></p>\n            </div>\n            '+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"0"},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+"\n            "+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"1"},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+"\n            "+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"2"},fn:this.program(13,a,0),inverse:this.noop,data:a}))?i:"")+"\n        </li>\n"},3:function(e,t,n,a){return"rank1"},5:function(e,t,n,a){return"rank2"},7:function(e,t,n,a){return"rank3."},9:function(e,t,n,a){return' <img class="ranking" src="/img/rank1.png" alt=""/>'},11:function(e,t,n,a){return' <img class="ranking" src="/img/rank2.png" alt=""/>'},13:function(e,t,n,a){return' <img class="ranking" src="/img/rank3.png" alt=""/>'},15:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'    <div class="error-box" data-ec="'+r(o(null!=(i=null!=e?e.err:e)?i.ec:i,e))+'">\n        <p class="error-message">\n            '+r(o(null!=(i=null!=e?e.err:e)?i.em:i,e))+"\n        </p>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return(null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.err:e,{name:"if",hash:{},fn:this.program(15,a,0),inverse:this.noop,data:a}))?i:"")},useData:!0})}),define("view/liveRoomList",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return"hasLive"},3:function(e,t,n,a){return"noLive"},5:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <a class="onShowGroup" data-l_rid="'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.rid:i,e))+'" data-l_rtype="'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.rtype:i,e))+'" data-momoid="'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.stid:i,e))+'">\n            <div class="onshowImgWrap">\n                <img class="onShowImg" src="'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.cover:i,e))+'"/>\n               <p class="onShowIcon">'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.stimetag:i,e))+'</p>\n            </div>\n            <p class="onShowTeam"> '+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.title:i,e))+'</p>\n            <p class="onShowDes">'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.gog:i,e))+'</p>\n            <p class="onWatch">'+r(o(null!=(i=null!=(i=null!=e?e.data:e)?i.l_infos:i)?i.on:i,e))+'在看</p>\n        </a>\n        <div class="moreGroup">\n'},7:function(e,t,n,a){return" hide"},9:function(e,t,n,a){return"recommend-haslive-list-box"},11:function(e,t,n,a){return"recommend-nolive-list-box"},13:function(e,t,n,a){return"groupList hasLiveRoomList"},15:function(e,t,n,a){return"liveShow-list noLiveRoomList"},17:function(e,t,n,a){return"anchor-groupList hasLiveRoomList"},19:function(e,t,n,a){return"anchor-liveShow-list noLiveRoomList"},21:function(e,t,n,a){return"        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="roomList  '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+'            <img class="liveShowIcon" src="/img/hotLive.png" alt=""/>\n            <span class="liveShow">热门直播</span>\n            <span class="myAnchor'+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.data:e)?i.login:i,{name:"unless",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'">我的主播</span>\n            <div class="recommend-live-list-box '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.program(11,a,0),data:a}))?i:"")+'">\n                <ul class="liveRoomLists liveRoomList clearfix '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(13,a,0),inverse:this.program(15,a,0),data:a}))?i:"")+'">\n                </ul>\n                <ul class="liveRoomLists liveAnchorList clearfix '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(17,a,0),inverse:this.program(19,a,0),data:a}))?i:"")+' hide">\n                </ul>\n                <div class="more">\n                    <p class="seeMore">查看更多</p>\n                </div>\n            </div>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(21,a,0),inverse:this.noop,data:a}))?i:"")+"    </div>\n"},useData:!0})}),define("view/liveMyAnchorItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='userItem roomDetail anchorItem clearfix' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+'" data-rid="'+s((o=null!=(o=t.rid||(null!=e?e.rid:e))?o:r,typeof o===l?o.call(e,{name:"rid",hash:{},data:a}):o))+'" data-rtype="'+s((o=null!=(o=t.rtype||(null!=e?e.rtype:e))?o:r,typeof o===l?o.call(e,{name:"rtype",hash:{},data:a}):o))+'" data-momoid="'+s((o=null!=(o=t.stid||(null!=e?e.stid:e))?o:r,typeof o===l?o.call(e,{name:"stid",hash:{},data:a}):o))+"\">\n            <img class='userIcon' src='"+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+"'/>\n            <div class='userMsg'>\n                <p class='userName'>"+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:r,typeof o===l?o.call(e,{name:"title",hash:{},data:a}):o))+'</p>\n                <p class="userDesc">'+(null!=(i=t["if"].call(e,null!=e?e.live:e,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.program(6,a,0),data:a}))?i:"")+"</p>\n            </div>\n            "+(null!=(i=t["if"].call(e,null!=e?e.live:e,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")+"\n\n        </li>\n"},3:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.on:e,{name:"if",hash:{},fn:this.program(4,a,0),inverse:this.program(6,a,0),data:a}))?i:""},4:function(e,t,n,a){var i;return this.escapeExpression((i=null!=(i=t.on||(null!=e?e.on:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"on",hash:{},data:a}):i))+"在看"},6:function(e,t,n,a){var i;return this.escapeExpression((i=null!=(i=t.notice||(null!=e?e.notice:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"notice",hash:{},data:a}):i))},8:function(e,t,n,a){return'<div class="anchorLive">正在直播</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/liveMoreError",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<span class="errorMsg">已没有更多</span>'},useData:!0})}),define("view/liveOnlineError",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'    <div class="error-box" data-ec="'+r(o(null!=(i=null!=e?e.err:e)?i.ec:i,e))+'">\n        <p class="error-message">\n            '+r(o(null!=(i=null!=e?e.err:e)?i.em:i,e))+"\n        </p>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.err:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("module/momolive/LIVE-API",["require","exports","module","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-V-Layer","module/V2-M-Variable","module/V2-M-Helper","module/chatroom/room-M-Helper","module/momolive/LIVE-M-Helper","module/V2-Tips","lib/js.cookie","lib/collectError","module/momolive/LIVE-M-GiftModel","view/liveAnchor","view/liveChatBox","view/liveEditBox","view/liveGiftItem","view/liveOnlineUserItem","view/liveOnlineMasterItem","view/livePlayer","view/liveRankingItem","view/liveRoomItem","view/liveRoomList","view/liveMyAnchorItem","view/liveMoreError","view/liveChatBox","view/liveOnlineError"],function(e){var t=e("./LIVE-M-Variable"),n=e("./LIVE-V-Variable"),a={};a.layer=e("../V2-V-Layer");var i=e("./../V2-M-Variable");i.Helper=e("../V2-M-Helper"),i.roomHelper=e("./../chatroom/room-M-Helper"),i.liveHelper=e("./LIVE-M-Helper");var o=e("../V2-Tips"),r=e("../../lib/js.cookie"),l=e("../../lib/collectError"),s=e("./LIVE-M-GiftModel"),c=e("../../view/liveAnchor"),u=e("../../view/liveChatBox"),d=e("../../view/liveEditBox"),m=e("../../view/liveGiftItem"),f=e("../../view/liveOnlineUserItem"),p=e("../../view/liveOnlineMasterItem"),h=e("../../view/livePlayer"),g=e("../../view/liveRankingItem"),v=e("../../view/liveRoomItem"),y=e("../../view/liveRoomList"),b=e("../../view/liveMyAnchorItem"),x=e("../../view/liveMoreError"),w=e("../../view/liveChatBox"),k=e("../../view/liveOnlineError"),M=window.location.protocol+"//"+window.location.host+"/webmomo/api/",C="user/setting/getPersonalSetting",I="user/setting/setItem",V="scene/recommend/lists",T="dotting/free_dotting?",L="scene/profile/mystar",E="scene/profile/infos",S="scene/profile/roominfos",P="scene/product/ranklist",A="scene/product/productsv2",_="scene/product/products",q="scene/room/onlineusers",H="scene/profile/userinfo",j="scene/follow/fuser",O="scene/profile/fstar",N="scene/room/report",D="scene/pay/buysgift",B="scene/pay/buygift",R="scene/pay/buygiftv2",F="scene/room/shareroomdt",W="scene/profile/isadmin",U="scene/profile/silenceuser",G="scene/profile/kickuser",Y="scene/product/dmprice",J=function(){$.ajax({async:!0,url:M+C,type:"get",cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec&&e.data&&i.liveHelper.storeUserSetting(e.data)})},X=function(e,t){$.ajax({async:!0,url:M+I,type:"post",data:{type:e,item:t},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec||(403===e.ec?o.Warning("请先登录",3e3):o.Warning("服务器繁忙，请稍后重试",3e3))})},z=function(e,a){$.ajax({async:!0,url:M+V,type:"post",cache:!1}).fail(function(){o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(r){}if(200===e.ec&&e.data){window.momoid&&(e.data.login=1),n.box.roomListContainer.html(y({data:e.data}));for(var l=0;l<e.data.r_infos.length;l++){var f=e.data.r_infos[l].rid;t.roomObj[f]=1}if(e.data.live?($(".groupList")[0]&&$(".groupList").append(v({list:e.data.r_infos})),i.liveHelper.initLiveScroll(),t.moreLiveListLive=e.data.live):($(".liveShow-list")[0]&&$(".liveShow-list").append(v({list:e.data.r_infos})),i.liveHelper.initLiveScroll(),t.moreLiveListLive=e.data.live),t.status.isGetMoreLiveList||(t.moreLiveListPage+=1,t.moreLiveNext?(t.status.isGetMoreLiveList=!0,Z(t.moreLiveListPage,function(e,n){if(t.status.isGetMoreLiveList=!1,e)return void o.Warning(e.em,3e3);for(var a,i=n,r=[],l=0;l<i.r_infos.length;l++)a=i.r_infos[l].rid,t.roomObj[a]||(t.roomObj[a]=1,r.push(i.r_infos[l]));t.moreLiveNext=i.h_next,t.moreLiveListLive?$(".groupList")[0]&&$(".groupList").append(v({list:r})):$(".liveShow-list")[0]&&$(".liveShow-list").append(v({list:r})),t.hasLiveAPI.reinitialise()})):($(".recommend-live-list-box")[0]&&($(".recommend-live-list-box .more").css("display","none"),t.hasLiveAPI.reinitialise()),$(".roomMore").html(x).css({display:"inline-block"}).fadeIn(200),setTimeout(function(){$(".roomMore").fadeOut(200,function(){$(this).html("").css("display","none")})},2e3))),t.status.showAnchor?(t.status.myAnchor=!0,$(".recommend-live-list-box .liveRoomList")[0]&&($(".recommend-live-list-box .liveRoomList").addClass("hide"),$(".recommend-live-list-box .more").addClass("hide")),$(".recommend-live-list-box .liveAnchorList")[0]&&$(".recommend-live-list-box .liveAnchorList").removeClass("hide"),$(".live-container .roomListContainer .myAnchor").addClass("checked").html("返回"),te(function(e,n){if(e)return void o.Warning(e.em,3e3);var a=n||[];a[0]&&parseInt(a[0].stid)===window.momoid&&a.splice(0,1);var i="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(b({list:a})),$(".anchor-groupList").append(i)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(b({list:a})),$(".anchor-liveShow-list").append(i)),t.hasLiveAPI&&t.hasLiveAPI.reinitialise(),t.status.showAnchor=!1}),i.liveSource="df_myanchor"):i.liveSource="df_recommend",!a){if(t.status.showAnchor&&t.anchorOnLive[0])return $(".playerContent").attr("data-rd",t.anchorOnLive[0].rid),$(".live-chat-box").html(w()),n.box.giftEffectList.children().html(""),t.giftEffectQueue=[],t.giftManyTime={},t.barrageQueue=[],s.resetQueue(),$(".live-gift-animation-box")[0]&&$(".live-gift-animation-box").remove(),ne({stid:t.anchorOnLive[0].stid},!1),t.onShowRoomId=t.anchorOnLive[0].rid,void(t.startLiveTime=(new Date).getTime());i.liveHelper.initPk(e.data.df_scene),n.box.anchor.html(c({data:e.data.df_scene})),e.data.df_scene.vsplit=2===e.data.df_scene.rtype&&1===e.data.df_scene.splitstatus,n.box.playerContainer.html(h({data:e.data.df_scene,giftOnOff:!!t.giftDisplayOff,danmuOnOff:!!t.danmuDisplayOff})),e.data.df_scene.vsplit?$(".liveRoomContent").addClass("mobile-video"):$(".liveRoomContent").removeClass("mobile-video"),i.liveHelper.initAllLiveScroll(),0===e.data.df_scene.rtype?i.Helper.pushState({type:"live",id:e.data.df_scene.stid},"","/live/0-"+e.data.df_scene.rid):i.Helper.pushState({type:"live",id:e.data.df_scene.stid},"","/live/"+e.data.df_scene.stid),e.data.df_scene&&e.data.df_scene.live&&e.data.df_scene.url&&i.liveHelper.initPlayer("flowplayer",e.data.df_scene),window.room?window.room.disconnected?window.room.connect():window.room.connected&&i.roomHelper.socketControl($(".collect-room-btn").attr("data-id"),$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid")):window.room=window.roomSocket.init(),J(),$(".playerContent").attr("data-momoid",e.data.df_scene.stid),$(".live-edit-box").html(d),$(".live-chat-box").html(u),t.startLiveTime=(new Date).getTime();var p=!1;0===parseInt($(".playerContent").attr("data-rtype"))&&(p=!0),ie({rd:e.data.df_scene.rid,stid:e.data.df_scene.stid,isOfficial:p},function(e,t){if(!e){var n=t;$(".gift-box").html(m({list:n}));var a="";a=window.momoid?"<div class='giftItem payItem left'><p class='pay'>充值</p></div>":"<div class='giftItem payItem left'><a target='_blank' href='https://www.immomo.com/pay'><p class='pay'>充值</p></a></div>",$(".gift-box").append(a),i.liveHelper.giftScroll()}});var k=e.data.df_scene.rid,M=e.data.df_scene.rtype,C=e.data.df_scene.sid,I="";I=1===e.data.mode&&e.data.pkstars.length>0?e.data.df_scene.pkstars[0].stid:e.data.df_scene.stid,ae({rd:k,rt:M,sid:C,stid:I},function(e,a){if(e)return void(2001===e.ec&&(n.box.rankingList.empty(),n.box.rankingList.parents(".jspPane").before(g({err:e}))));i.roomHelper.liveControl({liveId:k,showId:C,starId:I},{rank:!0});var o=a;n.box.rankingList.parents(".jspContainer").find(".error-box")[0]&&n.box.rankingList.parents(".jspContainer").find(".error-box").remove(),o.length>0&&n.box.rankingList.html(g({list:o})),t.ranksListAPI?t.ranksListAPI.reinitialise():i.liveHelper.initRankingListScroll(),$(".fansAttraction .tab_header .tab-starCharts").trigger("click")})}}else o.Warning(e.em,3e3)})},Q=function(){if(window.momoid){if(t.status.closePlayer||$(".live-page-window .liveRoom-box .offPlaceHolder")[0])return}else if("momolive"!==i.currentPage||$(".live-page-window .liveRoom-box .offPlaceHolder")[0])return;var e="-";window.momoid&&(e=window.momoid);var n=(new Date).getTime(),a={momoid:e,cId:r.get("cId"),time:n,m:"live",a:"live-online"},o=M+T;l.postDot(a,o),t.heartTimeout&&clearTimeout(t.heartTimeout),t.heartTimeout=setTimeout(function(){Q()},3e4)},K=function(e){var n="-";n=window.momoid?window.momoid:"-";var a=t.endLiveTime-t.startLiveTime,i=Math.floor(a/1e3);if(0!==i){var o={momoid:n,cId:r.get("cId"),rid:e,time:i,m:"live",a:"liveRoom-online"},s=M+T;l.postDot(o,s)}},Z=function(e,t){$.ajax({async:!0,url:M+V,type:"post",data:{page:e},cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},ee=function(e){$.ajax({async:!0,url:M+L,type:"POST",cache:!1}).fail(function(){e&&e({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(n){}200===t.ec&&t.data?e&&e(null,t.data):e&&e({ec:t.ec,em:t.em},null)})},te=function(e){$.ajax({async:!0,url:M+L,type:"post",cache:!1}).fail(function(){e&&e({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(n){}200===t.ec&&t.data?e&&e(null,t.data):(e&&e({ec:t.ec,em:t.em},null),o.Warning(t.em,3e3))})},ne=function(e,a){var r="",l={};if([0,1,2].indexOf(parseInt(e.rt))>-1&&e.rid)r=E,l={rd:e.rid,rt:e.rt};else if(e.stid){if(parseInt(e.stid)&&parseInt(e.stid)<1e4)return void z();r=S,l={stid:e.stid}}l.src=i.liveSource,$.ajax({async:!0,url:M+r,type:"post",data:l,cache:!1}).fail(function(){n.box.anchor.html(""),o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(r){}if(200===e.ec&&e.data){if(e.data.url&&(e.data.url=e.data.url.replace("_momo352p","")),$(".live-page-window .liveRoom-box .offPlaceHolder")[0]||(t.endLiveTime=(new Date).getTime(),K($(".playerContent").attr("data-momoid")),t.startLiveTime=t.endLiveTime),0===e.data.rtype?i.Helper.pushState({type:"live",id:e.data.stid},"","/live/0-"+e.data.rid):i.Helper.pushState({type:"live",id:e.data.stid},"","/live/"+e.data.stid),t.liveInfo=e.data,!a){if(e.data.vsplit=2===e.data.rtype&&1===e.data.splitstatus,n.box.playerContainer.html(h({data:e.data,giftOnOff:!!t.giftDisplayOff,danmuOnOff:!!t.danmuDisplayOff})),e.data.live&&e.data.url){var l=1,s=!1;i.Helper.supportLocalStorage()&&"true"==localStorage.muted&&(l=0,s=!0),i.liveHelper.initPlayer("flowplayer",e.data)}t.barrageQueue=[],t.onlineUserPage=0,t.onlineManagerObj={},t.onlineUserObj={};var u=e.data.rid,d=e.data.stid,v=e.data.rtype,y=t.onlineUserPage,b=!0;t.status.isGetMoreUserList=!0,oe({rd:u,stid:d,rt:v,page:y},function(e,a){if(t.status.isGetMoreUserList=!1,e)return void(2001===e.ec&&($(".layfolkList").empty(),$(".masterList").empty(),n.box.onlineList.parents(".jspPane").before(k({err:e}))));var o,r=a,l=[];n.box.onlineList.parents(".jspContainer").find(".error-box")[0]&&n.box.onlineList.parents(".jspContainer").find(".error-box").remove();for(var s=0;s<r.users.length;s++)o=r.users[s].mid,t.onlineUserObj[o]||(t.onlineUserObj[o]=1,l.push(r.users[s]));for(var c,u=[],d=0;d<r.managers.length;d++)c=r.managers[d].mid,t.onlineManagerObj[c]||(t.onlineManagerObj[c]=1,u.push(r.managers[d]));$(".layfolkList")[0]&&(b&&$(".layfolkList").empty(),$(".layfolkList").append(f({list:l}))),$(".masterList")[0]&&(b&&$(".masterList").empty(),$(".masterList").append(p({list:u}))),t.onlineListNext=r.h_next,t.onlineListAPI?t.onlineListAPI.reinitialise():i.liveHelper.initListScroll()});var x=e.data.rid,w=e.data.rtype,M=e.data.sid,C="";C=1===e.data.mode&&e.data.pkstars.length>0?e.data.pkstars[0].stid:e.data.stid,ae({rd:x,rt:w,sid:M,stid:C},function(e,a){if(e)return void(2001===e.ec&&(n.box.rankingList.empty(),n.box.rankingList.parents(".jspPane").before(g({err:e}))));i.roomHelper.liveControl({liveId:x,showId:M,starId:C},{rank:!0});var o=a;n.box.rankingList.parents(".jspContainer").find(".error-box")[0]&&n.box.rankingList.parents(".jspContainer").find(".error-box").remove(),o.length>0&&n.box.rankingList.html(g({list:o})),t.ranksListAPI?t.ranksListAPI.reinitialise():i.liveHelper.initRankingListScroll(),$(".fansAttraction .tab_header .tab-starCharts").trigger("click")})}window.momoid&&fe({roomid:e.data.rid},function(e,n){e||(n===!0?t.isAdmin=!0:t.isAdmin=!1)});var I=$(".live-edit-box #liveNewMsgTips");I&&i.liveHelper.liveNewMsgTips(!1),a||(e.data.vsplit?$(".liveRoomContent").addClass("mobile-video"):$(".liveRoomContent").removeClass("mobile-video")),i.liveHelper.initAllLiveScroll(),window.room?window.room.disconnected?window.room.connect():window.room.connected&&i.roomHelper.socketControl($(".collect-room-btn").attr("data-id"),$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid")):window.room=window.roomSocket.init();var V=!1;0===parseInt($(".playerContent").attr("data-rtype"))&&(V=!0),ie({rd:e.data.rid,stid:e.data.stid,isOfficial:V},function(e,t){if(!e){var n=t;$(".gift-box").html(m({list:n}));var a="";a=window.momoid?"<div class='giftItem payItem left'><p class='pay'>充值</p></div>":"<div class='giftItem payItem left'><a target='_blank' href='https://www.immomo.com/pay'><p class='pay'>充值</p></a></div>",$(".gift-box").append(a),i.liveHelper.giftScroll()}}),e.data.stid==window.momoid&&(e.data.self=!0),n.box.anchor.html(c({data:e.data})),1===e.data.mode&&e.data.pkstars&&e.data.pkstars.length>0?i.liveHelper.initPk(e.data):i.liveHelper.initPk("")}else o.Warning(e.em,3e3)})},ae=function(e,t){var n={rd:e.rd,rt:e.rt,sid:e.sid,stid:e.stid};$.ajax({async:!0,url:M+P,type:"post",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"请求失败"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},ie=function(e,t){var n="";n=e.isOfficial&&e.isOfficial===!0?M+_:M+A;var a={rd:e.rd,stid:e.stid};$.ajax({async:!0,url:n,type:"POST",data:a,cache:!1}).fail(function(){t&&t({ec:500,em:"请求失败"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?(i.liveHelper.cacheGiftList(e.data),t&&t(null,e.data)):t&&t({ec:e.ec,em:e.em},null)})},oe=function(e,t){var n={rd:e.rd,stid:e.stid,rt:e.rt,page:e.page};$.ajax({async:!0,url:M+q,type:"POST",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"请求失败"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},re=function(e,n){if(t.profile&&t.profile[e.dmid])n&&n(null,t.profile[e.dmid]);else{var a={dmid:e.dmid,rd:e.rid,token:e.token,source:e.source};$.ajax({async:!0,url:M+H,type:"POST",data:a,cache:!1}).fail(function(){t.status.isPostProfile=!1}).done(function(a){try{a="string"==typeof a?JSON.parse(a):a}catch(i){}if(200===a.ec&&a.data){if(t.status.isPostProfile=!1,Object.keys(t.profile).length<t.maxProfileLength)t.profile[e.dmid]=a.data;else{var o=Object.keys(t.profile)[0];delete t.profile[o]}n&&n(null,a.data)}else n&&n({ec:a.ec,em:a.em},null)})}},le=function(e,t){var n={rd:e.rid,stid:e.stid,fst:e.fst,mtoken:e.mtoken,apiToken:window.token};$.ajax({async:!0,url:M+O,type:"post",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},se=function(e,t){var n={rd:e.rd,dmid:e.dmid,type:e.type,token:e.token,apiToken:window.token};$.ajax({async:!0,url:M+j,type:"post",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},ce=function(e,t){var n={content:e.content,roomid:e.roomid,room_name:e.room_name,remoteid:e.remoteid};$.ajax({async:!0,url:M+N,type:"post",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},ue=function(e,t){var n={rd:e.rd,sid:e.sid,stid:e.stid,mtoken:e.mtoken,text:e.text,apiToken:window.token};$.ajax({async:!0,url:M+D,type:"post",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},de=function(e,n){var r={rd:e.rd,sid:e.sid,stid:e.stid,pid:e.pid,price:e.price,token:e.token,apiToken:window.token},s="";e.isOfficial&&e.isOfficial===!0?(s=M+B,r.stoken=e.stoken):s=M+R,t.status.isPostGift=!0,$.ajax({async:!0,url:s,type:"post",data:r,cache:!1}).fail(function(){o.Warning("服务器繁忙，请稍后重试",3e3)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(r){}if(200===e.ec&&e.data.status)n&&n(null,e.data);else if(200!==e.ec||e.data.status)403===e.ec&&e.em?(o.Warning(e.em,3e3),i.Helper.pushState({type:"live"},"","/live"),i.liveHelper.closePlayer(),K(),t.status.closePlayer=!0):o.Warning(e.em,3e3);else{if(n&&n(null,e.data),"当前余额不足，请去充值"==e.data.desc){var s="liveInsufficientToolTip",c={momoid:window.momoid,type:"insufficient"};a.layer.onOff(s,c),l.postDot({m:"live",a:"show",u:"m-"+window.momoid,t:"insufficient",f:"gift"},t.url.loginDot)}"送光了，稍等再试"==e.data.desc&&o.Warning(e.data.desc,3e3)}t.status.isPostGift=!1})},me=function(e,n){t.status.isShareOfficial=!0,$.ajax({async:!0,url:M+F,type:"post",data:{rd:e},cache:!1}).fail(function(){n&&n({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(a){}t.status.isShareOfficial=!1,200===e.ec&&e.data?n&&n(null,e.data):n&&n({ec:e.ec,em:e.em},null)})},fe=function(e,t){if(e.roomid){var n={};n.roomid=e.roomid,$.ajax({async:!0,url:M+W,type:"POST",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&void 0!==e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})}},pe=function(e,t){
var n={mtoken:e.mtoken,targetid:e.targetid,roomid:e.roomid,rtype:e.rtype};$.ajax({async:!0,url:M+U,type:"POST",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},he=function(e,t){var n={mtoken:e.mtoken,targetid:e.targetid,roomid:e.roomid,rtype:e.rtype};$.ajax({async:!0,url:M+G,type:"POST",data:n,cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})},ge=function(e,t){e&&$.ajax({async:!0,url:M+Y,type:"POST",data:{rd:e},cache:!1}).fail(function(){t&&t({ec:500,em:"服务器繁忙，请稍后重试"},null)}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&e.data?t&&t(null,e.data):t&&t({ec:e.ec,em:e.em},null)})};return{getUserSetting:J,postUserSetting:X,getLiveShowList:z,stayLiveTime:Q,stayRoomTime:K,getMoreLiveList:Z,getMyAnchor:te,getMyAnchorNum:ee,getRoomDetail:ne,getGiftList:ie,getStarValue:ae,getOnlineUsers:oe,getUserProfile:re,postFocusUser:se,postFocusAnchor:le,postReportUser:ce,postTextBarrage:ue,postGift:de,postShareOfficial:me,getIfIsAdmin:fe,postSilenceUser:pe,postKickUser:he,getBarragePrice:ge}}),define("module/V2-M-onConfirm",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable"],function(e){var t=e("./momolive/LIVE-API"),n=e("./momolive/LIVE-M-Variable"),a=function(){window.location.pathname.indexOf("/live")>-1&&(n.endLiveTime=(new Date).getTime(),t.stayRoomTime())};return a}),define("module/V2-C-ClientDownload",[],function(){function e(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var t=function(){var e=document.querySelectorAll(".download-client-box"),t=document.querySelectorAll(".talking-box-main");Array.prototype.forEach.call(e,function(e,t,n){$(e).addClass("hide")}),Array.prototype.forEach.call(t,function(e,t,n){$(e).removeClass("hide")})},n=function(t,n,a){function i(e,t){var n=new RegExp(""+t+"=([^&?]*)","ig");return e.match(n)?e.match(n)[0].substr(t.length+1):null}var o=document.getElementById(t?t:"pc_download"),r=document.getElementById(n?n:"mac_download"),l=document.getElementById(a?a:"close-download-btn");i(window.location.href,"rf");e(o,"click",function(){var e=o.href.substring(o.href.lastIndexOf("/")+1),t={action:"pc_download_chat",data:e},n=[];for(var a in t)n.push(a+"="+t[a]);t=n.join("&"),(new Image).src="/webmomo/api/dotting/free_dotting?"+t+"&t="+Math.random()}),e(r,"click",function(){var e=r.href.substring(r.href.lastIndexOf("/")+1),t={action:"mac_download_chat",data:e},n=[];for(var a in t)n.push(a+"="+t[a]);t=n.join("&"),(new Image).src="/webmomo/api/dotting/free_dotting?"+t+"&t="+Math.random()}),e(l,"click",function(){var e={action:"download_panel_close"},t=[];for(var n in e)t.push(n+"="+e[n]);e=t.join("&"),(new Image).src="/webmomo/api/dotting/free_dotting?"+e+"&t="+Math.random()})};return{closeDownload:t,downloadCount:n}}),define("view/roomtalkToInfo",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" have-sign"},3:function(e,t,n,a){var i;return"房间公告："+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.sign:i,e))},5:function(e,t,n,a){return"done"},7:function(e,t,n,a){return"取消收藏"},9:function(e,t,n,a){return"收藏"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<img class="room-pic" src="'+r(o(null!=(i=null!=e?e.data:e)?i.pic:i,e))+'" alt=""/>\n<p class="talk-room-name '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.sign:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'"><span>'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+"</span>"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.sign:i,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'</p>\n<div class="talk-room-operate">\n\t<input class="collect-room-btn '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.is_collect:i,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+'" type="button" value="'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.is_collect:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.program(9,a,0),data:a}))?i:"")+'" data-id="'+r(o(null!=(i=null!=e?e.data:e)?i.rid:i,e))+'"/>\n\t<input class="exit-room-btn" type="button" value="退出" data-id="'+r(o(null!=(i=null!=e?e.data:e)?i.rid:i,e))+'"/>\n</div>'},useData:!0})}),define("view/roomMemberItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t<li class="avatar-item hostor" data-id="'+r(o(null!=(i=null!=e?e.data:e)?i.momoid:i,e))+'" data-role="'+r(o(null!=(i=null!=e?e.data:e)?i.role:i,e))+'">\n\t\t<img src="'+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" alt="">\n\t</li>\n'},3:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:""},4:function(e,t,n,a){var i=this.lambda,o=this.escapeExpression;return'\t\t<li class="avatar-item" data-id="'+o(i(null!=e?e.momoid:e,e))+'" data-role="'+o(i(null!=e?e.role:e,e))+'">\n\t\t\t<img src="'+o(i(null!=e?e.avatar:e,e))+'" alt="">\n\t\t</li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.role:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:""},useData:!0})}),define("module/chatroom/room-M-update",["require","exports","module","module/chatroom/room-M-Variable","module/chatroom/room-M-Helper","view/roomtalkToInfo","view/roomMemberItem"],function(e){var t=e("./room-M-Variable"),n={};n.roomHelper=e("./room-M-Helper");var a=e("../../view/roomtalkToInfo"),i=e("../../view/roomMemberItem"),o=o||{};return o.roomMembers=function(e,o){if(o){var r="jc";"self"==o&&(r=""),window.room?window.room.disconnected?(window.room.connect(),n.roomHelper.socketControl(t.curRoomId,$(".playerContent").attr("data-rd"),r,$(".playerContent").attr("data-sid"))):window.room.connected&&n.roomHelper.socketControl(t.curRoomId,$(".playerContent").attr("data-rd"),r,$(".playerContent").attr("data-sid")):(window.room=window.roomSocket.init(),n.roomHelper.socketControl(t.curRoomId,$(".playerContent").attr("data-rd"),r,$(".playerContent").attr("data-sid")))}var l=e.data.room,s={},c={};if($.each(l.members,function(e,t){1==l.members[e].role?s=l.members[e]:c[e]=l.members[e]}),o){l.pic=s.avatar;var u=a({data:l});$(".chatroom-container .talking-room .room-talk-to-box").html(u),"self"==o&&$(".room-edit-box .edit-content").removeAttr("disabled")}$(".room-channel-item.select .online-box .online-num").text(e.data.room.member_count);var d=i({data:s}),m=i({data:c});e.data.room.member_count>12?($(".chatroom-container .talking-room .online-people-box .online-avatar-list").remove(),$(".chatroom-container .talking-room .online-people-box").append('<ul class="online-avatar-list"></ul>'),$(".chatroom-container .talking-room .online-people-box .online-avatar-list").siblings("span").remove(),$(".chatroom-container .talking-room .online-people-box .online-avatar-list").html(d+m).after("<span>"+l.member_count+"人在线</span>"),$(".chatroom-container .talking-room .online-people-box").removeClass("hide"),n.roomHelper.initVertialScroll(),$(".chatroom-container .talking-room .online-people-box .online-avatar-list .jspContainer").css("height","41px")):($(".chatroom-container .talking-room .online-people-box .online-avatar-list").siblings("span").remove(),$(".chatroom-container .talking-room .online-people-box .online-avatar-list").html(d+m).after("<span>"+l.member_count+"人在线</span>"),$(".chatroom-container .talking-room .online-people-box").removeClass("hide")),t.roomMembers=l.members},o}),define("view/selectItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<li class="option-item"  data-id="'+r(o(null!=e?e.category:e,e))+'">\n\t<img src="'+r(o(null!=e?e.icon:e,e))+'" alt="">\n\t<p class="option-name">'+r(o(null!=e?e.name:e,e))+" "+(null!=(i=t["if"].call(e,null!=e?e.sign:e,{name:"if",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+'</p>\n\t<p class="option-intro">'+r(o(null!=e?e.desc:e,e))+"</p>\n</li>\n"},2:function(e,t,n,a){return'<span class="sign">'+this.escapeExpression(this.lambda(null!=e?e.sign:e,e))+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("module/chatroom/room-API",["require","exports","module","module/chatroom/room-M-Variable","module/V2-Tips","module/chatroom/room-M-Helper","module/chatroom/room-M-update","module/V2-V-Layer","view/selectItem","view/roomChannelItem"],function(e){var t=e("./room-M-Variable"),n=e("../V2-Tips"),a={};a.roomHelper=e("./room-M-Helper"),a.roomUpdate=e("./room-M-update");var i=e("../V2-V-Layer"),o=window.location.protocol+"//"+window.location.host+"/webmomo/api/",r="chatroom/category/index",l="chatroom/list/index",s="chatroom/room/join",c="chatroom/room/quit",u="chatroom/room/collect",d="chatroom/room/uncollect",m="chatroom/room/applyfriend",f="chatroom/room/dealapply",p="chatroom/room/keep",h="user/profile/simple",g="chatroom/room/members",v=e("../../view/selectItem"),y=e("../../view/roomChannelItem"),b=function(){$.ajax({asyc:!0,url:o+r,type:"get",data:{},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}if(200===e.ec&&e.data&&e.data.list){var n=e.data.list,a=n.length,i=n[a-1],o=n[a-2];n.unshift(i,o),n.length=a;var r=v({data:n});$(".select-box .option-list").html(r)}})},x=function(e){$.ajax({asyc:!0,url:o+l,type:"post",data:{category:e},cache:!1}).fail(function(){}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(i){}if(200===t.ec&&t.data&&t.data.list){$(".chatroom-container .room-list").remove(),$(".chatroom-container .chat-box").append('<ul class="room-list"></ul>');var o={list:t.data.list,category:e},r=y({data:o});"000000"!=e&&"111111"!=e&&(r+='<li class="room-channel-item normal"><input type="button" class="update-list-btn" value="换一批" /></li>'),$(".chatroom-container .room-list").html(r),a.roomHelper.initListScroll()}else 403===t.ec&&n.Warning(t.em,3e3)})},w=function(e,r){$.ajax({asyc:!0,url:o+s,type:"post",data:{rid:e},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(o){}if(200===e.ec&&e.data&&e.data.room){var l=10;t.downtimer&&clearInterval(t.downtimer),t.downtimer=setInterval(function(){l--,$(".textarea_tips").removeClass("hide").find("i.timedown").text(l),0==l&&(clearInterval(t.downtimer),$(".textarea_tips").addClass("hide"),$('.online-avatar-list li[data-id="'+window.enMomoid+'"]').length&&($(".room-edit-box .edit-content").removeAttr("disabled"),$(".chatroom-container .icon-face").css("visibility","visible"),$(".room-edit-box .edit-content").css("visibility","visible")))},1e3),self&&T(),a.roomUpdate.roomMembers(e,1),e.data.room&&e.data.room.messages?r&&r(e.data.room.messages):r&&r()}else 409===e.ec?n.Warning(e.em,3e3):403===e.ec?i.onOff("notOnline"):404===e.ec?n.Warning(e.em,3e3):408===e.ec&&(t.joinRoomFaste=!0,n.Warning(e.em,3e3),setTimeout(function(){t.joinRoomFaste=!1},3e3))})},k=function(){$.ajax({asyc:!0,url:o+c,type:"post",data:{rid:t.curRoomId},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&(a.roomHelper.resetBord(),t.curRoomId=null,clearTimeout(t.heartTimeout),$(".chatroom-container .room-list .room-channel-item").removeClass("select"),a.roomHelper.socketControl(null,$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid")))})},M=function(e){$.ajax({asyc:!0,url:o+u,type:"post",data:{remoteid:e},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec})},C=function(e){$.ajax({asyc:!0,url:o+d,type:"post",data:{remoteid:e},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec})},I=function(e){$.ajax({asyc:!0,url:o+m,type:"post",data:{remoteid:e,rid:t.curRoomId},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec||409===e.ec&&n.Warning(e.em,3e3)})},V=function(e,n){$.ajax({asyc:!0,url:o+f,type:"post",data:{remoteid:e,rid:t.curRoomId,response:n},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(t){}200===e.ec})},T=function(){$.ajax({asyc:!0,url:o+p,type:"post",data:{rid:t.curRoomId},cache:!1}).fail(function(){}).done(function(e){try{e="string"==typeof e?JSON.parse(e):e}catch(n){}200===e.ec&&(t.heartTimeout&&clearTimeout(t.heartTimeout),t.heartTimeout=setTimeout(function(){T()},6e4))})},L=function(e){$.ajax({asyc:!0,url:o+g,type:"post",data:{rid:t.curRoomId},cache:!1}).fail(function(){}).done(function(t){try{t="string"==typeof t?JSON.parse(t):t}catch(n){}200===t.ec&&t.data&&t.data.room&&(e&&T(),a.roomUpdate.roomMembers(t,"self"))})},E=function(e,n){$.ajax({asyc:!0,url:o+h,type:"post",data:{remoteid:e},cache:!1}).fail(function(){}).done(function(a){try{a="string"==typeof a?JSON.parse(a):a}catch(i){}200===a.ec&&a.data&&a.data.profile&&a.data.profile&&(a.data.profile.momoid=e,a.data.profile.avatar=a.data.profile.photos[0],t.roomMembers=t.roomMembers||{},t.roomMembers[e]=a.data.profile,n&&n(null,a.data.profile))})};return{getCategory:b,getRoomList:x,joinRoom:w,quitRoom:k,collectRoom:M,cancleCollect:C,applyFriend:I,dealFriendApply:V,getRoomMembers:L,getSimpleProfile:E}}),function(e){"use strict";function t(t,n){var a=parseInt(100*Math.ceil(t.width()/n.minItems)/t.width());e("li",t).each(function(){e(this).css({width:a+"%"})}),n.slideBoder&&n.slideBoder.css({width:a+"%"})}function n(e){var t="";return e.lastIndexOf("#")>0&&(t=e.substring(e.lastIndexOf("#")+1,e.length)),t}function a(t,a){e("li",t).on(a.changeMode,function(){var i=n(document.URL);if(!e(this).children("a").hasClass("on")&&(e("li",t).children("a").removeClass("on"),e("li",t).eq(i).children("a").addClass("on"),e(t.context).find(".tab_content").removeClass("current"),e(t.context).find(".tab_content").removeClass("hide"),e(t.context).find(".tab_content").eq(i).addClass("current"),t.currentIndex!=e("li",t).index(e(this)))){if(t.currentIndex=e("li",t).index(e(this)),e("li span",t).remove(),e("li a",t).removeClass("on"),e(this).children("a").addClass("on"),a.slideBoder){var o=e(this).children("a").width(),r=t.currentIndex;a.slideBoder.css({left:r*o+"px",width:o+"px"})}e(t.context).find(".tab_content").eq(t.currentIndex).addClass("current").siblings().removeClass("current"),a.callBack(t.currentIndex)}})}function i(e){return parseInt(e.css("left"))}function o(t,n){e("li",t).length!=n.minItems&&t.bind("touchstart",function(e){var n=e.originalEvent.touches[0];t.startLeft=i(t),t.startX=n.pageX,t.css({"-webkit-transition-duration":"0"}),t.touchStartTime=(new Date).getTime()})}function r(e,t){e.bind("touchmove",function(t){var n=t.originalEvent.touches[0];if(e.endX=n.pageX,e.sliding||(e.sliding=!0),e.startX>e.endX)e.css("left","-"+(e.startX-e.endX-e.startLeft)+"px"),e.slidingLeft=!0;else{var a=e.endX-e.startX+e.startLeft;e.css("left",a+"px"),e.slidingLeft=!1}})}function l(t,n){t.bind("touchend",function(n){var a=i(t);t.liMarginWidth=2*parseInt(e("li a",t).css("margin-left")),t.columnWidth=e("li a",t).width()+t.liMarginWidth,t.objWidth=e("li",t).length*t.columnWidth,t.parentWidth=t.parent().width(),a>0?(s(t,0,"0.5s"),t.startX=null):Math.abs(a)+t.parentWidth>t.objWidth?(s(t,"-"+(t.objWidth-t.parentWidth),"0.5s"),t.startX=null):t.parentWidth>=t.objWidth?(s(t,0,"0.5s"),t.startX=null):c(t,n)})}function s(e,t,n){e.css({left:t+"px","-webkit-transition-property":"left","-webkit-transition-duration":n})}function c(e){var t=10*((new Date).getTime()-e.touchStartTime),n=i(e),a=6e3*(Math.abs(e.startLeft)-Math.abs(n));t=Math.round(a/t);var o=t+n;if(e.slidingLeft){var r=parseInt("-"+(e.objWidth-e.parentWidth),10);s(e,Math.max(r,o),"0.8s")}else s(e,Math.min(0,o),"0.8s");e.startX=null}function u(t){e(t).data("currentIndex",0),e(t).data("startLeft",0),e(t).data("startX",0),e(t).data("endX",0)}e.fn.refresh_tab_header=function(n){var i=e.extend({},e.fn.lt_tab.defaults,e(this).opts);return this.each(function(){var o=e(".tab_header ul",e(this));e(o).closest(".tab_header ul",e(this)).html(n),t(o,i),a(o,i)})},e.fn.lt_tab=function(n){var i=e.extend({},e.fn.lt_tab.defaults,n);return this.each(function(){var n=e(".tab_header ul",e(this));n.opts=i,u(n),t(n,i),a(n,i),o(n,i),r(n,i),l(n,i)})},e.fn.lt_tab.defaults={minItems:3,scroll:!0,slideBoder:"",changeMode:"click",callBack:function(){}}}(jQuery),define("lib/jquery.tab",[],function(){}),define("view/preFile",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="file-container fadeInUp animated" id="fileContainer">\n    <div class="file-upload-content file-content">\n        <div class="file-info">\n            <img class="file-preivew" id="filePreivew" src="/img/file.png"/>\n            <p class="file-name">'+this.escapeExpression((i=null!=(i=t.fileName||(null!=e?e.fileName:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"fileName",hash:{},data:a}):i))+'</p>\n        </div>\n        <span class="file-cancel" title="取消发送"><i class="upload-file-cancel fa fa-times-circle-o"></i></span>\n    </div>\n</div>'},useData:!0})}),define("view/preImg",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="file-container file-img-container fadeInUp animated" id="fileContainer">\n    <img class="loading" id="fileLoading" src="/img/wait.gif"/>\n    <div class="file-upload-content file-img-content">\n        <img class="file-preivew" id="filePreivew"/>\n        <span class="file-cancel" title="取消发送"><i class="upload-file-cancel fa fa-times-circle-o"></i></span>\n    </div>\n</div>'},useData:!0})}),define("module/V2-VM-fileHelper",["require","exports","module","module/V2-M-Variable","module/V2-V-Variable","module/V2-Tips","module/V2-M-Helper","view/preFile","view/preImg"],function(e){var t=e("./V2-M-Variable"),n=e("./V2-V-Variable"),a=e("./V2-Tips"),i=i||{};i.MHelper=e("./V2-M-Helper");var o=e("../view/preFile"),r=e("../view/preImg"),l=l||{};return l.init=function(e,t){$("#fileContainer").remove(),"img"===e?n.box.file.append(r()):n.box.file.append(o({fileName:t}))},l.paste=function(e){var n=t.talk_to.idType,a=t.talk_to[n],i=1;switch(n){case"momoid":i=1;break;case"gid":i=2;break;case"did":i=3}var o,r,s;if(e&&(o=e.originalEvent.clipboardData)&&(r=o.items)&&(s=r[0])&&"file"==s.kind&&s.type.match(/^image\//i)){l.init("img");var c=s.getAsFile(),u=new FileReader;return u.onload=function(e){var n="momoid"===t.talk_to.idType?0:1;l.base64upload(e.target.result,n,a,i)},u.readAsDataURL(c),!1}},l.base64upload=function(e,n,i,o){$.post(t.url.uploadImgBase64,{content:e,is_group:n,remoteid:i,org:o},function(e){e="string"==typeof e?JSON.parse(e):e,200==e.ec&&e.url&&e.guid?(t.status.sendType=2,t.status.sendText="http://www.immomo.com/webchat?mode=GUID&filesize=0&file="+e.guid,$("#fileLoading").hide(),$("#filePreivew").attr("src",e.url.replace("L.jpg","S.jpg")).show(),t.status.cancelListenner&&l.remove()):413==e.ec&&a.Warning("请上传小于5M的图片",3e3)})},l.preLoadImg=function(e){var t=new Image,n=$.Deferred();return e||n.resolve(e),t.onload=function(){n.resolve(e)},t.onerror=function(){n.reject(e)},n.then(function(){t.onload=t.onerror=null},function(){t.onload=t.onerror=null}),t.src=e,n.promise()},l.forgeFileMsg=function(e){var n={},a=t.talk_to.idType;return n.type=6,n.text="["+e+"|n=http://58.83.251.169:3000/img/file.png|lt=0|s=110x110|t=文件]",n.filename=e,n.isFile=!0,n.isForge=!0,n.fr="store"===t.talk_to.typeName?t.account.store:t.account.momoid,n.to=t.talk_to[a],n.distance=t.talk_to.distance,n.t=$.now(),n},l.Remove=function(){t.uploadFileXHR&&t.uploadFileXHR.abort(),t.uploadFileXHR=null,n.ele.file.val(""),t.status.sendType=1,t.status.sendText=null,t.status.cancelListenner=!1,t.file.name="",$("#fileContainer").remove()},l}),define("module/V2-M-MsgFactory",["require","exports","module","module/V2-M-Variable","module/V2-V-Variable","module/V2-M-Helper","module/V2-VM-fileHelper"],function(e){var t=e("./V2-M-Variable"),n=e("./V2-V-Variable"),a=a||{};a.MHelper=e("./V2-M-Helper");var i=i||{};i.fileHelper=e("./V2-VM-fileHelper");var o=function(e){var a="";if(1==e.type){var i=n.faceList,o=n.faceList2;return e.text&&(a=e.text.replace(/</g,"&lt;").replace(/\n|\r/g,"<br/>").replace(t.reg.url,function(e){var t=e;return/^(ht|f)tp/.test(e)||(t="http://"+e),'<a class="link" href="'+t+'" target="_blank">'+e+"</a>"}).replace(/\s(?!class|href|target)/g,"&nbsp;").replace(/\[\/(.)+?\]/g,function(e){var t=e,n=e.replace(/\[\/|\]/g,"");if(o[n]){var a="/img/xiaoshuidi/"+o[n]+"@2x.png";return'<img src="'+a+'">'}return t}).replace(/\[(.)+?\]/g,function(e){var t=e;if(e=e.replace(/\[|\]/g,""),!i[e])return t;var n="/img/xiaoshuidi/"+i[e]+"@2x.png";return'<img src="'+n+'">'})),a="<p>"+a+"</p>"}if(2==e.type){if(e.img)a=e.img;else{var r=e.text.replace(/.*=/,""),l=r.match(/(.{2})(.{2})/),s="momoid"===e.idType?"":"g";e.text.indexOf("chatimage")>-1?s+="chatimage/":e.text.indexOf("webchat")>-1?s+="webchat/":e.text.indexOf("webim")>-1&&(s+="webim/"),a="https://file-api.immomo.com/"+s+l[1]+"/"+l[2]+"/"+r+"_S.jpg"}return a}return 3==e.type?(e.audio&&(a=e.audio),a):5==e.type?(e.bf&&(a=e.bf),a):6==e.type?(e.aType&&("live"==e.aType&&(e.aLink.load=!0,e.aLink.tip="点击观看"),a=e.aLink,"file"===e.aType&&(e.isAccount=e.fr==t.account.momoid)),a):8==e.type?(e.gift&&(a=e.gift),a):9==e.type&&e.contents?(e.notify&&(a=e.notify),a):""};return{msgFactory:o}}),define("view/msgTimeLine",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<li class="msg-time-line">\n    <p class="line">\n        <span class="time">'+this.escapeExpression((i=null!=(i=t.time||(null!=e?e.time:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"time",hash:{},data:a}):i))+"</span>\n    </p>\n</li>"},useData:!0})}),define("module/V2-timeHelper",["require","exports","module","view/msgTimeLine"],function(e){var t=e("../view/msgTimeLine"),n={formate:function(e){return new Date(e).toLocaleString()},time2read:function(e){var e=new Date(e),t=new Date,n=e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();if(e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())return"今天 "+n+":"+a;var i=parseInt(e.getMonth())+1;return i+"/"+e.getDate()+" "+n+":"+a},timeLineRender:function(e){var e=new Date(e),n=e.getMonth()+1+"月"+e.getDate()+"日 "+e.getHours()+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes());return t({time:n})}};return n}),define("module/V2-M-Audio",["require","exports","module","module/V2-M-Variable","module/V2-Tips"],function(e){var t=e("./V2-M-Variable"),n=e("./V2-Tips"),a=function(e){$("[data-id=play"+e+"]").addClass("hide"),$("[data-id=play"+e+"]").siblings(".audio-icon-content").removeClass("hide").find(".audio-level").addClass("widthTransform"),$("[data-id="+e+"]").addClass("playing")},i=function(){$(".audio-icon-content").addClass("hide"),$(".play-icon").removeClass("hide"),$("#auto-msg").attr("src",""),$(".normal.type3").removeClass("playing")},o=function(e){i(),$("#"+e).nextAll(".msg.fr.unread-msg")[0]&&$("#"+e).nextAll(".msg.fr.unread-msg").eq(0).find(".normal.type3").click()},r=function(e,r,l){var s=document.getElementById("auto-msg");if(s)if($(".play-icon").removeClass("hide"),$(".audio-icon-content").addClass("hide"),l.hasClass("playing"))i();else{if(i(),s.src=e,l.find(".unread").get(0)){if(l.find(".unread").remove(),$("#"+r).removeClass("unread-msg"),"momoid"==t.talk_to.idType)var c="user";else if("gid"==t.talk_to.idType)var c="group";else if("did"==t.talk_to.idType)var c="discuss";if(c&&t.msgs&&t.msgs[c]&&t.msgs[c][t.talk_to[t.talk_to.idType]]){var u=t.msgs[c][t.talk_to[t.talk_to.idType]];$.each(u,function(e,t){3==t.type&&t._id==r&&(t.iread="readed")})}}s.onplay=function(){a(r)},s.onended=function(){o(r)}}else n.Warning("你当前浏览器版本不支持语音播放",3e3)};return{init:r,onStop:i}}),define("view/msgItemTo",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return"\n    "+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.hasReceived:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+"\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.read:i,{name:"if",hash:{},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")},2:function(e,t,n,a){return" received"},4:function(e,t,n,a){var i;return"        "+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.read:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"\n"},5:function(e,t,n,a){return" readed"},7:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.idType:i,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:""},8:function(e,t,n,a){var i;return"         "+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.idType:i,{name:"isEqual",hash:{equals:"momoid"},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+"\n"},9:function(e,t,n,a){return" wait"},11:function(e,t,n,a){return" suffix"},13:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.remarkname:i,e))},15:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.name:i,e))},17:function(e,t,n,a){var i;return'        <div class="content normal type1">\n            '+(null!=(i=this.lambda(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"\n        </div>\n"},19:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.snap:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(20,a,0),inverse:this.program(22,a,0),data:a}))?i:""},20:function(e,t,n,a){var i,o=this.lambda;return'                <div class="content normal type1" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"</div>\n"},22:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                <div class="content normal type2" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'"><img class="small-img" src="'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+'"/></div>\n'},24:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type3" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'" style="width:'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.width:i,e))+'" data-id="'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" data-src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'" data-guid="'+r(o(null!=(i=null!=e?e.msg:e)?i.guid:i,e))+'">\n            <i data-id="play'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" class="play-icon"></i>\n            <span class="hide audio-icon-content">\n                <i class="audio-level animated"></i>    \n            </span>'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.second:i,e))+"``\n        </div>\n"},26:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type1" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+"</div>\n"},28:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <div class="content normal type5'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.custom:i,{name:"if",hash:{},fn:this.program(29,a,0),inverse:this.noop,data:a}))?i:"")+'" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'"><img oncontextmenu="return false" onmousedown="return false" src="'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+'"/>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.rt:i,{name:"if",hash:{},fn:this.program(31,a,0),inverse:this.noop,data:a}))?i:"")+"            </div>\n"},29:function(e,t,n,a){return" custom"},31:function(e,t,n,a){var i;return'                <span class="suffix-msg">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.rt:i,e))+"</span>\n"},33:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.isFile:i,{name:"if",hash:{},fn:this.program(34,a,0),inverse:this.program(40,a,0),data:a}))?i:""},34:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <div class="content normal type6 type6File" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n                <div class="clearfix">\n                    <div class="icon-file-avatar"></div>\n                    <div class="file-name">'+r(o(null!=(i=null!=e?e.msg:e)?i.filename:i,e))+'</div>\n                </div>\n                <p class="line"></p>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.downloadUrl:i,{name:"if",hash:{},fn:this.program(35,a,0),inverse:this.program(38,a,0),data:a}))?i:"")+"            </div>\n"},35:function(e,t,n,a){var i;return(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.downloadUrl:i,{name:"isEqual",hash:{equals:"error"},fn:this.program(36,a,0),inverse:this.noop,data:a}))?i:"")+'                    <a href="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.downloadUrl:i,e))+'" class="uploaded-down">打开或保存<i class="icon-download-arrows">&gt;</i></a>\n'},36:function(e,t,n,a){return'                        <a class="uploaded-down">取消上传</a>\n'},38:function(e,t,n,a){return'                    <div class="upload-abort"></div>\n                    <div class="uploading-bar-wrap">\n                        <div class="uploading-bar"></div>\n                    </div>\n'},40:function(e,t,n,a){var i;return'        <div class="content normal type6">\n            <div class="clearfix">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,{name:"if",hash:{},fn:this.program(41,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,{name:"if",hash:{},fn:this.program(43,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.des:i,{name:"if",hash:{},fn:this.program(45,a,0),inverse:this.program(47,a,0),data:a}))?i:"")+'            </div>\n            <p class="line"></p>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,{name:"if",hash:{},fn:this.program(50,a,0),inverse:this.program(55,a,0),data:a}))?i:"")+"        </div>\n"},41:function(e,t,n,a){var i;return'                    <p class="text-details">'+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,e))+'</p>\n                    <p class="line"></p>\n'},43:function(e,t,n,a){var i;return'                    <div class="type-img"><img src="'+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'"></div>\n'},45:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                    <div class="type-text">\n                        <p class="text-des">'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.des:i,e))+'</p>\n                        <p class="text-from">'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"</p>\n                    </div>\n"},47:function(e,t,n,a){var i;return'                    <div class="type-text'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,{
name:"if",hash:{},fn:this.program(48,a,0),inverse:this.noop,data:a}))?i:"")+'">\n                        '+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"\n                    </div>\n"},48:function(e,t,n,a){return" with-detials"},50:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.load:i,{name:"if",hash:{},fn:this.program(51,a,0),inverse:this.program(53,a,0),data:a}))?i:""},51:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                    <p class="msg-goto-link go-live-room" data-val="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,e))+'">\n                        '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n                    </p>\n"},53:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                    <a class="msg-goto-link" href="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,e))+'" target="_blank">\n                        '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n                    </a>\n"},55:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.rid:i,{name:"if",hash:{},fn:this.program(56,a,0),inverse:this.program(58,a,0),data:a}))?i:""},56:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                    <p class="type-tip" data-target="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.rid:i,e))+'">\n                        '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"\n                    </p>\n"},58:function(e,t,n,a){var i;return'                    <p class="type-tip">\n                        '+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n                    </p>\n"},60:function(e,t,n,a){var i,o=this.lambda;return'        <div class="content normal type1" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"</div>\n"},62:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type9" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n            <div class="clearfix">\n                <div class="type-img"><img src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'"></div>\n                <div class="type-text">\n                    '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+'\n                </div>\n            </div>\n            <p class="line"></p>\n            <p class="type-tip">\n                '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n            </p>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression,l=t.helperMissing;return'<li class="msg to'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.hasReceived:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(7,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.rt:i,{name:"if",hash:{},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+'" id="'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" data-timeid="'+r(o(null!=(i=null!=e?e.msg:e)?i.t:i,e))+'" data-index="'+r(o(null!=(i=null!=e?e.msg:e)?i.dataIndex:i,e))+'">\n\t<p class="transparent quotename">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.remarkname:i,{name:"if",hash:{},fn:this.program(13,a,0),inverse:this.program(15,a,0),data:a}))?i:"")+'</p>\n    <div class="user-msg-box clearfix">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"2"},fn:this.program(19,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"3"},fn:this.program(24,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"4"},fn:this.program(26,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"5"},fn:this.program(28,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"6"},fn:this.program(33,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"7"},fn:this.program(60,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"9"},fn:this.program(62,a,0),inverse:this.noop,data:a}))?i:"")+"    </div>\n</li>"},useData:!0})}),define("view/msgItemFrom",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:"2"},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.fr:i,{name:"unless",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")},2:function(e,t,n,a){return" sys-auto-res"},4:function(e,t,n,a){var i;return null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.iread:i,{name:"unless",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:""},5:function(e,t,n,a){return" unread-msg"},7:function(e,t,n,a){return" suffix"},9:function(e,t,n,a){return"transparent "},11:function(e,t,n,a){return"username"},13:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.remarkname:i,e))},15:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.name:i,e))},17:function(e,t,n,a){var i,o=this.lambda;return'        <div class="content normal type1" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"</div>\n"},19:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.snap:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(20,a,0),inverse:this.program(22,a,0),data:a}))?i:""},20:function(e,t,n,a){var i,o=this.lambda;return'                <div class="content normal type1" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"</div>\n"},22:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                <div class="content normal type2" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'"><img class="small-img" src="'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+'"/></div>\n'},24:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type3" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'" style="width:'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.width:i,e))+'" data-id="'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" data-src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'" data-guid="'+r(o(null!=(i=null!=e?e.msg:e)?i.guid:i,e))+'">\n            <i data-id="play'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" class="play-icon"></i>\n            <span class="hide audio-icon-content">\n                <i class="audio-level animated"></i>    \n            </span>'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.second:i,e))+"``\n"+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.iread:i,{name:"unless",hash:{},fn:this.program(25,a,0),inverse:this.noop,data:a}))?i:"")+"        </div>\n"},25:function(e,t,n,a){return'                <i class="unread"></i>\n'},27:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t<div class="content normal type1" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+"</div>\n"},29:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t<div class="content normal type5'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.custom:i,{name:"if",hash:{},fn:this.program(30,a,0),inverse:this.noop,data:a}))?i:"")+'" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'"><img oncontextmenu="return false" onmousedown="return false" src="'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+'"/>\n            <div class="collect-content hide">\n                <span class="collect-option">添加到表情</span>\n            </div>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.rt:i,{name:"if",hash:{},fn:this.program(32,a,0),inverse:this.noop,data:a}))?i:"")+"        </div>\n"},30:function(e,t,n,a){return" custom"},32:function(e,t,n,a){var i;return'                <span class="suffix-msg">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.rt:i,e))+"</span>\n"},34:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.isFile:i,{name:"if",hash:{},fn:this.program(35,a,0),inverse:this.program(37,a,0),data:a}))?i:""},35:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t\t\t<div class="content normal type6" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n\t\t            <div class="clearfix">\n\t\t                <div class="icon-file-avatar"></div>\n\t\t                <div class="file-name">'+r(o(null!=(i=null!=e?e.msg:e)?i.filename:i,e))+'</div>\n\t\t            </div>\n\t\t            <p class="line"></p>\n\t                <p class="type-tip">\n\t                    <a href="'+r(o(null!=(i=null!=e?e.msg:e)?i.downloadUrl:i,e))+'" class="uploaded-down">打开或保存<i class="icon-download-arrows">&gt;</i></a>\n\t                </p>\n\t\t        </div>\n'},37:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t        <div class="content normal type6" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n\t\t            <div class="clearfix">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,{name:"if",hash:{},fn:this.program(38,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t                <div class="type-img"><img src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'"></div>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.des:i,{name:"if",hash:{},fn:this.program(40,a,0),inverse:this.program(42,a,0),data:a}))?i:"")+'\t\t            </div>\n\t\t            <p class="line"></p>\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,{name:"if",hash:{},fn:this.program(45,a,0),inverse:this.program(50,a,0),data:a}))?i:"")+"\t\t        </div>\n"},38:function(e,t,n,a){var i;return'                        <p class="text-details">'+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,e))+'</p>\n                        <p class="line"></p>\n'},40:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                            <div class="type-text">\n                                <p class="text-des">'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.des:i,e))+'</p>\n                                <p class="text-from">'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"</p>\n                            </div>\n"},42:function(e,t,n,a){var i;return'    \t\t                <div class="type-text'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.comment:i,{name:"if",hash:{},fn:this.program(43,a,0),inverse:this.noop,data:a}))?i:"")+'">\n    \t\t                    '+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"\n    \t\t                </div>\n"},43:function(e,t,n,a){return" with-detials"},45:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.load:i,{name:"if",hash:{},fn:this.program(46,a,0),inverse:this.program(48,a,0),data:a}))?i:""},46:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                            <p class="msg-goto-link go-live-room" data-val="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,e))+'">\n                                '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n                            </p>\n"},48:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                            <a class="msg-goto-link" href="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.link:i,e))+'" target="_blank">\n                                '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n                            </a>\n"},50:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.rid:i,{name:"if",hash:{},fn:this.program(51,a,0),inverse:this.program(53,a,0),data:a}))?i:""},51:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'                            <p class="type-tip" data-target="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.rid:i,e))+'">\n                                '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+"\n                            </p>\n"},53:function(e,t,n,a){var i;return'        \t\t            <p class="type-tip">\n        \t\t                '+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n        \t\t            </p>\n"},55:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type1" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+"</div>\n"},57:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'        <div class="content normal type8" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,{name:"if",hash:{},fn:this.program(58,a,0),inverse:this.noop,data:a}))?i:"")+'        \t<p class="type8-info">'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+'</p>\n        \t<ul class="type8-list">\n'+(null!=(i=t.each.call(e,null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.contents:i,{name:"each",hash:{},fn:this.program(60,a,0),inverse:this.noop,data:a}))?i:"")+'        \t\t<li class="msg-tips">\n        \t\t\t请到手机上查看\n        \t\t</li>\n        \t</ul>\n        </div>\n'},58:function(e,t,n,a){var i;return'        \t<div class="type8-img">\n        \t\t<img src="'+this.escapeExpression(this.lambda(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'"/>\n        \t</div>\n'},60:function(e,t,n,a){var i=this.lambda,o=this.escapeExpression;return'        \t\t<li class="type8-item">\n        \t\t\t<img src="'+o(i(null!=e?e.pic:e,e))+'" alt="">\n        \t\t\t<p>'+o(i(null!=e?e.text:e,e))+"</p>\n        \t\t</li>\n"},62:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.fr:i,{name:"isEqual",hash:{equals:"910001"},fn:this.program(63,a,0),inverse:this.program(65,a,0),data:a}))?i:""},63:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <div class="content normal type1" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">'+r(o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))+"</div>\n"},65:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <div class="content normal type9" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n            \t<div class="clearfix">\n            \t    <div class="type-img"><img src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'"></div>\n            \t    <div class="type-text">\n            \t        '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.text:i,e))+'\n            \t    </div>\n            \t</div>\n            \t<p class="line"></p>\n            \t<p class="type-tip">\n            \t    '+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.tip:i,e))+"\n            \t</p>\n            </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=t.helperMissing,r=this.lambda,l=this.escapeExpression;return'<li class="msg fr'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"3"},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.rt:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'" data-timeid="'+l(r(null!=(i=null!=e?e.msg:e)?i.t:i,e))+'" id="'+l(r(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" data-index="'+l(r(null!=(i=null!=e?e.msg:e)?i.dataIndex:i,e))+'">\n    <img class="avatar" src="'+l(r(null!=(i=null!=e?e.profile:e)?i.avatar:i,e))+'" data-id="'+l(r(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+'" data-idType="'+l(r(null!=(i=null!=e?e.profile:e)?i.idType:i,e))+'">\n    <p class="'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.idType:i,{name:"isEqual",hash:{equals:"momoid"},fn:this.program(9,a,0),inverse:this.program(11,a,0),data:a}))?i:"")+' quotename">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.remarkname:i,{name:"if",hash:{},fn:this.program(13,a,0),inverse:this.program(15,a,0),data:a}))?i:"")+'</p>\n    <div class="user-msg-box clearfix" title="'+l(r(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"2"},fn:this.program(19,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"3"},fn:this.program(24,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"4"},fn:this.program(27,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"5"},fn:this.program(29,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"6"},fn:this.program(34,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"7"},fn:this.program(55,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"8"},fn:this.program(57,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"9"},fn:this.program(62,a,0),inverse:this.noop,data:a}))?i:"")+"    </div>\n</li>\n\n"},useData:!0})}),define("module/V2-VM-cacheMsg",["require","exports","module","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-MsgFactory","module/V2-timeHelper","view/msgItemTo","view/msgItemFrom"],function(e){var t=e("./V2-API"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=i||{};i.msgFactory=e("./V2-M-MsgFactory");var o=e("./V2-timeHelper"),r=e("../view/msgItemTo"),l=e("../view/msgItemFrom"),s=function(e,t,i){var r=e,l=0,s=e.length-a.maxCacheMsg,u=o.timeLineRender(e[0].t);if(i?r=r.slice(0,i).reverse():s>0&&(r=r.slice(s,r.length),l=s),"gid"==a.talk_to.idType&&(a.unread.ignore[e[0].to]>a.maxCheckMsgNum||a.unread.local[e[0].to]>a.maxCheckMsgNum)&&a.loginTimeStamp<e[0].t){$(".check-new-msg").remove();var d=a.unread.ignore[e[0].to]?a.unread.ignore[e[0].to]:a.unread.local[e[0].to];n.box.talk_to.before('<span class="check-new-msg fadeInDown animated"><i class="icon-up"></i><i class="new-msg-num">'+d+"</i>条新消息</span>")}r&&c(r,0,u,t,l)},c=function(e,i,s,u,d){if(i!=e.length){var m="",f=e[i];if(!$(".msg#"+f._id)[0]){var p=(1===f.stype||2===f.stype,a.account.momoid);f.formatTime=o.formate(f.t),d>=0&&(f.dataIndex=d+i);var h="user";2==f.stype&&(h="store");var g={type:h,id:f.fr===p?a.account.momoid:f.fr,from:"cacheMsgs"},v=a.talk_to.idType,y=a.talk_to[a.talk_to.idType];t.getProfile(g,function(t,h){h&&v==a.talk_to.idType&&y==a.talk_to[a.talk_to.idType]&&(m+=f.fr==p||2==f.stype&&h.momoid&&f.fr==h.momoid&&f.to!=p?r({msg:f,profile:h}):l({msg:f,profile:{idType:h.idType,name:h.name,remarkname:h.remarkname||"",avatar:h.avatar,error:h.avatar||""}}),i<e.length-1&&e[i+1].t-f.t>3e5&&(m+=o.timeLineRender(e[i+1].t)),0==i&&s?a.fetchHistoryMsg?n.box.msgList.prepend(m):n.box.msgList.append(s+m):a.fetchHistoryMsg?n.box.msgList.prepend(m):n.box.msgList.append(m),a.msgsRenderTimmer&&(clearTimeout(a.msgsRenderTimmer),a.msgsRenderTimmer=null),a.msgsRenderTimmer=setTimeout(function(){if(!u){var e=n.box.msgList.height(),t=$(".msg-screen-box").height();e+3>t&&(a.msgScreenAPI.reinitialise(),a.fetchHistoryMsg||a.msgScreenAPI.scrollToBottom())}},200),c(e,++i,"",u,d))})}}else{a.status.loadHistoryMsgs&&($(".loading-tips").remove(),a.status.loadHistoryMsgs=!1);var b=n.box.msgList.height(),x=$(".msg-screen-box").height();if(b>x)if(a.msgScreenAPI.reinitialise(),a.fetchHistoryMsg){if(a.fetchAllMsgs&&"gid"==a.talk_to.idType){if(a.loginTimeStamp<e[i-1].t){var w=0;a.checkMsgRecord[a.talk_to.gid]&&(w=a.checkMsgRecord[a.talk_to.gid]);var k=$(".msg-screen-box li.msg")[w];$(k).before('<li class="msg-time-line new-cacheMsg-tips"><p class="line"><span class="time">以下为新消息</span></p></li>')}a.msgScreenAPI.scrollToElement($(".new-cacheMsg-tips"),!0),a.fetchAllMsgs=!1}else if("gid"==a.talk_to.idType){if($(".msg-screen-box").find(".jspVerticalBar").stop(),a.loginTimeStamp<e[i-1].t){var w=0;a.checkMsgRecord[a.talk_to.gid]&&(w=a.checkMsgRecord[a.talk_to.gid]);var k=$(".msg-screen-box li.msg")[w];$(k).before('<li class="msg-time-line new-cacheMsg-tips"><p class="line"><span class="time">以下为新消息</span></p></li>')}a.msgScreenAPI.scrollToElement($('[data-index="0"]'),!0,!1)}$(".check-new-msg").get(0)&&$(".check-new-msg").remove()}else a.msgScreenAPI.scrollToBottom()}};return{init:s,render:c}}),define("module/V2-watchSet",["require","exports","module"],function(e){var t=function(e,t,n,a){if(null!=n){var i=e[t];e[t]=n,a&&a(t,"set",n,i)}};return{set:t}}),define("view/searchItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=t.helperMissing,r=this.escapeExpression;return'\t<li class="member-list-item change-talk-to search-item" data-id="'+r((t.getValue||e&&e.getValue||o).call(e,e,null!=e?e.idType:e,{name:"getValue",hash:{},data:a}))+'" data-type="'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=e?e.idType:e,{name:"isEqual",hash:{equals:"momoid"},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=e?e.idType:e,{name:"isEqual",hash:{equals:"gid"},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=e?e.idType:e,{name:"isEqual",hash:{equals:"did"},fn:this.program(6,a,0),inverse:this.noop,data:a}))?i:"")+'">\n\t<div class="member-item-content clearfix">\n\t\t<img src="'+r(this.lambda(null!=e?e.avatar:e,e))+'" class="avatar" alt="" >\n\t\t<p class="username">'+(null!=(i=t["if"].call(e,null!=e?e.remarkname:e,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.program(10,a,0),data:a}))?i:"")+"</p>\n\t</div>\n</li>\n"},2:function(e,t,n,a){return"user"},4:function(e,t,n,a){return"group"},6:function(e,t,n,a){return"discuss"},8:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.remarkname:e,e))},10:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.name:e,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("module/V2-M-Search",["require","exports","module","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-Helper","module/V2-watchSet","view/searchItem"],function(e){var t=(e("./V2-API"),e("./V2-V-Variable")),n=e("./V2-M-Variable"),a=a||{};a.Helper=e("./V2-M-Helper");var i,o=e("./V2-watchSet"),r=e("../view/searchItem"),l=l||{};return l.init=function(e){o.set(n.status,"searchItemIndex",-1,l.tab),n.searchTimmer&&(clearTimeout(n.searchTimmer),n.searchTimmer=null),n.searchTimmer=setTimeout(function(){var e=t.ele.search.val().toLowerCase(),a={specialFriend:{},ordinaryFriend:{},group:{},discuss:{},follow:{},fans:{}},s=!1,c="";return""==e.trim()?(t.box.search.addClass("hide"),!1):($.each(n.relation,function(t,n){$.each(n,function(n,i){var o=i.remarkname?i.remarkname.toLowerCase():"",r=i.remarkname_pyinitial?i.remarkname_pyinitial.toLowerCase():"",l=i.remarkname_pyquanpin?i.remarkname_pyquanpin.toLowerCase():"",c=i.name?i.name.toLowerCase():"",u=i.name_pyinitial?i.name_pyinitial.toLowerCase():"",d=i.name_pyquanpin?i.name_pyquanpin.toLowerCase():"";(n&&n.indexOf(e)!=-1||o.indexOf(e)!=-1||r.indexOf(e)!=-1||l.indexOf(e)!=-1||c.indexOf(e)!=-1||u.indexOf(e)!=-1||d.indexOf(e)!=-1)&&(s=!0,i.name&&(a[t][n]=i))})}),s&&(a.specialFriend&&(c+=r({list:a.specialFriend,tit:"好友",type:"user",idType:"momoid"})),a.ordinaryFriend&&(c+=r({list:a.ordinaryFriend,tit:"好友",type:"user",idType:"momoid"})),a.group&&(c+=r({list:a.group,tit:"群组",type:"group",idType:"gid"})),a.discuss&&(c+=r({list:a.discuss,tit:"讨论组",type:"discuss",idType:"did"})),a.follow&&(c+=r({list:a.follow,tit:"好友",type:"user",idType:"momoid"})),a.fans&&(c+=r({list:a.fans,tit:"好友",type:"user",idType:"momoid"}))),c?(t.box.searchList.html(c),n.status.searchLength=t.box.searchList.find("li.search-item").length,n.status.searchLength<14?$(".search-list-box .jspContainer").css("height",35*n.status.searchLength+20+"px"):(i=$(".search-list-box").jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),$(".search-list-box .jspContainer").css("height","500px")),$(".search-list-box").removeClass("hide")):$(".search-list-box").addClass("hide"),void o.set(n.status,"searchItemIndex",0,l.tab))},200)},l.focusin=function(e){n.status.isSearchFocus=!0},l.focusout=function(){n.status.isSearchFocus=!1,o.set(n.status,"searchItemIndex",0,l.tab),t.ele.search.val(""),t.ele.search.removeClass("on"),t.box.searchList.html(""),t.box.search.addClass("hide"),i&&i.data().jsp&&i.data().jsp.destroy()},l.tab=function(e,t,a,i){if(a!==-1){var o=$(".search-list-box li.search-item").removeClass("on").eq(a).addClass("on");n.status.selectId=o.attr("data-id"),n.status.selectType=o.attr("data-type")}},l.hover=function(){o.set(n.status,"searchItemIndex",$(this).index(),l.tab)},l}),define("module/V2-VM-Helper",["require","exports","module","module/V2-storage","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-Audio","module/V2-M-Helper","module/V2-VM-fileHelper","module/V2-VM-cacheMsg","module/V2-M-Search"],function(e){var t=(e("./V2-storage"),e("./V2-V-Variable")),n=e("./V2-M-Variable"),a=a||{};a.audio=e("./V2-M-Audio"),a.Helper=e("./V2-M-Helper");var i=i||{};i.fileHelper=e("./V2-VM-fileHelper"),i.cacheMessage=e("./V2-VM-cacheMsg"),i.search=e("./V2-M-Search");var o=o||{};return o.scrollAuto=function(e,t,n,a,i,o){var r=1==a?i:"-"+i,l=1==a&&t>o-1,s=a==-1&&n-t>o;0==t?e.data("jsp").scrollTo(0,!1):t==n-1?e.data("jsp").scrollToBottom():(l||s)&&e.data("jsp").scrollByY(r,!1)},o.newMsgTips=function(e){e?t.ele.newMsgTips.removeClass("hide"):t.ele.newMsgTips.addClass("hide").data("unreadPointId",""),n.status.isNewMsgTipsShow=e},o.loadingHistoryMsgs=function(e){n.showLoadTimer&&clearTimeout(n.showLoadTimer),n.showLoadTimer=setTimeout(function(){if(!n.fetchHistoryMsg&&n.msgScreenAPI.getIsScrollableV()&&0==n.msgScreenAPI.getPercentScrolledY()&&n.talk_to){var e=n.talk_to[n.talk_to.idType],a=n.talk_to.typeName;if("store"==a&&(a="user"),n.msgs[a]&&n.msgs[a][e]){var i=n.msgs[a][e].length,o=t.box.msgList.children(".msg").length;o<i&&(t.box.msgListWrapper.prepend('<p class="loading-tips">正在加载...</p>'),n.status.loadHistoryMsgs=!0)}}},20),n.scrollTimer&&clearTimeout(n.scrollTimer),n.scrollTimer=setTimeout(function(){if(!n.fetchHistoryMsg&&n.msgScreenAPI.getIsScrollableV()&&0==n.msgScreenAPI.getPercentScrolledY()&&n.talk_to&&n.status.loadHistoryMsgs){n.fetchHistoryMsg=!0;var t=n.talk_to[n.talk_to.idType],a=n.talk_to.typeName,o="";o=n.msgs[a][t],o&&o.length>0&&i.cacheMessage.init(o,"",e)}},100)},o.changeTalkReset=function(){t.box.msgList.html(""),n.msgScreenAPI.reinitialise(),i.fileHelper.Remove(),n.atMsg=!1,n.atList={},n._cache.ating=!1,n._cache.atmsgs={},n.fetchHistoryMsg=!1,n.status.loadHistoryMsgs=!1,n.fetchAllMsgs=!1,a.audio.onStop(),$(".loading-tips").get(0)&&$(".loading-tips").remove(),$(".check-new-msg").get(0)&&$(".check-new-msg").remove(),$(".edit-at-list-box").hasClass("hide")||($(".edit-at-list-box").addClass("hide"),$(".edit-at-list-box .edit-at-list").html(""),n._cache.ating=!1,n.status.atItemIndex=0,n.status.atLength=0,n.atScroll&&n.atScroll.data().jsp&&n.atScroll.data().jsp.destroy()),$(".search-list-box").hasClass("hide")||($(".search-list-box").addClass("hide"),i.search.focusout()),setTimeout(function(){t.ele.textarea.val("").focus()},10)},o.clearHistory=function(){a.Helper.clearMsgStorage(),a.Helper.clearMsgs(),o.clearScreenMsg(),a.Helper.clearUnread(),t.box.overLayer.find(".btn-clear-history").html("已清除"),setTimeout(function(){t.box.overLayer.find(".btn-clear-history").html("清空聊天记录")},500)},o.clearScreenMsg=function(){t.box.msgList.html(""),t.box.talkingList.children().find(".last-msg").remove(),t.box.talkingList.children().find(".username").removeClass("have-sign")},o}),define("view/roomMsgItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" room-to"},3:function(e,t,n,a){return" room-fr"},5:function(e,t,n,a){return" system"},7:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t<div class="room-avatar-box" data-id="'+r(o(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'">\n\t\t<img class="room-avatar" src="'+r(o(null!=(i=null!=e?e.profile:e)?i.avatar:i,e))+'"  data-id="'+r(o(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'" alt="">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.role:i,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")+"\t</div>\n"},8:function(e,t,n,a){var i;return'\t\t<p class="designation">\n\t\t\t'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.role:i,e))+"\n\t\t</p>\n"},10:function(e,t,n,a){return" transparent"},12:function(e,t,n,a){return" operate-type"},14:function(e,t,n,a){var i,o=this.lambda;return'\t\t<div class="room-content normal type1" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n\t\t\t'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.typeText:i,e))?i:"")+"\n\t\t</div>\n"},16:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t<div class="room-content normal type3" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'" style="width:'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.width:i,e))+'" data-id="'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" data-src="'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.src:i,e))+'" data-guid="'+r(o(null!=(i=null!=e?e.msg:e)?i.guid:i,e))+'">\n            <i data-id="play'+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'" class="play-icon"></i>\n            <span class="hide audio-icon-content">\n                <i class="audio-level animated"></i>    \n            </span>'+r(o(null!=(i=null!=(i=null!=e?e.msg:e)?i.typeText:i)?i.second:i,e))+"``\n"+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.iread:i,{
name:"unless",hash:{},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:"")+"        </div>\n"},17:function(e,t,n,a){return'                <i class="unread"></i>\n'},19:function(e,t,n,a){var i,o=this.lambda;return'\t\t<div class="room-content normal type5 '+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.custom:i,{name:"if",hash:{},fn:this.program(20,a,0),inverse:this.noop,data:a}))?i:"")+'" title="'+this.escapeExpression(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n\t\t\t<img oncontextmenu="return false" onmousedown="return false" src="'+(null!=(i=o(null!=(i=null!=e?e.msg:e)?i.bf:i,e))?i:"")+'"/>\t\n'+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.self:i,{name:"unless",hash:{},fn:this.program(22,a,0),inverse:this.noop,data:a}))?i:"")+"\t\t</div>\n"},20:function(e,t,n,a){return" custom"},22:function(e,t,n,a){return'\t\t\t\t<div class="collect-content hide">\n\t\t\t\t    <span class="collect-option">添加到表情</span>\n\t\t\t\t</div>\n'},24:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\t\t<div class="room-content normal type9" title="'+r(o(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n\t\t\t<p class="msg-title">我请求加你为好友，是否同意？</p>\n\t\t\t<p class="msg-btn-content">\n\t\t\t\t<input data-id="'+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+'" class="room-agree-btn" type="button" value="同意"/>\n\t\t\t\t<input data-id="'+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+'" class="room-refuse-btn" type="button" value="拒绝"/>\n\t\t\t</p>\n\t\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=t.helperMissing,r=this.lambda,l=this.escapeExpression;return'<li class="room-msg'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.self:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:"2"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+' clearfix"  data-timeid="'+l(r(null!=(i=null!=e?e.msg:e)?i.t:i,e))+'" id="'+l(r(null!=(i=null!=e?e.msg:e)?i._id:i,e))+'">\n'+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.msg:e)?i.self:i,{name:"unless",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'\t<p class="room-speak-name'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.self:i,{name:"if",hash:{},fn:this.program(10,a,0),inverse:this.noop,data:a}))?i:"")+'">'+l(r(null!=(i=null!=e?e.profile:e)?i.name:i,e))+'</p>\n\t<div class="room-user-msg-box clearfix type'+l(r(null!=(i=null!=e?e.msg:e)?i.type:i,e))+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:"2"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"9"},fn:this.program(12,a,0),inverse:this.noop,data:a}))?i:"")+'" title="'+l(r(null!=(i=null!=e?e.msg:e)?i.formatTime:i,e))+'">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"1"},fn:this.program(14,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"3"},fn:this.program(16,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"5"},fn:this.program(19,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.type:i,{name:"isEqual",hash:{equals:"9"},fn:this.program(24,a,0),inverse:this.noop,data:a}))?i:"")+"\t</div>\n</li>"},useData:!0})}),define("module/chatroom/room-VM-addMessage",["require","exports","module","module/chatroom/room-M-Variable","module/V2-M-MsgFactory","module/chatroom/room-M-Helper","module/V2-timeHelper","module/V2-VM-Helper","view/roomMsgItem"],function(e){var t=e("./room-M-Variable"),n={};n.msgFactory=e("../V2-M-MsgFactory"),n.roomHelper=e("./room-M-Helper");var a=e("../V2-timeHelper"),i={};i.Helper=e("../V2-VM-Helper");var o=e("../../view/roomMsgItem"),r=function(e,i){if(e.msgType&&"achatroom"==e.msgType?(e.typeText=e.text,e.type=1):($.when(n.msgFactory.msgFactory(e)).done(function(t){e.typeText=t}),e.formatTime=a.formate(e.t),e.fr!=window.enMomoid&&""!=e.fr||(e.self=1),5==e.type&&e.bf&&e.bf.indexOf("/et/custom/")>-1&&(e.custom=1)),e.to==t.curRoomId){var r=o({msg:e,profile:i});if($(".chatroom-container .room-screen-box .room-msg-list").append(r),$(".chatroom-container .room-screen-box .room-msg-list li")[0]){var l=$(".chatroom-container .room-screen-box .room-msg-list li").length-t.maxMsgCount;if(l>0)for(var s=l;s>0;s--)$(".chatroom-container .room-screen-box .room-msg-list li:nth-child("+s+")").remove()}}var c=$(".chatroom-container .room-screen-box").height(),u=$(".chatroom-container .room-screen-box .room-msg-list").height(),d=$(".chatroom-container .room-screen-box .jspTrack")[0],m=$(".chatroom-container .room-screen-box .jspDrag")[0];if(d&&m){var f=$(".chatroom-container .room-screen-box .jspTrack").height(),p=$(".chatroom-container .room-screen-box .jspDrag").height(),h=$(".chatroom-container .room-screen-box .jspDrag").css("top");parseInt(p)+parseInt(h)!=parseInt(f)}u+3>c&&(t.checkProfile&&$(".room-profile-box")[0]||(t.ChatroomScreenAPI.reinitialise(),t.ChatroomScreenAPI.scrollToBottom())),2==e.style&&1==e.type&&e.text&&e.text.indexOf("你因为长时间离开聊天室已自动退出")>-1&&n.roomHelper.socketControl("eixt",$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid"))};return{roomAddMsg:r}}),define("module/chatroom/room-VM-SendMsg",["require","exports","module","module/chatroom/room-M-Variable","module/chatroom/room-API","module/chatroom/room-VM-addMessage"],function(e){var t=e("./room-M-Variable"),n=e("./room-API"),a=e("./room-VM-addMessage"),i=function(e){if(t.curRoomId&&!t.sendTooFast){var i={},o=t.curRoomId,r="room"+String(Math.random()).substr(-5)+Date.now()+o;if(e)e&&e.url.indexOf("/et/custom/")>-1&&(e.bd="webmomocustom",e.be="custom"),i={text:e,fr:t.accountId,type:5,_id:r},window.room.emit("sendMsg",JSON.stringify(i));else{e=$(".room-edit-box .edit-content").val();var l=""==$(".room-edit-box .edit-content").val().replace(/\s+/g,"");if(l)return!1;i={text:e,fr:t.accountId,type:1,_id:r},window.room.emit("sendMsg",JSON.stringify(i)),$(".room-edit-box .edit-content").val("")}t.noResponseMsg=t.noResponseMsg||[],t.noResponseMsg.push(r+t.curRoomId),i.to=t.curRoomId,i.fr=window.enMomoid,5==i.type&&(i.bf=e.url),t.roomMembers&&!t.roomMembers[t.accountId]?n.getSimpleProfile(t.accountId,function(e,t){t&&a.roomAddMsg(i,t)}):a.roomAddMsg(i,t.roomMembers[t.accountId])}};return{roomSend:i}}),define("view/faceItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o=this.escapeExpression;return'    <li class="'+o(this.lambda(e,e))+' em2" data-icon-key='+o((i=null!=(i=t.key||a&&a.key)?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"key",hash:{},data:a}):i))+"></li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/faceModule",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div class="emotions-wrap fadeInUp animated hide">\n    <div class="tab_header">\n        <ul class="emotion-nav clearfix">\n        </ul>\n    </div>\n    <div class="tab_content_container emotions-content">\n        <div class="tab_content df-content current">\n            <ul class="emotion-list clearfix">\n            </ul>\n        </div>\n    </div>\n</div>\n'},useData:!0})}),define("module/V2-V-Face",["require","exports","module","module/V2-API","lib/jquery.tab","module/V2-V-Variable","module/V2-M-Variable","module/chatroom/room-M-Variable","module/chatroom/room-VM-SendMsg","view/faceItem","collectError","view/faceModule","view/colorfulEgg"],function(e){var t=e("./V2-API");e("lib/jquery.tab");var n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=(e("./chatroom/room-M-Variable"),e("./chatroom/room-VM-SendMsg")),o=e("../view/faceItem"),r=(e("collectError"),e("../view/faceModule")),l=e("../view/colorfulEgg"),s=function(){if($(".icon-face").html(r()),!$(".icon-face").hasClass("done")){$(".icon-face").addClass("done"),$(".icon-face").on("click",function(){$(".emotions-wrap").toggleClass("hide").find("tab_content").removeClass("current"),$(".emotions-wrap .df-content").addClass("current"),t.getBigEmotionList()}),$(".icon-face").on("click",".emotions-wrap > *",function(e){e.stopPropagation()}),$(".icon-face").on("click",".emotion-list li",function(){c($(this))}),$(".icon-face").on("mouseenter",".emotions-content .tab_content.current ul.bf-list li",function(){var e=$(".tab_content.current ul.bf-list").attr("data-detail-weid"),t=n.bigEmotionDetail[e],a=$(this).attr("class");if(t){var i=t[a];i&&$(this).find("img").attr("src",i.url)}}).on("mouseleave",".emotions-content .tab_content.current ul.bf-list li",function(){var e=$(".tab_content.current ul.bf-list").attr("data-detail-weid"),t=n.bigEmotionDetail[e],a=$(this).attr("class");if(t){var i=t[a];i&&$(this).find("img").attr("src",i.surl)}}).on("click",".tab_content.current ul.bf-list li",function(){var e=$(".tab_content.current ul.bf-list").attr("data-detail-weid"),t=n.bigEmotionDetail[e],o=$(this).attr("class");if(t){var r=t[o];if(r&&"chat"==a.currentPage){var l={};l=r.cdan?{bd:r.d,be:r.eid,bs:r.s,bi:r.img}:{bd:r.d,be:r.eid,bs:r.s,bi:r.img},a.status.sendType=5,a.status.bigFace=r.url,a.status.sendText=l,r.stail?a.status.bfHasTail=!0:a.status.bfHasTail=!1,n.ele.send.trigger("click")}else if(r&&"chatroom"==a.currentPage){var l={bd:r.d,be:r.eid,bs:r.s,bi:r.img,url:r.url};i.roomSend(l)}}});var e;$(".colorful-egg").on("mouseenter",function(){if("chat"==a.currentPage&&a.talk_to||"chatroom"==a.currentPage){a.showColorfulEgg=!0;var n=a.talk_to.idType,i=a.talk_to[n],o=$(".pre-egg-box").attr("data-id"),r=2;e&&clearTimeout(e),e=setTimeout(function(){o&&a.showColorfulEgg&&a.sendedColorEgg[o][n].indexOf(i)<0&&(r=1),(window.ie8||"chatroom"==a.currentPage)&&$(".pre-egg-box").css("left","10px"),$(".pre-egg-box").removeClass("hide");var e={action:"eggs_hover",to:i,type:"momoid"==n?1:2,eggsid:o||"",status:r};t.pushEggCount(e)},100)}}).on("mouseleave",function(){e&&clearTimeout(e),a.showColorfulEgg=!1,$(".pre-egg-box").addClass("hide")}).on("click",function(){$(".pre-egg-box").trigger("click")}),$(".pre-egg-box").on("click",function(){if(a.talk_to){var e=a.talk_to.idType,i=a.talk_to[e],o=$(".pre-egg-box").attr("data-id"),r=2;$(".pre-egg-box").html(l({data:{}})).addClass("hide").attr("data-id",""),$(".colorful-egg").removeClass("useful"),o&&a.sendedColorEgg[o][e].indexOf(i)<0&&(a.eggSendId=o,r=1,n.ele.send.trigger("click"));var s={action:"eggs_click",to:i,type:"momoid"==e?1:2,eggsid:o||"",status:r};t.pushEggCount(s)}})}$(".emotion-list").html(o({list:n.faceList2}))},c=function(e){var t="[/"+e.attr("data-icon-key")+"]",a=n.ele.textarea[0];e.parents(".edit-box").hasClass("room-edit-box")&&(a=$(".chatroom-container .room-edit-box .edit-content")[0]),u(t,a)},u=function(e,t){if(document.selection){t.focus();var n=document.selection.createRange();n.text=e,n.select()}else if(t.selectionStart||"0"==t.selectionStart){var a=t.selectionStart,i=t.selectionEnd,o=t.scrollTop;t.value=t.value.substring(0,a)+e+t.value.substring(i,t.value.length),o>0&&(t.scrollTop=o),t.selectionStart=a+e.length,t.selectionEnd=a+e.length,t.focus()}else t.value+=e,t.focus()};return{init:s,selectEmo:c,insertLable:u}}),define("module/mylive/MYLIVE-V-Variable",["require","exports","module"],function(e){var t={myliveAnchorBox:$(".myliveAnchorBox"),mylivePlayerContainerBox:$(".mylivePlayerContainerBox"),mylivePlayerContainer:$(".mylivePlayerContainer"),myliveRoomContent:$(".myliveRoomContent"),myliveChatBox:$(".myliveChatBox"),myliveREnterBox:$(".myliveChatBox .R-enter-box"),myliveEditBox:$(".myliveEditBox"),myliveChatMsgBox:$(".myliveChatBox .mylive-chat-msg-box"),myliveChatMsgList:$(".mylive-msg-list"),rankingListBox:$(".myliveStarCharts"),rankingList:$(".myliveRankingList"),masterList:$(".myliveMasterList"),layfolkList:$(".myliveLayfolkList"),myliveOnline:$(".myliveOnline"),myliveFansAttraction:$(".myliveFansAttraction"),myliveGiftAttraction:$(".myliveGiftAttraction"),myliveGiftAttractionBox:$(".myliveGiftAttractionListBox"),myliveGiftAttractionList:$(".myliveGiftAttractionList"),myliveGiftEffectList:$(".myliveGiftEffectList")},n={editArea:$(".myliveEditBox .editArea"),sendBtn:$(".myliveEditBox .sendBtn"),barrageBtn:$(".myliveEditBox .barrageBtn"),myliveOnlineMore:$(".myliveOnlineMore"),myliveNewMsgTips:$(".mylive-new-msg-tip"),myliveGiftEffectFirstEle:$(".myliveGiftEffectList .myliveGiftEffectItem.first"),myliveGiftEffectSecondEle:$(".myliveGiftEffectList .myliveGiftEffectItem.second"),myliveGiftEffectThirdEle:$(".myliveGiftEffectList .myliveGiftEffectItem.third")};return{box:t,ele:n}}),define("module/mylive/MYLIVE-VM-Helper",["require","exports","module","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-M-Variable","module/V2-V-Layer","module/momolive/LIVE-M-GiftModel","module/V2-Tips","module/V2-M-Variable","module/mylive/MYLIVE-API"],function(e){var t={},n=e("./MYLIVE-V-Variable"),a=e("./MYLIVE-M-Variable"),i={};i.layer=e("../V2-V-Layer");var o=e("../momolive/LIVE-M-GiftModel"),r=e("../V2-Tips"),l=e("../V2-M-Variable");return t.onOffScroll=function(){n.box.myliveChatBox.find(".scrollBtn").toggleClass("onScroll"),a.status.onScroll=!a.status.onScroll},t.myliveNewMsgTips=function(e){e?n.ele.myliveNewMsgTips.removeClass("hide"):n.ele.myliveNewMsgTips.addClass("hide"),a.status.isMyliveNewMsgTipsShow=e},t.sendBarrage=function(t){if(window.momoid){if(window.winC.disconnected)return void r.Warning(a.disconnectMsg,3e3);var o=n.box.mylivePlayerContainer.find(".mylivePlayerContent"),l=o.attr("data-rd"),s=o.attr("data-sid"),c=n.box.myliveAnchorBox.find(".myliveAnchorInfo").attr("data-stid"),u=n.box.myliveAnchorBox.find(".myliveAnchorInfo").attr("data-mtoken"),d=t,m=e("./MYLIVE-API");m.postTextBarrage({rd:l,sid:s,stid:c,mtoken:u,text:d},function(e,t){if(!e)if(t.status)n.ele.editArea.val("");else if("当前余额不足，请去充值"===t.desc){var a="liveInsufficientToolTip",o={momoid:window.momoid,type:"insufficient"};i.layer.onOff(a,o)}})}},t.tabReinitial=function(e){if(e.parent()){var t=parseInt(e.parent().innerWidth()/2),n=0,a=0;0===e.parent().find(".on").parent().index()?(n=t,a=0):(n=t,a=t),e.css({width:n+"px",left:a+"px"})}},t.findGiftEffectPostionClass=function(){return n.ele.myliveGiftEffectFirstEle.find(".giftEffectWrap")[0]?n.ele.myliveGiftEffectSecondEle.find(".giftEffectWrap")[0]?n.ele.myliveGiftEffectThirdEle.find(".giftEffectWrap")[0]?"":"third":"second":"first"},t.destory=function(){a.myliveInfo={},a.giftEffectQueue=[],a.giftManyTime={},o.resetQueue(),n.box.mylivePlayerContainer.find(".mylivePlayerContent").html("");var e=n.box.myliveGiftEffectList.find(".myliveGiftEffectItem .giftEffectWrap");e[0]&&e.each(function(){$(this)[0].hasAttribute("data-timeout")&&clearTimeout($(this).attr("data-timeout"))}),n.box.myliveGiftEffectList.find(".myliveGiftEffectItem").html(""),n.box.myliveChatMsgList.find(".mylive-chat-msg").remove()},t.getManyTimesGift=function(e){var t=null;return a.giftManyTime[e.msg.fr]&&a.giftManyTime[e.msg.fr][e.msg.bd.productId]&&a.giftManyTime[e.msg.fr][e.msg.bd.productId].length>0&&a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].length>0?e.timestamp!==a.giftManyTime[e.msg.fr][e.msg.bd.productId][0][0].timestamp||(e.isFirst?(a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].shift(),a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].length>0?1===a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].length?(t=a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].shift(),a.giftManyTime[e.msg.fr][e.msg.bd.productId].splice(0,1),0===a.giftManyTime[e.msg.fr][e.msg.bd.productId].length&&(delete a.giftManyTime[e.msg.fr][e.msg.bd.productId],0===Object.keys(a.giftManyTime[e.msg.fr]).length&&delete a.giftManyTime[e.msg.fr])):t=a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].shift():(a.giftManyTime[e.msg.fr][e.msg.bd.productId].splice(0,1),0===a.giftManyTime[e.msg.fr][e.msg.bd.productId].length&&(delete a.giftManyTime[e.msg.fr][e.msg.bd.productId],0===Object.keys(a.giftManyTime[e.msg.fr]).length&&delete a.giftManyTime[e.msg.fr]))):(t=a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].shift(),0===a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].length&&(a.giftManyTime[e.msg.fr][e.msg.bd.productId].splice(0,1),0===a.giftManyTime[e.msg.fr][e.msg.bd.productId].length&&(delete a.giftManyTime[e.msg.fr][e.msg.bd.productId],0===Object.keys(a.giftManyTime[e.msg.fr]).length&&delete a.giftManyTime[e.msg.fr])))):a.giftManyTime[e.msg.fr]&&(a.giftManyTime[e.msg.fr][e.msg.bd.productId]?0===a.giftManyTime[e.msg.fr][e.msg.bd.productId][0].length&&(delete a.giftManyTime[e.msg.fr][e.msg.bd.productId],0===Object.keys(a.giftManyTime[e.msg.fr]).length&&delete a.giftManyTime[e.msg.fr]):0===Object.keys(a.giftManyTime[e.msg.fr]).length&&delete a.giftManyTime[e.msg.fr]),t},t.initPlayer=function(e,n){var a=$f(e,{src:"/media/flowplayer-3.2.18.swf",wmode:"opaque",quality:"best",allowfullscreen:!1},{plugins:{controls:null},playlist:[{url:n.url,onStart:function(){1!==n.rtype&&0!==n.rtype||a.getClip().metaData.height/a.getClip().metaData.width===.75&&$("#"+e+" object").addClass("scale-4-3"),t.volumeInit(),setTimeout(function(){$(".loading-mask-box").remove()},500)}}]});return a},t.volumeInit=function(){l.audio&&(l.audio.muted=!0),a.myliveFlowPlayer&&a.myliveFlowPlayer.mute(),n.box.mylivePlayerContainer.find(".myliveVolume .vol-btn").addClass("mute")},t}),define("view/myliveChatMsgItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=t.helperMissing;return(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:1},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:9},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")},2:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return"<li class='mylive-chat-msg' id='"+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+"' data-token='"+r(o(null!=(i=null!=e?e.msg:e)?i.token:i,e))+"' data-dmid='"+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+'\'>\n    <p class="fortune-level">\n        <img src="/img/fortuneLevel/ml_w_lv_'+r(o(null!=(i=null!=e?e.msg:e)?i.fortune:i,e))+'@2x.png" class="fortune-level-img">\n    </p>\n    <div class="contentWarp">\n        <span class="name">'+r(o(null!=(i=null!=e?e.msg:e)?i.nname:i,e))+':</span><span class="content">'+r(o(null!=(i=null!=e?e.msg:e)?i.text:i,e))+"</span>\n    </div>\n</li>\n"},4:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return"<li class='mylive-chat-msg' id='"+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+"' data-token='"+r(o(null!=(i=null!=e?e.msg:e)?i.token:i,e))+"' data-dmid='"+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+"'>\n"+(null!=(i=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.fortune:i,null!=(i=null!=e?e.msg:e)?i.charm:i,{name:"compare",hash:{operator:">="},fn:this.program(5,a,0),inverse:this.program(7,a,0),data:a}))?i:"")+'    <div class="enterMsg"><span class="name">'+r(o(null!=(i=null!=e?e.msg:e)?i.nname:i,e))+"</span>"+r(o(null!=(i=null!=e?e.msg:e)?i.text:i,e))+"</div>\n</li>\n"},5:function(e,t,n,a){var i;return'        <p class="fortune-level">\n            <img src="/img/fortuneLevel/ml_w_lv_'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.fortune:i,e))+'@2x.png" class="fortune-level-img">\n        </p>\n'},7:function(e,t,n,a){var i;return'        <p class="charm-level">\n            <img src="/img/charmLevel/ml_c_lv_'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.charm:i,e))+'@2x.png" class="charm-level-img">\n        </p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/myliveRankingItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li class="rankingItem '+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"0"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"1"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"2"},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'" data-rl-mid="'+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+'">\n            <img class="fansIcon" src="'+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+'"/>\n            <div class="contributionMsg">\n                <p class="contributionTitle">'+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+'</p>\n                <p class="contributionVal">'+s((o=null!=(o=t.score||(null!=e?e.score:e))?o:r,typeof o===l?o.call(e,{name:"score",hash:{},data:a}):o))+'<img class="rankStarImg" src="/img/star.png" alt=""/></p>\n            </div>\n            '+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"0"},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+"\n            "+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"1"},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+"\n            "+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,a&&a.key,{name:"isEqual",hash:{equals:"2"},fn:this.program(13,a,0),inverse:this.noop,data:a}))?i:"")+"\n        </li>\n"},3:function(e,t,n,a){return"rank1"},5:function(e,t,n,a){return"rank2"},7:function(e,t,n,a){return"rank3."},9:function(e,t,n,a){return' <img class="ranking" src="/img/rank1.png" alt=""/>'},11:function(e,t,n,a){return' <img class="ranking" src="/img/rank2.png" alt=""/>'},13:function(e,t,n,a){return' <img class="ranking" src="/img/rank3.png" alt=""/>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/myliveOnlineLayfolkItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='userItem layfolkItem clearfix' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\">\n            <img class='userIcon' src='"+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+"' alt=''/>\n            <div class='userMsg'>\n                <p class='userName'>"+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+"</p>\n                <img class='sexIcon'  src='"+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"M"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"F"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"'/>\n                <img class='fortunelevel level level"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.fortune:e,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+" data-fortune='"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"'/>\n                <img class='charmlevel level level"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.charm:e,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+" data-charm='"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"'/>\n            </div>\n        </li>\n"},3:function(e,t,n,a){return"/img/sex-male.png"},5:function(e,t,n,a){return"/img/sex-female.png"},7:function(e,t,n,a){var i;return"src='/img/fortuneLevel/ml_w_lv_"+this.escapeExpression((i=null!=(i=t.fortune||(null!=e?e.fortune:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"fortune",hash:{},data:a}):i))+"@2x.png'"},9:function(e,t,n,a){var i;return"src='/img/charmLevel/ml_c_lv_"+this.escapeExpression((i=null!=(i=t.charm||(null!=e?e.charm:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"charm",hash:{},data:a}):i))+"@2x.png'"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return(null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+"\n"},useData:!0})}),define("view/myliveOnlineMasterItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return"        <li class='userItem masterItem clearfix' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\">\n            <img class='userIcon' src='"+s((o=null!=(o=t.avatar||(null!=e?e.avatar:e))?o:r,typeof o===l?o.call(e,{name:"avatar",hash:{},data:a}):o))+"' data-dmid=\""+s((o=null!=(o=t.mid||(null!=e?e.mid:e))?o:r,typeof o===l?o.call(e,{name:"mid",hash:{},data:a}):o))+'"  data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+"\"/>\n            <div class='userMsg'>\n                <p class='userName masterMsg'>"+s((o=null!=(o=t.nname||(null!=e?e.nname:e))?o:r,typeof o===l?o.call(e,{name:"nname",hash:{},data:a}):o))+'</p>\n                <img class="district" src="/img/masterIcon.png"/>\n                <img class=\'sexIcon\'  src=\''+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"M"},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||r).call(e,null!=e?e.sex:e,{name:"isEqual",hash:{equals:"F"},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+"'/>\n                <img class='fortunelevel level level"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.fortune:e,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+" data-fortune='"+s((o=null!=(o=t.fortune||(null!=e?e.fortune:e))?o:r,typeof o===l?o.call(e,{name:"fortune",hash:{},data:a}):o))+"'/>\n                <img class='charmlevel level level"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"' "+(null!=(i=t["if"].call(e,null!=e?e.charm:e,{name:"if",hash:{},fn:this.program(9,a,0),inverse:this.noop,data:a}))?i:"")+" data-charm='"+s((o=null!=(o=t.charm||(null!=e?e.charm:e))?o:r,typeof o===l?o.call(e,{name:"charm",hash:{},data:a}):o))+"'/>\n            </div>\n        </li>\n"},3:function(e,t,n,a){return"/img/sex-male.png"},5:function(e,t,n,a){return"/img/sex-female.png"},7:function(e,t,n,a){var i;return"src='/img/fortuneLevel/ml_w_lv_"+this.escapeExpression((i=null!=(i=t.fortune||(null!=e?e.fortune:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"fortune",hash:{},data:a}):i))+"@2x.png'"},9:function(e,t,n,a){var i;return"src='/img/charmLevel/ml_c_lv_"+this.escapeExpression((i=null!=(i=t.charm||(null!=e?e.charm:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"charm",hash:{},data:a}):i))+"@2x.png'"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/myliveGiftAttractionItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'        <li class="myliveGiftItem'+(null!=(i=t["if"].call(e,null!=e?e.isLittleGift:e,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'" data-user="'+s((o=null!=(o=t.userId||(null!=e?e.userId:e))?o:r,typeof o===l?o.call(e,{name:"userId",hash:{},data:a}):o))+'" data-product="'+s((o=null!=(o=t.productId||(null!=e?e.productId:e))?o:r,typeof o===l?o.call(e,{name:"productId",hash:{},data:a}):o))+'" data-dmid="'+s((o=null!=(o=t.dmid||(null!=e?e.dmid:e))?o:r,typeof o===l?o.call(e,{name:"dmid",hash:{},data:a}):o))+'" data-token="token">\n            <div class="userBox" data-id="'+s((o=null!=(o=t.userId||(null!=e?e.userId:e))?o:r,typeof o===l?o.call(e,{name:"userId",hash:{},data:a}):o))+'">\n                <img class="userImg" src="'+s((o=null!=(o=t.userImg||(null!=e?e.userImg:e))?o:r,typeof o===l?o.call(e,{name:"userImg",hash:{},data:a}):o))+'"></img>\n                <div class="content">\n                    <p class="name">'+s((o=null!=(o=t.userName||(null!=e?e.userName:e))?o:r,typeof o===l?o.call(e,{name:"userName",hash:{},data:a}):o))+'</p>\n                    <p class="text"><span class="giftName">送 '+s((o=null!=(o=t.giftName||(null!=e?e.giftName:e))?o:r,typeof o===l?o.call(e,{name:"giftName",hash:{},data:a}):o))+'</span></p>\n                </div>\n            </div>\n            <div class="giftBox" data-id="'+s((o=null!=(o=t.productId||(null!=e?e.productId:e))?o:r,typeof o===l?o.call(e,{name:"productId",hash:{},data:a}):o))+'">\n                <img class="giftImg" src="'+s((o=null!=(o=t.giftUrl||(null!=e?e.giftUrl:e))?o:r,typeof o===l?o.call(e,{name:"giftUrl",hash:{},data:a}):o))+'">\n                <p class="giftCount'+(null!=(i=t["if"].call(e,null!=e?e.isManyTimes:e,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+'">x'+s((o=null!=(o=t.giftNumber||(null!=e?e.giftNumber:e))?o:r,typeof o===l?o.call(e,{name:"giftNumber",hash:{},data:a}):o))+"</p>\n            </div>\n        </li>\n"},3:function(e,t,n,a){return" little-gift"},5:function(e,t,n,a){return" many-times"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.list:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("module/mylive/MYLIVE-VM-Update",["require","exports","module","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-M-Helper","module/mylive/MYLIVE-VM-Helper","view/myliveChatMsgItem","view/myliveRankingItem","view/myliveOnlineLayfolkItem","view/myliveOnlineMasterItem","module/mylive/MYLIVE-M-Helper","view/myliveGiftAttractionItem"],function(e){
var t=e("./MYLIVE-V-Variable"),n=e("./MYLIVE-M-Variable");n.Helper=e("./MYLIVE-M-Helper");var a={};a.Helper=e("./MYLIVE-VM-Helper");var i=e("../../view/myliveChatMsgItem"),o=function(a){if(a.length>0){var i=e("../../view/myliveRankingItem");t.box.rankingList.html(i({list:a}))}n.ranksListAPI?n.ranksListAPI.reinitialise():n.Helper.initScrollFn(t.box.rankingListBox,"ranksList")},r=function(a,i){for(var o,r=[],l=0;l<a.users.length;l++)o=a.users[l].mid,n.onlineUserObj[o]||(n.onlineUserObj[o]=1,r.push(a.users[l]));for(var s,c=[],u=0;u<a.managers.length;u++)s=a.managers[u].mid,n.onlineManagerObj[s]||(n.onlineManagerObj[s]=1,c.push(a.managers[u]));if(t.box.layfolkList){var d=e("../../view/myliveOnlineLayfolkItem");i?t.box.layfolkList.html(d({list:r})):t.box.layfolkList.append(d({list:r}))}if(t.box.masterList){var m=e("../../view/myliveOnlineMasterItem");i?t.box.masterList.html(m({list:c})):t.box.masterList.append(m({list:c}))}n.onlineListNext=a.h_next,n.onlineListAPI?n.onlineListAPI.reinitialise():(n.Helper=e("./MYLIVE-M-Helper"),n.Helper.initScrollFn(t.box.myliveOnline,"onlineList"))},l=function(e){var n=t.box.myliveAnchorBox.find(".levelNum"),a=t.box.myliveAnchorBox.find(".needExp");n.text(e.level),a.text(e.needExp)},s=function(a){if(a.profile&&a&&a.gift){if(n.Helper.getIfGiftManyTimes(a)){var i=t.box.myliveGiftAttractionList.children('.myliveGiftItem[data-user="'+a.fr+'"][data-product="'+a.bd.productId+'"]').last();i[0]&&Number(a.bd.buyTimes)-Number(i.find(".giftCount").text().substr(1))===1&&i.remove()}t.box.myliveGiftAttractionList.children().length>=n.maxGiftListItemShow&&t.box.myliveGiftAttractionList.children(":nth-last-child("+(n.maxGiftListItemShow-1)+")").prevAll().fadeOut(500,function(){$(this).remove()});var o=e("../../view/myliveGiftAttractionItem");t.box.myliveGiftAttractionList.append(o({list:[{dmid:a.fr,token:a.token,userId:a.fr,userImg:a.profile.avatar,userName:a.profile.name,productId:a.bd.productId,giftName:a.gift.name,giftUrl:a.gift.image,giftNumber:a.bd.buyTimes,isLittleGift:!a.gift.rocket,timestamp:a.timestamp,isManyTimes:Number(a.bd.buyTimes)>1}]})),n.giftAttractionListAPI?(n.giftAttractionListAPI.reinitialise(),n.giftAttractionListAPI.scrollToBottom()):(n.Helper.initScrollFn(t.box.myliveGiftAttractionBox,"giftAttractionList"),n.giftAttractionListAPI.scrollToBottom())}},c=function(e){var o=i({msg:e});if(t.box.myliveChatMsgList&&t.box.myliveChatMsgList[0]){if(n.status.onScroll&&t.box.myliveChatMsgList.children().length>n.maxMsgShow-1){t.box.myliveChatMsgList.find("li:first-child").remove()}t.box.myliveChatMsgList.append(o)}var r=t.box.myliveChatMsgBox.height(),l=t.box.myliveChatMsgList.height();if(l+3>r)if(n.status.onScroll){if(n.chatScrollTimer)return;n.chatScrollTimer=setTimeout(function(){n.chatMsgBox=t.box.myliveChatMsgBox.jScrollPane({contentWidth:"0px",animateScroll:!0}),n.chatMsgBoxAPI=n.chatMsgBox.data("jsp"),n.chatMsgBoxAPI.scrollToBottom(),n.chatScrollTimer=null},300)}else a.Helper.myliveNewMsgTips(!0)};return{updateRankingList:o,updateOnlineUserList:r,updateExp:l,updateMsgItem:c,updateGiftRecord:s}}),define("module/mylive/MYLIVE-VM-Handlers",["require","exports","module","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-API","module/V2-M-Variable","module/mylive/MYLIVE-VM-Update","module/V2-V-Layer","module/momolive/LIVE-API","module/V2-Tips","module/chatroom/room-M-Helper","module/mylive/MYLIVE-VM-Helper","view/liveMoreError","module/mylive/MYLIVE-VM-Helper","module/mylive/MYLIVE-VM-Update"],function(e){var t=t||{},n={},a=e("./MYLIVE-M-Variable"),i=e("./MYLIVE-V-Variable"),o=e("./MYLIVE-API"),r=e("../V2-M-Variable"),l={};n.update=e("./MYLIVE-VM-Update"),l.layer=e("../V2-V-Layer");var s=e("../momolive/LIVE-API"),c=e("../V2-Tips");return r.roomHelper=e("../chatroom/room-M-Helper"),t.chatScroll=function(){a.chatMsgBoxAPI&&a.chatMsgBoxAPI.getPercentScrolledY()>=1&&(a.chatMsgBoxAPI.reinitialise(),n.Helper=e("./MYLIVE-VM-Helper"),n.Helper.myliveNewMsgTips(!1))},t.onlineScroll=function(){if(a.onlineListAPI&&a.onlineListAPI.getIsScrollableV()&&a.onlineListAPI.getPercentScrolledY()>=1&&!a.status.isGetMoreUserList)if(a.onlineListNext){a.onlineUserPage+=1,a.status.isGetMoreUserList=!0;var t=i.box.mylivePlayerContainer.find(".mylivePlayerContent"),r=t.attr("data-momoid"),l=t.attr("data-rd"),s=t.attr("data-rtype"),c=a.onlineUserPage,u=!1;o.getOnlineUsers({rd:l,stid:r,rt:s,page:c},function(e,t){a.status.isGetMoreUserList=!1,e||n.update.updateOnlineUserList(t,u)})}else{var d=e("../../view/liveMoreError");i.ele.myliveOnlineMore.html(d).css({display:"inline-block"}).fadeIn(200),setTimeout(function(){i.ele.myliveOnlineMore.fadeOut(200,function(){$(this).html("").css("display","none")})},2e3)}},t.newMsgTipsClicked=function(){a.chatMsgBoxAPI&&a.chatMsgBoxAPI.scrollToBottom(),n.Helper=e("./MYLIVE-VM-Helper"),n.Helper.myliveNewMsgTips(!1)},t.initRanking=function(){var t=i.box.mylivePlayerContainer.find(".mylivePlayerContent"),a=t.attr("data-rd"),l=t.attr("data-rtype"),s=t.attr("data-sid"),c=t.attr("data-momoid");o.getStarValue({rd:a,rt:l,sid:s,stid:c},function(t,i){t||(r.roomHelper.liveControl({liveId:a,showId:s,starId:c},{rank:!0}),n.update=e("./MYLIVE-VM-Update"),n.update.updateRankingList(i))})},t.initOnline=function(){a.onlineUserPage=0,a.onlineManagerObj={},a.onlineUserObj={};var e=i.box.mylivePlayerContainer.find(".mylivePlayerContent"),t=e.attr("data-momoid"),r=e.attr("data-rd"),l=e.attr("data-rtype"),s=!0;o.getOnlineUsers({rd:r,stid:t,rt:l,page:a.onlineUserPage},function(e,t){e||n.update.updateOnlineUserList(t,s)})},t.rankingItemClicked=function(){var e=window.momoid,t=$(this).attr("data-rl-mid");if(t&&e&&parseInt(t)!==parseInt(e)&&a.myliveInfo){var n=a.myliveInfo.rid,i=a.myliveInfo.rtype,r=$(this).attr("data-token");o.getUserProfile({dmid:t,rid:n,token:r},function(e,o){if(!e){var r=o,s="liveProfile";r.fosAnchor=!1,r.rid=n,r.rtype=i,r.title=a.myliveInfo.title,r.dmid=t,r.isStar=!0,r.slience=!0,r.kick=!0,l.layer.onOff(s,r),r.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA"))}})}},t.userItemClicked=function(){var e=window.momoid,t=$(this).attr("data-mid");if(t&&e&&parseInt(t)!==parseInt(e)&&a.myliveInfo){var n=a.myliveInfo.rid,i=a.myliveInfo.rtype,r=$(this).attr("data-token");o.getUserProfile({dmid:t,rid:n,token:r},function(e,o){if(!e){var r=o,s="liveProfile";r.fosAnchor=!1,r.rid=n,r.rtype=i,r.title=a.myliveInfo.title,r.dmid=t,r.isStar=!0,r.slience=!0,r.kick=!0,l.layer.onOff(s,r),r.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA"))}})}},t.chatMsgNameClicked=function(){var e=!1,t=$(this),n=function(){e=!0},i=function(){if(!e){var r=window.momoid,s=t.attr("data-dmid");if(parseInt(s)!==parseInt(r)&&a.myliveInfo){var c=a.myliveInfo.rid,u=a.myliveInfo.rtype,d=t.attr("data-token"),m="profile";o.getUserProfile({dmid:s,rid:c,token:d,source:m},function(e,t){if(!e){var n=t,i="liveProfile";n.fosAnchor=!1,n.rid=c,n.rtype=u,n.title=a.myliveInfo.title,n.dmid=s,n.isStar=!0,n.slience=!0,n.kick=!0,l.layer.onOff(i,n),n.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA"))}})}}$(this).unbind("mousemove",n),$(this).unbind("mouseup",i)};$(document).bind("mouseup",i),$(document).bind("mousemove",n)},t.giftRecordItemClicked=function(){var e=window.momoid,t=$(this).attr("data-mid");if(t&&e&&parseInt(t)!==parseInt(e)&&a.myliveInfo){var n=a.myliveInfo.rid,i=a.myliveInfo.rtype,r=$(this).attr("data-token");o.getUserProfile({dmid:t,rid:n,token:r},function(e,o){if(!e){var r=o,s="liveProfile";r.fosAnchor=!1,r.rid=n,r.rtype=i,r.title=a.myliveInfo.title,r.dmid=t,r.isStar=!0,r.slience=!0,r.kick=!0,l.layer.onOff(s,r),r.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA"))}})}},t.giftEffectItemClicked=function(){var e=window.momoid,t=$(this).attr("data-mid");if(t&&e&&parseInt(t)!==parseInt(e)&&a.myliveInfo){var n=a.myliveInfo.rid,i=a.myliveInfo.rtype,r=$(this).attr("data-token");o.getUserProfile({dmid:t,rid:n,token:r},function(e,o){if(!e){var r=o,s="liveProfile";r.fosAnchor=!1,r.rid=n,r.rtype=i,r.title=a.myliveInfo.title,r.dmid=t,r.isStar=!0,r.slience=!0,r.kick=!0,l.layer.onOff(s,r),r.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA"))}})}},t.fosClicked=function(){var e=$(".profileContent").attr("data-fosAnchor"),t=$(".profileContent").attr("data-rid"),n=$(".profileContent").attr("data-dmid"),a="",i=$(".profileContent").attr("data-token");if(window.momoid){if(window.winC.disconnected)return void c.Warning(r.disconnectMsg,3e3);$(this).hasClass("noFod")&&(a="follow",s.postFocusUser(t,n,a,i,e))}else l.layer.onOff("notOnline")},t.reportClicked=function(){if(window.momoid){if(window.winC.disconnected)return void c.Warning(r.disconnectMsg,3e3);$(".reportReasonList").css("display","block")}else l.layer.onOff("notOnline")},t.reportReasonClicked=function(){$(".reportReasonList").css("display","none");var e=$(this).html(),t=$(".profileContent").attr("data-rid"),n=$(".profileContent").attr("data-title"),a=$(".profileContent").attr("data-dmid");s.postReportUser({content:e,roomid:t,room_name:n,remoteid:a},function(e,t){e?c.Warning(e.em,3e3):(l.layer.Off(),c.Warning("举报成功",1e3))})},t.slienceClicked=function(){var e=$(".profileContent").attr("data-dmid"),t=$(".profileContent").attr("data-rid"),n=$(".profileContent").attr("data-rtype"),i=a.myliveInfo.mtoken||"",r=$(".profileContent .profileName").text();o.postSilenceUser({mtoken:i,targetid:e,roomid:t,rtype:n},function(e,t){return e?void c.Warning(e.em,3e3):void(t?c.Warning(r+" 已被禁言",3e3):c.Warning("禁言失败，请稍后再试",3e3))}),l.layer.Off()},t.kickClicked=function(){var e=$(".profileContent").attr("data-dmid"),t=$(".profileContent").attr("data-rid"),n=$(".profileContent").attr("data-rtype"),i=a.myliveInfo.mtoken||"",r=$(".profileContent .profileName").text();o.postKickUser({mtoken:i,targetid:e,roomid:t,rtype:n},function(e,t){return e?void c.Warning(e.em,3e3):void(t?c.Warning(r+" 已被踢出直播间",3e3):c.Warning("踢人失败，请稍后再试",3e3))}),l.layer.Off()},t.volumeAdjust=function(e){var t=$(this),n=e.pageY,i=Number(t.css("bottom").slice(0,-2));$(document).bind("mousemove",function(e){var o,l=e.pageY,s=n-l,c=(i+s)/t.parent().height();c>1?(c=1,o="96%"):c<0?(c=0,o="-4%"):(c=c,o=100*c+"%"),t.parents(".liveBox")[0]?a.myliveFlowPlayer&&a.myliveFlowPlayer.setVolume(100*c):t.parents(".msgBox")[0]&&r.audio&&(r.audio.volume=c),t.css("bottom",o),t.prev(".bar-down").css("height",o)}),$(document).bind("mouseup",function(){$(this).unbind("mousemove"),$(this).unbind("mouseup")})},t.volumeControlHover=function(){$(this).find(".vol-btn").hasClass("mute")||$(this).find(".vol-bar-box").removeClass("hide"),$(this).find(".vol-btn").addClass("hover")},t.volumeControlUnHover=function(){$(this).find(".vol-btn").hasClass("mute")||$(this).find(".vol-bar-box").addClass("hide"),$(this).find(".vol-btn").removeClass("hover")},t.volumeBtnClick=function(){$(this).toggleClass("mute"),$(this).hasClass("mute")?($(this).prev(".vol-bar-box").addClass("hide"),$(this).parents(".liveBox")[0]?a.myliveFlowPlayer&&a.myliveFlowPlayer.mute():$(this).parents(".msgBox")[0]&&r.audio&&(r.audio.muted=!0)):($(this).prev(".vol-bar-box").removeClass("hide"),$(this).parents(".liveBox")[0]?a.myliveFlowPlayer&&a.myliveFlowPlayer.unmute():$(this).parents(".msgBox")[0]&&r.audio&&(r.audio.muted=!1))},t.volumeShowHide=function(){$(this).toggleClass("hide")},t.officalShare=function(){if(window.momoid){if(window.winC.disconnected)return void c.Warning(r.disconnectMsg,3e3);var e="liveOfficialShareToolTip";l.layer.onOff(e)}else l.layer.onOff("notOnline")},t}),define("view/liveBarrage",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<span class="worth_word">'+this.escapeExpression((i=null!=(i=t.text||(null!=e?e.text:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"text",hash:{},data:a}):i))+"</span>"},useData:!0})}),define("module/mylive/MYLIVE-VM-Add",["require","exports","module","module/mylive/MYLIVE-VM-Update","module/mylive/MYLIVE-API","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-M-Variable","view/liveBarrage","module/mylive/MYLIVE-VM-Helper","module/mylive/MYLIVE-VM-Helper"],function(e){var t=t||{};t.update=e("./MYLIVE-VM-Update");var n=e("./MYLIVE-API"),a={},i=e("./MYLIVE-V-Variable"),o=e("./MYLIVE-M-Variable");return a.message=function(e){if(9===e.style)t.update.updateMsgItem(e);else if(1===e.style){e.fortune=e.fortune||0;var n=e.p_id;if(n){var a=o.giftList[n]?o.giftList[n].name:"";e.text+=a}t.update.updateMsgItem(e)}},a.barrage=function(t){var n=t.nname+":"+t.text,a=e("./../../view/liveBarrage"),i=a({text:n}),r=$(i);o.curBarrageSumItem++,o.curBarrageSumItem&&o.curBarrageSumItem>2&&(o.curBarrageSumItem=0);var l=$(".mylivePlayerContent").width();$(".mylive-flowplayer").append(r),r.css({top:10*o.curBarrageSumItem+10+"%",left:l+"px"});var s=r.width(),c=0-s;r.animate({left:c+"px"},6e3,"linear",function(){r.remove()})},a.gift=function(a){var r=a.fr,l=a.to,s=a.token,c=o.giftList[a.bd.productId];if(a.gift=c?c:{},n.getUserProfile({dmid:r,rid:l,token:s},function(n,r){if(!n){var l=r;if(l){t.update.updateGiftRecord({profile:l,msg:a});var s=(new Date).getTime();if(o.giftManyTime[a.fr]&&o.giftManyTime[a.fr][a.bd.productId]&&o.giftManyTime[a.fr][a.bd.productId].length>0&&o.giftManyTime[a.fr][a.bd.productId].length>0){var c=o.giftManyTime[a.fr][a.bd.productId][o.giftManyTime[a.fr][a.bd.productId].length-1];if(Number(a.bd.buyTimes)-Number(c[c.length-1].msg.bd.buyTimes)==1)s=c[c.length-1].timestamp,o.giftManyTime[a.fr][a.bd.productId][o.giftManyTime[a.fr][a.bd.productId].length-1].push({profile:l,msg:a,timestamp:s,isFirst:!1});else{o.giftManyTime[a.fr][a.bd.productId].push([{profile:l,msg:a,timestamp:s,isFirst:!0}]),o.giftEffectQueue.push({profile:l,msg:a,timestamp:s,isFirst:!0}),t.Helper=e("./MYLIVE-VM-Helper");var u=t.Helper.findGiftEffectPostionClass();u&&t.update.updateGiftEffectList(o.giftEffectQueue.shift())}}else{var d=i.box.myliveGiftEffectList.find('.myliveGiftEffectItem .giftEffectWrap[data-user="'+a.fr+'"][data-product="'+a.bd.productId+'"]');if(Number(a.bd.buyTimes)>1&&d[0]&&d.find(".giftCount").text()&&Number(a.bd.buyTimes)-Number(d.find(".giftCount").text().substr(1))===1)t.update.updateGiftEffectList({profile:l,msg:a,timestamp:Number(d.attr("data-timestamp")),isFirst:!1});else{o.giftManyTime[a.fr]?o.giftManyTime[a.fr][a.bd.productId]?0==o.giftManyTime[a.fr][a.bd.productId].length&&o.giftManyTime[a.fr][a.bd.productId].push([{profile:l,msg:a,timestamp:s,isFirst:!0}]):(o.giftManyTime[a.fr][a.bd.productId]=[],o.giftManyTime[a.fr][a.bd.productId].push([{profile:l,msg:a,timestamp:s,isFirst:!0}])):(o.giftManyTime[a.fr]={},o.giftManyTime[a.fr][a.bd.productId]=[],o.giftManyTime[a.fr][a.bd.productId].push([{profile:l,msg:a,timestamp:s,isFirst:!0}])),o.giftEffectQueue.push({profile:l,msg:a,timestamp:s,isFirst:!0}),t.Helper=e("./MYLIVE-VM-Helper");var u=t.Helper.findGiftEffectPostionClass();u&&t.update.updateGiftEffectList(o.giftEffectQueue.shift())}}}}}),2==a.style){var u=a.bd.starThumbs,d=i.box.myliveAnchorBox.find(".starNum");d.text(u)}},a}),define("view/mylivePlayerBox",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return" mobile-device"},3:function(e,t,n,a){var i;return'        <div class="mylive-flowplayer" id="mylive-flowplayer">\n            \n        </div>\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.master_push_mode:i,{name:"isEqual",hash:{equals:1},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")+'        <p class="onWatch">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.on:i,e))+"在看</p>\n"},4:function(e,t,n,a){var i;return'        <div class="voice-live-layer-box">\n            <div class="owner-box">\n                <div class="avatar">\n                    <img src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" alt="语音直播封面">\n                </div>\n                <div class="desc-box">\n                    <p class="desc">正在进行语音直播</p>\n                </div>\n            </div>\n        </div>\n'},6:function(e,t,n,a){var i;return'        <div class="offLive">\n            <img src="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.cover:i,e))+'" class="cover">\n            <div class="offLiveText">开播后<a class="reload">点击刷新</a></div>\n        </div>\n'},8:function(e,t,n,a){return'    <!-- 音量组件 -->\n<div class="myliveVolume clearfix">\n    <div class="liveBox vol-control">\n        <div class="vol-bar-box hide">\n            <div class="bar">\n                <div class="bar-down"></div>\n                <div class="dot"></div>\n            </div>\n        </div>\n        <div class="vol-btn mute" title="直播音量">\n        </div>\n    </div>\n    <div class="msgBox vol-control">\n        <div class="vol-bar-box hide">\n            <div class="bar">\n                <div class="bar-down"></div>\n                <div class="dot"></div>\n            </div>\n        </div>\n        <div class="vol-btn mute" title="消息音量">\n        </div>\n    </div>\n    <p class="tip-box">\n        为避免用户观看直播时出现回声，建议在直播过程中，关闭直播及消息声音\n    </p>\n</div>\n\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div id="mylivePlayerContent" class="mylivePlayerContent'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.rtype:i,{name:"isEqual",hash:{equals:2},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'"  data-rd="'+r(o(null!=(i=null!=e?e.data:e)?i.rid:i,e))+'" data-sid="'+r(o(null!=(i=null!=e?e.data:e)?i.sid:i,e))+'" data-token="'+r(o(null!=(i=null!=e?e.data:e)?i.token:i,e))+'" data-mtoken="'+r(o(null!=(i=null!=e?e.data:e)?i.mtoken:i,e))+'" data-rtype="'+r(o(null!=(i=null!=e?e.data:e)?i.rtype:i,e))+'" data-title="'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+'" data-avatar="'+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'" data-momoid="'+r(o(null!=(i=null!=e?e.data:e)?i.stid:i,e))+'">\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.program(6,a,0),data:a}))?i:"")+"        \n</div>\n"+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.live:i,{name:"if",hash:{},fn:this.program(8,a,0),inverse:this.noop,data:a}))?i:"")},useData:!0})}),define("view/myliveAnchorBox",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'            <p class="anchorName">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.name:i,e))+"</p>\n"},3:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'            <p class="anchorName">'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'： </p>\n            <p class="roomName">'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'\n    <div class="myliveAnchorInfo" data-stid="'+r(o(null!=(i=null!=e?e.data:e)?i.stid:i,e))+'" data-roomName="'+r(o(null!=(i=null!=e?e.data:e)?i.title:i,e))+'" data-anchorName="'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'" data-mtoken="'+r(o(null!=(i=null!=e?e.data:e)?i.mtoken:i,e))+'">\n        <img class="myliveAnchorIcon" src="'+r(o(null!=(i=null!=e?e.data:e)?i.avatar:i,e))+'">\n        <div class="myliveAnchorMsgBox">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.data:e)?i.name:i,{name:"isEqual",hash:{equals:null!=(i=null!=e?e.data:e)?i.title:i},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'            <div class="myliveanchorMsgContent">\n                <div class="anchorMsg star">\n                    <div class="starIcon">\n                        <img class="starImg" src="../img/star.png">星光\n                    </div>\n                    <strong class="starNum">'+r(o(null!=(i=null!=e?e.data:e)?i.thus:i,e))+'</strong>\n                </div>\n                <div class="anchorMsg level">\n                    <div class="levelIcon">\n                    <span class="levelNum">0</span>级\n                    </div>\n                    <strong class="levelText">升级还需<span class="needExp">0</span>星光值</strong>\n                </div>\n                <div class="anchorMsg fans">\n                    <div class="fansIcon">\n                        粉丝\n                    </div>\n                    <strong class="fansNum">'+r(o(null!=(i=null!=e?e.data:e)?i.fos:i,e))+'</strong>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="myliveShare">\n        <p class="myliveGoShare">\n            <img src="../img/share.png" alt="分享">\n        </p>\n        <div class="myliveShareContainer"></div>\n    </div>\n'},useData:!0})}),define("view/myliveShareContainer",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return'        <div class="shareIconWrap officialShareWrap">\n            <span class="shareIcon officialShare" title="分享到陌陌动态"></span>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'    <div class="copeUrl">\n        <p class="liveUrl">直播间地址：</p>\n        <div class="urlWrap clearfix">\n            <p class="urlDetail" id="copy_value">'+s((o=null!=(o=t.copyUrl||(null!=e?e.copyUrl:e))?o:r,typeof o===l?o.call(e,{name:"copyUrl",hash:{},data:a}):o))+'</p>\n        </div>\n\n    </div>\n    <div class="sharebuttonbox clearfix">\n        <p class="shareMore">更多分享:</p>\n'+(null!=(i=t["if"].call(e,null!=e?e.isShowOfficialShare:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'        <div class="shareIconWrap weixinShareWrap">\n            <span class="shareIcon weixinShare"></span>\n            <div class="weixinShareToolTip toolTip">\n                <img class="weixinCode" src="/webmomo/api/scene/room/getroomcode?rd='+s((o=null!=(o=t.codeUrl||(null!=e?e.codeUrl:e))?o:r,typeof o===l?o.call(e,{name:"codeUrl",hash:{},data:a}):o))+'" alt=""/>\n                <p class="toolTipTitle">\n                    扫码分享至微信\n                </p>\n            </div>\n        </div>\n\n        <div class="shareIconWrap qqShareWrap">\n            <a target="_blank" class="shareIcon qqShare" href="'+s((o=null!=(o=t.shareUrl||(null!=e?e.shareUrl:e))?o:r,typeof o===l?o.call(e,{name:"shareUrl",hash:{},data:a}):o))+'" title="分享到QQ好友和群组"></a>\n        </div>\n\n    </div>\n'},useData:!0})}),define("view/myliveLianmai",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return'<div class="myliveLianmai">\n    <p class="myliveGoLianmai off">\n        <img src="../img/lianmai-enable.png" class="enable" alt="连线">\n        <img src="../img/lianmai-disable.png" class="disable" alt="连线">\n        <span class="count">0</span>\n    </p>\n    <div class="myliveLianmaiContainer">\n        <iframe class="lianmaiIframe" src="https://live-api.immomo.com/m/obspage/lianmai?roomid='+this.escapeExpression((i=null!=(i=t.rid||(null!=e?e.rid:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"rid",hash:{},data:a}):i))+'" ></iframe>\n    </div>\n</div>'},useData:!0})}),define("module/mylive/MYLIVE-Init",["require","exports","module","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-API","module/mylive/MYLIVE-M-Helper","module/mylive/MYLIVE-VM-Helper","module/mylive/MYLIVE-VM-Handlers","module/V2-V-Layer","module/mylive/MYLIVE-VM-Add","module/chatroom/room-M-Helper","view/liveLoadingMask","view/mylivePlayerBox","module/V2-Tips","view/myliveAnchorBox","view/myliveShareContainer","view/myliveLianmai","module/V2-M-Variable","module/chatroom/room-M-Helper","module/mylive/MYLIVE-VM-Update","module/mylive/MYLIVE-VM-Update","module/V2-M-Variable","module/chatroom/room-M-Helper"],function(e){var t={},n=e("./MYLIVE-M-Variable"),a=e("./MYLIVE-V-Variable"),i=e("./MYLIVE-API");n.Helper=e("./MYLIVE-M-Helper"),t.Helper=e("./MYLIVE-VM-Helper"),t.Handlers=e("./MYLIVE-VM-Handlers");var o={};o.layer=e("../V2-V-Layer"),t.add=e("./MYLIVE-VM-Add");var r={};r.roomHelper=e("../chatroom/room-M-Helper");var l=e("../../view/liveLoadingMask"),s=e("../../view/mylivePlayerBox"),c=e("../V2-Tips"),u=function(){var o;o=o||window.momoid,i.getMyliveInfo(o,function(o,r){if(!o){var u=r;if(n.myliveInfo=u,2===u.rtype&&a.box.myliveRoomContent.addClass("mobile-device"),!n.anchorDom){var d=e("../../view/myliveAnchorBox");n.anchorDom=d({data:u}),a.box.myliveAnchorBox.append(n.anchorDom)}if(!n.shareDom){n.shareDom=n.Helper.createShare(u);var m=e("../../view/myliveShareContainer");a.box.myliveAnchorBox.find(".myliveShareContainer").append(m(n.shareDom))}if(1===n.myliveInfo.master_push_mode&&n.myliveInfo.live){var f=e("../../view/myliveLianmai");a.box.myliveAnchorBox.find(".myliveLianmai").remove(),a.box.myliveAnchorBox.append(f({rid:n.myliveInfo.rid})),i.getWaitList({rd:n.myliveInfo.rid,stid:n.myliveInfo.stid},function(e,t){if(e)return void(e.em&&c.Warning(e.em,3e3));var n=a.box.myliveAnchorBox.find(".myliveGoLianmai");1===t.enable?(n.addClass("on").removeClass("off"),n.find(".count").text(t.count||0)):n.addClass("off").removeClass("on")})}if(a.box.mylivePlayerContainer.html(s({data:u})),a.box.mylivePlayerContainer.find(".myliveVolume .dot").on("mousedown",t.Handlers.volumeAdjust).on("contextmenu",function(){return!1}).on("dragstart",function(){return!1}),a.box.mylivePlayerContainer.find(".myliveVolume .vol-control").on("mouseenter",t.Handlers.volumeControlHover),a.box.mylivePlayerContainer.find(".myliveVolume .vol-control").on("mouseleave",t.Handlers.volumeControlUnHover),a.box.mylivePlayerContainer.find(".myliveVolume").on("click",".vol-btn",t.Handlers.volumeBtnClick),n.Helper.initScrollFn(a.box.myliveChatMsgBox,"chatMsgBox"),a.box.myliveChatBox.on("scroll",t.Handlers.chatScroll),$(".myliveShareContainer").off("click",".officialShare"),$(".myliveShareContainer").on("click",".officialShare",t.Handlers.officalShare),u.live&&($("#mylive-flowplayer").after(l()),n.myliveFlowPlayer=t.Helper.initPlayer("mylive-flowplayer",u),1===u.rtype&&u.cover)){var p='<div class="obs-cover-box"><img class="obs-cover-img" src="'+u.cover+'" alt="直播背景图"></div>';p+='<div class="obs-cover-mask"></div>',a.box.mylivePlayerContainerBox.find(".obs-cover-box")&&a.box.mylivePlayerContainerBox.find(".obs-cover-box").remove(),a.box.mylivePlayerContainerBox.find(".obs-cover-mask")&&a.box.mylivePlayerContainerBox.find(".obs-cover-mask").remove(),a.box.mylivePlayerContainerBox.find(".myliveGiftDrawerBox").before(p)}if(i.getGiftList({rd:u.rid,stid:u.stid},function(e,t){e||n.Helper.cacheGiftList(t)}),i.getStarValue({rd:u.rid,rt:u.rtype,sid:u.sid,stid:u.stid},function(n,a){if(!n){var i=e("../V2-M-Variable");i.roomHelper=e("../chatroom/room-M-Helper"),i.roomHelper.liveControl({liveId:u.rid,showId:u.sid,starId:u.stid},{rank:!0}),t.update=e("./MYLIVE-VM-Update"),t.update.updateRankingList(a)}}),i.getStarExp(function(n,a){n||(t.update=e("./MYLIVE-VM-Update"),t.update.updateExp(a))}),setTimeout(function(){a.box.mylivePlayerContainer.find(".myliveVolume .tip-box").animate({opacity:"0"},500,"linear",function(){$(this).remove()})},3e3),window.room){if(window.room.disconnected)window.room.connect();else if(window.room.connected){var h=e("../V2-M-Variable");h.roomHelper=e("../chatroom/room-M-Helper"),h.roomHelper.socketControl($(".collect-room-btn").attr("data-id"),u.rid,null,u.sid)}}else window.room=window.roomSocket.init()}})},d=function(){a.box.myliveFansAttraction.lt_tab({minItems:2,slideBoder:$(".myliveFansAttraction-slide-border"),callBack:function(e){0===e&&t.Handlers.initRanking(),1===e&&t.Handlers.initOnline()}}),$(window).resize(function(){t.Helper.tabReinitial($(".myliveFansAttraction-slide-border")),n.ranksListAPI&&n.ranksListAPI.reinitialise(),n.onlineListAPI&&n.onlineListAPI.reinitialise(),n.chatMsgBoxAPI&&n.chatMsgBoxAPI.reinitialise(),n.giftAttractionListAPI&&n.giftAttractionListAPI.reinitialise()}),n.Helper.initScrollFn(a.box.rankingListBox,"ranksList"),a.box.rankingListBox.find(".jspContainer").append('<div class="rankingListMask"></div>'),n.ranksListAPI&&n.ranksListAPI.reinitialise(),n.Helper.initScrollFn(a.box.myliveOnline,"onlineList"),a.box.myliveOnline.find(".jspContainer").append('<div class="myliveOnlineMask"></div>'),n.onlineListAPI&&n.onlineListAPI.reinitialise(),n.Helper.initScrollFn(a.box.myliveGiftAttractionBox,"giftAttractionList"),a.box.myliveGiftAttractionBox.find(".jspContainer").append('<div class="myliveGiftAttractionMask"></div>'),n.giftAttractionListAPI&&n.giftAttractionListAPI.reinitialise(),a.box.myliveChatBox.on("click",".scrollBtn",t.Helper.onOffScroll),a.box.myliveOnline.on("scroll",t.Handlers.onlineScroll),a.box.myliveChatBox.on("click",".mylive-new-msg-tip",t.Handlers.newMsgTipsClicked),a.box.myliveEditBox.on("keyup",".editArea",t.Handlers.editKeyUp),a.box.myliveEditBox.on("click",".sendBtn",t.Handlers.sendMsg),a.box.myliveEditBox.on("click",".barrageBtn",t.Handlers.toggleBarrage),a.box.rankingList.on("click",".rankingItem",t.Handlers.rankingItemClicked),a.box.myliveGiftAttractionList.on("click",".myliveGiftItem",t.Handlers.giftRecordItemClicked),a.box.myliveGiftEffectList.on("click",".myliveGiftEffectItem .giftEffectWrap",t.Handlers.giftEffectItemClicked),a.box.myliveOnline.on("click",".userItem",t.Handlers.userItemClicked),a.box.mylivePlayerContainer.on("click",".mylive-flowplayer",function(){return!1}),a.box.myliveChatBox.on("mousedown",".mylive-chat-msg",t.Handlers.chatMsgNameClicked),a.box.mylivePlayerContainerBox.on("click",".offLive .reload",u),$(".layer").on("click",".layer-box>div",function(e){e.stopPropagation()}),$(".operate-content").off("click",".goToPay"),$(".operate-content").on("click",".goToPay",function(){if("/mylive"===window.location.pathname){var e="livePayToolTip",t={momoid:window.momoid,type:"pay"};o.layer.onOff(e,t)}}),$(".layer").on("click",".payToolTip .btn.cancel",function(){o.layer.Off()}),$(".account-box .noname-login").on("click",function(){"/mylive"===window.location.pathname&&o.layer.onOff("notOnline")})};return{init:d,initMylive:u}}),define("view/liveGiftTip",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.data:e)?i.price:i,e))+"&nbsp;陌币"},3:function(e,t,n,a){return"免费"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="giftTip">\n    <img class="giftTipIcon" src="'+r(o(null!=(i=null!=e?e.data:e)?i.image:i,e))+'" alt=""/>\n    <div class="giftMsg">\n        <p class="giftName">'+r(o(null!=(i=null!=e?e.data:e)?i.name:i,e))+'</p>\n        <p class="giftValue">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.data:e)?i.price:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a
}))?i:"")+"</p>\n    </div>\n</div>"},useData:!0})}),define("module/momolive/LIVE-VM-Helper",["require","exports","module","module/momolive/LIVE-V-Variable","module/momolive/LIVE-M-Variable","module/momolive/LIVE-API","view/liveGiftTip","view/livePlayerError","module/V2-M-Variable","module/V2-M-Helper"],function(e){var t=e("./LIVE-V-Variable"),n=e("./LIVE-M-Variable"),a=e("./LIVE-API"),i=e("../../view/liveGiftTip"),o=(e("../../view/livePlayerError"),e("./../V2-M-Variable"));o.Helper=e("../V2-M-Helper");var r={};return r.initRoom=function(){if(!$(".live-page-window .liveRoom-box .offPlaceHolder")[0]){var e=window.location.pathname;if(e.match(/^\/live\/\d\-\d+/)){var t=e.split("-");if(t[0]&&t[1]){var i=t[0].split("/live/")[1],o=t[1];if(o==$(".playerContent").attr("data-rd")&&i==$(".playerContent").attr("data-rtype"))return;i&&o&&($(".playerContent").attr("data-rd",o),$(".playerContent").attr("data-rtype",i),a.getRoomDetail({rid:o,rt:i},!1),$(".live-msg-list").html("")),$(".live-msg-list").html(""),a.getLiveShowList("",!0)}else a.getLiveShowList()}else if(e.match(/^\/live\/\d+/)){var r=e.split("/live/")[1];if($f()&&$f().isPlaying()&&r==$(".playerContent").attr("data-momoid"))return;$(".playerContent").attr("data-momoid",r),a.getRoomDetail({stid:r},!1),$(".live-msg-list").html(""),a.getLiveShowList("",!0)}else!$(".operate-content .myAnchor-guide-tip").hasClass("hide")&&n.anchorOnLive.length>0?(n.status.showAnchor=!0,$(".operate-content .myAnchor-guide-tip").addClass("hide"),a.getRoomDetail({stid:n.anchorOnLive[0].stid},!1),a.getLiveShowList("",!0),n.loadLive&&($(".playerContent").attr("data-rd",n.anchorOnLive[0].rid),$(".live-chat-box").html(liveChatBoxTmp()),LV.box.giftEffectList.children().html(""),n.giftEffectQueue=[],n.giftManyTime={},liveGiftModel.resetQueue(),$(".live-gift-animation-box")[0]&&$(".live-gift-animation-box").remove(),$(".recommend-live-list-box .liveRoomList")[0]&&($(".recommend-live-list-box .liveRoomList").addClass("hide"),$(".recommend-live-list-box .more").addClass("hide")),$(".recommend-live-list-box .liveAnchorList")[0]&&$(".recommend-live-list-box .liveAnchorList").removeClass("hide"),$(".live-container .roomListContainer .myAnchor").addClass("checked").html("返回"),$(".recommend-live-list-box .liveAnchorList")[0]&&LAPI.getMyAnchor(function(e,t){if(e)return void Tips.Warning(e.em,3e3);var a=t||[];a[0]&&parseInt(a[0].stid)===window.momoid&&a.splice(0,1);var i="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(liveMyAnchorItem({list:a})),$(".anchor-groupList").append(i)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(liveMyAnchorItem({list:a})),$(".anchor-liveShow-list").append(i)),n.hasLiveAPI&&n.hasLiveAPI.reinitialise(),n.status.showAnchor=!1}))):a.getLiveShowList()}},r.getGiftTipPos=function(e,t){var a="",o="";a=window.innerWidth>1400&&window.innerHeight>860?n.status.isHasPK?401+80*Math.floor(e/3):320+80*Math.floor(e/3):window.innerHeight<640?n.status.isHasPK?287+62*Math.floor(e/3):225+62*Math.floor(e/3):n.status.isHasPK?307+62*Math.floor(e/3):245+62*Math.floor(e/3),n.giftBoxAPI.getIsScrollableV()?n.giftBoxAPI.getContentPositionY()&&(a-=n.giftBoxAPI.getContentPositionY()):a=window.innerWidth>1400&&window.innerHeight>860?n.status.isHasPK?401+80*Math.floor(e/3):320+80*Math.floor(e/3):n.status.isHasPK?307+62*Math.floor(e/3):245+62*Math.floor(e/3),o=window.innerWidth>1400&&window.innerHeight>860?-40+77*(e%3):-40+61*(e%3),setTimeout(function(){$(".live-skin .attraction .giftTipWrap").html(i({data:t})).css({top:a+"px",left:o+"px"}),"0"==t.price&&$(".giftTip .giftValue").html("免费")},50)},r.giftAnimate=function(e){var n=e.find("img.giftIcon").clone(),a=t.box.playerContainer,i=e.offset().left,o=e.offset().top,r=e.attr("data-batterCount")-0,l=a.offset().left+a.width()/2,s=a.offset().top+a.height()/2,c=$("<i>x "+ ++r+"</i>");e.attr("data-batterCount",r),clearTimeout(e.timer),e.timer=setTimeout(function(){e.attr("data-batterCount",0)},3e3),$("body").append(n),n.removeClass().addClass("flyGiftItem").css({position:"absolute",left:i,top:o,zIndex:9,width:"40px",height:"40px"}),n.animate({left:l,top:s-50,width:"80px",height:"80px"},500,function(){"animation"in document.body.style&&(c.css({position:"absolute",left:l,top:s-80,"font-size":"45px",color:"#FF528D",zIndex:"999",animation:"batterFadeOut 1s infinite","-webkit-animation":"batterFadeOut 1s infinite"}),$("body").append(c)),setTimeout(function(){c.remove()},900),n.remove()})},r.findGiftEffectPostionClass=function(){return t.ele.liveGiftEffectFirstEle.find(".giftEffectWrap")[0]?t.ele.liveGiftEffectSecondEle.find(".giftEffectWrap")[0]?t.ele.liveGiftEffectThirdEle.find(".giftEffectWrap")[0]?"":"third":"second":"first"},r.getManyTimesGift=function(e){var t=null,a=n.giftManyTime;if(a[e.msg.fr])if(a[e.msg.fr][e.msg.bd.productId]&&a[e.msg.fr][e.msg.bd.productId].length>0){var i=a[e.msg.fr][e.msg.bd.productId];if(e.isFirst){if(i.shift(),i.length>0){var o=i[0];o.timestamp===e.timestamp&&(t=i.shift())}}else{var o=i[0];o.timestamp===e.timestamp&&(t=i.shift())}a[e.msg.fr][e.msg.bd.productId]=i,0===a[e.msg.fr][e.msg.bd.productId].length&&(delete a[e.msg.fr][e.msg.bd.productId],0===Object.keys(a[e.msg.fr]).length&&delete a[e.msg.fr])}else 0===Object.keys(a[e.msg.fr]).length&&delete a[e.msg.fr];return n.giftManyTime=a,t},r.reloadPlayer=function(e){var t={},n=window.location.pathname;if(n.match(/^\/live\/\d\-\d+/)){var i=$(this).parents(".playerContent").attr("data-rd"),o=$(this).parents(".playerContent").attr("data-rtype");i&&parseInt(o)>=0&&parseInt(o)<=2&&(t.rid=i,t.rtype=o)}else if(n.match(/^\/live\/\d+/)){var r=n.split("/live/")[1];t={stid:r}}a.getRoomDetail(t,!1)},r}),define("lib/jquery.jsmartdrag",["jquery"],function(){return function(e){var t=!1,n=null,a=null,i=null,o=!1,r=0;e.fn.jsmartdrag=function(l){function s(e,t){return!0}var c=this,u={sourceClass:"jsmartdrag-source",sourceHoverClass:"jsmartdrag-source-hover",cursorHoverClass:"jsmartdrag-cursor-hover",targetHoverClass:"jsmartdrag-target-hover",canSelect:!1,target:".target",onDrag:function(){},afterDrag:function(e,t,n){}};return l=e.extend(u,l),this.each(function(){u.canSeletct||(document.ondragstart=function(){return!1}),null!=l.target&&(n=e(l.target)),e(this).addClass(l.sourceClass),e(this).mousedown(function(n){window.location.pathname.indexOf("/live")!=-1||e(n.target).parent().hasClass("closePlayer")||(a=e(this),t=!0,e(this).addClass(l.sourceHoverClass),r=e("html,body").scrollTop())}),e(document).mousemove(function(i){if(t){var o={x1:0,x2:0,y1:0,y2:0},c=0,u=0;e.browser&&e.browser.msie?(c=i.clientX,u=i.clientY+r):(c=i.pageX,u=i.pageY),o.x1=c-a.innerWidth()/2,o.y1=u-a.innerHeight()/2,a.css({left:o.x1+"px",top:o.y1+"px",position:"fixed"}),n.length>0&&n.each(function(){s(a,e(this))?e(this).addClass(l.targetHoverClass):e(this).removeClass(l.targetHoverClass)}),l.onDrag()}}),e(document).mouseup(function(){if(t&&(t=!1,null!=n)){e(e("[class$='jsmartdrag-target-hover']")[0]).length>0&&(i=e(e("[class$='jsmartdrag-target-hover']")[0]),o=!0),l.afterDrag(o,a,i);var r=a.css("left"),s=a.css("top");a.css({left:r,top:s}),a.removeClass("hide"),e("[class$='jsmartdrag-target-hover']").each(function(){e(this).removeClass(l.targetHoverClass)}),a.removeClass(l.sourceHoverClass),a=null,1==o&&(i.removeClass(l.targetHoverClass),i=null,o=!1)}})}),c}}(jQuery),jQuery}),define("module/V2-VM-Hi",["require","exports","module","module/V2-API","module/V2-M-Variable","module/V2-V-Variable","module/V2-storage","view/talkToItem"],function(e){var t=e("./V2-API"),n=e("./V2-M-Variable"),a=e("./V2-V-Variable"),i=e("./V2-storage"),o=e("../view/talkToItem"),r=r||{};return r.getUnreadNum=function(){var e=0,t=n.unread.hi;return $.each(t,function(t,n){e+=n}),e},r.add=function(e,i){var r="",l="",s=Object.keys(n.unread.hi).length;r+=o({id:"say-hi-block",type:"hiMsg",name:"你收到了"+s+"条招呼",fromhi:!0}),$("#talking-hiMsg-say-hi-block").remove(),a.box.talkingList.prepend(r);var c={id:i,type:e,from:"hi"};t.getProfile(c,function(t,r){r&&(l+=o({id:i,type:e,avatar:r.avatar,name:r.remarkname||r.name,unreadNum:n.unread.hi[i]||""}),$("#talking-user-"+i).remove(),a.box.hiList.prepend(l),n.chatBoxAPI&&n.chatBoxAPI.reinitialise())})},r.indexOf=function(e){for(var t=n.list.hi,a=0,i=t.length;a<i;a++)if(t[a].id==e)return a;return-1},r.reduce=function(e,t){var o=n.list,l=o.hi[e].id;o.hi.splice(e,1),t&&delete n.unread.hi[l],1==n.setting.history_on_off&&i.set(window.enMomoid+"unread",n.unread);var s=r.getUnreadNum();s>0?a.ele.hiUnreadNum.text(s).show():a.ele.hiUnreadNum.text(s).hide()},r.onOff=function(e){if(n.list.hi.length){var t=a.box.hiList;e?"on"===e?(t.removeClass("hide"),t.data("isOpen",!0)):"off"===e&&(t.addClass("hide"),t.data("isOpen",!1)):t.data("isOpen")===!0?(t.addClass("hide"),t.data("isOpen",!1)):(t.removeClass("hide"),t.data("isOpen",!0))}},r}),define("module/V2-VM-Add",["require","exports","module","module/V2-API","module/V2-M-Variable","module/V2-V-Variable","module/V2-VM-Helper","module/V2-timeHelper","module/V2-M-MsgFactory","view/msgItemTo","view/msgItemFrom","view/talkToItem"],function(e){var t=e("./V2-API"),n=e("./V2-M-Variable"),a=e("./V2-V-Variable"),i=i||{};i.Helper=e("./V2-VM-Helper");var o=e("./V2-timeHelper"),r=r||{};r.msgFactory=e("./V2-M-MsgFactory");var l=e("../view/msgItemTo"),s=e("../view/msgItemFrom"),c=e("../view/talkToItem"),u=u||{};return u.Message=function(e,c,d,m){if("object"==typeof d){var f="",p=d.msg,h=d.isMySend,e=d.type,g=n.account.momoid,v="user";"store"!=e||h||2!=p.stype||(v="store");var y={type:v,id:h?n.account.momoid:p.fr,from:"cacheMsgs"};t.getProfile(y,function(t,c){if(c&&($.when(r.msgFactory.msgFactory(p)).done(function(t){p.typeText=t,p.formatTime=o.formate((new Date).getTime()),p.t&&p.t-Number(a.ele.msgLast.attr("data-timeid"))>3e5&&(f+=o.timeLineRender(p.t)),f+=p.fr==g||h?l({msg:p,profile:c}):s({msg:p,profile:{idType:c.idType,name:c.name,remarkname:c.remarkname||"",avatar:c.avatar,error:c.error||""}});var r="momoid"==p.idType?p.fr:p.to;p.stype&&2==p.stype&&(r=p.to==n.account.momoid?p.fr:p.to);var u="";if(n.talk_to.typeName===e?u=!0:"user"==n.talk_to.typeName&&"store"==e&&(u=!0),n.talk_to&&(r==n.talk_to[n.talk_to.idType]||p.fr==n.account.momoid)&&u){if($("#"+p._id)[0]||a.box.msgList.append(f),p.fr==n.account.momoid&&"momoid"==p.idType&&!h){var d=n.msgs.user[p.to]?n.msgs.user[p.to]:(n.msgs.user[p.to]=[],[]);$("#"+p._id).addClass("received").attr("data-timeid",p.t),$.each(d,function(e,t){t._id==p._id&&(t.hasReceived=1)})}var m=$(".msg-screen-box").height(),v=a.box.msgList.height(),y=$(".msg-screen-box .jspTrack")[0],b=$(".msg-screen-box .jspDrag")[0];if(y&&b)var x=$(".msg-screen-box .jspTrack").height(),w=$(".msg-screen-box .jspDrag").height(),k=$(".msg-screen-box .jspDrag").css("top"),M=parseInt(w)+parseInt(k)!=parseInt(x);if(x&&w&&k&&M&&!h)n.status.isNewMsgTipsShow||(i.Helper.newMsgTips(!0),$("#newMsgTips").data("unreadPointId",p._id));else if(v+3>m){if(n.msgScrollTimmer)return;n.msgScrollTimmer=setTimeout(function(){n.msgScreenAPI.reinitialise(),n.msgScreenAPI.scrollToBottom(),i.Helper.newMsgTips(!1),n.msgScrollTimmer=null},300)}}}),p)){var d;"group"!=e&&"discuss"!=e||(d=c.remarkname||c.name),u.LastMsg(e,p.to,p,d)}})}},u.TalkingTo=function(e,i,o){if(("user"!=e||i!=window.momoid)&&("store"==e&&o&&2==o.stype&&(i=o.fr),i&&e)){var r="",l="",s="",d=e,m="";o&&o.fr==n.account.momoid&&1==o.stype&&(d="store"),o&&o.fr!=n.account.momoid&&o.to!=n.account.momoid&&2==o.stype&&(d="user",i=o.to),o&&o.fr!=n.account.momoid&&1==o.stype&&(d="user",i=o.fr),o&&(s=o._id);var f={type:d,id:i,from:"addTalk-"+s};if(t.getProfile(f,function(t,s){if(s){var f="",p="",h="";"store"===e?f=1==o.stype?n.unread.local[o.fr]||"":n.unread.local[i+e]||"":"group"!=e&&"discuss"!=e||!n.setting.ignoreMsg||0!=n.setting.ignoreMsg[i]?f=n.unread.local[i]||"":(f=n.unread.ignore[i]||"",p="forbidden");var g=s.avatar;if((o&&o.fr!=n.account.momoid&&1==o.stype||o&&o.fr!=n.account.momoid&&o.to!=n.account.momoid&&2==o.stype)&&(m=!0),o&&o.storeid?h=o.storeid:o&&2==o.stype&&(h=o.fr,m||(g="/img/store-avatar.jpg")),$("#talking-"+e+"-"+i).hasClass("has-at-tip")&&(r=1),l+=c({id:i,type:d,avatar:g,name:s.remarkname||s.name,unreadNum:f,forbidden:p,storeid:h,hasAt:r}),"group"==e&&n.msgs&&n.msgs[e]&&n.msgs[e][i]&&n.msgs[e][i].length>2)var v=n.msgs[e][i].length-2,y=n.msgs[e][i].length-1,b=n.msgs[e][i][v].t,x=n.msgs[e][i][y].t,w=x-b;if("store"==d&&(e="store"),"group"==e&&f&&f>0&&w&&w<2e3)$("#talking-"+e+"-"+i+" .unread-msg-num").get(0)?$("#talking-"+e+"-"+i+" .unread-msg-num").removeClass("hide").text(f):$("#talking-"+e+"-"+i+" .member-item-content").append('<span class="unread-msg-num">'+f+"</span>");else{if($("#talking-"+e+"-"+i).hasClass("forceTop"))$("#talking-"+e+"-"+i).remove(),a.box.talkingList.prepend(l),$("#talking-"+e+"-"+i).addClass("forceTop");else if($("#talking-"+e+"-"+i).remove(),"store"==e&&$("#talking-user-"+i).remove(),m&&n.msgs.store&&n.msgs.store[i]&&n.msgs.store[i].length>0){var k="";k+=c({id:"store-msg-block",type:"storeMsg",name:"商家消息",fromStore:!0}),$("#talking-storeMsg-store-msg-block").remove(),a.box.talkingList.prepend(k),$(".store-list-content .store-list").prepend(l);var M=u.allStoreUnread();M>0&&$("#talking-storeMsg-store-msg-block .member-item-content").prepend('<span class="unread-msg-num">'+M+"</span>")}else if($(".recentBox .talking-list .forceTop")[0]){var C=$(".recentBox .talking-list .forceTop").length,I=$(".recentBox .talking-list .forceTop")[C-1];$(I).after(l)}else a.box.talkingList.prepend(l);$("#talking-"+e+"-"+i).find(".unread-msg-num").removeClass("hide")}}if(n.chatBoxAPI&&n.chatBoxAPI.reinitialise(),"user"==e&&o){var V=s.remarkname||s.name,T=o.fr;u.LastMsg(e,T,o,V)}}),"store"!=d&&i&&!m){if("user"==e&&i==n.account.momoid)return;t.recentlyUpdate()}}},u.LastMsg=function(e,t,n,a,i){if(!$("#talking-"+e+"-"+t).hasClass("has-at-tip")&&n&&(1==n.type||2==n.type||3==n.type||5==n.type)){if(1==n.type){var o=($(n.typeText),$(n.typeText).children());if(o.length>0&&$(o[0]).is("a")&&25==n.typeText.indexOf(o[0]))var r="<p>[链接]</p>";else var r=n.typeText}else if(2==n.type){var r="<p>[图片]</p>";if(1==n.snap)var r="<p>"+n.typeText+"</p>"}else if(3==n.type)var r="<p>[语音]</p>";else if(5==n.type)var r="<p>[表情]</p>";else 6==n.type&&"file"!=n.aType&&n.aLink&&(notifyText=n.aLink.text);r&&(r=r.replace("<p>","").replace("</p>","")),("group"==e||"discuss"==e)&&a&&r?(a=a.replace(/&/g,"&gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;"),r='<p data-id="'+n._id+'">'+a+":"+r+"</p>"):"user"!=e&&"store"!=e||(r='<p data-id="'+n._id+'">'+r+"</p>"),i?$("#talking-"+e+"-"+t).addClass("has-at-tip"):$("#talking-"+e+"-"+t).find(".last-msg").html(r),$("#talking-"+e+"-"+t).find(".username").addClass("have-sign")}},u.allStoreUnread=function(e){e=e||"";var t=$(".store-list-content .store-list .member-list-item"),n=0;return $.each(t,function(t,a){$(a).attr("data-id")!=e&&$(a).find(".unread-msg-num")[0]&&parseInt($(a).find(".unread-msg-num").text())&&(n+=parseInt($(a).find(".unread-msg-num").text()))}),n},u}),define("module/V2-M-Update",["require","exports","module","module/V2-storage","module/V2-V-Variable","module/V2-M-Variable","module/V2-watchSet","module/V2-storage","module/V2-VM-Hi","module/V2-VM-Add"],function(e){var t=e("./V2-storage"),n=(e("./V2-V-Variable"),e("./V2-M-Variable")),a=e("./V2-watchSet"),t=e("./V2-storage"),i=i||{};i.hi=e("./V2-VM-Hi"),i.Add=e("./V2-VM-Add");var o=o||{};return o.talking=function(e,t,a,r){var l,s=n.list,c=s.talking;l={type:e,id:t};for(var u=0,d=c.length;u<d;u++)if(c[u].id==l.id&&c[u].type===e){c.splice(u,1),d--;break}if(r?i.Add.TalkingTo(e,l.id,r):i.Add.TalkingTo(e,t),c.push(l),n.status.talkingLength=c.length,n.talk_to){var m=n.talk_to.idType,t=n.talk_to[m];o.talkingSelect(n.talk_to.typeName,t)}},o.talkingSelect=function(e,t){$(".chat-box .member-list-item.change-talk-to.select").removeClass("select"),$("#talking-"+e+"-"+t).addClass("select")},o.msgs=function(e,t,o){var r={type:e,msg:t};o&&(r.isMySend=o),"store"==e&&t.to!=window.momoid&&2==t.stype&&(r.isMySend=1),a.set(n.msgs,"proxyWatcher",r,i.Add.Message)},o.hi=function(e,t){var a=i.hi.indexOf(t);a!==-1&&i.hi.reduce(a);var o={type:e,id:t};i.hi.add(e,t);var r=n.list;r.hi.push(o)},o.unreadNumOnTitle=function(){var e=n.unread,t=n.status.currentTalkingUnreadNum;$(".chat-box ul.talking-list").children().each(function(n,a){var i=$(this).attr("data-id");void 0!==e.local[i]?t+=e.local[i]:void 0!==e.hi[i]&&(t+=e.hi[i])}),0!==t?(t>999&&(t="999+"),document.title=t+"条未读 - "+n.pageTitle,$(".chat-box .new-msg-icon").removeClass("hide"),"chat"!=n.currentPage&&$(".operate-content .notify-box .go-msg-bord-box span").text(t).removeClass("hide")):(document.title=n.pageTitle,$(".chat-box .new-msg-icon").addClass("hide")),winObs.trigger("title-update",t)},o.cacheMsg=function(e){var a,i={momoid:"user",gid:"group",did:"discuss"}[e.idType];a="group"===i||"discuss"===i?e.to:e.fr==n.account.momoid?e.to:e.fr,2===e.stype?(i="store",$("#talking-user-"+e.to)[0]&&$("#talking-user-"+e.to).attr("data-storeid")&&(a=e.to),e.fr!=window.momoid&&e.to!=window.momoid&&(a=e.to,e.hasReceived=1)):1===e.stype&&(i="store");var o=n.msgs[i][a]?n.msgs[i][a]:(n.msgs[i][a]=[],[]);if(e.fr==n.account.momoid&&"momoid"==e.idType&&(e.hasReceived=1),o.push(e),o.length>n.status.localMessageMaxCount&&o.shift(),n.msgs[i][a]=o,1==n.setting.history_on_off){if(t.has(window.enMomoid+"msgs",n.msgs)){var r=t.get(window.enMomoid+"msgs");r[i][a]||(r[i][a]=[])}else{var r={user:{},group:{},discuss:{},store:{}};r[i][a]=[]}r[i][a].push(e),"discuss"==i||"group"==i?r[i][a].length>50&&(r[i][a]=r[i][a].slice(-50)):"user"!=i&&"store"!=i||r[i][a].length>100&&(r[i][a]=r[i][a].slice(-100)),t.set(window.enMomoid+"msgs",r)}},o.readStatus=function(e,a){try{a="string"==typeof a?JSON.parse(a):a}catch(i){}if("read"==a.st){var o="user";a.sr&&(o="store");var r=n.msgs[o][a.fr]?n.msgs[o][a.fr]:(n.msgs[o][a.fr]=[],[]);a.msgid&&a.msgid.length>0&&r.length>0?$.each(a.msgid,function(e,t){$.each(r,function(e,n){n._id==t&&(n.read=1)})}):a.msgid&&0==a.msgid.length&&$.each(r,function(e,t){t.read=1})}"momoid"==n.talk_to.idType&&a.fr==n.talk_to.momoid&&$.each(r,function(e,t){t.read&&1==t.read&&($("#"+t._id).removeClass("wait").addClass("readed"),t.read=1)}),t.set(window.enMomoid+"msgs",n.msgs)},o}),define("view/talkingToInfo",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.talkTo:e)?i.momoid:i,{name:"isEqual",hash:{equals:"10000"},fn:this.program(2,a,0),inverse:this.program(4,a,0),data:a}))?i:""},2:function(e,t,n,a){return""},4:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.sign:i,{name:"if",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:""},5:function(e,t,n,a){var i;return'\t\t\t<p class="talk-to-sign left">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.sign:i,e))+"</p>\n"},7:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.remarkname:i,e))},9:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.name:i,e))},11:function(e,t,n,a){return'\t<p class="change-ignore-btn right">勿扰<label class="setting-toggle" data-bind="ignore-on-off">\n\t\t\t<input type="checkbox" class="toggle-btn-check"/>\n\t\t\t<span class="toggle-btn"></span>\n\t\t</label>\n\t</p>\n'},13:function(e,t,n,a){return'\t<p class="change-ignore-btn right">勿扰<label class="setting-toggle" data-bind="ignore-on-off">\n\t\t\t<input type="checkbox" class="toggle-btn-check" />\n\t\t\t<span class="toggle-btn"></span>\n\t\t</label>\n\t</p>\n'},15:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.talkTo:e)?i.relation:i,{name:"isEqual",hash:{equals:"both"},fn:this.program(16,a,0),inverse:this.program(20,a,0),data:a}))?i:""},16:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.loc_time:i,{name:"if",hash:{},fn:this.program(17,a,0),inverse:this.noop,data:a}))?i:""},17:function(e,t,n,a){var i;return'\t\t\t\t<span class="right local-time">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.distance:i,{name:"if",hash:{},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.loc_time:i,e))+"</span>\n"},18:function(e,t,n,a){var i;return this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.distance:i,e))+"&nbsp;·&nbsp;"},20:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.talkTo:e)?i.relation:i,{name:"isEqual",hash:{equals:"follow"},fn:this.program(21,a,0),inverse:this.program(24,a,0),data:a}))?i:""},21:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.loc_time:i,{name:"if",hash:{},fn:this.program(22,a,0),inverse:this.noop,data:a}))?i:""},22:function(e,t,n,a){var i;return'\t\t\t\t\t<span class="right local-time">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.distance:i,{name:"if",hash:{},fn:this.program(18,a,0),inverse:this.noop,data:a}))?i:"")+this.escapeExpression(this.lambda(null!=(i=null!=e?e.talkTo:e)?i.loc_time:i,e))+"</span>\n"},24:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.talkTo:e)?i.relation:i,{name:"isEqual",hash:{equals:"fans"},fn:this.program(25,a,0),inverse:this.program(27,a,0),data:a}))?i:""},25:function(e,t,n,a){return'\t\t\t\t\t<span class="right add-friend"><i class="fa fa-plus"></i>关注</span>\n'},27:function(e,t,n,a){var i;return null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.talkTo:e)?i.relation:i,{name:"isEqual",hash:{equals:"none"},fn:this.program(28,a,0),inverse:this.noop,data:a}))?i:""},28:function(e,t,n,a){return'\t\t\t\t\t\t\t<span class="right add-friend"><i class="fa fa-plus"></i>关注</span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression,l=t.helperMissing;return' <div class="'+r(o(null!=(i=null!=e?e.talkTo:e)?i.idType:i,e))+' clearfix" data-from="'+r(o(null!=(i=null!=e?e.talkTo:e)?i.fromType:i,e))+'">\n\t<img src="'+r(o(null!=(i=null!=e?e.talkTo:e)?i.avatar:i,e))+'" class="avatar" data-id="'+r((t.getValue||e&&e.getValue||l).call(e,null!=e?e.talkTo:e,null!=(i=null!=e?e.talkTo:e)?i.idType:i,{name:"getValue",hash:{},data:a}))+'" data-idType="'+r(o(null!=(i=null!=e?e.talkTo:e)?i.idType:i,e))+'" data-type="'+r(o(null!=(i=null!=e?e.talkTo:e)?i.typeName:i,e))+'" />\n'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.momoid:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'\t<p class="username">'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.talkTo:e)?i.remarkname:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.program(9,a,0),data:a}))?i:"")+"</p>\n"+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.talkTo:e)?i.idType:i,{name:"isEqual",hash:{equals:"gid"},fn:this.program(11,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.talkTo:e)?i.idType:i,{name:"isEqual",hash:{equals:"did"},fn:this.program(13,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||l).call(e,null!=(i=null!=e?e.talkTo:e)?i.idType:i,{name:"isEqual",hash:{equals:"momoid"},fn:this.program(15,a,0),inverse:this.noop,data:a}))?i:"")+"</div>"},useData:!0})}),define("module/V2-VM-Talking",["require","exports","module","module/V2-API","module/V2-storage","module/V2-watchSet","module/V2-Tips","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-Update","module/V2-M-Search","module/V2-M-Helper","module/V2-M-Audio","module/V2-VM-Add","module/V2-VM-Helper","module/V2-VM-Hi","module/V2-VM-cacheMsg","module/V2-V-Layer","module/V2-VM-fileHelper","view/talkingToInfo"],function(e){var t=e("./V2-API"),n=e("./V2-storage"),a=e("./V2-watchSet"),i=e("./V2-Tips"),o=e("./V2-V-Variable"),r=e("./V2-M-Variable"),l=l||{};l.update=e("./V2-M-Update"),l.search=e("./V2-M-Search"),l.Helper=e("./V2-M-Helper"),l.audio=e("./V2-M-Audio");var s=s||{};s.Add=e("./V2-VM-Add"),s.Helper=e("./V2-VM-Helper"),s.hi=e("./V2-VM-Hi"),s.cacheMessage=e("./V2-VM-cacheMsg"),s.layer=e("./V2-V-Layer"),s.fileHelper=e("./V2-VM-fileHelper");var c=e("../view/talkingToInfo"),u=u||{};return u.change=function(e,a,u,d){if(u.momoid==r.account.momoid)return void("search"==u.fromType&&(l.search.focusout(),i.System("这是你自己。。。","error",3e3)));var m=c({talkTo:u});o.box.talk_to.removeAttr("data-hi").html(m),s.Helper.changeTalkReset(),o.box.msgList.html(""),r.msgScreenAPI.reinitialise(),s.fileHelper.Remove(),r.atMsg=!1,r.atList={},r._cache.ating=!1,r._cache.atmsgs={},r.fetchHistoryMsg=!1,r.status.loadHistoryMsgs=!1,r.fetchAllMsgs=!1,l.audio.onStop(),$(".check-new-msg").get(0)&&$(".check-new-msg").remove(),setTimeout(function(){var e=r.talk_to.idType;r.textAreaCache[e][r.talk_to[e]]?(o.ele.textarea.val(r.textAreaCache[e][r.talk_to[e]]).focus(),delete r.textAreaCache[e][r.talk_to[e]]):o.ele.textarea.val("").focus()},10);var f=u.idType,p=u[f],h=u.typeName;l.Helper.checkColorfulEgg(f,p);var g="";if(r.msgs)if($("#talking-user-"+p).get(0)){var v=$("#talking-user-"+p).attr("data-storeid");v?g=r.msgs.store[p]:r.msgs[h]&&r.msgs[h][p]&&(g=r.msgs[h][p])}else if($("#talking-store-"+p).get(0)){var v=$("#talking-store-"+p).attr("data-storeid");v?g=r.msgs.store[v]:r.msgs[h]&&r.msgs[h][p]&&(g=r.msgs[h][p])}else r.msgs[h]&&r.msgs[h][p]&&(g=r.msgs[h][p]);if("user"==h){var y={};if($("#talking-user-"+p).attr("data-storeid")&&r.unread.local&&r.unread.local[r.talk_to.momoid]){y[r.talk_to.momoid]=r.unread.local[r.talk_to.momoid],delete r.unread.local[r.talk_to.momoid];var b=s.Add.allStoreUnread(r.talk_to.momoid);$("#talking-storeMsg-store-msg-block .member-item-content .unread-msg-num")[0]&&$("#talking-storeMsg-store-msg-block .member-item-content .unread-msg-num").remove(),b>0&&$("#talking-storeMsg-store-msg-block .member-item-content").prepend('<span class="unread-msg-num">'+b+"</span>")}else r.unread.cache&&r.unread.cache[r.talk_to.momoid]&&(y[r.talk_to.momoid]=r.unread.cache[r.talk_to.momoid].slice(-100),delete r.unread.cache[r.talk_to.momoid],winC.emit("readMsg",JSON.stringify(y)))}if("store"==h&&$("#talking-user-"+p).attr("data-storeid")){var y={},v=$("#talking-user-"+p).attr("data-storeid");r.unread.cache&&r.unread.cache[r.talk_to.momoid]&&(y[r.talk_to.momoid]=r.unread.cache[r.talk_to.momoid].slice(-100),delete r.unread.cache[r.talk_to.momoid],winC.emit("sReadMsg",JSON.stringify(y),2,v))}if("at"==u.from){var x=u.msgid;$.each(g,function(e,t){if(t._id==x){if(s.cacheMessage.init(g,!0),$("#"+x)[0]){var n=$("#"+x).get(0).offsetTop,a=o.box.msgListWrapper.get(0).offsetHeight;r.msgScreenAPI.reinitialise(),r.msgScreenAPI.scrollToY(n-a/2),o.box.msgList.get(0).scrollHeight-n>a/2&&setTimeout(function(){s.Helper.newMsgTips(!0),delete r._cache.atmsgs[h+"-"+p]},100)}l.update.talkingSelect(h,p)}})}else g&&g.length&&s.cacheMessage.init(g);if("search"!=u.fromType&&"rightMenu"!=u.fromType&&"hi"!=u.fromType||s.Add.TalkingTo(h,p),l.update.talkingSelect(h,p),u.isHi){$("#hi-"+p).find(".unread-msg-num").text(""),delete r.unread.hi[p];var w=s.hi.getUnreadNum();w>0?o.ele.hiUnreadNum.text(w).show():o.ele.hiUnreadNum.text(w).hide()}else $("#talking-"+h+"-"+p).find(".unread-msg-num").text("").addClass("hide"),$("#talking-"+h+"-"+p).hasClass("has-at-tip")&&($("#talking-"+h+"-"+p).removeClass("has-at-tip"),$("#talking-"+h+"-"+p+" p.at").remove(),$("#talking-"+h+"-"+p).find(".username").removeClass("have-sign")),"store"===h||"user"==h&&$("#talking-"+h+"-"+p).attr("data-storeid")?delete r.unread.local[p+"store"]:(delete r.unread.local[p],delete r.unread.ignore[p]),"user"==h&&r.unread.hi[p]&&delete r.unread.hi[p];1==r.setting.history_on_off&&n.set(window.enMomoid+"unread",r.unread),l.update.unreadNumOnTitle(),s.Helper.newMsgTips(!1),"webHi"==u.fromType&&"user"==h&&(o.box.talk_to.attr("data-hi","webHi"),o.box.talk_to.attr("data-fromid",u.fromId),"none"==u.relation&&o.box.talk_to.find(".add-friend").on("click",function(){t.followPeople(p)})),"user"==h?"fans"!=u.relation&&"none"!=u.relation||o.box.talk_to.find(".add-friend").on("click",function(){t.followPeople(p)}):"discuss"==h?t.getGroupDisturbs("did",p):"group"==h&&t.getGroupDisturbs("gid",p)},u.talkToPanel=function(e){var n,i;if(e.attr("data-momoid")&&e.attr("data-momoid").length>0?(n=e.attr("data-momoid"),i="user"):e.attr("data-did")&&e.attr("data-did").length>0?(n=e.attr("data-did"),i="discuss"):e.attr("data-gid")&&e.attr("data-gid").length>0&&(n=e.attr("data-gid"),i="group"),n&&n!==r.talk_to[r.talk_to.idType]){if("user"==i&&e.attr("data-from")&&e.attr("data-from").length>0)var o=e.attr("data-from");if(n!=r.account.momoid){var l={type:i,id:n,from:"panel185"};t.getProfile(l,function(e,t){t&&(o&&(t.fromType="webHi",t.fromId=o),a.set(r,"talk_to",t,u.change))})}}s.layer.Off()},u}),define("module/V2-VM-notify",["require","exports","module","module/V2-V-Variable","module/V2-M-Variable","module/V2-watchSet","module/V2-timeHelper","module/V2-VM-Talking"],function(e){var t=(e("./V2-V-Variable"),e("./V2-M-Variable")),n=e("./V2-watchSet"),a=(e("./V2-timeHelper"),a||{});a.Taking=e("./V2-VM-Talking");var i=function(e,i,r){var l="function"==typeof window.Notification;if(l)if("granted"===Notification.permission){var s=new Notification(e,{body:r,icon:i.avatar});s.onclick=function(){n.set(t,"talk_to",i,a.Taking.change),winObs.trigger("notification-click"),window.focus()},setTimeout(function(){s.close()},7e3)}else o()},o=function(){"denied"!==Notification.permission&&Notification.requestPermission(function(e){Notification.permission!==e&&(Notification.permission=e)})},r=function(e,t){};return{message:i,unreadChange:r}}),define("view/atListItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return null!=(i=t["with"].call(e,null!=e?e.atData:e,{name:"with",hash:{},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:""},2:function(e,t,n,a){var i,o=t.helperMissing,r="function",l=this.escapeExpression;return' \n<li class="at-list-item change-talk-to" data-id="'+l((i=null!=(i=t.to||(null!=e?e.to:e))?i:o,typeof i===r?i.call(e,{name:"to",hash:{},data:a}):i))+'" data-type="group" data-msgid="'+l((i=null!=(i=t._id||(null!=e?e._id:e))?i:o,typeof i===r?i.call(e,{name:"_id",hash:{},data:a}):i))+'"><span class="at-from">'+l((i=null!=(i=t.from||(null!=e?e.from:e))?i:o,typeof i===r?i.call(e,{name:"from",hash:{},data:a}):i))+'</span>在<span class="at-where">'+l((i=null!=(i=t.where||(null!=e?e.where:e))?i:o,typeof i===r?i.call(e,{name:"where",hash:{},data:a}):i))+"</span>中@你</li>\n"},4:function(e,t,n,a){var i;return null!=(i=t.each.call(e,null!=e?e.list:e,{name:"each",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:""},5:function(e,t,n,a){var i,o,r=this.escapeExpression,l=this.lambda;return'\t\t<li class="member-list-item edit-at-item" data-index="'+r((o=null!=(o=t.key||a&&a.key)?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"key",hash:{},data:a}):o))+'" data-id="'+r(l(null!=e?e.momoid:e,e))+'" data-type="user">\n            <div class="member-item-content clearfix">\n                <img src="'+r(l(null!=e?e.avatar:e,e))+'" class="avatar" alt="" >\n                <p class="username" name="'+r(l(null!=e?e.name:e,e))+'">'+(null!=(i=t["if"].call(e,null!=e?e.remarkname:e,{name:"if",hash:{},fn:this.program(6,a,0),inverse:this.program(8,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.remarkname:e,{name:"if",hash:{},fn:this.program(10,a,0),inverse:this.noop,data:a}))?i:"")+"</p>\n            </div>\n\t    </li>\n"},6:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.remarkname:e,e))},8:function(e,t,n,a){return this.escapeExpression(this.lambda(null!=e?e.name:e,e))},10:function(e,t,n,a){return'<i class="name">（'+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"）</i>"},compiler:[6,">= 2.0.0-beta.1"],
main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=e?e.atData:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(4,a,0),data:a}))?i:""},useData:!0})}),define("module/V2-VM-At",["require","exports","module","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/chatroom/room-M-Variable","module/V2-M-Helper","module/V2-timeHelper","module/V2-VM-notify","module/V2-V-Face","module/V2-VM-Add","view/atListItem"],function(e){var t=e("./V2-API"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=e("./chatroom/room-M-Variable"),o=o||{};o.Helper=e("./V2-M-Helper");var r=(e("./V2-timeHelper"),r||{});r.notify=e("./V2-VM-notify"),r.insertAt=e("./V2-V-Face"),r.add=e("./V2-VM-Add");var l=e("../view/atListItem"),s=s||{};return s.checkout=function(e,n){if(e&&e.at&&n){var i,o;if(e.at.indexOf(a.account.momoid)!==-1){var l={type:"user",id:e.fr};t.getProfile(l,function(n,a){a&&(i=a.remarkname||a.name);var l={type:"group",id:e.to};t.getProfile(l,function(t,n){if(n){o=n.remarkname||n.name;$.extend({},e,{from:i,where:o});i&&o&&r.add.LastMsg("group",e.to,e,i,!0)}})})}}},s.start=function(){if(s.stop(),a.currentPage&&"chat"==a.currentPage){if("group"!=a.talk_to.typeName)return;var e=a.talk_to[a.talk_to.idType],n=a.talk_to.typeName+"_"+e;a._cache.currentKey=n,t.getMemberProfile(a.talk_to.typeName,e,function(e,t){t?(a._cache.members[n]=t,s.render(t)):a._cache.members[n]&&s.render(a._cache.members[n])})}else a.currentPage&&"chatroom"==a.currentPage&&i.curRoomId&&s.render(i.roomMembers)},s.choose=function(e){var t=$('.edit-at-item[data-id="'+e+'"] .username').attr("name"),o=n.ele.textarea,l=a;a.currentPage&&"chatroom"==a.currentPage&&i.curRoomId&&(o=$(".chatroom-container .room-edit-box .edit-content"),l=i);var c=o[0].selectionStart;r.insertAt.insertLable(t+" ",o[0]),l.atMsg=!0,l.atList[e]="@"+t,s.stop();var u=o.val(),d=u.substr(c);u=u.substr(0,c),u=u.split("@"),u.pop(),u.push(d),o.val(u.join("@")),setTimeout(function(){o[0].focus()},10)},s.stop=function(){var e=n.box.editAtBox,t=n.box.editAtList,o=a;a.currentPage&&"chatroom"==a.currentPage&&i.curRoomId&&(t=$(".chatroom-container .room-edit-box .edit-at-list"),e=$(".chatroom-container .room-edit-box .edit-at-list-box"),o=i),e.addClass("hide"),t.html(""),o._cache.ating=!1,o.status.atItemIndex=0,o.status.atLength=0},s.render=function(e){if(e&&!$.isEmptyObject(e)){var t=l({list:e}),o=n.box.editAtList,r=n.box.editAtBox,s=a;a.currentPage&&"chatroom"==a.currentPage&&(o=$(".chatroom-container .room-edit-box .edit-at-list"),r=$(".chatroom-container .room-edit-box .edit-at-list-box"),s=i),o.html(t),s.status.atLength=o.children().length,s.status.atLength<6?r.find(".jspContainer").css("height",33*s.status.atLength+"px"):(a.atScroll=r.jScrollPane({autoReinitialise:!0,contentWidth:"0px"}),r.css("padding","0").find(".jspPane").css("padding","0")),r.removeClass("hide"),s._cache.ating=!0,o.children().removeClass("selected").first().addClass("selected")}},s.search=function(e){if(!(""==e||!/[\u4e00-\u9fa5]/g.test(e)&&e.length<2))if(a._cache.members[a._cache.currentKey]&&a._cache.ating){var t=a._cache.members[a._cache.currentKey],n=[];$.each(t,function(t,a){var i=a.name?a.name.toLowerCase():"",o=a.remarkname?a.remarkname.toLowerCase():"";i.indexOf(e)==-1&&o.indexOf(e)==-1||n.push(a)}),0==n.length&&s.stop(),1==n.length?s.choose(n[0].momoid):n.length>=1&&s.render(n)}else s.stop()},s.tab=function(e,t,o,r){if(o!==-1){var l=n.box.editAtBox,s=a;a.currentPage&&"chatroom"==a.currentPage&&(l=$(".chatroom-container .room-edit-box .edit-at-list-box"),s=i);var c=l.find("li.edit-at-item").removeClass("selected").eq(o).addClass("selected");s.status.selectId=c.attr("data-id"),s.status.selectType=c.attr("data-type")}},s.hover=function(){var e=a;a.currentPage&&"chatroom"==a.currentPage&&(e=i),watchSet.set(e.status,"atItemIndex",$(this).index(),s.tab)},$(".edit-at-list-box").on("click",".edit-at-item",function(){var e=($(this).find(".username").text(),$(this).attr("data-id"));s.choose(e)}),s}),define("module/V2-VM-ShortCutKey",["require","exports","module","module/V2-V-Variable","module/V2-M-Variable","module/chatroom/room-M-Variable","module/V2-C-ClientDownload","module/V2-API","module/V2-watchSet","module/V2-M-Search","module/V2-VM-Talking","module/V2-VM-Helper","module/V2-VM-At"],function(e){var t=e("./V2-V-Variable"),n=e("./V2-M-Variable"),a=e("./chatroom/room-M-Variable"),i=e("./V2-C-ClientDownload").closeDownload,o=e("./V2-API"),r=e("./V2-watchSet"),l=l||{};l.search=e("./V2-M-Search");var s=s||{};s.Talking=e("./V2-VM-Talking"),s.Helper=e("./V2-VM-Helper"),s.at=e("./V2-VM-At");var c=c||{};return c.search=function(e){var a=e.which,c=n.status.isSearchFocus,u=n.status.searchItemIndex;if(27==a)return l.search.focusout(),t.ele.textarea.blur(),!1;if(c&&n.status.searchLength>=0){if(38==a)return u<=0?u=n.status.searchLength-1:u--,r.set(n.status,"searchItemIndex",u,l.search.tab),n.status.searchLength>13&&s.Helper.scrollAuto($(".search-list-box"),n.status.searchItemIndex,n.status.searchLength,-1,35,14),!1;if(40==a)return u>=n.status.searchLength-1?u=0:u++,r.set(n.status,"searchItemIndex",u,l.search.tab),n.status.searchLength>13&&s.Helper.scrollAuto($(".search-list-box"),n.status.searchItemIndex,n.status.searchLength,1,35,14),!1;if(13==a){if(n.status.selectId){var d={type:n.status.selectType,id:n.status.selectId,fromType:"short50"};o.getProfile(d,function(e,t){if(t){var a="";"user"==n.status.selectType?a="momoid":"group"==n.status.selectType?a="gid":"discuss"==n.status.selectType&&(a="did");var i=$.extend({},t,{typeName:n.status.selectType,idType:a||"momoid",fromType:"search"});r.set(n,"talk_to",i,s.Talking.change)}})}return i(),t.ele.search.blur(),!1}}},c.textareaKeyDown=function(e){var i=n,o=t.box.editAtList,l=t.box.editAtBox;n.currentPage&&"chatroom"==n.currentPage&&(i=a,o=$(".chatroom-container .room-edit-box .edit-at-list"),l=$(".chatroom-container .room-edit-box .edit-at-list-box"));var c=i.status.atItemIndex;if(13==e.keyCode){if(i._cache.ating){var u=o.find(".selected");return u&&1==u.length&&s.at.choose(u.attr("data-id")),s.at.stop(),!1}if("windows"==n.status.platform&&e.ctrlKey||"mac"==n.status.platform&&e.metaKey)return $(this).val($(this).val()+"\n"),!1;if(!e.shiftKey)return n.status.isTextareaFocus&&n.talk_to?$(".chat-container .icon-send").click():a.status.isTextareaFocus&&a.curRoomId&&$(".chatroom-container .icon-send").click(),!1}if(38==e.keyCode){if(0==o.children().length)return;return c<=0?c=i.status.atLength-1:c--,r.set(i.status,"atItemIndex",c,s.at.tab),i.status.atLength>6&&s.Helper.scrollAuto(l,i.status.atItemIndex,i.status.atLength,-1,33,6),!1}if(40==e.keyCode){if(0==o.children().length)return;return c>=i.status.atLength-1?c=0:c++,r.set(i.status,"atItemIndex",c,s.at.tab),i.status.atLength>6,!1}50==e.keyCode&&e.shiftKey&&s.at.start()},c.textareaKeyUp=function(e){var i=n,o=t.ele.textarea;n.currentPage&&"chatroom"==n.currentPage&&(i=a,o=$(".chatroom-container .room-edit-box .edit-content"));var r=o.val();if(!i._cache.ating&&r.length>0&&"@"==r.charAt(r.length-1))s.at.start();else if(i._cache.ating&&38!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode){var l=o.val();l=l.substr(0,o[0].selectionStart),l=l.split("@"),l=l[l.length-1],s.at.search(l)}if(r.indexOf("@")==-1)return s.at.stop(),!1},c}),define("module/chatroom/room-VM-HistoryMsg",["require","exports","module","module/chatroom/room-VM-addMessage","module/V2-M-Helper"],function(e){var t=e("./room-VM-addMessage"),n=e("../V2-M-Helper"),a={};return a.HistoryMsg=function(e){if(e){var a={};$.each(e,function(e,i){"10000"!=e?(a={name:i.name,avatar:i.photo,momoid:i.fr},3==i.type&&i.text&&(i.guid=n.QueryString(i.text,"file"))):i.style=2,t.roomAddMsg(i,a)})}},a}),define("view/roomWindowProfile",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'\t\t\t\t<span class="info gender female room"><i class="icon-female"></i><span class="age">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.age:i,e))+"</span></span>\n"},3:function(e,t,n,a){var i;return'\t\t\t\t<span class="info gender male room"><i class="icon-male"></i><span class="age">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.age:i,e))+"</span></span>\n"},5:function(e,t,n,a){var i;return'\t\t<input type="button" value="申请好友" class="chartroom-be-friend" data-momoid="'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'"/>\n'},7:function(e,t,n,a){return" self"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="room-profile-box">\n\t<div class="per-info">\n\t\t<img class="room-avatar left" src="'+r(o(null!=(i=null!=e?e.profile:e)?i.avatar:i,e))+'" alt="">\n\t\t<p class="room-username">'+r(o(null!=(i=null!=e?e.profile:e)?i.name:i,e))+'</p>\n\t\t<p class="room-gender-age">\n'+(null!=(i=(t.isEqual||e&&e.isEqual||t.helperMissing).call(e,null!=(i=null!=e?e.profile:e)?i.sex:i,{name:"isEqual",hash:{equals:"F"},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'\t\t</p>\n\t\t<p class="room-sign">'+r(o(null!=(i=null!=e?e.profile:e)?i.sign:i,e))+'</p>\n\t</div>\n\t<p class="room-oper-btn-box">\n'+(null!=(i=t.unless.call(e,null!=(i=null!=e?e.profile:e)?i.self:i,{name:"unless",hash:{},fn:this.program(5,a,0),inverse:this.noop,data:a}))?i:"")+'\t\t<input type="button" value="@TA" class="chartroom-at-btn'+(null!=(i=t["if"].call(e,null!=(i=null!=e?e.profile:e)?i.self:i,{name:"if",hash:{},fn:this.program(7,a,0),inverse:this.noop,data:a}))?i:"")+'" data-momoid="'+r(o(null!=(i=null!=e?e.profile:e)?i.momoid:i,e))+'"/>\n\t</p>\n</div>'},useData:!0})}),define("module/chatroom/room-M",["require","exports","module","module/chatroom/room-API","module/chatroom/room-M-Variable","module/V2-V-Layer","module/V2-M-Helper","module/chatroom/room-M-Helper","module/V2-M-Audio","module/V2-V-Face","module/V2-M-Variable","module/V2-VM-ShortCutKey","module/chatroom/room-VM-SendMsg","module/chatroom/room-VM-addMessage","module/V2-Tips","lib/collectError","lib/js.cookie","module/chatroom/room-VM-HistoryMsg","view/roomWindowProfile"],function(e){var t=e("./room-API"),n=e("./room-M-Variable"),a={};a.layer=e("../V2-V-Layer");var i={};i.MHelper=e("../V2-M-Helper"),i.roomHelper=e("./room-M-Helper"),i.audio=e("../V2-M-Audio"),i.emotion=e("../V2-V-Face"),i.Helper=e("./../V2-M-Variable");var o=o||{};o.shortcutKey=e("../V2-VM-ShortCutKey");var r=e("./room-VM-SendMsg"),l=e("./room-VM-addMessage"),s=e("../V2-Tips"),c=e("../../lib/collectError"),u=e("../../lib/js.cookie"),d=e("./room-VM-HistoryMsg"),m=e("../../view/roomWindowProfile"),f=f||{};return f.init=function(){var e=i.MHelper.QueryString(window.location.href,"rf");e&&($(".mm-mac-icon").eq(0).attr("href","/webmomo/api/download/free_download/?c=ios&m="+e),$(".mm-android-icon").eq(0).attr("href","/webmomo/api/download/free_download/?c=android&m="+e),$(".mm-go-download>a").eq(0).attr("href","/mm_downloads?rf="+e)),i.roomHelper.initScroll(),$(window).resize(function(){n.ChatroomScreenAPI&&n.ChatroomScreenAPI.reinitialise(),n.ChatroomListAPI&&n.ChatroomListAPI.reinitialise(),n.membersScrollAPI&&n.membersScrollAPI.reinitialise()}),$("body:not(body *)").on("click",function(){i.roomHelper.focusOut()}),t.getRoomList(1),t.getCategory(),i.MHelper.select($(".select-box"),function(e,n){if(n)if(6==n)if(window.momoid)if("F"==$(".account-box .avatar.oneself").attr("data-gender")){if($(".select-box .option-item i.selected").remove(),$(".option-item[data-id=6]").append('<i class="selected fa fa-check"></i>'),$(".option-item[data-id=6]").find("img")){var a=$(".option-item[data-id=6]").find("img").attr("src");$(".select-box").find(".selected-item").find("img").attr("src",a)}var i=$(".option-item[data-id=6]").find(".option-name").text();$(".select-box").find(".selected-item").attr("data-id","6").find(".selectname").text(i),t.getRoomList(n)}else s.Warning("仅限女性用户加入",3e3);else s.Warning("限制话题请先登录",3e3);else t.getRoomList(n)},6),$(".chatroom-container .chat-box").on("click",".room-channel-item",function(){if(window.momoid){if(n.noResponseMsg=[],n.joinRoomFaste)return;var e=$(this).attr("data-id");if(n.curRoomId==e)return;i.roomHelper.resetBord(),n.curRoomId=e,$(".room-channel-item").removeClass("select"),$(this).addClass("select"),111111==$(".chatroom-container .select-box .selected-item").attr("data-id")?t.getRoomMembers(!0):(n.downtimer&&clearInterval(n.downtimer),$(".textarea_tips i.timedown").text("10"),t.joinRoom(n.curRoomId,function(e){d.HistoryMsg(e);var t=$(".account-pro .username").text(),a={from:window.momoid,style:2,text:t+"进入房间",to:n.curRoomId,typeText:t+"进入房间",type:1,fr:window.momoid};l.roomAddMsg(a,{})}))}else a.layer.onOff("notOnline"),c.postDot({m:"chatroom",a:"loginfloatinglayer-joinroom",u:"c-"+u.get("cId")},n.url.loginDot)}),$(".chatroom-container .talking-room").on("click",".exit-room-btn",function(){n.downtimer&&clearInterval(n.downtimer),$(".textarea_tips i.timedown").text("10"),$(".textarea_tips").addClass("hide"),t.quitRoom()});var f=function(e,t){i.roomHelper.focusOut(),n.checkProfile=!0;var a=e.attr("data-id");if(n.roomMembers&&n.roomMembers[a]){if("msg"==t){$(".room-screen-box").css("overflow","visible"),$(".room-screen-box .jspContainer").css("overflow","visible");var o=m({profile:n.roomMembers[a]});$(".room-avatar-box").removeClass("checking").find(".room-profile-box").remove()}else{if("list"!=t)return;a==window.enMomoid&&(n.roomMembers[a].self=1),$(".online-avatar-list").css("overflow","visible"),$(".online-people-box .jspContainer").css("overflow","visible");var o=m({profile:n.roomMembers[a]});$(".online-people-box .avatar-item").removeClass("checking").find(".room-profile-box").remove()}e.addClass("checking").append(o)}};$(".chatroom-container .talking-box").on("click",".room-msg .room-avatar-box",function(e){return f($(this),"msg"),!1}),$(".chatroom-container .talking-box").on("contextmenu",".room-msg .room-avatar-box",function(e){if(3==e.which)return f($(this),"msg"),!1}),$(".chatroom-container .talking-box").on("click",".avatar-item",function(e){return f($(this),"list"),!1}),$(".chatroom-container .talking-box").on("contextmenu",".avatar-item",function(e){if(3==e.which)return f($(this),"list"),!1}),$(".chatroom-container .talking-box").on("click",".room-profile-box .chartroom-be-friend",function(e){$(".room-profile-box")[0]&&($(".room-profile-box").remove(),n.checkProfile=!1,n.ChatroomScreenAPI.reinitialise()),e.stopPropagation();var a=$(this).attr("data-momoid");t.applyFriend(a)}),$(".chatroom-container .talking-box").on("click",".room-profile-box .chartroom-at-btn",function(e){$(".room-profile-box")[0]&&($(".room-profile-box").remove(),n.checkProfile=!1,n.ChatroomScreenAPI.reinitialise()),e.stopPropagation();var t=$(this).parents(".room-profile-box").find(".room-username").text(),a=$(".chatroom-container .room-edit-box .edit-content").val();$(".chatroom-container .room-edit-box .edit-content").val(a+"@"+t+" "),setTimeout(function(){$(".chatroom-container .room-edit-box .edit-content").focus()},100)}),$(".chatroom-container .talking-room").on("click",".collect-room-btn",function(){var e=$(".talking-room [data-role=1]").attr("data-id");$(this).hasClass("done")?($(this).val("收藏").removeClass("done"),t.cancleCollect(e)):($(this).val("取消收藏").addClass("done"),e&&t.collectRoom(e))}),$(".chatroom-container .chat-box").on("click",".room-channel-item .cancle-collect",function(e){e.stopPropagation();var n=$(this).attr("data-id");$(this).parents(".room-channel-item").remove(),t.cancleCollect(n)}),$(".chatroom-container .chat-box").on("click",".update-list-btn",function(e){e.stopPropagation();var n=$(".chatroom-container .chat-box .select-box .selected-item").attr("data-id");$(".chatroom-container .room-list").remove(),$(".chatroom-container .chat-box").append('<ul class="room-list"></ul>'),t.getRoomList(n)}),$(".chatroom-container .room-msg-list").on("click",".room-content.normal.type3",function(){var e=$(this).attr("data-src"),t=$(this).attr("data-id");i.audio.init(e,t,$(this))}),$(".chatroom-container .room-msg-list").on("click",".room-content.normal.type9 .room-agree-btn",function(){var e=$(this).attr("data-id");t.dealFriendApply(e,1)}),$(".chatroom-container .room-msg-list").on("click",".room-content.normal.type9 .room-refuse-btn",function(){var e=$(this).attr("data-id");t.dealFriendApply(e,2)}),$(".chatroom-container .room-edit-box").on("click",".send",function(){$(".chatroom-container .room-edit-box").find(".icon-send").addClass("on"),setTimeout(function(){$(".chatroom-container .room-edit-box").find(".icon-send").removeClass("on")},100),r.roomSend()}),$(".chatroom-container .room-edit-box .edit-content").on("focusin",function(){n.status.isTextareaFocus=!0}).on("focusout",function(){n.status.isTextareaFocus=!1}).on("keydown",o.shortcutKey.textareaKeyDown).on("keyup",function(){if($(".room-edit-box .edit-content").val().length>n.maxtextAreaLength){var e=$(".room-edit-box .edit-content").val().substring(0,n.maxtextAreaLength);return $(".room-edit-box .edit-content").val(e),s.Warning("最多输入"+n.maxtextAreaLength+"个字哦",2e3),!1}$(".room-edit-box .edit-content").scrollTop(9999)}).on("input propertychange",o.shortcutKey.textareaKeyUp),$(".layer").on("click",".login-box",function(e){e.stopPropagation()}),$(".layer").on("click",".go-live-page",function(){a.layer.Off()}),$(".account-box .noname-login").on("click",function(){"/chat"==window.location.pathname&&(a.layer.onOff("notOnline"),c.postDot({m:"entirety",a:"right-login-chat",u:"m-"+u.get("cId")},n.url.loginDot))})},f}),define("module/momolive/LIVE-M-GetRoomDetail",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-M-Variable","module/V2-M-Helper","module/momolive/LIVE-M-GiftModel","view/liveChatBox"],function(e){var t=e("./LIVE-API"),n=e("./LIVE-M-Variable"),a=e("./LIVE-V-Variable"),i=e("./../V2-M-Variable");i.Helper=e("./../V2-M-Helper");var o=e("./LIVE-M-GiftModel"),r=e("../../view/liveChatBox");a.box.roomListContainer.on("click",".liveRoomLists li.roomDetail, .onShowGroup",function(){$(".live-page-window .liveRoom-box .offPlaceHolder")[0]&&(n.startLiveTime=(new Date).getTime(),$(".live-page-window .liveRoom-box .offPlaceHolder").remove(),n.status.closePlayer=!1,t.stayLiveTime()),$(".live-chat-box").html(r()),a.box.giftEffectList.children().html(""),n.giftEffectQueue=[],n.giftManyTime={},o.resetQueue(),$(".live-gift-animation-box")[0]&&$(".live-gift-animation-box").remove();var e={};return 0==$(this).attr("data-l_rtype")?(e.rt=$(this).attr("data-l_rtype"),e.rid=$(this).attr("data-l_rid")):e.stid=$(this).attr("data-momoid"),$(this).hasClass("anchorItem")?i.liveSource="myanchor":i.liveSource="recommend",window.room?window.room.disconnected?window.room.connect():window.room.connected&&i.roomHelper.socketControl($(".collect-room-btn").attr("data-id"),null,null,null):window.room=window.roomSocket.init(),t.getRoomDetail(e,!1),!1}).on("contextmenu",".liveRoomLists li.roomDetail img,.onShowGroup img",function(){return!1}).on("dragstart",".liveRoomLists li.roomDetail img,.onShowGroup img",function(){return!1})}),define("view/liveGiftEffectItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return" price-"+this.escapeExpression((i=null!=(i=t.priceLevel||(null!=e?e.priceLevel:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"priceLevel",hash:{},data:a}):i))},3:function(e,t,n,a){return" little-gift"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'<div id="giftmsg-'+s((o=null!=(o=t.dmid||(null!=e?e.dmid:e))?o:r,typeof o===l?o.call(e,{name:"dmid",hash:{},data:a}):o))+"-"+s((o=null!=(o=t.productId||(null!=e?e.productId:e))?o:r,typeof o===l?o.call(e,{name:"productId",hash:{},data:a}):o))+'" class="giftEffectWrap clearfix'+(null!=(i=t["if"].call(e,null!=e?e.priceLevel:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=t["if"].call(e,null!=e?e.isLittleGift:e,{name:"if",hash:{},fn:this.program(3,a,0),inverse:this.noop,data:a}))?i:"")+'" data-user="'+s((o=null!=(o=t.userId||(null!=e?e.userId:e))?o:r,typeof o===l?o.call(e,{name:"userId",hash:{},data:a}):o))+'" data-product="'+s((o=null!=(o=t.productId||(null!=e?e.productId:e))?o:r,typeof o===l?o.call(e,{name:"productId",hash:{},data:a}):o))+'" data-dmid="'+s((o=null!=(o=t.dmid||(null!=e?e.dmid:e))?o:r,typeof o===l?o.call(e,{name:"dmid",hash:{},data:a}):o))+'" data-token="'+s((o=null!=(o=t.token||(null!=e?e.token:e))?o:r,typeof o===l?o.call(e,{name:"token",hash:{},data:a}):o))+'" data-timestamp="'+s((o=null!=(o=t.timestamp||(null!=e?e.timestamp:e))?o:r,typeof o===l?o.call(e,{name:"timestamp",hash:{},data:a}):o))+'">\n    <div class="userBox" data-id="'+s((o=null!=(o=t.userId||(null!=e?e.userId:e))?o:r,typeof o===l?o.call(e,{name:"userId",hash:{},data:a}):o))+'">\n        <img class="userImg" src="'+s((o=null!=(o=t.userImg||(null!=e?e.userImg:e))?o:r,typeof o===l?o.call(e,{name:"userImg",hash:{},data:a}):o))+'">\n        <div class="content">\n            <p class="name">'+s((o=null!=(o=t.userName||(null!=e?e.userName:e))?o:r,typeof o===l?o.call(e,{name:"userName",hash:{},data:a}):o))+'</p>\n            <p class="text">赠送了 <span>'+s((o=null!=(o=t.giftName||(null!=e?e.giftName:e))?o:r,typeof o===l?o.call(e,{name:"giftName",hash:{},data:a}):o))+'</span></p>\n        </div>\n    </div>\n    <div class="giftBox" data-id="'+s((o=null!=(o=t.productId||(null!=e?e.productId:e))?o:r,typeof o===l?o.call(e,{name:"productId",hash:{},data:a}):o))+'">\n        <img class="giftImg" src="'+s((o=null!=(o=t.giftUrl||(null!=e?e.giftUrl:e))?o:r,typeof o===l?o.call(e,{name:"giftUrl",hash:{},data:a}):o))+'">\n        <p class="giftCount">x'+s((o=null!=(o=t.giftNumber||(null!=e?e.giftNumber:e))?o:r,typeof o===l?o.call(e,{name:"giftNumber",hash:{},data:a}):o))+"</p>\n    </div>\n</div>"},useData:!0})}),define("view/liveMsgItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i,o=t.helperMissing;return(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:1},fn:this.program(2,a,0),inverse:this.noop,data:a}))?i:"")+(null!=(i=(t.isEqual||e&&e.isEqual||o).call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"isEqual",hash:{equals:9},fn:this.program(4,a,0),inverse:this.noop,data:a}))?i:"")},2:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return"<li class='live-chat-msg' id='"+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+"' data-token='"+r(o(null!=(i=null!=e?e.msg:e)?i.token:i,e))+"' data-dmid='"+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+'\'>\n    <p class="fortune-level">\n        <img src="/img/fortuneLevel/ml_w_lv_'+r(o(null!=(i=null!=e?e.msg:e)?i.fortune:i,e))+'@2x.png" class="fortune-level-img">\n    </p>\n    <div class="contentWarp">\n        <span class="name">'+r(o(null!=(i=null!=e?e.msg:e)?i.nname:i,e))+':</span><span class="content">'+r(o(null!=(i=null!=e?e.msg:e)?i.text:i,e))+"</span>\n    </div>\n</li>\n"},4:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return"<li class='live-chat-msg' id='"+r(o(null!=(i=null!=e?e.msg:e)?i._id:i,e))+"' data-token='"+r(o(null!=(i=null!=e?e.msg:e)?i.token:i,e))+"' data-dmid='"+r(o(null!=(i=null!=e?e.msg:e)?i.fr:i,e))+"'>\n"+(null!=(i=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=(i=null!=e?e.msg:e)?i.fortune:i,null!=(i=null!=e?e.msg:e)?i.charm:i,{name:"compare",hash:{operator:">="},fn:this.program(5,a,0),inverse:this.program(7,a,0),data:a}))?i:"")+'    <div class="enterMsg"><span class="name">'+r(o(null!=(i=null!=e?e.msg:e)?i.nname:i,e))+"</span>"+r(o(null!=(i=null!=e?e.msg:e)?i.text:i,e))+"</div>\n</li>\n"},5:function(e,t,n,a){var i;return'        <p class="fortune-level">\n            <img src="/img/fortuneLevel/ml_w_lv_'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.fortune:i,e))+'@2x.png" class="fortune-level-img">\n        </p>\n'},7:function(e,t,n,a){var i;return'        <p class="charm-level">\n            <img src="/img/charmLevel/ml_c_lv_'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.msg:e)?i.charm:i,e))+'@2x.png" class="charm-level-img">\n        </p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i;return null!=(i=t["if"].call(e,null!=(i=null!=e?e.msg:e)?i.style:i,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:""},useData:!0})}),define("view/liveGiftAnimation",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="live-gift-animation-box">\n    <div class="light-box">\n        <img src="/img/gift/light.png" alt="" class="light">\n    </div>\n    <div class="gift-back-box">\n        <img src="/img/gift/'+r(o(null!=(i=null!=e?e.data:e)?i.giftName:i,e))+'-back.png" alt="" class="gift-back">\n    </div>\n    <div class="star-box star-box1 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box2">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box3 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box4 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box5 middle">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box6 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box7">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box8 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box9">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box10 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box11 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box12">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box13 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box14 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box15 middle">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box16 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box17">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box18 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box19">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box20 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="gift-img-box">\n        <img src="/img/gift/'+r(o(null!=(i=null!=e?e.data:e)?i.giftName:i,e))+'.png" alt="" class="gift-img">\n    </div>\n</div>'},useData:!0})}),define("view/myliveGiftAnimation",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o=this.lambda,r=this.escapeExpression;return'<div class="mylive-gift-animation-box">\n    <div class="light-box">\n        <img src="/img/gift/light.png" alt="" class="light">\n    </div>\n    <div class="gift-back-box">\n        <img src="/img/gift/'+r(o(null!=(i=null!=e?e.data:e)?i.giftName:i,e))+'-back.png" alt="" class="gift-back">\n    </div>\n    <div class="star-box star-box1 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box2">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box3 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box4 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box5 middle">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box6 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box7">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box8 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box9">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box10 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box11 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box12">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box13 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box14 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box15 middle">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box16 large">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box17">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box18 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box19">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="star-box star-box20 little">\n        <img src="/img/gift/star.png" alt="" class="star">\n    </div>\n    <div class="gift-img-box">\n        <img src="/img/gift/'+r(o(null!=(i=null!=e?e.data:e)?i.giftName:i,e))+'.png" alt="" class="gift-img">\n    </div>\n</div>'},useData:!0})}),define("module/momolive/LIVE-VM-Update",["require","exports","module","module/momolive/LIVE-V-Variable","module/momolive/LIVE-M-Variable","module/momolive/LIVE-M-Helper","module/momolive/LIVE-VM-Helper","module/V2-timeHelper","view/liveGiftEffectItem","view/liveOnlineUserItem","view/liveOnlineMasterItem","view/liveRankingItem","view/liveGiftItem","view/liveMyAnchorItem","view/liveMsgItem","view/liveGiftAnimation","view/myliveGiftAnimation"],function(e){var t=e("./LIVE-V-Variable"),n=e("./LIVE-M-Variable"),a={};n.Helper=e("./LIVE-M-Helper"),a.Helper=e("./LIVE-VM-Helper");var i=(e("../V2-timeHelper"),e("../../view/liveGiftEffectItem")),o=e("../../view/liveOnlineUserItem"),r=e("../../view/liveOnlineMasterItem"),l=(e("../../view/liveRankingItem"),e("../../view/liveGiftItem"),e("../../view/liveMyAnchorItem")),s=e("./../../view/liveMsgItem"),c=function(e,t){var n=e.attr("data-timestamp"),a=(e.text()||"").substr(1);return!(~~a>~~t&&Date.now()-n<2e4)},u=function(n,a){var i,o,r;"live"===a?(i=e("../../view/liveGiftAnimation"),o=t.box.giftDrawerBox):"mylive"===a&&(i=e("../../view/myliveGiftAnimation"),o=$(".myliveGiftDrawerBox"));var l="";1==n.gift.rocket?l="rocket":2==n.gift.rocket?l="yacht":3==n.gift.rocket&&(l="car"),l&&($("."+a+"-gift-animation-box")[0]||(o.after(i({data:{giftName:l}})),r=$("."+a+"-gift-animation-box"),r.addClass("animate"),setTimeout(function(){r.remove()},3500)))},d=function(e,t){var n=e.attr("data-timeout");clearTimeout(n);var a=setTimeout(function(){e.animate({opacity:"0",left:"-100%"},500,function(){$(this).removeClass("after"),$(this).remove(),t&&t()}),e.removeAttr("data-timeout").removeClass("current").addClass("after");
},4e3);e.attr("data-timeout",a)},m=function(e,t,a,o){var r=$("."+o+"GiftEffectItem."+t),l=e.profile;if(!r.children().length){r.append(i({msgId:e._id,dmid:e.fr,token:e.token,userId:e.fr,userImg:l.avatar,userName:l.name,productId:e.bd.productId,giftName:e.gift.name,giftUrl:e.gift.image,giftNumber:e.bd.buyTimes,priceLevel:n.Helper.getPriceLevel(e.gift.price),timestamp:e.timestamp,isLittleGift:!e.gift.rocket}));var s=r.find("#giftmsg-"+e.fr+"-"+e.bd.productId);s[0]&&(s.addClass("before"),s.animate({opacity:"1",left:"0"},500,function(){s.removeClass("before").addClass("current");var t=s.find(".giftCount");e.bd.buyTimes>1&&e.bd.buyTimes<100&&t.addClass("many-times"),a&&a(s)}))}},f=function(e,t){1!==e.gift.rocket&&2!==e.gift.rocket&&3!==e.gift.rocket||u(e,t)},p=function(e,t,n,a,i){var o=n&&n(e),r=$("."+i+"GiftEffectItem."+t),l=r.children().attr("data-timeout");if(o){var s=$("#giftmsg-"+o.fr+"-"+o.bd.productId);if(s[0]){var c=s.find(".giftCount");return f(o,i),d(s,a),c.text("x"+o.bd.buyTimes),o.bd.buyTimes>1&&o.bd.buyTimes<100&&(c.removeClass("many-times").css("opacity",0),setTimeout(function(){c.addClass("many-times").css("opacity",1)},100)),setTimeout(function(){return p(e,t,n,a,i)},300)}m(o,t,function(r){return d(r,a),f(o,i),p(e,t,n,a,i)},i)}else if(l)return setTimeout(function(){return p(e,t,n,a,i)},500)},h=function(e,a){var i,l=[];t.box.onlineList.parents(".jspContainer").find(".error-box")[0]&&t.box.onlineList.parents(".jspContainer").find(".error-box").remove();for(var s=0;s<e.users.length;s++)i=e.users[s].mid,n.onlineUserObj[i]||(n.onlineUserObj[i]=1,l.push(e.users[s]));for(var c,u=[],d=0;d<e.managers.length;d++)c=e.managers[d].mid,n.onlineManagerObj[c]||(n.onlineManagerObj[c]=1,u.push(e.managers[d]));$(".layfolkList")[0]&&(a&&$(".layfolkList").empty(),$(".layfolkList").append(o({list:l}))),$(".masterList")[0]&&(a&&$(".masterList").empty(),$(".masterList").append(r({list:u}))),n.onlineListNext=e.h_next,n.onlineListAPI?n.onlineListAPI.reinitialise():n.Helper.initListScroll()},g=function(e){if(e.length>0){parseInt(e[0].stid)===window.momoid&&e.splice(0,1);var t="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(l({list:e})),$(".anchor-groupList").append(t)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(l({list:e})),$(".anchor-liveShow-list").append(t)),n.hasLiveAPI&&n.hasLiveAPI.reinitialise(),n.status.showAnchor=!1}},v=function(e){var t="";t+=s({msg:e});var a=$(".live-msg-list");if(a[0]){if($(".live-chat-box .scrollBtn").hasClass("onScroll"))for(var i=a.find("li"),o=0;o<i.length-100;o++)i.eq(o).remove();a.append(t)}var r=$(".live-container .liveRoomContent .chat-msg-box").height(),l=$(".live-container .liveRoomContent .chat-msg-box .live-msg-list").height();if(l+3>r)if($(".live-chat-box .scrollBtn").hasClass("onScroll")){if(n.chatScrollTimer)return;n.chatScrollTimer=setTimeout(function(){n.Helper.initChatScroll(!0),n.chatScrollTimer=null},300)}else n.Helper.liveNewMsgTips(!0)};return{updateOnlineUserList:h,updateMyAnchorList:g,updateMsgItem:v,needShow:c,loop:p}}),define("module/momolive/LIVE-VM-Add",["require","exports","module","module/V2-M-Variable","module/momolive/LIVE-M-Variable","view/liveBarrage","module/momolive/LIVE-M-GiftModel","module/mylive/MYLIVE-VM-Update","module/momolive/LIVE-VM-Update","module/momolive/LIVE-V-Variable","module/mylive/MYLIVE-V-Variable"],function(e){var t=(e("./../V2-M-Variable"),e("./LIVE-M-Variable")),n={},a=e("./../../view/liveBarrage"),i=e("./LIVE-M-GiftModel"),o=e("../mylive/MYLIVE-VM-Update"),r={};r.update=e("./LIVE-VM-Update");var l={};l.Message=function(e){if(9===e.style)r.update.updateMsgItem(e);else if(1===e.style){e.fortune=e.fortune||0;var n=e.p_id;if(n){var a=t.giftList[n]?t.giftList[n].name:"";e.text+=a}r.update.updateMsgItem(e)}},l.barrage=function(e){if(e.nname||e.text){var t=e.nname+":"+e.text;s(t),d()}};var s=function(e){t.barrageQueue&&t.barrageQueue.length<100&&(t.barrageQueue.push(e),100===t.barrageQueue.length&&(t.barrageQueue=t.barrageQueue.slice(50,100)))},c=function(e){var t=a({text:e}),n=$(t),i=$(".playerContent").width(),o=u();if(o){n.css({left:i+"px"}),n.addClass(o),n.addClass("moving"),$(".flowplayer").append(n);var r=n.width(),l=0-r;n.css({left:l+"px"}),window.setTimeout(function(){n.removeClass("moving").addClass("moved"),d()},5e3),window.setTimeout(function(){n.remove()},6e3)}},u=function(){var e="",t=["first","second","third"];if($barrages=$(".worth_word.moving"),$barrages[0]){for(var n=0;n<t.length;n++)if(!$barrages.hasClass(t[n])){e=t[n];break}}else e="first";return e},d=function(){t.barrageQueue&&t.barrageQueue.length>0&&$(".worth_word.moving").length<3&&(c(t.barrageQueue.pop()),d())},m=function(e,t){i.popQueue(e,function(n,a){r.update.loop(n,a,i.getGiftMsg,function(){m(e,t)},t)},t)};return l.gift=function(a,l){var s=a.fr;a.to,a.token;a.timestamp=Date.now();var c=a.bd.productId,u=a.bd.buyTimes;if(a.profile={name:a.nname||"",avatar:a.bd.avatar||""},"mylive"===l&&o.updateGiftRecord(a),i.isBuyTimes(a)){var d=$("#giftmsg-"+s+"-"+c);if(r.update.needShow(d,u)){var f=i.pushInRightQueue(a);m(f,l)}}else{var f=i.pushInRightQueue(a);m(f,l)}if(a&&a.bd&&a.bd.starThumbs){var p=a.bd.starThumbs||0;if(p)if("live"===l){if(n=e("./LIVE-V-Variable"),t.status.isHasPK&&n.box.pkShow.children().length>0){var h=n.box.pkShow.children("[data-stid="+a.bd.starid+"]");h.find(".playerMsg .playerStarVal .starNum").text(p)}parseInt(n.box.anchor.find(".anchorMessage").attr("data-stid"))===parseInt(a.bd.starid)&&n.box.anchor.find(".anchorMessage .starNum.star").text(p)}else"mylive"===l&&(n=e("../mylive/MYLIVE-V-Variable"),parseInt(n.box.myliveAnchorBox.find(".anchorMessage").attr("data-stid"))===parseInt(a.bd.starid)&&n.box.myliveAnchorBox.find(".starNum").text(p))}},l}),define("module/momolive/LIVE-M-Gift",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-V-Layer","module/momolive/LIVE-VM-Helper","module/momolive/LIVE-VM-Add","module/V2-Tips","lib/collectError","lib/js.cookie"],function(e){var t=e("./LIVE-API"),n=e("./LIVE-M-Variable"),a=(e("./LIVE-V-Variable"),{});a.layer=e("../V2-V-Layer");var i={};i.Helper=e("./LIVE-VM-Helper"),i.add=e("./LIVE-VM-Add");var o=e("../V2-Tips"),r=e("../../lib/collectError"),l=e("../../lib/js.cookie");$(".attraction").on("mouseover",".gift-box li.giftItem",function(){if(!$(this).hasClass("payItem")){var e=$(this).attr("data-giftName"),t=$(this).attr("data-giftImg"),n=$(this).attr("data-giftPrice"),a={name:e,image:t,price:n},o=$(this).attr("data-index");i.Helper.getGiftTipPos(o,a)}}),$(".attraction").on("mouseout",".gift-box li.giftItem",function(){setTimeout(function(){$(".live-skin .attraction .giftTipWrap").html("")},50)});var s=function(e,t,n){return function(a,o){if(o&&o.status)"0"===t&&i.add.Message(e),i.Helper.giftAnimate(n);else{$("<div></div>")}}};$(".attraction").on("click",".gift-box li.giftItem",function(){if(!$(this).hasClass("payItem"))if(window.momoid){if(window.winC.disconnected)return void o.Warning(n.disconnectMsg,3e3);var e="";if($(".giftItem.current")){$(".giftItem.current").removeClass("current"),$(this).addClass("current");var i=$(".playerContent").attr("data-rd"),c=$(".playerContent").attr("data-sid"),u=$(".anchorMessage").attr("data-stid"),d=$(this).attr("data-giftid"),m=$(this).attr("data-token"),f=$(this).attr("data-giftPrice"),p=$(".anchorMessage").attr("data-stoken");n.fansName=$(".operate-content .avatar.oneself").attr("alt"),n.anchorName=$(".anchorMessage").attr("data-anchorName");var h={fr:window.momoid,to:i,text:"送 "+n.anchorName,gift:$(this).find("img").attr("src"),style:2,nname:n.fansName,bd:{productId:d,img:$(".account-box-childern .oneself").attr("src")}},g=!1;0===parseInt($(".playerContent").attr("data-rtype"))&&(g=!0);var v={rd:i,sid:c,stid:u,pid:d,price:f,token:m,stoken:p,isOfficial:g};n.status.isHasPK?n.status.hasGetPlayer?n.firstGift&&0!==parseInt(f)?(e="liveGiftToolTip",a.layer.onOff(e,f)):t.postGift(v,s(h,f,$(this))):n.status.hasGetPlayer||o.Warning("请先勾选喜欢的艺人",3e3):n.firstGift&&0!==parseInt(f)?(e="liveGiftToolTip",a.layer.onOff(e,f)):t.postGift(v,s(h,f,$(this)))}}else a.layer.onOff("notOnline"),r.postDot({m:"live",a:"loginfloatinglayer-buggift",u:"c-"+l.get("cId")},n.url.loginDot)}),$(".layer").on("click",".giftToolTip .btn",function(){if($(this).hasClass("sure")){if($(".nextNoTip:checked")[0]&&(t.postUserSetting(3,"live_gift_notice__1"),n.firstGift=!1),a.layer.Off(),!n.status.isPostGift){var e=$(".playerContent").attr("data-rd"),i=$(".playerContent").attr("data-sid"),o=$(".anchorMessage").attr("data-stid"),c=$(".giftItem.current").attr("data-giftid"),u=$(".giftItem.current").attr("data-giftPrice"),d=($(".giftItem.current").attr("data-giftid"),$(".giftItem.current").attr("data-token")),m=$(".anchorMessage").attr("data-stoken"),f={fr:window.momoid,to:e,text:"送 "+n.anchorName,gift:$(this).find("img").attr("src"),style:2,nname:n.fansName,bd:{productId:c,img:$(".account-box-childern .oneself").attr("src")}},p=!1;0===parseInt($(".playerContent").attr("data-rtype"))&&(p=!0);var h={rd:e,sid:i,stid:o,pid:c,price:u,token:d,stoken:m,isOfficial:p};window.momoid?t.postGift(h,s(f,u,$(".giftItem.current"))):(a.layer.onOff("notOnline"),r.postDot({m:"live",a:"loginfloatinglayer-buggift",u:"c-"+l.get("cId")},n.url.loginDot))}}else $(".nextNoTip:checked")[0]&&(t.postUserSetting(3,"live_gift_notice__1"),n.firstGift=!1),a.layer.Off(),r.postDot({m:"live",a:"loginfloatinglayer-buggift",u:"c-"+l.get("cId")},n.url.loginDot)}),$(".layer").on("click",".insufficientToolTip .btn.cancel",function(){a.layer.Off()}),$(".layer").on("click",".insufficientToolTip .btn.sure",function(){r.postDot({m:"live",a:"qcz",u:"m-"+window.momoid,t:"insufficient"},n.url.loginDot)})}),define("view/liveShareToolTip",["handlebars"],function(e){return e.template({1:function(e,t,n,a){return'        <div class="shareIconWrap officialShareWrap">\n            <span class="shareIcon officialShare" title="分享到陌陌动态"></span>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'    <div class="copeUrl">\n        <p class="liveUrl">直播间地址：</p>\n        <div class="urlWrap clearfix">\n            <p class="urlDetail" id="copy_value">'+s((o=null!=(o=t.copyUrl||(null!=e?e.copyUrl:e))?o:r,typeof o===l?o.call(e,{name:"copyUrl",hash:{},data:a}):o))+'</p>\n        </div>\n\n    </div>\n    <div class="sharebuttonbox clearfix">\n        <p class="shareMore">更多分享:</p>\n'+(null!=(i=t["if"].call(e,null!=e?e.isShowOfficialShare:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.noop,data:a}))?i:"")+'        <div class="shareIconWrap weixinShareWrap">\n            <span class="shareIcon weixinShare"></span>\n            <div class="weixinShareToolTip toolTip">\n                <img class="weixinCode" src="" alt=""/>\n                <p class="toolTipTitle">\n                    扫码分享至微信\n                </p>\n            </div>\n        </div>\n\n        <div class="shareIconWrap qqShareWrap">\n            <a target="_blank" class="shareIcon qqShare" href="'+s((o=null!=(o=t.shareUrl||(null!=e?e.shareUrl:e))?o:r,typeof o===l?o.call(e,{name:"shareUrl",hash:{},data:a}):o))+'" title="分享到QQ好友和群组"></a>\n        </div>\n\n    </div>\n'},useData:!0})}),define("module/momolive/LIVE-M-Share",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/V2-V-Layer","module/mylive/MYLIVE-V-Variable","view/liveShareToolTip","lib/collectError","lib/js.cookie","module/V2-Tips"],function(e){var t=e("./LIVE-API"),n=e("./LIVE-M-Variable"),a={};a.layer=e("../V2-V-Layer");var i=e("../mylive/MYLIVE-V-Variable"),o=e("../../view/liveShareToolTip"),r=e("../../lib/collectError"),l=e("../../lib/js.cookie"),s=e("../V2-Tips");$(".liveRoomContainer").on("mouseover",".share .goShare",function(){var e=$(".playerContent").attr("data-title"),t=$(".anchor .anchorMessage").attr("data-roomName"),n="我在陌陌网页版观看["+t+"]的直播，快来和我一起!",a=n,i="";i=0==$(".playerContent").attr("data-rtype")?$(".playerContent").attr("data-rtype")+"-"+$(".playerContent").attr("data-rd"):$(".playerContent").attr("data-momoid");var r="https://web.immomo.com/live/"+i,l=!0;"345348180"===i&&(l=!1);var s=window.location.protocol+"//"+window.location.host+$(".playerContent").attr("data-avatar"),c="http://connect.qq.com/widget/shareqq/index.html?url="+r+"&desc="+a+"&title="+e+"&summary="+n+"&pics="+s+"&flash=&site=&style=202&width=24&height=24&showcount=";$(".shareContainer").html(o({shareUrl:c,copyUrl:r,isShowOfficialShare:l}))}).on("contextmenu",".shareContainer",function(){$(this).addClass("show")}),$("body").on("click",function(){$(".shareContainer").hasClass("show")&&$(".shareContainer").removeClass("show")}),$(".liveRoomContainer").on("click",".officialShare",function(){var e=$(".playerContent").attr("data-momoid");if(window.momoid){if(window.winC.disconnected)return void s.Warning(n.disconnectMsg,3e3);var t="liveOfficialShareToolTip";a.layer.onOff(t),r.postDot({m:"live",a:"share-friendsroom",u:"m-"+window.momoid,r:e},n.url.loginDot)}else a.layer.onOff("notOnline"),r.postDot({m:"live",a:"share-friendsroom",u:"c-"+l.get("cId"),r:e},n.url.loginDot)}),$(".layer").on("click",".officialShareToolTip .btn",function(){if($(this).hasClass("sure")){var e="";if("/mylive"===window.location.pathname){var o=i.box.mylivePlayerContainer.find(".mylivePlayerContent");e=o.attr("data-rd")}else e=$(".playerContent").attr("data-rd");n.status.isShareOfficial||t.postShareOfficial(e,function(e,t){if(e)return void s.Warning(e.em,3e3);var n=t;n.status===!0?$(".officialShareWrap .officialShareToolTip").css("display","block")&&$(".officialShareWrap .officialShareToolTip").css("display","none"):s.Warning(n.desc,3e3)}),a.layer.Off()}else a.layer.Off()}),$(".liveRoomContainer").on("mouseenter",".weixinShareWrap .shareIcon.weixinShare",function(){var e=$(".playerContent").attr("data-rd"),t=window.location.protocol+"//"+window.location.host+"/webmomo/api/scene/room/getroomcode?rd="+e;$(".weixinShareToolTip .weixinCode").attr("src",t),window.momoid?r.postDot({m:"live",a:"share-weixin",u:"m-"+window.momoid,r:e},n.url.loginDot):r.postDot({m:"live",a:"share-weixin",u:"c-"+l.get("cId"),r:e},n.url.loginDot)}),$(".liveRoomContainer").on("click",".qqShareWrap .shareIcon.qqShare",function(){var e=$(".playerContent").attr("data-rd"),t="";t=window.momoid?"m-"+window.momoid:"c-"+l.get("cId"),r.postDot({m:"live",a:"share-qq",u:t,r:e},n.url.loginDot)})}),define("module/momolive/LIVE-M-Profile",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/V2-V-Layer","lib/collectError","module/V2-Tips","module/mylive/MYLIVE-VM-Handlers","view/liveMyAnchorItem","lib/js.cookie","module/V2-M-Variable","module/mylive/MYLIVE-V-Variable"],function(e){var t=e("./LIVE-API"),n=e("./LIVE-M-Variable"),a={};a.layer=e("../V2-V-Layer");var i=e("../../lib/collectError"),o=e("../V2-Tips"),r={};r.Handlers=e("../mylive/MYLIVE-VM-Handlers");var l=e("../../view/liveMyAnchorItem"),s=e("../../lib/js.cookie"),c=e("../V2-M-Variable");$(".live-container .attractionContent").on("click",".rankingList li.rankingItem",function(){var e=$(".operate-content .avatar.oneself").attr("data-id"),i=$(this).attr("data-rl-mid");if(i!=e){var o=$(".playerContent").attr("data-rd"),r=$(".playerContent").attr("data-title"),l=$(".playerContent").attr("data-rtype"),s=$(this).attr("data-token"),c="profile";n.status.isPostProfile||(n.status.isPostProfile=!0,t.getUserProfile({dmid:i,rid:o,token:s,source:c},function(e,t){var s="liveProfile";t.fosAnchor=!1,t.rid=o,t.rtype=l,t.title=r,t.dmid=i,t.isAdmin=n.isAdmin,t.isAdmin&&(t.slience=!0,t.kick=!0),a.layer.onOff(s,t),$(".profileContent").attr("data-token",t.token),t.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):n.fodObj[i]?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA")),n.status.isPostProfile=!1}))}}).on("contextmenu",".rankingList li.rankingItem img",function(){return!1}).on("dragstart",".rankingList li.rankingItem img",function(){return!1}),$(".live-container .attractionContent").on("click",".onlineList li.userItem",function(){var e=$(".operate-content .avatar.oneself").attr("data-id"),i=$(this).attr("data-dmid");if(i!=e){var o=$(".playerContent").attr("data-rd"),r=$(".playerContent").attr("data-title"),l=$(".playerContent").attr("data-rtype"),s=$(this).attr("data-token"),c="profile";n.status.isPostProfile||(n.status.isPostProfile=!0,t.getUserProfile({dmid:i,rid:o,token:s,source:c},function(e,t){var s="liveProfile";t.fosAnchor=!1,t.rtype=l,t.rid=o,t.title=r,t.dmid=i,t.isAdmin=n.isAdmin,t.isAdmin&&(t.slience=!0,t.kick=!0),a.layer.onOff(s,t),$(".profileContent").attr("data-token",t.token),t.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):n.fodObj[i]?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA")),n.status.isPostProfile=!1}))}}).on("contextmenu",".onlineList li.userItem img",function(){return!1}).on("dragstart",".onlineList li.userItem img",function(){return!1}),$(".liveRoom-box .playerHeader").on("click",".anchor .anchorIcon",function(){var e=$(".operate-content .avatar.oneself").attr("data-id"),i=$(".anchorMessage").attr("data-stid");if(i!=e){var o=$(".playerContent").attr("data-rd"),r=$(".playerContent").attr("data-title"),l=$(".playerContent").attr("data-token"),s=$(".playerContent").attr("data-rtype"),c="profile";n.status.isPostProfile||(n.status.isPostProfile=!0,t.getUserProfile({dmid:i,rid:o,token:l,source:c},function(e,t){var l="liveProfile";t.fosAnchor=!0,t.rtype=s,t.rid=o,t.title=r,t.dmid=i,t.isAdmin=n.isAdmin,t.isAdmin&&(t.slience=!0,t.kick=!0),a.layer.onOff(l,t),$(".profileContent").attr("data-token",t.token),t.followed?$(".profileContent .fos").hasClass("noFod")&&($(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):n.btnFodObj[i]?$(".profileContent .fos").hasClass("noFod")&&($(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):$(".profileContent .fos").hasClass("fod")?($(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA")):$(".anchor .focusBtn").hasClass("fod")&&$(".profileContent .fos").html("已关注"),n.status.isPostProfile=!1}))}}).on("contextmenu",".anchor .anchorIcon",function(){return!1}).on("dragstart",".anchor .anchorIcon",function(){return!1}),$(".liveRoom-box .live-chat-box").on("mousedown",".chat-msg-box li.live-chat-msg",function(){var e=!1,i=$(this),o=function(){e=!0},r=function(){if(!e){var l=$(".operate-content .avatar.oneself").attr("data-id"),s=i.attr("data-dmid");if(s!=l){var c=$(".playerContent").attr("data-rd"),u=$(".playerContent").attr("data-title"),d=i.attr("data-token"),m=$(".playerContent").attr("data-rtype"),f="profile";n.status.isPostProfile||(n.status.isPostProfile=!0,t.getUserProfile({dmid:s,rid:c,token:d,source:f},function(e,t){var i="liveProfile";t.fosAnchor=!1,t.rtype=m,t.rid=c,t.title=u,t.dmid=s,t.isAdmin=n.isAdmin,t.isAdmin&&(t.slience=!0,t.kick=!0),a.layer.onOff(i,t),$(".profileContent").attr("data-token",t.token),t.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA")),n.status.isPostProfile=!1}))}}$(this).unbind("mousemove",o),$(this).unbind("mouseup",r)};$(document).bind("mouseup",r),$(document).bind("mousemove",o)}),$(".liveGiftEffectList").on("click",".liveGiftEffectItem .giftEffectWrap",function(){var e=$(".operate-content .avatar.oneself").attr("data-id"),i=$(this).attr("data-dmid");if(i!=e){var o=$(".playerContent").attr("data-rd"),r=$(".playerContent").attr("data-title"),l=$(this).attr("data-token"),s=$(".playerContent").attr("data-rtype"),c="profile";n.status.isPostProfile||(n.status.isPostProfile=!0,t.getUserProfile({dmid:i,rid:o,token:l,source:c},function(e,t){var l="liveProfile";t.fosAnchor=!1,t.rtype=s,t.rid=o,t.title=r,t.dmid=i,t.isAdmin=n.isAdmin,t.isAdmin&&(t.slience=!0,t.kick=!0),a.layer.onOff(l,t),$(".profileContent").attr("data-token",t.token),t.followed?($(".profileContent .fos").hasClass("noFod")&&$(".profileContent .fos").removeClass("noFod").addClass("fod"),$(".profileContent .fos").html("已关注")):($(".profileContent .fos").hasClass("fod")&&$(".profileContent .fos").removeClass("fod").addClass("noFod"),$(".profileContent .fos").html("关注TA")),n.status.isPostProfile=!1}))}}).on("contextmenu",".giftEffectWrap .userImg,.giftEffectWrap .giftImg",function(){return!1}).on("dragstart",".giftEffectWrap .userImg,.giftEffectWrap .giftImg",function(){return!1}),$(".layer").on("click",".profileContent .fos",function(){var e=$(".profileContent").attr("data-fosAnchor"),r=$(".profileContent").attr("data-rid"),c=$(".profileContent").attr("data-dmid"),u="",d=$(".profileContent").attr("data-token");if(window.momoid){if(window.winC.disconnected)return void o.Warning(n.disconnectMsg,3e3);$(this).hasClass("noFod")&&(u="follow",t.postFocusUser({rd:r,dmid:c,type:u,token:d,isAnchor:e},function(i,r){if(i)return void o.Warning(i.em,3e3);$(".profileContent .fos").removeClass("noFod").addClass("fod").html("已关注");var s=c;n.fodObj[s]||(n.fodObj[s]=1),"true"===e&&(n.btnFodObj[s]=1,$(".anchor .focusBtn").removeClass("noFod").addClass("fod").html("已关注"),n.status.myAnchor&&t.getMyAnchor(function(e,t){if(e)return void o.Warning(e.em,3e3);var a=t||[];a[0]&&parseInt(a[0].stid)===window.momoid&&a.splice(0,1);var i="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(l({list:a})),$(".anchor-groupList").append(i)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(l({list:a})),$(".anchor-liveShow-list").append(i)),n.hasLiveAPI&&n.hasLiveAPI.reinitialise(),n.status.showAnchor=!1})),a.layer.Off()}))}else a.layer.onOff("notOnline"),i.postDot({m:"live",a:"loginfloatinglayer-fuser",u:"c-"+s.get("cId")},n.url.loginDot)}).on("contextmenu",".profileContent img",function(){return!1}).on("dragstart",".profileContent img",function(){return!1}),$(".layer").on("click",".profileContent .report",function(){if(window.momoid){if(window.winC.disconnected)return void o.Warning(n.disconnectMsg,3e3);$(".reportReasonList").css("display","block")}else a.layer.onOff("notOnline"),i.postDot({m:"live",a:"loginfloatinglayer-fuser",u:"c-"+s.get("cId")},n.url.loginDot)}),$(".layer").on("click",".profileContent .reportReasonList .reasonItem",function(){$(".reportReasonList").css("display","none");var e=$(this).html(),n=$(".profileContent").attr("data-rid"),i=$(".profileContent").attr("data-title"),r=$(".profileContent").attr("data-dmid");t.postReportUser({content:e,roomid:n,room_name:i,remoteid:r},function(e,t){return e?void o.Warning(e.em,3e3):(a.layer.Off(),void o.Warning("举报成功",1e3))})}),$(".layer").on("click",".profileContent .at",function(){if(window.momoid){if(window.winC.disconnected)return void o.Warning(n.disconnectMsg,3e3);var t=$(".profileContent .profileName").html(),i="@"+t+" ";if(c.currentPage&&"mylive"===c.currentPage){var r=e("../mylive/MYLIVE-V-Variable");r.box.myliveEditBox.find(".editArea").val(i).focus()}else c.currentPage&&"momolive"===c.currentPage&&$(".live-edit-box .editAreaWrap .editArea").val(i).focus();a.layer.Off()}else a.layer.onOff("notOnline")}),$(".layer").on("click",".profileContent .slience",function(e){if(c.currentPage&&"mylive"===c.currentPage)r.Handlers.slienceClicked(e);else if(c.currentPage&&"momolive"===c.currentPage){var n=$(".profileContent").attr("data-dmid"),i=$(".profileContent").attr("data-rid"),l=$(".profileContent").attr("data-rtype"),s=$(".playerContent").attr("data-mtoken"),u=$(".profileContent .profileName").text();t.postSilenceUser({mtoken:s,targetid:n,roomid:i,rtype:l},function(e,t){return e?void o.Warning(e.em,3e3):void(t?o.Warning(u+" 已被禁言",3e3):o.Warning("禁言失败，请稍后再试",3e3))}),a.layer.Off()}}),$(".layer").on("click",".profileContent .kick",function(e){if(c.currentPage&&"mylive"===c.currentPage)r.Handlers.kickClicked(e);else if(c.currentPage&&"momolive"===c.currentPage){var n=$(".profileContent").attr("data-dmid"),i=$(".profileContent").attr("data-rid"),l=$(".profileContent").attr("data-rtype"),s=$(".playerContent").attr("data-mtoken"),u=$(".profileContent .profileName").text();t.postKickUser({mtoken:s,targetid:n,roomid:i,rtype:l},function(e,t){return e?void o.Warning(e.em,3e3):void(t?o.Warning(u+" 已被踢出直播间",3e3):o.Warning("踢人失败，请稍后再试",3e3))}),a.layer.Off()}})}),define("module/momolive/LIVE-VM-Handlers",["require","exports","module","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/momolive/LIVE-VM-Update","view/liveMoreError","view/liveOnlineError","view/liveRoomItem","module/V2-Tips"],function(e){var t=e("./LIVE-API"),n={},a=e("./LIVE-M-Variable"),i=e("./LIVE-V-Variable");n.update=e("./LIVE-VM-Update");var o=e("../../view/liveMoreError"),r=e("../../view/liveOnlineError"),l=e("../../view/liveRoomItem"),s=e("../V2-Tips"),c=function(){a.onlineUserPage=0,a.onlineManagerObj={},a.onlineUserObj={};var e=$(".playerContent").attr("data-momoid"),i=$(".playerContent").attr("data-rd"),o=$(".playerContent").attr("data-rtype"),r=a.onlineUserPage,l=!0;a.status.isGetMoreUserList=!0,t.getOnlineUsers({rd:i,stid:e,rt:o,page:r},function(e,t){a.status.isGetMoreUserList=!1,e||n.update.updateOnlineUserList(t,l)})},u=function(){if(a.onlineListAPI&&a.onlineListAPI.getIsScrollableV()&&a.onlineListAPI.getPercentScrolledY()>=1&&!a.status.isGetMoreUserList)if(a.onlineUserPage+=1,a.onlineListNext){var e=$(".playerContent").attr("data-momoid"),l=$(".playerContent").attr("data-rd"),s=$(".playerContent").attr("data-rtype"),c=a.onlineUserPage,u=!1;a.status.isGetMoreUserList=!0,t.getOnlineUsers({rd:l,stid:e,rt:s,page:c},function(e,t){return a.status.isGetMoreUserList=!1,e?void(2001===e.ec&&($(".layfolkList").empty(),$(".masterList").empty(),i.box.onlineList.parents(".jspPane").before(r({err:e})))):void n.update.updateOnlineUserList(t,u)})}else $(".onlineMore").html(o).css({display:"inline-block"}).fadeIn(200),setTimeout(function(){$(".onlineMore").fadeOut(200,function(){$(this).html("").css("display","none")})},2e3)},d=function(){a.status.isGetMoreLiveList||(a.moreLiveListPage+=1,a.moreLiveNext?(a.status.isGetMoreLiveList=!0,t.getMoreLiveList(a.moreLiveListPage,function(e,t){if(a.status.isGetMoreLiveList=!1,e)return void s.Warning(e.em,3e3);for(var n,i=t,o=[],r=0;r<i.r_infos.length;r++)n=i.r_infos[r].rid,a.roomObj[n]||(a.roomObj[n]=1,o.push(i.r_infos[r]));a.moreLiveNext=i.h_next,a.moreLiveListLive?$(".groupList")[0]&&$(".groupList").append(l({list:o})):$(".liveShow-list")[0]&&$(".liveShow-list").append(l({list:o})),a.hasLiveAPI.reinitialise()})):($(".recommend-live-list-box")[0]&&($(".recommend-live-list-box .more").css("display","none"),a.hasLiveAPI.reinitialise()),$(".roomMore").html(o).css({display:"inline-block"}).fadeIn(200),setTimeout(function(){$(".roomMore").fadeOut(200,function(){$(this).html("").css("display","none")})},2e3)))},m=function(e){return a.status.myAnchor=!a.status.myAnchor,$(".recommend-live-list-box .liveRoomList")[0]&&($(".recommend-live-list-box .liveRoomList").toggleClass("hide"),$(".recommend-live-list-box .more").toggleClass("hide")),$(".recommend-live-list-box .liveAnchorList")[0]&&$(".recommend-live-list-box .liveAnchorList").toggleClass("hide"),$(this).toggleClass("checked"),$(this).hasClass("checked")?($(this).html("返回"),t.getMyAnchor(function(e,t){if(e)return void s.Warning(e.em,3e3);var a=t;n.update.updateMyAnchorList(a)})):($(this).html("我的主播"),a.roomObj={},a.moreLiveNext=!0,a.moreLiveListPage=0,t.getLiveShowList("",!0)),!1},f=function(e){a.status.myAnchor=!1,$(".live-container .roomListContainer .myAnchor").hasClass("checked")&&$(".live-container .roomListContainer .myAnchor").removeClass("checked").html("我的主播"),$(".recommend-live-list-box .liveRoomList")[0]&&($(".recommend-live-list-box .liveRoomList").toggleClass("hide"),$(".recommend-live-list-box .more").toggleClass("hide")),$(".recommend-live-list-box .liveAnchorList")[0]&&$(".recommend-live-list-box .liveAnchorList").toggleClass("hide"),a.roomObj={},a.moreLiveNext=!0,a.moreLiveListPage=0,t.getLiveShowList("",!0)};return{initOnline:c,getMoreOnlineUsers:u,getMoreLiveList:d,myAnchorClick:m,reFreshLiveList:f}}),define("view/livePlayerToolTip",["handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){return'<div id="playerToolTip" class="playerToolTip">\n    <p class="choosePlayer">选择你喜欢的艺人</p>\n    <p class="skipToMore">滑动查看更多</p>\n</div>'},useData:!0})}),define("module/momolive/LIVE-M",["require","exports","module","lib/jquery.mousewheel","lib/jquery.jscrollpane.min","module/momolive/LIVE-M-GetRoomDetail","module/momolive/LIVE-M-Gift","module/momolive/LIVE-M-Share","module/momolive/LIVE-M-Profile","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-M-Variable","module/momolive/LIVE-M-Helper","module/V2-M-Helper","module/chatroom/room-M-Helper","module/V2-V-Layer","module/momolive/LIVE-VM-Helper","module/momolive/LIVE-VM-Handlers","module/momolive/LIVE-VM-Add","module/V2-Tips","lib/collectError","lib/js.cookie","view/liveAnchor","view/livePlayerToolTip","view/liveMyAnchorItem"],function(e){e("lib/jquery.mousewheel"),e("lib/jquery.jscrollpane.min"),e("./LIVE-M-GetRoomDetail"),e("./LIVE-M-Gift"),e("./LIVE-M-Share"),e("./LIVE-M-Profile");var t=e("./LIVE-API"),n=e("./LIVE-M-Variable"),a=e("./LIVE-V-Variable"),i=e("./../V2-M-Variable");i.liveHelper=e("./LIVE-M-Helper"),i.Helper=e("./../V2-M-Helper"),i.roomHelper=e("../chatroom/room-M-Helper");var o={};o.layer=e("../V2-V-Layer");var r={};r.Helper=e("./LIVE-VM-Helper"),r.Handlers=e("./LIVE-VM-Handlers"),r.add=e("./LIVE-VM-Add");var l=e("../V2-Tips"),s=e("../../lib/collectError"),c=e("../../lib/js.cookie"),u=e("../../view/liveAnchor"),d=e("../../view/livePlayerToolTip"),m=e("../../view/liveMyAnchorItem"),f=f||{};return f.init=function(){function e(e){if(window.momoid){if(window.winC.disconnected)return void l.Warning(n.disconnectMsg,3e3);var a=$(".playerContent").attr("data-rd"),r=$(".playerContent").attr("data-sid"),u=$(".anchorMessage").attr("data-stid"),d=$(".anchorMessage").attr("data-mtoken");n.status.isPostBarrage||(n.status.isPostBarrage=!0,t.postTextBarrage({rd:a,sid:r,stid:u,mtoken:d,text:e},function(e,a){if(e)return n.status.isPostBarrage=!1,void(403===e.ec&&e.em?(l.Warning(e.em,3e3),i.Helper.pushState({type:"live"},"","/live"),i.liveHelper.closePlayer(),t.stayRoomTime(),n.status.closePlayer=!0):l.Warning(e.em,3e3));n.status.isPostBarrage=!1;var r=a;if(r.status)$(".editArea").val("");else if("当前余额不足，请去充值"==r.desc){var c="liveInsufficientToolTip",u={momoid:window.momoid,type:"insufficient"};o.layer.onOff(c,u),s.postDot({m:"live",a:"show",u:"m-"+window.momoid,t:"insufficient",f:"barrage"},n.url.loginDot)}}))}else o.layer.onOff("notOnline"),s.postDot({m:"live",a:"loginfloatinglayer-senddanmu",u:"c-"+c.get("cId")},n.url.loginDot)}var f=i.Helper.QueryString(window.location.href,"rf");f&&($(".mm-mac-icon").eq(0).attr("href","/webmomo/api/download/free_download/?c=ios&m="+f),
$(".mm-android-icon").eq(0).attr("href","/webmomo/api/download/free_download/?c=android&m="+f),$(".mm-go-download>a").eq(0).attr("href","/mm_downloads?rf="+f)),window.location.pathname.match(/^\/live\/\d+/)&&!i.liveSource&&(i.liveSource="url"),$(window).resize(function(){window.innerWidth>1400&&window.innerHeight>860&&(n.status.isHasPK?$(".gift-box-wrap").addClass("max-hasPk"):$(".gift-box-wrap").hasClass("max-hasPk")&&$(".gift-box-wrap").removeClass("max-hasPk")),window.innerHeight<640&&(n.status.isHasPK?$(".gift-box-wrap").addClass("min-hasPk"):$(".gift-box-wrap").hasClass("min-hasPk")&&$(".gift-box-wrap").removeClass("min-hasPk")),n.hasLiveAPI&&n.hasLiveAPI.reinitialise(),n.ranksListAPI&&n.ranksListAPI.reinitialise(),n.onlineListAPI&&n.onlineListAPI.reinitialise(),n.chatMsgBoxAPI&&n.chatMsgBoxAPI.reinitialise(),n.pkListAPI&&n.pkListAPI.reinitialise(),n.giftBoxAPI&&n.giftBoxAPI.reinitialise();var e=$(".playerContent"),t=$(".flowplayer"),a=$(document);if(e[0]&&e.hasClass("fullscreen-large")&&(e.css({width:a.width()+"px",height:a.height()+"px"}),e.hasClass("mobile-device"))){var i=t.height()/16*9,o=(a.width()-i)/2;t.css({width:i+"px","margin-left":o+"px"})}}),$(".fansAttraction").lt_tab({minItems:2,slideBoder:$(".fansAttraction-slide-border"),callBack:function(e){var t="";0===e&&(n.ranksListAPI&&n.ranksListAPI.reinitialise(),t=window.momoid?"m-"+window.momoid:"c-"+c.get("cId"),s.postDot({m:"live",a:"ranklist",u:t},n.url.loginDot)),1===e&&(r.Handlers.initOnline(),t=window.momoid?"m-"+window.momoid:"c-"+c.get("cId"),s.postDot({m:"live",a:"onlineuser",u:t},n.url.loginDot))}}),$(".operate-content").off("click",".goToPay"),$(".operate-content").on("click",".goToPay",function(){var e="livePayToolTip",t={momoid:window.momoid,type:"pay"};o.layer.onOff(e,t),s.postDot({m:"live",a:"show",u:"m-"+window.momoid,t:"pay",f:"account"},n.url.loginDot)}),$(".attraction").on("click",".gift-box .payItem",function(){if(window.momoid){var e="livePayToolTip",t={momoid:window.momoid,type:"pay"};o.layer.onOff(e,t),s.postDot({m:"live",a:"show",u:"m-"+window.momoid,t:"pay",f:"payItem"},n.url.loginDot)}else s.postDot({m:"live",a:"noSign",u:"c-"+c.get("cId"),t:"pay",f:"payItem"},n.url.loginDot)}),$(".layer").on("click",".payToolTip .btn.cancel",function(){o.layer.Off()}),$(".layer").on("click",".payToolTip .btn.sure",function(){s.postDot({m:"live",a:"qcz",u:"m-"+window.momoid,t:"pay"},n.url.loginDot)}),$(".operate-content").on("mouseover",".goToLive",function(){$(".iWantTo").css("display","block")}),$(".operate-content").on("mouseout",".iWantTo",function(){$(".iWantTo").css("display","none")}),n.chatMsgBox=$(".live-container .liveRoomContent .chat-msg-box").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)}),n.chatMsgBoxAPI=n.chatMsgBox.data("jsp"),n.account.momoid=window.momoid,$(".anchor").on("click",".focusBtn",function(){if(window.momoid){if(window.winC.disconnected)return void l.Warning(n.disconnectMsg,3e3);var e=$(".playerContent").attr("data-rd"),a=$(".anchorMessage").attr("data-stid"),i="",r=$(".anchorMessage").attr("data-mtoken");$(this).hasClass("noFod")&&(i=1,t.postFocusAnchor({rid:e,stid:a,fst:i,mtoken:r},function(e,i){if(e)return void l.Warning(e.em,3e3);$(".focusBtn").removeClass("noFod").addClass("fod").html("已关注"),n.status.myAnchor&&t.getMyAnchor(function(e,t){if(e)return void l.Warning(e.em,3e3);var a=t||[];a[0]&&parseInt(a[0].stid)===window.momoid&&a.splice(0,1);var i="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(m({list:a})),$(".anchor-groupList").append(i)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(m({list:a})),$(".anchor-liveShow-list").append(i)),n.hasLiveAPI&&n.hasLiveAPI.reinitialise(),n.status.showAnchor=!1});var o=a;n.btnFodObj[o]||(n.btnFodObj[o]=1,n.fodObj[o]=1)}))}else o.layer.onOff("notOnline"),s.postDot({m:"live",a:"loginfloatinglayer-fstar",u:"c-"+c.get("cId")},n.url.loginDot)}),$(".live-chat-box").on("click",".scrollBtn",function(){$(".live-chat-box .scrollBtn").toggleClass("onScroll")}),$(".live-container .liveRoomContent").on("scroll",".chat-msg-box",function(){n.chatMsgBoxAPI.getPercentScrolledY()>=1&&(n.chatMsgBoxAPI.reinitialise(),i.liveHelper.liveNewMsgTips(!1))}),$(".live-edit-box").on("click","#liveNewMsgTips.live-new-msg-tips",function(){n.chatMsgBoxAPI&&n.chatMsgBoxAPI.scrollToBottom(),i.liveHelper.liveNewMsgTips(!1)}),$(".live-edit-box").on("keyup",".editArea",function(e){13===e.which&&$(".live-edit-box .sendBtn").click()}),$(".liveGiftDrawerBox").on("mouseenter",function(){$(".fl-ui .control-bar").addClass("visible")}).on("mouseleave",function(){$(".fl-ui .control-bar").removeClass("visible")}),$(".live-edit-box").on("click",".sendBtn",function(){if(!$(".live-edit-box .editArea").hasClass("sendfast"))if(window.momoid){if(window.winC.disconnected)return void l.Warning(n.disconnectMsg,3e3);var a=$(".editArea").val();if(!a||""===a.trim())return;if(a&&a.length>n.maxTextAreaLength&&(a=a.substring(0,n.maxTextAreaLength),$(".editArea").val(a),l.Warning("最多输入"+n.maxTextAreaLength+"个字哦",2e3)),$(".sendBtn").hasClass("sendBarrage")){if(n.status.isBarrage)if(n.firstBarrage){var i="liveBarrageToolTip",r={};r.price=1,t.getBarragePrice($(".playerContent").attr("data-rd"),function(e,t){return e?void l.Warning(e.em,3e3):(t.price>-1&&(r.price=t.price),void o.layer.onOff(i,r))})}else e(a)}else{var u={text:a};window.room.emit("liveMsg",JSON.stringify(u)),$(".editArea").val("")}}else o.layer.onOff("notOnline"),s.postDot({m:"live",a:"loginfloatinglayer-sendmsg",u:"c-"+c.get("cId")},n.url.loginDot)}),$(".live-edit-box").on("click",".barrageBtn",function(){n.status.isBarrage=!n.status.isBarrage,$(".live-edit-box .barrageBtn .setting-toggle .toggle-btn.barrage-toggle").toggleClass("onBarrage"),$(".sendBtn").toggleClass("sendBarrage"),n.status.isBarrage?$(".live-edit-box .barrageBtn .setting-toggle .toggle-btn.barrage-toggle.onBarrage").attr("src","../img/barrageB.png"):$(".live-edit-box .barrageBtn .setting-toggle .toggle-btn.barrage-toggle").attr("src","../img/barrageBC.png"),$(".live-edit-box .barrageBtn .toggle-btn-top").toggleClass("checked"),$(".live-edit-box .barrageBtn .barrageText").toggleClass("checked")}),$(".layer").on("click",".barrageToolTip .btn",function(){if($(this).hasClass("sure")){$(".nextNoTip:checked")[0]&&(t.postUserSetting(3,"live_danmu_notice__1"),n.firstBarrage=!1),o.layer.Off();var a=$(".editArea").val();e(a)}else $(".nextNoTip:checked")[0]&&(t.postUserSetting(3,"live_gift_notice__1"),n.firstGift=!1),o.layer.Off()}),$(".live-container .attraction").on("click",".pkShow-box .playerItem",function(){if(window.momoid){if(window.winC.disconnected)return void l.Warning(n.disconnectMsg,3e3);$(".pkShow-box .playerItem.sChecked").removeClass("sChecked"),$(this).addClass("sChecked"),n.status.hasGetPlayer=!0;var e=$(this).attr("data-playerIndex"),t=n.playerMsgData[e],i=$(this).attr("data-token"),r=$(this).attr("data-stoken"),d=$(".anchorMessage").attr("data-mtoken");a.box.anchor.html(u({data:t})),$(".anchorMessage").attr("data-mtoken",d),$(".anchorMessage").attr("data-stoken",r),$(".anchorMessage .anchorMsg .starNum.star").html($(this).find(".starVal .starNum").html()),$(".anchorMessage .anchorMsg .starNum.fllow").html($(this).find(".followVal .followNum").html()),$(".playerContent").attr("data-token",i),t.fod?($(".anchorMessage .anchorMsg .focusBtn").hasClass("noFod")&&$(".anchorMessage .anchorMsg .focusBtn").removeClass("noFod").addClass("fod"),$(".anchorMessage .anchorMsg .focusBtn").html("已关注")):n.btnFodObj[t.stid]?($(".anchorMessage .anchorMsg .focusBtn").hasClass("noFod")&&$(".anchorMessage .anchorMsg .focusBtn").removeClass("noFod").addClass("fod"),$(".anchorMessage .anchorMsg .focusBtn").html("已关注")):($(".anchorMessage .anchorMsg .focusBtn").hasClass("fod")&&$(".anchorMessage .anchorMsg .focusBtn").removeClass("fod").addClass("noFod"),$(".anchorMessage .anchorMsg .focusBtn").html("关注"))}else o.layer.onOff("notOnline"),s.postDot({m:"live",a:"loginfloatinglayer-checkPkPlayer",u:"c-"+c.get("cId")},n.url.loginDot)}),$(".attraction").on("mouseenter",".attractionContent .pkShow-box",function(){n.status.firstPkShow&&($(".playerToolTipContainer").html(d),setTimeout(function(){$(".playerToolTipContainer").html(""),n.status.firstPkShow=!1,n.status.pkShowHasScroll=!0},2500))}),$(".layer").on("click",function(){o.layer.Off(),$(".playerContent").hasClass("fullscreen")&&$(".playerContainer .control-bar .fullscreen-btn").trigger("click")}),$(".layer").on("click",".layer-box>div",function(e){e.stopPropagation()}),$(".layer").on("click",".go-live-page",function(){o.layer.Off()}),$(".account-box .noname-login").on("click",function(){("/live"==window.location.pathname||"/live/"==window.location.pathname||window.location.pathname.match(/^\/live\/\d+/))&&(o.layer.onOff("notOnline"),s.postDot({m:"entirety",a:"right-login-live",u:"c-"+c.get("cId")},n.url.loginDot))}),$(".playerContainer").on("click",".closePlayer",function(){i.liveHelper.closePlayer(),t.stayRoomTime(),n.status.closePlayer=!0}),$(".anchor").on("click",".close",function(){i.liveHelper.closePlayer(),t.stayRoomTime(),n.status.closePlayer=!0}),$(".playerContainer").on("click",".player-error-box .retry",r.Helper.reloadPlayer),$(".live-container .attractionContent").on("scroll",".fansAttraction .onlineUsers",r.Handlers.getMoreOnlineUsers),$(".live-container .roomListContainer").on("click",".roomList .more .seeMore",r.Handlers.getMoreLiveList),$(".live-container .roomListContainer").on("click",".liveShow,.otherAnchor",r.Handlers.reFreshLiveList),$(".live-container .roomListContainer").on("click",".myAnchor",r.Handlers.myAnchorClick)},f}),define("module/V2-V",["require","exports","module","module/momolive/LIVE-API","module/chatroom/room-API","module/V2-V-Variable","module/V2-M-Variable","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-V-Face","module/V2-Tips","module/V2-M-Helper","module/chatroom/room-M-Helper","module/momolive/LIVE-M-Helper","module/momolive/LIVE-API","module/mylive/MYLIVE-API","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-Init","module/momolive/LIVE-M-GiftModel","module/momolive/LIVE-VM-Helper","module/mylive/MYLIVE-VM-Helper","view/liveChatBox","view/liveMyAnchorItem","lib/jquery.jsmartdrag","module/chatroom/room-M","module/momolive/LIVE-M"],function(e){var t=e("./momolive/LIVE-API"),n=e("./chatroom/room-API"),a=e("./V2-V-Variable"),i=e("./V2-M-Variable"),o=e("./momolive/LIVE-M-Variable"),r=(e("./momolive/LIVE-V-Variable"),e("./V2-V-Face")),l=(e("./V2-Tips"),{});l.Helper=e("./V2-M-Helper"),l.roomHelper=e("./chatroom/room-M-Helper"),l.liveHelper=e("./momolive/LIVE-M-Helper"),l.liveAPI=e("./momolive/LIVE-API"),l.myliveAPI=e("./mylive/MYLIVE-API");var s=e("./mylive/MYLIVE-M-Variable"),c=e("./mylive/MYLIVE-Init"),u=(e("./momolive/LIVE-M-GiftModel"),{});u.liveHelper=e("./momolive/LIVE-VM-Helper"),u.myliveHelper=e("./mylive/MYLIVE-VM-Helper");var d=(e("../view/liveChatBox"),e("../view/liveMyAnchorItem")),m={};return m.playerMini=function(){if(window.momoid&&$(".playerContainer .flowplayer")[0]&&$f().isPlaying()){$(".playerContent").addClass("miniPlaying").append('<div class="playermask"></div>'),$(".playerContent .flowplayer").addClass("miniPlaying");var t='<span class="closePlayer"><img src="/img/close.png" alt="关闭" /></span>';0===$(".playerContent .closePlayer").length&&$(".playerContent .onWatch").before(t),e("lib/jquery.jsmartdrag"),$(".miniPlaying").jsmartdrag({target:"body"})}},m.init=function(){$(".change-btn").removeClass("current");var f,p=l.Helper.QueryString(window.location.href,"rf"),h="";if("/chat"===window.location.pathname){if("live"===i.prevTab&&o.startLiveTime&&($(".live-page-window .liveRoom-box .offPlaceHolder")[0]||window.momoid||(o.endLiveTime=(new Date).getTime(),t.stayRoomTime(),o.startLiveTime=(new Date).getTime())),"mylive"===i.prevTab&&u.myliveHelper.destory(),$(".notify-box .go-chat-room").addClass("current"),$("body").attr("class","chat-skin"),$(".chat-container").addClass("hide"),$(".live-container").addClass("hidden"),$(".mylive-container").addClass("hide"),$(".chatroom-container").removeClass("hide"),i.currentPage="chatroom",h="","/chat"!==i.lastPostLog&&(h=p?window.location.pathname+"?rf="+p:window.location.pathname,$.get("/data/log"+h),i.lastPostLog="/chat"),i.loginFlag=".from-layer-page",r.init(),i.loadChatRoom){var g=$(".chatroom-container .select-box .selected-item").attr("data-id");g&&n.getRoomList(g)}else{i.loadChatRoom=!0;var v=e("./chatroom/room-M");v.init(),window.momoid&&!i.prevTab&&t.getMyAnchorNum(function(e,t){if(!e){var n=t||[];o.onShowAnchor=0,n[0]&&parseInt(n[0].stid)===window.momoid&&n.splice(0,1);for(var a=0,i=n.length;a<i;a++)n[a].live&&(o.onShowAnchor+=1,o.status.hasAnchorOnLive||(o.anchorOnLive.push(n[a]),o.status.hasAnchorOnLive=!0));$(".operate-content .myAnchor-guide-tip .onShowAnchor").html(o.onShowAnchor),l.liveHelper.myAnchorGuide();var r="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(d({list:n})),$(".anchor-groupList").append(r)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(d({list:n})),$(".anchor-liveShow-list").append(r)),o.hasLiveAPI&&o.hasLiveAPI.reinitialise(),o.status.showAnchor=!1}})}l.roomHelper.initScroll(),m.playerMini(),f=$("<img>").attr({src:i.url.qrcCode+"ref=chat"+(p?"&m="+p:""),alt:"扫描二维码"}),$(".mm-download-container").empty().append(f),i.prevTab="chat"}else if("/live"===window.location.pathname||"/live/"===window.location.pathname||window.location.pathname.match(/^\/live\/\d+/)){"mylive"===i.prevTab&&u.myliveHelper.destory(),$(".live-page-window .liveRoom-box .offPlaceHolder")[0]||i.status.innerLogin||(window.momoid||(o.startLiveTime=(new Date).getTime()),o.status.closePlayer=!1),i.status.innerLogin=!1,$(".notify-box .go-live").addClass("current"),$("body").attr("class","live-skin"),$(".chat-container").addClass("hide"),$(".chatroom-container").addClass("hide"),$(".mylive-container").addClass("hide"),$(".playerContent").removeClass("miniPlaying").removeAttr("style"),$(".playerContent .flowplayer").removeClass("miniPlaying"),$(".playermask")[0]&&$(".playermask").remove(),$(".login-container").hasClass("hide")||($(".login-container").addClass("hide"),$(".page-container").removeClass("hide")),window.momoid&&t.getUserSetting(),$(".live-container").removeClass("hidden"),i.currentPage="momolive";var y=$(".playerContent").attr("data-momoid");if(h="",y&&parseInt(y)>1e4&&(h="/live/"+y),i.lastPostLog!==h){var b=p?h+"?rf="+p:h;$.get("/data/log"+b),i.lastPostLog=h}if(i.loginFlag=".from-layer-page",!i.loadLive){i.loadLive=!0;var x=e("./momolive/LIVE-M");x.init()}u.liveHelper.initRoom(),f=$("<img>").attr({src:i.url.qrcCode+"ref=live"+(p?"&m="+p:""),alt:"扫描二维码"}),$(".mm-download-container").empty().append(f),l.liveAPI.stayLiveTime(),i.prevTab="live"}else if("/mylive"===window.location.pathname){if("live"===i.prevTab&&o.startLiveTime&&($(".live-page-window .liveRoom-box .offPlaceHolder")[0]||window.momoid||(o.endLiveTime=(new Date).getTime(),t.stayRoomTime(),o.startLiveTime=(new Date).getTime())),l.liveHelper.closePlayer(),o.status.closePlayer=!0,$(".notify-box .go-mylive").addClass("current"),$("body").attr("class","live-skin"),$(".chat-container").addClass("hide"),$(".chatroom-container").addClass("hide"),$(".live-container").addClass("hidden"),$(".mylive-container").removeClass("hide"),s.isStar<0)l.myliveAPI.getIfIsStar(function(e,t){if(!e)return t!==!0?(s.isStar=0,void(window.location="/live")):(s.isStar=1,i.loadMylive||(i.loadMylive=!0,c.init()),c.initMylive(),void 0)});else{if(0===s.isStar)return void(window.location="/live");1===s.isStar&&(i.loadMylive||(i.loadMylive=!0,c.init()),c.initMylive())}i.currentPage="mylive",h="","/mylive"!==i.lastPostLog&&(h=p?window.location.pathname+"?rf="+p:window.location.pathname,$.get("/data/log"+h),i.lastPostLog="/mylive"),f=$("<img>").attr({src:i.url.qrcCode+"ref=mylive"+(p?"&m="+p:""),alt:"扫描二维码"}),$(".mm-download-container").empty().append(f),i.prevTab="mylive"}else"live"===i.prevTab&&o.startLiveTime&&($(".live-page-window .liveRoom-box .offPlaceHolder")[0]||window.momoid||(o.endLiveTime=(new Date).getTime(),t.stayRoomTime(),o.startLiveTime=(new Date).getTime())),"mylive"===i.prevTab&&u.myliveHelper.destory(),$(".notify-box .go-msg-bord").addClass("current"),$(".chatroom-container").addClass("hide"),$(".live-container").addClass("hidden"),$(".mylive-container").addClass("hide"),window.momoid?(i.currentPage="chat",h="","/"!==i.lastPostLog&&(h=p?window.location.pathname+"?rf="+p:window.location.pathname,$.get("/data/log"+h),i.lastPostLog="/"),$("body").attr("class","chat-skin"),a.box.chatBox.find(".tab").removeClass("hide"),$(".chat-container").removeClass("hide"),$(".operate-content .notify-box .go-msg-bord-box span").text("").addClass("hide"),r.init(),i.loadChat||(i.loadChat=!0,window.momoid&&!i.prevTab&&t.getMyAnchorNum(function(e,t){if(!e){var n=t||[];o.onShowAnchor=0,n[0]&&parseInt(n[0].stid)===window.momoid&&n.splice(0,1);for(var a=0,i=n.length;a<i;a++)n[a].live&&(o.onShowAnchor+=1,o.status.hasAnchorOnLive||(o.anchorOnLive.push(n[a]),o.status.hasAnchorOnLive=!0));$(".operate-content .myAnchor-guide-tip .onShowAnchor").html(o.onShowAnchor),l.liveHelper.myAnchorGuide();var r="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(d({list:n})),$(".anchor-groupList").append(r)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(d({list:n})),$(".anchor-liveShow-list").append(r)),o.hasLiveAPI&&o.hasLiveAPI.reinitialise(),o.status.showAnchor=!1}})),l.Helper.initialPane(),m.playerMini()):($("body").attr("class","login-skin"),setTimeout(function(){$(".pre-momoid").focus()},10),$(".page-container").addClass("hide"),$(".login-container").removeClass("hide"),l.Helper.getHotLiveList(),i.loginFlag=".from-login-page",a.momoidEle=$(".from-login-page .pre-momoid"),a.passEle=$(".from-login-page .pre-password"),a.submitBtn=$(".from-login-page .login-info .submit"),a.theCodeNav=$(".from-login-page .theCodeNav"),a.theCodeImg=$(".from-login-page .theCodeImg"),a.msgInfo=$(".from-login-page p.msg"),l.liveHelper.closePlayer(),l.liveAPI.stayLiveTime(),o.status.closePlayer=!0,$(".live-page-window .liveRoom-box .offPlaceHolder").remove()),i.prevTab="msg"},m});var context=context||function(){function e(e){o=$.extend({},o,e),$(document).on("click","html",function(){$(".dropdown-context").fadeOut(o.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),o.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(e){e.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var e=$(this).find(".dropdown-context-sub:first"),t=e.width(),n=e.offset().left,a=t+n>window.innerWidth;a&&e.addClass("drop-left")})}function t(e){o=$.extend({},o,e)}function n(e,t,a){var i=a?" dropdown-context-sub":"",r=o.compress?" compressed-context":"",l=$('<ul class="dropdown-menu dropdown-context'+i+r+'" id="dropdown-'+t+'"></ul>'),s=0,c="";for(s;s<e.length;s++){if("undefined"!=typeof e[s].divider)l.append('<li class="divider"></li>');else if("undefined"!=typeof e[s].header)l.append('<li class="nav-header">'+e[s].header+"</li>");else{if("undefined"==typeof e[s].href&&(e[s].href="#"),"undefined"!=typeof e[s].target&&(c=' target="'+e[s].target+'"'),"undefined"!=typeof e[s].subMenu?$sub='<li class="dropdown-submenu"><a tabindex="-1" href="'+e[s].href+'">'+e[s].text+"</a></li>":$sub=$('<li><a tabindex="-1" href="'+e[s].href+'"'+c+">"+e[s].text+"</a></li>"),"undefined"!=typeof e[s].action){var u=new Date,d="event-"+u.getTime()*Math.floor(1e5*Math.random()),m=e[s].action;$sub.find("a").attr("id",d),$("#"+d).addClass("context-event"),$(document).on("click","#"+d,m)}if(l.append($sub),"undefined"!=typeof e[s].subMenu){var f=n(e[s].subMenu,t,!0);l.find("li:last").append(f)}}"function"==typeof o.filter&&o.filter(l.find("li:last"))}return l}function a(e,t){var a=new Date,i=a.getTime(),r=n(t,i);$("body").append(r),$(document).on("contextmenu",e,function(e){if(e.preventDefault(),e.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+i),"boolean"==typeof o.above&&o.above)$dd.addClass("dropdown-context-up").css({top:e.pageY-20-$("#dropdown-"+i).height(),left:e.pageX-13}).fadeIn(o.fadeSpeed);else if("string"==typeof o.above&&"auto"==o.above){$dd.removeClass("dropdown-context-up");var t=$dd.height()+12;e.pageY+t>$("html").height()?$dd.addClass("dropdown-context-up").css({top:e.pageY-20-t,left:e.pageX-13}).fadeIn(o.fadeSpeed):$dd.css({top:e.pageY+10,left:e.pageX-13}).fadeIn(o.fadeSpeed)}})}function i(e){$(document).off("contextmenu",e).off("click",".context-event")}var o={fadeSpeed:100,filter:function(e){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:e,settings:t,attach:a,destroy:i}}();define("lib/jquery.context",[],function(){}),define("module/V2-rightMenu",["require","exports","module","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/V2-watchSet","lib/jquery.context","module/V2-Tips","module/V2-V-Layer","module/V2-VM-Add","module/V2-VM-Talking","view/talkToItem"],function(e){var t=e("./V2-API"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=e("./V2-watchSet");e("../lib/jquery.context");var o=e("./V2-Tips"),r={};r.Layer=e("./V2-V-Layer");var l={};l.Add=e("./V2-VM-Add"),l.Talking=e("./V2-VM-Talking");var s=e("../view/talkToItem"),c={};return c.init=function(){var e,c,u="",d=!1;context.init({fadeSpeed:50,preventDoubleContext:!1}),context.settings({compress:!0});var m=function(){context.attach(".msg-screen-box",[{text:"清屏",action:function(e){e.preventDefault();var t=a.talk_to.typeName,i=a.talk_to[a.talk_to.idType];n.box.msgList.html(""),$("#talking-"+t+"-"+i+" .last-msg").html(""),$("#talking-"+t+"-"+i+" .username").removeClass("have-sign"),a.msgs[t][i]="",a.msgScreenAPI.reinitialise()}}]),context.attach(".msg-screen-box .normal.content.type1",[{text:"引用",action:function(e){e.preventDefault();var t=$(u).text(),a=$(u).parents(".user-msg-box").siblings(".quotename").text(),i=n.ele.textarea.val(),o=i+"『 "+a+":"+t+" 』\n﹉﹉﹉﹉﹉﹉﹉﹉﹉﹉\n";n.ele.textarea.val(o).focus()}}]),context.attach(".msg-screen-box .normal.content.type3",[{text:"语音转文字",action:function(e){e.preventDefault();var n=3;"momoid"==$(".talking-to .avatar").attr("data-idtype")&&(n=4);var a=$(u),i=a.attr("data-guid"),o=a.find("p.audio-text")[0];n&&i&&!o&&(a.append('<p class="audio-text"><i class="fa fa-spinner loadingTransform" aria-hidden="true"></i></p>'),t.audioTranslate(n,i,u))}}])},f=function(){context.attach(".room-screen-box .room-content.normal.type3",[{text:"语音转文字",action:function(e){e.preventDefault();var n=$(c),a=n.attr("data-guid"),i=n.find("p.audio-text")[0];a&&!i&&(n.append('<p class="audio-text"><i class="fa fa-spinner loadingTransform" aria-hidden="true"></i></p>'),t.audioTranslate(5,a,c))}}])},p=function(){d=!0,context.attach(".msg-screen-box .avatar",[{text:"@Ta",action:function(e){e.preventDefault();var t=$(u).attr("data-id"),i=$(u).siblings(".username").text(),o=n.ele.textarea.val();n.ele.textarea.val(o+"@"+i+" "),setTimeout(function(){n.ele.textarea.focus()},100),a.atMsg=!0,a.atList[t]="@"+i}},{text:"查看资料",action:function(e){e.preventDefault();var t=$(u).attr("data-id"),n=$(u).attr("data-idType");r.Layer.onOff(n,t)}},{text:"对话",action:function(e){e.preventDefault();var n=a.talk_to.gid,o={type:"user",id:$(u).attr("data-id"),from:"rmenu"};t.getProfile(o,function(e,t){if(t){var o=$.extend({},t,{typeName:"user",idType:"momoid",fromType:"webHi",fromId:n});i.set(a,"talk_to",o,l.Talking.change)}})}}])},h=function(){context.attach(".tab_content_container .talking-list",[{text:"置顶聊天",action:function(n){var a=$(e).parents(".change-talk-to").clone(),i=$(e).parents(".change-talk-to").attr("id"),o=$(e).parents(".change-talk-to").attr("data-type").slice(0,1),r=$(e).parents(".change-talk-to").attr("data-id");$(e).parents(".change-talk-to").remove(),$(".talking-list").prepend(a),$("#"+i).addClass("forceTop"),t.forceRecentTop(r,o)}},{text:"设置备注",action:function(t){var n=$(e).parents(".change-talk-to").attr("data-id"),i=$(e).parents(".change-talk-to").attr("data-type");if("user"==i){var o=a.profile.user[n].remarkname||a.profile.user[n].name;r.Layer.onOff("rmarkname",{id:n,name:o})}}},{text:"删除消息",action:function(t){$(e).parents(".change-talk-to").find(".del-talkto-item").trigger("mousedown")}}])},g=function(){context.attach(".tab_content_container .talking-list",[{text:"取消置顶",action:function(n){var a=$(e).parents(".change-talk-to").attr("data-type").slice(0,1),i=$(e).parents(".change-talk-to").attr("data-id");$(e).parents(".change-talk-to").removeClass("forceTop"),t.cancelRecentTop(i,a)}},{text:"设置备注",action:function(t){var n=$(e).parents(".change-talk-to").attr("data-type"),i=$(e).parents(".change-talk-to").attr("data-id");if("user"==n){var o=a.profile.user[i].remarkname||a.profile.user[i].name;r.Layer.onOff("rmarkname",{id:i,name:o})}}}])},v=function(){context.attach(".tab_content_container .talking-list",[{text:"取消置顶",action:function(n){var a=$(e).parents(".change-talk-to").attr("data-type").slice(0,1),i=$(e).parents(".change-talk-to").attr("data-id");$(e).parents(".change-talk-to").removeClass("forceTop"),t.cancelRecentTop(i,a)}}])},y=function(){context.attach(".tab_content_container .friend-list",[{text:"置顶聊天",action:function(n){var a=$(e).parents(".change-talk-to").attr("data-type").slice(0,1),i=$(e).parents(".change-talk-to").attr("data-id");t.getProfile({id:i,type:"user"},function(e,t){if(t){var n=s({id:i,type:"user",avatar:t.avatar,name:t.remarkname||t.name});$("#talking-user-"+i).remove(),$(".talking-list").prepend(n),$("#talking-user-"+i).addClass("forceTop"),o.Warning("置顶成功",2e3)}}),t.forceRecentTop(i,a)}},{text:"设置备注",action:function(t){var n=$(e).parents(".change-talk-to").attr("data-id"),i=$(e).parents(".change-talk-to").attr("data-type");if("user"==i){var o=a.profile.user[n].remarkname||a.profile.user[n].name;r.Layer.onOff("rmarkname",{id:n,name:o})}}}])},b=function(){context.attach(".tab_content_container .talking-list",[{text:"置顶聊天",action:function(n){var a=$(e).parents(".change-talk-to").clone(),i=$(e).parents(".change-talk-to").attr("id"),o=$(e).parents(".change-talk-to").attr("data-type").slice(0,1),r=$(e).parents(".change-talk-to").attr("data-id");$(e).parents(".change-talk-to").remove(),$(".talking-list").prepend(a),$("#"+i).addClass("forceTop"),t.forceRecentTop(r,o)}},{text:"删除消息",action:function(t){$(e).parents(".change-talk-to").find(".del-talkto-item").trigger("mousedown")}}])};n.box.msgList.on("contextmenu",function(e){$(".dropdown-menu").remove(),u=e.target,"gid"!=a.talk_to.idType&&d?(context.destroy(".msg-screen-box .avatar"),d=!1):"gid"==a.talk_to.idType&&p(),m()}),n.box.chatBox.on("contextmenu",function(t){$(".dropdown-menu").remove(),e=t.target,context.destroy(".tab_content_container .talking-list"),context.destroy(".tab_content_container .friend-list"),$(e).parents(".tab_content").hasClass("recentBox")?$(e).parents(".change-talk-to").hasClass("forceTop")?"user"==$(e).parents(".change-talk-to").attr("data-type")?g():v():"user"==$(e).parents(".change-talk-to").attr("data-type")?h():b():$(e).parents(".tab_content").hasClass("friend-list-content")&&y()}),$(".room-screen-box .room-msg-list").on("contextmenu",function(e){$(".dropdown-menu").remove(),c=e.target,f()})},c}),define("module/V2-VM-clickEventListenner",["require","exports","module","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/V2-watchSet","module/V2-Tips","module/V2-M-Helper","module/V2-VM-Hi","module/V2-VM-Talking","module/V2-VM-notify","module/V2-V-Layer"],function(e){var t=e("./V2-API"),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=e("./V2-watchSet"),o=e("./V2-Tips"),r=r||{};r.Helper=e("./V2-M-Helper");var l=l||{};l.hi=e("./V2-VM-Hi"),l.Talking=e("./V2-VM-Talking"),l.notify=e("./V2-VM-notify");var s=s||{};s.layer=e("./V2-V-Layer");var c=function(){var e=$(this),c=e.attr("data-id"),u=e.attr("data-type"),d=e.attr("data-storeid");if(!a.talk_to||a.talk_to[a.talk_to.idType]!=c||e.hasClass("at-list-item")){if("user"===u&&c==a.account.momoid)return void o.System("这是你自己。。。","error",3e3);"gid"==a.talk_to.idType&&a.msgs.group[a.talk_to.gid]&&(a.checkMsgRecord[a.talk_to.gid]=a.msgs.group[a.talk_to.gid].length);var m="normal",f=!1;if(e.hasClass("on")&&e.hasClass("search-item")&&(f=!0),$(this).parents("ul").hasClass("hi-list")&&(f="webHi"),e.hasClass("at-list-item")){e.remove(),l.notify.unreadChange("at",!0);var m="at",p=e.attr("data-msgid")}d&&d==c&&(u="store");var h="";"user"==u&&(h=!0);var g={type:u,id:c,hiUpdate:h,from:"cListen"};t.getProfile(g,function(t,o){if(o){var c={};e.hasClass("hi-item")?(c.isHi=!0,l.hi.onOff("off"),$.extend(c,o)):c=o;var d=$.extend({},c,{typeName:u,idType:o.idType||"momoid",from:m,fromType:f,avatar:c.avatar});"at"==m&&(d.msgid=p);var h=a.talk_to.idType;n.ele.textarea.val()&&h&&a.textAreaCache[h]&&(a.textAreaCache[h][a.talk_to[h]]=n.ele.textarea.val()),i.set(a,"talk_to",d,l.Talking.change),s.layer.Off(),r.Helper.hoverOut()}})}};return{Listenner:c}}),define("module/V2-M-msg-filter",["require","exports","module","module/V2-M-Variable","module/V2-M-Helper"],function(e){var t=e("./V2-M-Variable"),n={};return n.Helper=e("./V2-M-Helper"),function(e){switch(!0){case 2==e.style&&e.text&&~e.text.indexOf("TA正在使用陌陌网页版，聊天更方便")==-1:return!1;case 2==e.style&&e.fr==t.account.momoid||9==e.type&&e.fr==t.account.momoid:return!1;case!e.text:return!1;case n.Helper.isRecentMsg(e._id):return!1;default:return!0}}}),define("module/V2-VM-ReceiveMsg",["require","exports","module","module/V2-API","module/V2-storage","module/V2-M-Variable","module/V2-V-Variable","module/V2-timeHelper","module/V2-watchSet","module/V2-M-msg-filter","module/V2-M-MsgFactory","module/V2-M-Update","module/V2-VM-Hi","module/V2-VM-notify","module/V2-VM-At","module/V2-VM-Talking","module/V2-VM-Add"],function(e){var t=e("./V2-API"),n=e("./V2-storage"),a=e("./V2-M-Variable"),i=e("./V2-V-Variable"),o=e("./V2-timeHelper"),r=e("./V2-watchSet"),l=e("./V2-M-msg-filter"),s={};s.msgFactory=e("./V2-M-MsgFactory"),s.update=e("./V2-M-Update");var c={};c.hi=e("./V2-VM-Hi"),c.notify=e("./V2-VM-notify"),c.at=e("./V2-VM-At"),c.Talking=e("./V2-VM-Talking"),c.add=e("./V2-VM-Add");var u=function(e,t){t.idType={user:"momoid",group:"gid",discuss:"did",store:"momoid"}[e];var n=s.msgFactory.msgFactory(t);return t.typeText=n,("group"==e||"discuss"==e)&&t.at&&t.attext&&(8==t._id.length?t._id=t._id+t.to+t.to:t._id=t._id.substr(0,21)+t.to,c.at.checkout(t,!0)),t},d=function(e){1==e.stype?(type="user",e.storeid=e.to):2==e.stype&&t.getProfile({type:"store",id:e.fr},function(e,t){t&&t.owner!=window.momoid})},m=function(e){if(a.noResponseSendMsg[e._id]){if("momoid"==e.idType?($("#"+e._id).addClass("received"),"momoid"==e.idType&&a.msgs.user[e.to]?$.each(a.msgs.user[e.to],function(t,n){e._id==n._id&&(n.hasReceived=1)}):"momoid"==e.idType&&2==e.stype&&a.msgs.store[e.to]&&$.each(a.msgs.store[e.to],function(t,n){e._id==n._id&&(n.hasReceived=1)})):$("#"+e._id).addClass("not-show"),$("#"+e._id).attr("data-timeid",e.t),delete a.noResponseSendMsg[e._id],"momoid"==e.idType&&1!==e.noreply){var t=c.hi.indexOf(e.to);t>-1&&(c.hi.reduce(t,!0),$(".hi-list-content #talking-user-"+e.to).remove(),$(".hi-list-content .hi-list li")[0]||$("#talking-hiMsg-say-hi-block").remove(),$(".chat-box .hi-list-content .back-to-recent").trigger("click"),a.chatBoxAPI.reinitialise())}return!0}return!1},f=function(e,t,i){if(2!==i.style){if(1!==i.noreply){var o=t;"user"!=e&&a.setting.ignoreMsg&&0==a.setting.ignoreMsg[i.to]?(a.unread.local[o]&&(a.unread.ignore[o]=a.unread.local[o],delete a.unread.local[o]),
a.unread.ignore[o]=a.unread.ignore[o]||0,a.unread.ignore[o]+=1):i.fr!=window.momoid&&(a.unread.ignore[o]&&(a.unread.local[o]=a.unread.ignore[o],delete a.unread.ignore[o]),"store"===e?1==i.stype?(a.unread.local[i.fr]=a.unread.local[i.fr]||0,a.unread.local[i.fr]+=1):2==i.stype&&(a.unread.local[o+"store"]=a.unread.local[o+"store"]||0,a.unread.local[o+"store"]+=1):(a.unread.local[o]=a.unread.local[o]||0,a.unread.local[o]+=1))}else a.unread.hi[t]=a.unread.hi[t]||0,a.unread.hi[t]+=1;"user"==e&&a.unread.cache&&(a.unread.cache[i.fr]||(a.unread.cache[i.fr]=[]),a.unread.cache[i.fr].push(i._id))}1==a.setting.history_on_off&&n.set(window.enMomoid+"unread",a.unread)},p=function(e,n){if(a.isWindowFocus||1!=a.setting.notify_on_off||n.fr==a.account.momoid){if("user"!=e&&"store"!=e){var i={type:"user",id:n.fr,from:"re301"};t.getProfile(i,function(t,a){if(a){var i=a.remarkname||a.name,o=n.to;c.add.LastMsg(e,o,n,i)}})}}else{if(n.noreply&&1==n.noreply)return;var o="user"===e||"store"===e?n.fr:n.to;"store"==e&&n.fr!=a.account.momoid&&n.to!=a.account.momoid&&(e="user");var r={type:e,id:o,from:"re154"};t.getProfile(r,function(i,r){if(r){var l=r.remarkname||r.name;if("user"!==e&&"store"!==e){var s={type:"user",id:n.fr,from:"re163"};t.getProfile(s,function(t,i){if(i){var s=i.remarkname||i.name;if(a.setting.ignoreMsg&&0==a.setting.ignoreMsg[o])c.add.LastMsg(e,n.to,n,s);else{l+="-"+s;var u=n.text;2==n.type?(u="[图片]",1==n.snap&&(u="[阅后即焚]")):3==n.type?u="[语音]":5==n.type?u="[表情]":6==n.type&&"file"!=n.aType&&n.aLink&&(u=n.aLink.text),c.notify.message(l,r,u),c.add.LastMsg(e,n.to,n,s)}}})}else{var u=n.text;if(2==n.type?(u="[图片]",1==n.snap&&(u="[阅后即焚]")):3==n.type?u="[语音]":5==n.type&&(u="[表情]"),1==n.stype)var d="/img/store-avatar.jpg",m="user";else 6==n.type&&"file"!=n.aType&&n.aLink&&(u=n.aLink.text);var f={idType:r.idType,name:r.name,remarkname:r.remarkname||"",avatar:d||r.avatar,error:r.error||"",sign:r.sign||"",relation:r.relation||"",typeName:m||r.typeName,momoid:r.momoid};c.notify.message(l,f,u),c.add.LastMsg(e,n.to,n,l)}}})}1==a.setting.voice_on_off&&n.fr!=a.account.momoid&&("user"!==e&&"store"!==e?a.setting.ignoreMsg&&0==a.setting.ignoreMsg[n.to]||a.audio.play():a.audio.play())},h=function(e,n,o){if(n.fr==a.account.momoid){var l={type:"user",id:o,from:"re202"};t.getProfile(l,function(e,t){if(t){var n=$.extend({},t,{typeName:"user",idType:"momoid",fromType:"hi"});r.set(a,"talk_to",n,c.Talking.change)}})}else{s.update.hi(e,o);var u=c.hi.getUnreadNum();u>0?i.ele.hiUnreadNum.text(u).show():i.ele.hiUnreadNum.text(u).hide()}},g=function(e,t){if(t="string"==typeof t?JSON.parse(t):t,l(t)&&("store"==e&&d(t),t=u(e,t),s.update.cacheMsg(t),t.fr!=a.account.momoid&&"store"!=e||!m(t))){var n,i=a.account.momoid,r={user:"momoid",group:"gid",discuss:"did",store:"momoid"};"group"===e||"discuss"===e?(n=t.to,t.at||t.attext||(t._id=t._id.substr(0,21)+t.to)):"store"===e?(n=t.fr,1===t.hasReceived&&(n=t.to)):n=t.fr==i?t.to:t.fr;var c="";if(a.talk_to.typeName===e?c=!0:"user"==a.talk_to.typeName&&"store"==e&&(c=!0),(a.talk_to[r[e]]==n&&a.talk_to.idType===t.idType||a.talk_to[r[e]]==a.account.momoid)&&c){if("user"==e||"store"==e){var g={};g[a.talk_to.momoid]=[t._id],winC.emit("readMsg",JSON.stringify(g))}t.formatTime=o.formate(t.t),s.update.msgs(e,t),a.isWindowFocus||("group"!=e?a.status.currentTalkingUnreadNum++:a.setting.ignoreMsg&&1==a.setting.ignoreMsg[t.to]&&a.status.currentTalkingUnreadNum++)}else f(e,n,t);s.update.unreadNumOnTitle(),1!==t.noreply?s.update.talking(e,n,t.stype,t):h(e,t,n),p(e,t)}},v=function(e,t){var n,i=t.tt,o="";"msg"==t.tp&&(n="user",window.momoid!=t.f&&(i=t.f)),"dmsg"==t.tp&&(n="discuss"),"gmsg"==t.tp&&(n="group"),n&&a.msgs[n]&&a.msgs[n][i]&&$.each(a.msgs[n][i],function(r,l){~l._id.indexOf(t.msgid)&&(l.typeText=e+"撤回了一条消息",l.style=2,l.fr=1e4,l.type=1,l._id.length>t.msgid.length&&(o=t.tt),a.talk_to.typeName==n&&a.talk_to[a.talk_to.idType]==i&&$(".msg-list .msg#"+t.msgid+o)[0]&&($(".msg-list .msg#"+t.msgid+o).attr("class","msg fr sys-auto-res").find(".content.normal").attr("class","content normal type1").removeAttr("style").removeAttr("data-src").html("<p>"+e+"撤回了一条消息</p>"),$(".msg-list .msg#"+t.msgid+o+" p.quotename").remove()),$("#talking-"+n+"-"+i)[0]&&$("#talking-"+n+"-"+i).find(".last-msg p").attr("data-id")==t.msgid+o&&($("#talking-"+n+"-"+i).find(".last-msg p").remove(),$("#talking-"+n+"-"+i).find(".username").removeClass("have-sign")))})},y=function(e){e="string"==typeof e?JSON.parse(e):e;var n;window.momoid==e.f?(n="你",v(n,e)):t.getProfile({type:"user",id:e.f},function(t,a){a&&(n=a.remark?a.remark:a.name,v(n,e))})};return{message:g,withdrawMsg:y}}),define("module/V2-M-Receiver",["require","exports","module","module/V2-VM-ReceiveMsg","module/V2-M-Update"],function(e){var t=e("./V2-VM-ReceiveMsg"),n=e("./V2-M-Update"),a=function(e){t.message("store",e)},i=function(e){t.message("user",e)},o=function(e){t.message("group",e)},r=function(e){t.message("discuss",e)},l=function(e){t.message("update",e)},s=function(e){n.readStatus("updateRead",e)},c=function(e){t.withdrawMsg(e)};return{storeFn:a,userFn:i,groupFn:o,discussFn:r,updateFn:l,updateReadStatusFn:s,withdrawFn:c}}),define("module/V2-V-memberList",["require","exports","module","lib/jquery.tab","module/V2-storage","module/V2-API","module/V2-V-Variable","module/V2-M-Variable","module/V2-M-Helper","view/account","view/relationList","view/talkToItem"],function(e){e("../lib/jquery.tab");var t=(e("./V2-storage"),e("./V2-API")),n=e("./V2-V-Variable"),a=e("./V2-M-Variable"),i=i||{};i.MHelper=e("./V2-M-Helper");var o=(e("../view/account"),e("../view/relationList")),r=(e("../view/talkToItem"),r||{});return r.init=function(){t.getVisited(),$(".mm-downloads-wrap").remove(),t.getRecentTalkTo(20),setTimeout(function(){t.getRecentTalkTo()},1e3),t.getFriendList(),t.getFollowingList(),t.getFansList(),t.getGroupDiscuss(),$(".tab").lt_tab({minItems:3,slideBoder:$(".slide-border"),callBack:function(e){1==e&&(a.ordinaryFriend?0==n.box.friendList.find("li.member-list-item").length&&($(".friend-list-content .loading-holder")[0]&&$(".friend-list-content .loading-holder").remove(),r.renderFriends()):t.getFriendList(function(){$(".friend-list-content .loading-holder")[0]&&$(".friend-list-content .loading-holder").remove(),r.renderFriends()})),2==e&&(Object.keys(a.relation.group).length>0||Object.keys(a.relation.discuss).length>0?0==n.box.groupList.find("li.member-list-item").length&&($(".group-list .loading-holder")[0]&&$(".group-list .loading-holder").remove(),r.renderGroups()):t.getGroupDiscuss(function(){$(".group-list .loading-holder")[0]&&$(".group-list .loading-holder").remove(),r.renderGroups()})),r.initScroll()}}),t.getColorfulEgg(),r.renderFriends=function(){if(a.specialFriend){var e=i.MHelper.timeChunk(a.specialFriend,function(e){var t=o({relationData:e});n.box.friendList.append(t)},10);e()}if(a.ordinaryFriend){var t=i.MHelper.timeChunk(a.ordinaryFriend,function(e){var t=o({relationData:e});n.box.friendList.append(t),r.initScrollTimer()},10);t()}},r.renderGroups=function(){if(Object.keys(a.relation.group).length>0){var e=o({relationData:a.relation.group});n.box.groupList.html(e)}if(Object.keys(a.relation.discuss).length>0){var e=o({relationData:a.relation.discuss});n.box.groupList.append(e)}r.initScroll()},r.initScroll=function(){$(".chat-box .tab_content").jScrollPane({contentWidth:"0px"}).hover(function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9)},function(){$(this).find(".jspVerticalBar").stop().fadeTo("fast",0)})},r.initScrollTimer=function(){if(!e)var e=setTimeout(function(){r.initScroll(),e=null},500)}},r}),define("module/V2-M-msgmixup",["require","exports","module"],function(e){var t={i:"_id",f:"fr",tt:"to",d:"t",tp:"type",cl:"charm",fl:"fortune",stp:"stype",txt:"text",nply:"noreply",sp:"snap",sy:"style",dt:"distance",mt:"msgType",atn:"actions",wE:"webEmo"},n=function(e){if("t"===e.mx){var n={};for(var a in e){var i=e[a],o=t[a]||a;n[o]=i}return n}return e};return n}),define("module/V2-C-Socket",["require","exports","module","module/V2-M-Receiver","module/V2-M-Variable","module/V2-V-Variable","module/V2-Tips","module/V2-V-memberList","module/V2-M-msgmixup"],function(e){var t=e("./V2-M-Receiver"),n=e("./V2-M-Variable"),a=e("./V2-V-Variable"),i=e("./V2-Tips"),o=e("./V2-V-memberList"),r=e("./V2-M-msgmixup"),l=l||{};return l.init=function(){var e=io("",{reconnectionDelay:500,reconnectionDelayMax:1e3,reconnection:!0,reconnectionAttempts:1/0});return e.on("client_ready",function(e){n.offline=!1,o.init()}),e.on("server_error",function(e){e=JSON.parse(e),i.System(e.em,"error",3e3)}),e.on("connect",function(){a.ele.textarea.removeAttr("disabled"),i.clean(),e.emit("client_ready","client_readyV2")}),e.on("reconnect_error",function(e){}),e.on("reconnect_attempt",function(e){}),e.on("error",function(e){"401"===e&&(i.Warning("登录状态已过期，请重新登录",3e3),setTimeout(function(){window.location.pathname="/"},3200))}),e.on("connect_error",function(e){winC.reconnectTimes>=5&&(window.location.pathname="/")}),e.on("disconnect",function(e){winC.disconnectReason=e,n.offline||"chat"!=n.currentPage||i.System('连接已断开，请<a href="javascript:;" class="reconnect_button">重新连接</a>',"error"),a.ele.textarea.attr("disabled","disabled")}),e.on("offline",function(e){n.offline=!0,e=JSON.parse(e),411===e.ec&&setTimeout(function(){window.location.reload()},3e3),e.em&&"chat"==n.currentPage&&i.System(e.em,"error")}),e.on("sendTooFast",function(e){n.sendTooFast=!0,setTimeout(function(){n.sendTooFast=!1},5e3),i.Warning("消息发布过于频繁，请稍后再试:)",3e3)}),e.on("noHi",function(e){i.Warning("陌陌网页版不能主动与陌生人打招呼",3e3)}),e.on("store_message",function(n){try{n=JSON.parse(n)}catch(a){return}n=r(n),1===n.stype,e.emit("msgReceipt",n.t),t.storeFn.apply(t,arguments)}),e.on("user_message",function(n){try{n=JSON.parse(n)}catch(a){return}n=r(n),e.emit("msgReceipt",n.t),t.userFn.apply(t,arguments)}),e.on("msgst_message",function(n){try{n=JSON.parse(n)}catch(a){return}n=r(n),e.emit("msgReceipt",n.t),t.updateReadStatusFn.apply(t,arguments)}),e.on("group_message",function(n){try{n=JSON.parse(n)}catch(a){return}n=r(n),e.emit("msgReceipt",n.t),t.groupFn.apply(t,arguments)}),e.on("discuss_message",function(n){try{n=JSON.parse(n)}catch(a){return}n=r(n),e.emit("msgReceipt",n.t),t.discussFn.apply(t,arguments)}),e.on("updateVersion",t.updateFn),e.on("withdraw_message",function(n){try{n=JSON.parse(n)}catch(a){return}e.emit("msgReceipt",n.d),t.withdrawFn.apply(t,arguments)}),e},l}),define("module/V2-VM-Upload",["require","exports","module","module/V2-M-Variable","module/V2-C-Socket","module/V2-V-Variable","module/V2-Tips","module/V2-VM-fileHelper"],function(e){var t=e("./V2-M-Variable");t.socket=e("./V2-C-Socket").socket;var n=e("./V2-V-Variable"),a=e("./V2-Tips"),i=i||{};i.fileHelper=e("./V2-VM-fileHelper");var o={Images:function(){var e=n.ele.file;if(""!=e.val()){var o=(e.val().replace(/.*\\/,""),/image(?!\/(vnd\.adobe\.photoshop|tif|bmp|gif))/.test(e[0].files[0].type)?"img":"file"),r=e[0].files[0].size;if(r>20971520)return t.status.sendType=1,t.status.sendText=null,void a.Warning("请上传小于20M的图片",3e3);try{var l=new FormData($("#upload-form")[0])}catch(s){var l=new FormData;l.append("file",e[0].files[0])}var c="momoid"===t.talk_to.idType?0:1,u=t.talk_to.idType,d=t.talk_to[u],m=1;switch(u){case"momoid":m=1;break;case"gid":m=2;break;case"did":m=3}l.append("org",m),l.append("remoteid",d),l.append("is_group",c),"img"==o?(i.fileHelper.init("img"),$.ajax({type:"post",url:t.url.uploadImg,data:l,xhr:function(){var e=$.ajaxSettings.xhr();return t.uploadFileXHR=e,e},contentType:!1,processData:!1}).done(function(e){if(e="string"==typeof e?JSON.parse(e):e,200==e.ec&&e.url&&e.guid){t.status.sendType=2,t.status.sendText="http://www.immomo.com/webchat?mode=GUID&filesize=0&file="+e.guid;var n=e.url.replace("L.jpg","S.jpg");i.fileHelper.preLoadImg(n).done(function(){$("#filePreivew").attr("src",n).show(),$(".edit-content").focus(),$("#fileLoading").hide()}).fail(function(){t.status.sendType=1,t.status.sendText=null,a.Warning("上传图片失败,请稍后重试",3e3)})}else 413==e.ec&&(t.status.sendType=1,t.status.sendText=null,a.Warning(e.em,3e3))})):a.Warning("暂时不支持该类型上传",3e3)}},File:function(e){var a=e._id,i=$("#"+a),o=n.ele.file;if(o[0].files[0]){try{var r=new FormData($("#upload-form")[0])}catch(l){var r=new FormData;r.append("file",o[0].files[0])}t.file.self=null}if(t.file.self){var r=new FormData;r.append("file",t.file.self)}$.ajax({type:"post",url:t.url.uploadFile,data:r,contentType:!1,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.addEventListener("loadstart",function(e){},!1),e.upload.addEventListener("progress",function(e){var t=100*(e.loaded/e.total).toFixed(3);i.find(".uploading-bar").css({width:t+"%"})},!1),e.addEventListener("load",function(e){},!1),i.find(".upload-abort").data("XHR",e),e}}).done(function(n){n="string"==typeof n?JSON.parse(n):n,e.downloadUrl=n.url,e.actions="[下载|url|"+n.url+"]",t.socket.emit("user_message",JSON.stringify(e)),i.find(".upload-abort").data("XHR",null).remove(),i.find(".uploading-bar-wrap").after('<a href="'+n.url+'" class="uploaded-down">打开或保存<i>&gt;</i></a>').remove()}).fail(function(){e.downloadUrl="error",i.find(".upload-abort").data("XHR",null).remove(),i.find(".uploading-bar-wrap").after('<p class="uploaded-error">上传失败</p>').remove()})}};return o}),define("module/V2-VM-SendMsg",["require","exports","module","module/V2-M-Variable","module/V2-V-Variable","module/V2-M-Update","module/V2-VM-Upload","module/V2-VM-fileHelper","module/V2-VM-Add"],function(e){var t=e("./V2-M-Variable"),n=e("./V2-V-Variable"),a=a||{};a.update=e("./V2-M-Update");var i=i||{};i.upload=e("./V2-VM-Upload"),i.fileHelper=e("./V2-VM-fileHelper"),i.add=e("./V2-VM-Add");var o=function(){if(!t.talk_to||t.sendTooFast)return t.eggSendId=null,void(t.status.sendText=null);var e=t.talk_to.idType,o=t.talk_to[e],r=t.talk_to.typeName;if($("#talking-user-"+o).get(0)){var l=$("#talking-user-"+o).attr("data-storeid");l&&(r="store")}var s=r+"_message",c="web"+String(Math.random()).substr(-5)+Date.now()+o,u={};if(t.file.name)u=i.fileHelper.forgeFileMsg(t.file.name),u._id=c;else if(t.eggSendId){var d=t.eggSendId;t.sendedColorEgg[d][e].push(o),u={text:t.corlorfulEgg[d].sendText,to:o,fr:t.account.momoid,type:t.corlorfulEgg[d].type,idType:e,_id:c,rt:t.corlorfulEgg[d].Suffix,bf:t.corlorfulEgg[d].Pre},winC.emit(s,JSON.stringify(u))}else{var m=t.status.sendText||n.ele.textarea.val(),f=""===n.ele.textarea.val().replace(/\s+/g,""),p=t.status.sendType,h=t.status.bigFace,g=t.account.momoid,v=[];if(f&&1==p)return!1;if(1===p&&t.atMsg&&m&&m.indexOf("@")>-1&&Object.keys(t.atList).length>0&&($.each(t.atList,function(e,t){m.indexOf(t)>-1&&~v.indexOf(e)&&v.push(e)}),t.atMsg=!1,t.atList={}),v&&v.length>0)u={text:m,to:o,fr:g,type:p,idType:e,_id:c,at:v,attext:"[有人@你]"};else if("momoid"==e&&"webHi"==n.box.talk_to.attr("data-hi")){var y=n.box.talk_to.attr("data-fromid");u={text:m,to:o,fr:g,type:p,idType:e,_id:c,noreply:1,fromId:y}}else"store"==r?u=l?{text:m,to:o,fr:l,idType:e,type:p,_id:c,stype:2}:{text:m,to:o,fr:g,idType:e,type:p,_id:c,stype:1}:5==p?t.status.bfHasTail?u={text:m,to:o,fr:g,type:p,idType:e,_id:c,bf:h,rt:"「限时表情」来自陌陌网页版"}:(h&&h.indexOf("/et/custom/")>-1&&(m.bd="webmomocustom",m.be="custom"),u={text:m,to:o,fr:g,type:p,idType:e,_id:c,bf:h}):u={text:m,to:o,fr:g,type:p,idType:e,_id:c};$(".msg-screen-box .msg-list .msg.to")[0]||(u.wnotice="webmomo"),winC.emit(s,JSON.stringify(u))}"store"==r&&l&&(r="user"),5==p&&h&&!t.status.bfHasTail&&h.indexOf("/et/custom/")>-1&&(u.custom=!0),a.update.talking(r,o,"",u),a.update.msgs(r,u,!0),t.noResponseSendMsg[u._id]=u._id,t.file.name||"momoid"!=e||setTimeout(function(){t.noResponseSendMsg[c]&&$("#"+c).attr("class","msg to unreceived")},2e4),t.file.name&&i.upload.File(u),t.status.sendText&&t.status.sendType||t.file.name?i.fileHelper.Remove():n.ele.textarea.val(""),t.status.sendText&&t.status.sendType&&(t.status.sendText=null),t.eggSendId&&(t.eggSendId=null)};return{send:o}}),define("module/V2-VM-Settings",["require","exports","module","module/V2-API","module/V2-storage","module/V2-M-Variable","module/V2-V-Variable","module/V2-M-Helper","module/V2-V-Layer"],function(e){var t=(e("./V2-API"),e("./V2-storage"),e("./V2-M-Variable")),n=e("./V2-V-Variable"),a={};a.Helper=e("./V2-M-Helper");var i={};i.layer=e("./V2-V-Layer");var o={init:function(){var e={};$.each(t.setting,function(t,n){e[t]=n}),i.layer.onOff("setting",e),n.box.overLayer.toggleClass("on")},logout:function(){$.get("/logout",function(){var e=a.Helper.QueryString(window.location.href,"rf"),t=window.location.protocol+"//"+window.location.hostname+"/";e&&(t=t+"?rf="+e),window.location.href=t})}};return o}),define("module/V2-M",["require","exports","module","module/V2-API","module/mylive/MYLIVE-API","module/V2-storage","module/V2-V-Variable","module/V2-M-Variable","lib/collectError","module/V2-Tips","module/V2-M-onConfirm","module/V2-C-ClientDownload","module/V2-C-IsClient","module/V2-V-Layer","module/V2-V","module/V2-V-Face","module/V2-M-Helper","module/V2-M-Search","module/V2-M-Update","module/V2-M-Audio","module/V2-rightMenu","module/chatroom/room-M-Helper","module/momolive/LIVE-M-Helper","module/V2-VM-clickEventListenner","module/V2-VM-SendMsg","module/V2-VM-fileHelper","module/V2-VM-Upload","module/V2-VM-Settings","module/V2-VM-ShortCutKey","module/V2-VM-Talking","module/V2-VM-Helper","module/momolive/LIVE-VM-Helper","module/mylive/MYLIVE-M-Variable"],function(e){var t=e("./V2-API"),n=e("./mylive/MYLIVE-API"),a=e("./V2-storage"),i=e("./V2-V-Variable"),o=e("./V2-M-Variable"),r=e("../lib/collectError"),l=e("./V2-Tips"),s=e("./V2-M-onConfirm"),c=e("./V2-C-ClientDownload"),u=e("./V2-C-IsClient").isClient,d=d||{};d.layer=e("./V2-V-Layer");var m=e("./V2-V"),f=f||{};f.emotion=e("./V2-V-Face"),f.Helper=e("./V2-M-Helper"),f.search=e("./V2-M-Search"),f.update=e("./V2-M-Update"),f.audio=e("./V2-M-Audio"),f.rightMenu=e("./V2-rightMenu"),f.roomHelper=e("./chatroom/room-M-Helper"),f.liveHelper=e("./momolive/LIVE-M-Helper");var p=p||{};p.talkToClickListenner=e("./V2-VM-clickEventListenner"),p.send=e("./V2-VM-SendMsg"),p.fileHelper=e("./V2-VM-fileHelper"),p.upload=e("./V2-VM-Upload"),p.settings=e("./V2-VM-Settings"),p.shortcutKey=e("./V2-VM-ShortCutKey"),p.Talking=e("./V2-VM-Talking"),p.Helper=e("./V2-VM-Helper"),p.LiveHelper=e("./momolive/LIVE-VM-Helper");var h=e("./mylive/MYLIVE-M-Variable"),g=function(){window.location.pathname.match(/^\/live\/\d+/)&&(o.liveSource="url"),m.init(),f.Helper.initialPane(),$(window).on("beforeunload",s),$(".chat-box, .layer, .emotions-wrap").on("click",".tab_header a",function(e){e.preventDefault()});var e=f.Helper.QueryString(window.location.href,"rf");$(".goDownloads>a").attr("href",e?"/downloads?rf="+e:""),$(window).focus(function(){o.isWindowFocus=!0,o.status.currentTalkingUnreadNum=0,f.update.unreadNumOnTitle()}).blur(function(){o.isWindowFocus=!1}),$(window).resize(function(){o.msgScreenAPI.reinitialise()}),$(window).on("popstate",function(){history.state&&m.init()}),$(".chat-box").on("mousedown","li.change-talk-to .avatar",function(e){var t=$(this).attr("data-id"),n=$(this).attr("data-type")||$(this).attr("data-idType");d.layer.onOff(n,t),e.stopPropagation()}).on("contextmenu","li.change-talk-to .avatar",function(e){return!1}).on("dragstart","li.change-talk-to .avatar",function(e){return!1}),$(".chat-box").on("mousedown","div.notifyNav",function(e){if(d.layer.onOff("notifyNav"),$(".tab_content_container").height()&&$(".member-list-item.notifyNav").height()){var n=$(".tab_content_container").height()+$(".member-list-item.notifyNav").height()+10;$(".tab_content_container").css("height",n)}$(".chat-box div.notifyNav").remove(),o.notifySended&&t.postNotify(),e.stopPropagation()}),$(".page-window").on("mousedown","li.change-talk-to",function(e){c.closeDownload(),p.talkToClickListenner.Listenner.call(this,e)}),$("body:not(body *)").on("click",function(e){f.Helper.hoverOut(e)}),i.box.file.on("click",function(){i.ele.file.click()}),i.box.file.on("click"," > *",function(e){e.stopPropagation()}),i.box.file.on("click",".file-cancel",function(e){o.cancelListenner=!0,p.fileHelper.Remove(),e.stopPropagation()}),i.box.overLayer.on("click",d.layer.Off),i.box.overLayer.on("click",".layer-content",function(e){e.stopPropagation()}),i.box.overLayer.on("click",".member-list .photo-item",function(){p.Talking.talkToPanel($(this))}).on("contextmenu",".photo-item img,.main-info-content img",function(){return!1}).on("dragstart",".photo-item img,.main-info-content img",function(){return!1}),$(".msg-screen-box").on("click",".avatar",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-idType");if("gid"==o.talk_to.idType){var n="group_"+o.talk_to.gid;d.layer.onOff(t,e,n)}else if("did"==o.talk_to.idType){var a="discuss_"+o.talk_to.did;d.layer.onOff(t,e,a)}}),$(".talking-to").on("click",".avatar",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-idType"),n=$(this).attr("data-type");"store"==n?d.layer.onOff("store",e):d.layer.onOff(t,e)}).on("contextmenu",".avatar",function(e){return!1}).on("dragstart",".avatar",function(e){return!1}),i.box.account.on("click",".oneself-profile",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-idType");d.layer.onOff(t,e)}),i.ele.send.on("click",function(){i.ele.send.find(".icon-send").addClass("on"),setTimeout(function(){i.ele.send.find(".icon-send").removeClass("on")},100),p.send.send()}),i.box.account.on("click",".btn-ignore-unread",f.Helper.clearUnread),i.box.account.on("click",".btn-push-feedback",function(){i.box.overLayer.find(".feedback-btn").removeAttr("disabled"),d.layer.onOff("feedback")}),i.box.overLayer.on("click",".feedback-btn",function(){var e=i.box.overLayer.find(".feedback-area").val();$(this).attr("disabled","disabled"),t.pushFeedBack(e)}),i.box.talk_to.on("click",".toggle-btn-check",function(){var e,n=$(this),a=i.box.talk_to.find(".avatar").attr("data-idtype"),o=i.box.talk_to.find(".avatar").attr("data-id"),r={gid:"group",did:"discuss"};"checked"==n.attr("checked")?(n.removeAttr("checked"),$("#talking-"+r[a]+"-"+o).find(".member-item-content").removeClass("ignore"),e=1):(n.attr("checked","checked"),$("#talking-"+r[a]+"-"+o).find(".member-item-content").addClass("ignore"),e=0),t.setGroupDisturbs(a,o,e)});var g=navigator.userAgent;g&&g.toLowerCase&&(g=g.toLowerCase()),g&&g.indexOf("msie 8.0")<0&&g.indexOf("msie 9.0")<0&&$(".edit-btn-box .edit-extra-options .icon-file.left").removeClass("compatible"),i.box.msgList.on("click",".type2 .small-img",function(){var e=$(this).attr("src").replace("S.jpg","L.jpg");d.layer.onOff("bigImg",e)}),i.ele.searchBtn.on("mouseenter",function(){i.ele.search.hasClass("on")?f.search.init():(i.ele.search.addClass("on"),i.ele.search.focus())}),$(document).on("keydown",p.shortcutKey.search),i.ele.search.on("input propertychange",f.search.init).on("focusin",f.search.focusin).on("focusout",f.search.focusout),i.box.searchList.on("mouseenter","li.search-item",f.search.hover),i.box.edit.on("click","#newMsgTips",function(){o.msgScreenAPI.reinitialise(),o.msgScreenAPI.scrollToBottom(),p.Helper.newMsgTips(!1)}),i.box.msgListWrapper.on("scroll",function(){if(o.msgScreenAPI.getIsScrollableV()&&$(this).find(".jspVerticalBar").stop().fadeTo("fast",.9),1==o.msgScreenAPI.getPercentScrolledY())o.msgScreenAPI.reinitialise(),p.Helper.newMsgTips(!1);else if(o.msgScreenAPI.getIsScrollableV()&&0==o.msgScreenAPI.getPercentScrolledY()&&!o.status.loadHistoryMsgs){var e=i.box.msgList.find(".msg").eq(0).attr("data-index");p.Helper.loadingHistoryMsgs(e)}}),i.box.msgListWrapper.on("click",".content.normal.type3",function(){var e=$(this).attr("data-src"),t=$(this).attr("data-id");f.audio.init(e,t,$(this))}),i.box.msgListWrapper.on("click",".content.normal.type6 .go-live-room",function(){var e=$(this).attr("data-val");$(".offPlaceHolder").remove(),g&&(g.indexOf("msie 8.0")>-1||g.indexOf("msie 9.0")>-1)?window.location.href="/live":(o.liveSource="msg_share",f.Helper.pushState({type:"live"},"",e)),m.init()}),$(".msg-screen-box, .room-screen-box").on("click",".normal.type5.custom",function(e){$(this).find("img").attr("src")&&$(this).find("img").attr("src").indexOf("/et/custom/")>-1&&($(".collect-content").addClass("hide"),$(this).find(".collect-content").removeClass("hide"),e.stopPropagation()),$(".dropdown-menu").css("display","none")}),$(".msg-screen-box, .room-screen-box").on("contextmenu",".normal.type5.custom",function(e){3==e.which&&($(this).find("img").attr("src")&&$(this).find("img").attr("src").indexOf("/et/custom/")>-1&&($(".collect-content").addClass("hide"),$(this).find(".collect-content").removeClass("hide"),e.stopPropagation()),$(".dropdown-menu").css("display","none"))}),$(".msg-screen-box, .room-screen-box").on("click",".normal .collect-option",function(e){$(".collect-content").addClass("hide");var n=$(this).parent().siblings("img").attr("src");if(n&&n.indexOf("/et/custom/")>-1){var a=n.slice(23,n.length-4);t.collectEmotion(a)}e.stopPropagation()}),i.box.recentBox.on("mousedown",".del-talkto-item",function(e){e.stopPropagation();var n=$(this).parents(".member-list-item"),r=n.find(".unread-msg-num")[0]?parseInt($(this).siblings(".unread-msg-num").text()):0,l=n.attr("data-id"),s=n.attr("data-type")||"";n.next("li.change-talk-to")[0]?n.next("li.change-talk-to").mousedown():i.box.talkingList.children().length>0&&i.box.talkingList.children(".member-list-item:first-child").mousedown(),n.remove(),s&&l&&(t.recentlyUpdate(),r&&(delete o.unread.local[l],delete o.unread.ignore[l],1==o.setting.history_on_off&&a.set(window.enMomoid+"unread",o.unread),f.update.unreadNumOnTitle()),o.msgs&&o.msgs[s]&&o.msgs[s][l]&&(delete o.msgs[s][l],1==o.setting.history_on_off&&a.set(window.enMomoid+"msgs",o.msgs))),o.chatBoxAPI&&o.chatBoxAPI.reinitialise()}),$(".hi-list-content").on("mousedown",".del-talkto-item",function(e){e.stopPropagation(),$(this).parents(".member-list-item").remove(),$(".hi-list-content .hi-list li")[0]||$("#talking-hiMsg-say-hi-block").remove(),$(".chat-box .hi-list-content .back-to-recent").trigger("click"),o.chatBoxAPI.reinitialise()}),$(".store-list-content").on("mousedown",".del-talkto-item",function(e){e.stopPropagation(),$(this).parents(".member-list-item").remove(),$(".store-list-content .store-list li")[0]||$("#talking-storeMsg-store-msg-block").remove(),$(".chat-box .store-list-content .back-to-recent").trigger("click"),o.chatBoxAPI.reinitialise()}),t.getPersonalSetting(function(){a.has(window.enMomoid+"msgs")&&(o.msgs=a.get(window.enMomoid+"msgs")),o.setting&&o.setting.history_on_off&&1==o.setting.history_on_off&&a.has(window.enMomoid+"unread")&&(o.unread=a.get(window.enMomoid+"unread"))}),h.isStar<0?n.getIfIsStar(function(e,t){e||(t===!0?(h.isStar=1,$(".go-mylive-box").removeClass("hide")):(h.isStar=0,$(".go-mylive-box").addClass("hide")))}):0===h.isStar?$(".go-mylive-box").addClass("hide"):1===h.isStar&&$(".go-mylive-box").removeClass("hide"),i.box.overLayer.on("click",".voice",function(){0==o.setting.voice_on_off?(o.setting.voice_on_off=1,t.setPersonalSetting("voice_on_off",1)):(o.setting.voice_on_off=0,t.setPersonalSetting("voice_on_off",0))}),i.box.overLayer.on("click",".notify",function(){0==o.setting.notify_on_off?(o.setting.notify_on_off=1,t.setPersonalSetting("notify_on_off",1)):(o.setting.notify_on_off=0,t.setPersonalSetting("notify_on_off",0))}),i.box.overLayer.on("click",".history",function(){0==o.setting.history_on_off?(o.setting.history_on_off=1,t.setPersonalSetting("history_on_off",1),r.postDot({m:"settings",a:"set-history-on",u:"m-"+window.momoid},o.url.loginDot)):(o.setting.history_on_off=0,t.setPersonalSetting("history_on_off",0),r.postDot({m:"settings",a:"set-history-off",u:"m-"+window.momoid},o.url.loginDot))}),i.box.overLayer.on("click",".btn-clear-history",function(){p.Helper.clearHistory(),r.postDot({m:"settings",a:"clear-history",u:"m-"+window.momoid},o.url.loginDot)}),i.box.account.on("click",".set-notify",function(){p.settings.init(),r.postDot({m:"entirety",a:"right-headimage",u:"m-"+window.momoid},o.url.loginDot)}),i.ele.textarea.on("focusin",function(){o.status.isTextareaFocus=!0}).on("focusout",function(){o.status.isTextareaFocus=!1}).on("keydown",p.shortcutKey.textareaKeyDown).on("keyup",function(e){if(i.ele.textarea.val().length>o.maxtextAreaLength){var t=i.ele.textarea.val().substring(0,o.maxtextAreaLength);return i.ele.textarea.val(t),l.Warning("最多输入"+o.maxtextAreaLength+"个字哦",2e3),!1}i.ele.textarea.scrollTop(9999)}).on("input propertychange",p.shortcutKey.textareaKeyUp).on("paste",p.fileHelper.paste),i.ele.file.on("change",p.upload.Images),i.box.account.on("click",".exit-btn",p.settings.logout),i.box.overLayer.on("click",".talk-to-now",function(){p.Talking.talkToPanel($(this))}),f.rightMenu.init(),i.box.talkingBox.on("click",".check-new-msg",function(){var e=parseInt($(".check-new-msg").text());if(e){var t=o.msgs.group[o.talk_to.gid].length;if(e<o.maxCacheMsg&&t<o.maxCacheMsg){var n=t-e,a=$(".msg-screen-box li.msg")[n];$(".new-cacheMsg-tips").remove(),$(a).before('<li class="msg-time-line new-cacheMsg-tips"><p class="line"><span class="time">以下为新消息</span></p></li>'),o.msgScreenAPI.scrollToElement($(".new-cacheMsg-tips"),!0),$(".check-new-msg").remove()}else o.msgScreenAPI.scrollToY(0,!1),o.fetchAllMsgs=!0}});var v=function(){window.winC.disconnected&&setTimeout(function(){window.winC.connect(),"number"==typeof window.winC.reconnectTimes?window.winC.reconnectTimes++:window.winC.reconnectTimes=0,v()},1e3)};$("body").on("click","a.reconnect_button",function(e){l.clean(),l.System("正在连接...","error"),window.winC.connect(),v()}),i.ele.changePageBtn.on("click",function(){if(!$(this).hasClass("current"))if(i.ele.changePageBtn.removeClass("current"),$(this).hasClass("go-msg-bord"))g&&(g.indexOf("msie 8.0")>-1||g.indexOf("msie 9.0")>-1)?window.location.href="/":f.Helper.pushState({type:""},"","/"),m.init();else if($(this).hasClass("go-chat-room"))g&&(g.indexOf("msie 8.0")>-1||g.indexOf("msie 9.0")>-1)?window.location.href="/chat":f.Helper.pushState({type:"chat"},"","/chat"),m.init();else if($(this).hasClass("go-live")){var e="/live",t=$(".playerContent").attr("data-rtype"),n=$(".playerContent").attr("data-momoid"),a=$(".playerContent").attr("data-rd");t&&0===parseInt(t)&&a?e="/live/0-"+a:n&&parseInt(n)>1e4&&(e="/live/"+n),g&&(g.indexOf("msie 8.0")>-1||g.indexOf("msie 9.0")>-1)?window.location.href="/live":f.Helper.pushState({type:"live"},"",e),m.init()}else $(this).hasClass("go-mylive")&&(g&&(g.indexOf("msie 8.0")>-1||g.indexOf("msie 9.0")>-1)?window.location.href="/mylive":f.Helper.pushState({type:"mylive"},"","/mylive"),m.init())}),$(".operate-content .myAnchor-guide-tip").on("click",function(){$(".operate-content .go-live").click()}),$(".operate-content .myAnchor-guide-tip").on("click",".fa-times",function(e){e.stopPropagation(),$(".operate-content .myAnchor-guide-tip").addClass("hide")}),i.box.account.on("click",".avatar.oneself",function(e){$(".account-info-box").toggleClass("hide");var t=window.location.pathname;t=t.indexOf("/live")!=-1?"live":t.indexOf("/chat")!=-1?"chat":"",r.postDot({m:"entirety",a:"right-headimage-"+t,u:"m-"+window.momoid},o.url.loginDot),e.stopPropagation()}),i.box.account.on("click",".account-pro",function(e){e.stopPropagation()}),$(".chat-box").on("click",".talking-list .checkout-hi, .talking-list .checkout-storeMsg",function(){$(".chat-box .tab_content").addClass("hide"),$(this).hasClass("checkout-hi")?$(".tab_content.hi-list-content").removeClass("hide").css("display","block"):$(this).hasClass("checkout-storeMsg")&&$(".tab_content.store-list-content").removeClass("hide").css("display","block"),o.chatBoxAPI.reinitialise()}),$(".chat-box").on("click",".hi-list-content .back-to-recent, .store-list-content .back-to-recent",function(){$(".chat-box .close-talking-List").click(),$(".tab_content").removeClass("hide"),$(this).parents(".tab_content").hasClass("hi-list-content")?($(".tab_content.hi-list-content").addClass("hide").css("display","none"),i.box.hiList.find(".change-talk-to").removeClass("select")):$(this).parents(".tab_content").hasClass("store-list-content")&&($(".tab_content.store-list-content").addClass("hide").css("display","none"),
$(".store-list").find(".change-talk-to").removeClass("select")),o.chatBoxAPI.reinitialise()}),$(".edit-box .emotions-wrap .tab_header .emotion-nav").on("click",".bf",function(){var e={app:"webmomo",momoid:window.momoid};$(this).hasClass("bf-1")?(e.message="action=emotion-show-xzhtx",r.postDot(e,o.url.emotionDot)):$(this).hasClass("bf-2")&&(e.message="action=emotion-show-xsbq",r.postDot(e,o.url.emotionDot))}),$(".edit-box .emotions-wrap .emotions-content").on("click",".tab_content .bf-list-1 li",function(){var e={app:"webmomo",momoid:window.momoid,message:"action=emotion-click-xzhtx"};r.postDot(e,o.url.emotionDot)}),$(".edit-box .emotions-wrap .emotions-content").on("click",".tab_content .bf-list-2 li",function(){var e={app:"webmomo",momoid:window.momoid,message:"action=emotion-click-xsbq"};r.postDot(e,o.url.emotionDot)}),$(".tab_group_head").on("click",function(){var e=$(this),t=e.parent(".tab_group_box").find(".friend-group-list"),n=$(".tab_content .friend-group-list"),a=$(".tab_content .tab_group_head");e.hasClass("on")?(e.removeClass("on"),t.addClass("hide")):(a.removeClass("on"),n.addClass("hide"),e.addClass("on"),t.removeClass("hide")),f.Helper.initialPane()});var y=function(e,n){t.setRmarkName(e,n,function(){n=n.trim().length>0?n:o.profile.user[e].name,$('.member-list-item[data-type="user"][data-id="'+e+'"] .username').text(n),o.profile.user[e].remarkname=n,"momoid"==o.talk_to.idType&&o.talk_to.momoid==e&&$(".talking-to .username").text(n),d.layer.Off()})};if(i.box.overLayer.on("click",".setting-rmarkname .submit-rmname",function(){var e=$(this).attr("data-id"),t=$(".remark-value").val();y(e,t)}),i.box.overLayer.on("keyup",".setting-rmarkname .remark-value",function(e){if(13==e.which){var t=$(".setting-rmarkname .submit-rmname").attr("data-id"),n=$(".remark-value").val();y(t,n)}}),i.box.overLayer.on("click",".setting-rmarkname .cancel",function(){d.layer.Off()}),u){$(".download-client-box").remove(),$(".talking-box-main").removeClass("hide");var b=navigator.userAgent;b.indexOf("momo/v0.2.2")>-1&&$("#client-update-tip-box")[0]&&"0"==$("#client-update-tip-box").attr("data-closed")&&$("#client-update-tip-box").show(),$("#client-update-tip-box").on("click",".ignore, .download-link",function(e){$("#client-update-tip-box").hide(),$("#client-update-tip-box").attr("data-closed","1")})}else{$("#close-download-btn").on("click",c.closeDownload);var x=document.getElementById("pc_download"),w=document.getElementById("mac_download");x&&w&&c.downloadCount("pc_download","mac_download","close-download-btn")}};return{init:g}}),define("module/chatroom/room-VM-ReceiveMsg",["require","exports","module","module/V2-M-Variable","module/chatroom/room-M-Variable","module/chatroom/room-M-Helper","module/V2-Tips","module/chatroom/room-VM-addMessage","module/chatroom/room-API"],function(e){var t=e("../V2-M-Variable"),n=e("./room-M-Variable"),a={};a.roomHelper=e("./room-M-Helper");var i=e("../V2-Tips"),o=e("./room-VM-addMessage"),r=e("./room-API"),l=function(e){if(e="string"==typeof e?JSON.parse(e):e,e.fr==window.enMomoid&&n.noResponseMsg&&n.noResponseMsg.length>0){var t=n.noResponseMsg.indexOf(e._id);if(t>-1)return void n.noResponseMsg.splice(t,1)}n.roomMembers&&!n.roomMembers[e.fr]&&2!==e.style?r.getSimpleProfile(e.fr,function(t,n){n&&o.roomAddMsg(e,n)}):o.roomAddMsg(e,n.roomMembers[e.fr])},s=function(e){"chatroom"==t.currentPage&&(e="string"==typeof e?JSON.parse(e):e,r.getSimpleProfile(e.from,function(t,r){if(r&&"achatroom"==e.msgType){if(1==e.type)e.text=r.name+"进入房间";else if(2==e.type)e.text=r.name+"离开房间";else if(3==e.type)e.text=r.name+"被请出房间";else if(5==e.type)e.text=r.name+"加入围观";else{if(6!=e.type)return;e.text="聊天室已被解散"}e.from==window.enMomoid&&5==e.type&&($(".room-edit-box .edit-content").attr("disabled","disabled"),$(".chatroom-container .icon-face").css("visibility","hidden"),$(".room-edit-box .edit-content").css("visibility","hidden")),e.from==window.enMomoid&&1==e.type&&($(".room-edit-box .edit-content").removeAttr("disabled"),$(".chatroom-container .icon-face").css("visibility","visible"),$(".room-edit-box .edit-content").css("visibility","visible")),e.style=2,n.curRoomId!=e.to||(e.from!=window.enMomoid||2!=e.type&&3!=e.type)&&6!=e.type||(a.roomHelper.resetBord(),6==e.type?i.Warning("聊天室已解散",3e3):i.Warning("你被请出聊天室",3e3),a.roomHelper.socketControl(null,$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid"))),o.roomAddMsg(e,r)}}),(e.from!=window.enMomoid||2!==e.type&&3!==e.type)&&6!=e.type&&r.getRoomMembers())};return{roomReceive:l,sysRoomReceive:s}}),define("module/momolive/LIVE-M-MsgFactory",["require","exports","module","module/V2-M-Variable"],function(e){var t=e("./../V2-M-Variable"),n=function(e){var n="",a=$.Deferred();return"cmsg"==e.msgType&&(1==e.type||3==e.type||4==e.type?(n=e.text.replace(/</g,"&lt;").replace(/\n|\r/g,"<br/>").replace(t.reg.url,function(e){var t=e;return/^(ht|f)tp/.test(e)||(t="http://"+e),'<a class="link" href="'+t+'" target="_blank">'+e+"</a>"}).replace(/\s(?!class|href|target)/g,"&nbsp;"),n="<p>"+n+"</p>"):2==e.type&&(e.bd?n=e.bd:(n={},n.fr=e.fr,n.to=e.to,n.text=e.text,n.src=e.s)),a.resolve(n)),a.promise()};return{msgFactory:n}}),define("module/momolive/LIVE-VM-Receiver",["require","exports","module","module/momolive/LIVE-M-Variable","module/momolive/LIVE-M-MsgFactory","module/momolive/LIVE-VM-Add","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-VM-Add"],function(e){var t={};t=e("./LIVE-M-Variable"),t.msgFactory=e("./LIVE-M-MsgFactory");var n={};n.add=e("./LIVE-VM-Add");var a=e("../mylive/MYLIVE-M-Variable"),i={};i.add=e("../mylive/MYLIVE-VM-Add");var o=function(e){return"/mylive"===window.location.pathname&&a.myliveInfo&&a.myliveInfo.rid===e.to},r=function(e){e="string"==typeof e?JSON.parse(e):e,$.when(t.msgFactory.msgFactory(e)).done(function(r){if(e.typeText=r,"cmsg"===e.msgType){if(1!==e.style&&4!==e.style||(o(e)?i.add.message(e):n.add.Message(e)),2===e.style)if(o(e))parseInt(e.bd["for"])===parseInt(a.myliveInfo.stid)&&e.bd.productId&&(e.gift=a.giftList[e.bd.productId]||{},n.add.gift(e,"mylive"));else if(!t.giftDisplayOff&&!$(".flowplayer").hasClass("fullscreen")){var l=$(".playerContent").attr("data-momoid");if(parseInt(e.bd["for"])===parseInt(l)&&e.bd.productId){if(!t.giftList[e.bd.productId])return;e.gift=t.giftList[e.bd.productId],n.add.gift(e,"live")}}3===e.style&&(o(e)?i.add.barrage(e):t.danmuDisplayOff||n.add.barrage(e)),9===e.style&&(o(e)?i.add.message(e):n.add.Message(e))}})};return{message:r}}),define("view/liveBigREnterItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'    <img class="fortuneIcon" src="/img/fortuneLevel/ml_w_lv_'+this.escapeExpression((i=null!=(i=t.level||(null!=e?e.level:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"level",hash:{},data:a}):i))+'@2x.png">\n'},3:function(e,t,n,a){var i;return'    <img class="charmIcon" src="/img/charmLevel/ml_c_lv_'+this.escapeExpression((i=null!=(i=t.level||(null!=e?e.level:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"level",hash:{},data:a}):i))+'@2x.png">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'<li class="live-R-enter-item '+s((o=null!=(o=t.type||(null!=e?e.type:e))?o:r,typeof o===l?o.call(e,{name:"type",hash:{},data:a}):o))+"-"+s((o=null!=(o=t.bgLevelRange||(null!=e?e.bgLevelRange:e))?o:r,typeof o===l?o.call(e,{name:"bgLevelRange",hash:{},data:a}):o))+'">\n'+(null!=(i=t["if"].call(e,null!=e?e.flag:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'    <p class="text">\n        '+s((o=null!=(o=t.text||(null!=e?e.text:e))?o:r,typeof o===l?o.call(e,{name:"text",hash:{},data:a}):o))+"\n    </p>\n</li>"},useData:!0})}),define("module/momolive/LIVE-M-setMsg",["require","exports","module","module/V2-Tips","module/momolive/LIVE-API","module/momolive/LIVE-M-Variable","module/momolive/LIVE-V-Variable","module/V2-M-Helper","module/momolive/LIVE-M-Helper","module/chatroom/room-M-Helper","view/liveBigREnterItem","view/liveRankingItem"],function(e){var t=e("../V2-Tips"),n=e("./LIVE-API"),a=e("./LIVE-M-Variable"),i=e("./LIVE-V-Variable"),o={};o.Helper=e("../V2-M-Helper"),o.liveHelper=e("./LIVE-M-Helper"),o.roomHelper=e("../chatroom/room-M-Helper");var r=e("../../view/liveBigREnterItem"),l=e("../../view/liveRankingItem"),s=function(e){e.bd&&e.bd.online&&$(".playerContent .onWatch").text(e.bd.online+"在看"),e.bd&&e.bd.stars&&e.bd.stars.length>0&&$.each(e.bd.stars,function(t,n){if(n.starid==$(".anchorMessage").attr("data-stid"))return void $("[data-stid="+n.starid+"] .starVal .starNum.fllow").text(e.bd.stars[0].follows)}),"banlist"==e.ns&&2==e.type&&window.momoid==e.rmId&&(t.Warning("你已被踢出房间，暂时不能再进入该房间",3e3),o.Helper.pushState({type:"live"},"","/live"),o.liveHelper.closePlayer(),n.stayRoomTime(),a.status.closePlayer=!0,o.roomHelper.socketControl($(".room-talk-to-box .collect-room-btn").attr("data-id"),null,null,null))},c=function(e){if(e.bd){var t=e.bd.text||" 来了",n="",l=!0,s=0,c=parseInt(e.bd.fortune)||0,u=parseInt(e.bd.charm)||0;c>=u?(n="fortune",s=c,l=!0):(l=!1,n="charm",s=u);var d=o.liveHelper.getLevelRange(s),m=i.box.liveChatBox.find(".live-R-enter-box").find(".live-R-enter-list");if(m.children().length>=a.maxEnterItemShow)return;m.append(r({type:n,level:s,flag:l,bgLevelRange:d,text:t}));var f=m.children(":last-child");f[0]&&(f.addClass("before"),f.animate({"margin-left":"0%"},300,function(){f.removeClass("before").addClass("current"),setTimeout(function(){f.removeClass("current").addClass("after"),f.animate({opacity:0},300,function(){$(this).removeClass("after"),$(this).remove()}),f.nextAll(":not(.before)").animate({top:"-34px"},300,function(){$(this).css({top:"0px"})})},5e3)}))}},u=function(e){var t=i.box.playerContainer.find(".playerContent"),n=i.box.liveRoomContent;1===e.bd.type?(t.addClass("mobile-device"),n.addClass("mobile-video")):(t.removeClass("mobile-device"),n.removeClass("mobile-video")),a.chatMsgBoxAPI&&a.chatMsgBoxAPI.reinitialise()},d=function(e){if(e&&e.bd&&e.bd.starThumbs){var t=e.bd.starThumbs||0;if(t){if(a.status.isHasPK&&i.box.pkShow.children().length>0){var n=i.box.pkShow.children("[data-stid="+e.bd.starid+"]");n.find(".playerMsg .playerStarVal .starNum").text(t)}parseInt(i.box.anchor.find(".anchorMessage").attr("data-stid"))===parseInt(e.bd.starid)&&i.box.anchor.find(".anchorMessage .starNum.star").text(t)}}},m=function(e){if(a.status.isHasPK&&i.box.pkShow.children().length>0){var t;t=i.box.pkShow.find(".sChecked")[0]?i.box.pkShow.find(".sChecked"):i.box.pkShow.children(":first-child");var n=parseInt(t.attr("data-stid"));n===parseInt(e.bd.star_id)&&i.box.rankingList.html(l({list:e.bd.ranks})),a.ranksListAPI?a.ranksListAPI.reinitialise():o.liveHelper.initRankingListScroll()}else{var r=i.box.playerContainer.find(".playerContent"),s=r.attr("data-rd"),c=r.attr("data-momoid");parseInt(s)===parseInt(e.to)&&parseInt(c)===parseInt(e.bd.star_id)&&i.box.rankingList.html(l({list:e.bd.ranks})),a.ranksListAPI?a.ranksListAPI.reinitialise():o.liveHelper.initRankingListScroll()}};return{snoticeMsg:s,turnScreen:u,enterRoom:c,updateRankingList:m,updateStarThumbs:d}}),define("view/myliveBigREnterItem",["handlebars"],function(e){return e.template({1:function(e,t,n,a){var i;return'    <img class="fortuneIcon" src="/img/fortuneLevel/ml_w_lv_'+this.escapeExpression((i=null!=(i=t.level||(null!=e?e.level:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"level",hash:{},data:a}):i))+'@2x.png">\n'},3:function(e,t,n,a){var i;return'    <img class="charmIcon" src="/img/charmLevel/ml_c_lv_'+this.escapeExpression((i=null!=(i=t.level||(null!=e?e.level:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"level",hash:{},data:a}):i))+'@2x.png">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var i,o,r=t.helperMissing,l="function",s=this.escapeExpression;return'<li class="R-enter-item '+s((o=null!=(o=t.type||(null!=e?e.type:e))?o:r,typeof o===l?o.call(e,{name:"type",hash:{},data:a}):o))+"-"+s((o=null!=(o=t.bgLevelRange||(null!=e?e.bgLevelRange:e))?o:r,typeof o===l?o.call(e,{name:"bgLevelRange",hash:{},data:a}):o))+'">\n'+(null!=(i=t["if"].call(e,null!=e?e.flag:e,{name:"if",hash:{},fn:this.program(1,a,0),inverse:this.program(3,a,0),data:a}))?i:"")+'    <p class="text">\n        '+s((o=null!=(o=t.text||(null!=e?e.text:e))?o:r,typeof o===l?o.call(e,{name:"text",hash:{},data:a}):o))+"\n    </p>\n</li>"},useData:!0})}),define("module/mylive/MYLIVE-VM-SetMsg",["require","exports","module","module/mylive/MYLIVE-V-Variable","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-M-Helper","view/myliveBigREnterItem"],function(e){var t=e("./MYLIVE-V-Variable"),n=e("./MYLIVE-M-Variable");n.Helper=e("./MYLIVE-M-Helper");var a=function(e){if(e.bd&&e.bd.online&&"number"==typeof e.bd.online){var n=t.box.myliveRoomContent.find(".onWatch");n.text(e.bd.online+"在看")}if(e.bd&&e.bd.stars&&e.bd.stars.length>0){var a=t.box.myliveAnchorBox.find(".fansNum");a.text(e.bd.stars[0].follows)}},i=function(a){if(a.bd){var i=a.bd.text||" 来了",o="",r=!0,l=0,s=Number(a.bd.fortune)||0,c=Number(a.bd.charm)||0;s>=c?(o="fortune",l=s,r=!0):(r=!1,o="charm",l=c);var u=n.Helper.getLevelRange(l);if(t.box.myliveREnterBox.find(".R-enter-list").children().length>=n.maxEnterListItemShow)return;var d=e("../../view/myliveBigREnterItem");t.box.myliveREnterBox.find(".R-enter-list").append(d({type:o,level:l,flag:r,bgLevelRange:u,text:i}));var m=t.box.myliveREnterBox.find(".R-enter-list").children(":last-child");m[0]&&(m.addClass("before"),m.animate({"margin-left":"0%"},300,function(){m.removeClass("before").addClass("current"),setTimeout(function(){m.removeClass("current").addClass("after"),m.animate({opacity:0},300,function(){$(this).remove()}),m.nextAll(":not(.before)").animate({top:"-34px"},300,function(){$(this).css({top:"0px"})})},5e3)}))}},o=function(e){if(e&&e.bd&&e.bd.starThumbs){var n=e.bd.starThumbs||0;n&&parseInt(t.box.myliveAnchorBox.find(".anchorMessage").attr("data-stid"))===parseInt(e.bd.starid)&&t.box.myliveAnchorBox.find(".starNum").text(n)}},r=function(e){e&&e.bd&&e.bd.hasOwnProperty("enable")&&(1===e.bd.enable?t.box.myliveAnchorBox.find(".myliveGoLianmai").addClass("on").removeClass("off"):t.box.myliveAnchorBox.find(".myliveGoLianmai").addClass("off").removeClass("on"))},l=function(e){e&&e.bd&&e.bd.hasOwnProperty("count")&&t.box.myliveAnchorBox.find(".myliveGoLianmai .count").text(e.bd.count)};return{snoticeMsg:a,enterRoom:i,updateStarThumbs:o,linkTurnOnOff:r,voiceLinkCountUpdate:l}}),define("module/momolive/LIVE-M-Receiver",["require","exports","module","module/momolive/LIVE-M-setMsg","module/mylive/MYLIVE-M-Variable","module/mylive/MYLIVE-VM-SetMsg","module/mylive/MYLIVE-VM-Update"],function(e){var t={};t.msgHandle=e("./LIVE-M-setMsg");var n=e("../mylive/MYLIVE-M-Variable"),a={};a.setMsg=e("../mylive/MYLIVE-VM-SetMsg"),a.update=e("../mylive/MYLIVE-VM-Update");var i=function(e){return"/mylive"===window.location.pathname&&n.myliveInfo&&n.myliveInfo.rid===e.to},o=function(e){if(e="string"==typeof e?JSON.parse(e):e,"setmsg"===e.msgType)if("prank"===e.ns||"pcrank"===e.ns)i(e)&&parseInt(n.myliveInfo.stid)===parseInt(e.bd.star_id)?a.update.updateRankingList(e.bd.ranks):t.msgHandle.updateRankingList(e);else if("banlist"===e.ns)i(e)?a.setMsg.snoticeMsg(e):t.msgHandle.snoticeMsg(e);else if("snotice"===e.ns)i(e)?a.setMsg.snoticeMsg(e):t.msgHandle.snoticeMsg(e);else if("entered"===e.ns)if(i(e))a.setMsg.enterRoom(e);else{var o=parseInt($(".playerContent").attr("data-rd"));o===parseInt(e.to)&&t.msgHandle.enterRoom(e)}else"turn_screen"===e.ns?i(e)||t.msgHandle.turnScreen(e):"thumbs"===e.ns?i(e)?a.setMsg.updateStarThumbs(e):t.msgHandle.updateStarThumbs(e):"link_turn_on_off"===e.ns?i(e)&&a.setMsg.linkTurnOnOff(e):"voice_link_count"===e.ns&&i(e)&&a.setMsg.voiceLinkCountUpdate(e)};return{message:o}}),define("module/chatroom/room-M-Receiver",["require","exports","module","module/chatroom/room-VM-ReceiveMsg","module/momolive/LIVE-VM-Receiver","module/momolive/LIVE-M-Receiver"],function(e){var t=e("./room-VM-ReceiveMsg"),n=e("../momolive/LIVE-VM-Receiver"),a=e("../momolive/LIVE-M-Receiver"),i=function(e){t.roomReceive(e)},o=function(e){t.sysRoomReceive(e)},r=function(e){n.message(e)},l=function(e){a.message(e)};return{chatroomFn:i,achatroomFn:o,liveroomCFn:r,liveroomSFn:l}}),define("module/chatroom/room-C-Socket",["require","exports","module","module/chatroom/room-M-Receiver","module/chatroom/room-M-Variable","module/chatroom/room-M-Helper","module/V2-M-msgmixup","module/V2-Tips","module/mylive/MYLIVE-M-Variable"],function(e){var t=e("./room-M-Receiver"),n=e("./room-M-Variable"),a={};a.roomHelper=e("./room-M-Helper");var i=e("../V2-M-msgmixup"),o=e("../V2-Tips"),r=e("../mylive/MYLIVE-M-Variable"),l=l||{};return l.init=function(){var e=io("https://web-ws.immomo.com");return e.on("needConfig",function(e){r.myliveInfo.rid?a.roomHelper.socketControl($(".exit-room-btn").attr("data-id"),r.myliveInfo.rid,null,r.myliveInfo.sid):a.roomHelper.socketControl($(".exit-room-btn").attr("data-id"),$(".playerContent").attr("data-rd"),null,$(".playerContent").attr("data-sid"))}),e.on("sendTooFast",function(e,t){e&&"chat"==t?(n.sendTooFast=!0,setTimeout(function(){n.sendTooFast=!1},1e4)):e&&"live"==t&&($(".live-edit-box .editArea").addClass("sendfast"),setTimeout(function(){$(".live-edit-box .editArea").removeClass("sendfast")},1e4)),o.Warning(e,3e3)}),e.on("unableSend",function(e){o.Warning(e,5e3)}),e.on("chatroom",function(e){try{e=JSON.parse(e)}catch(n){return}e=i(e),t.chatroomFn.apply(t,arguments)}),e.on("achatroom",function(e){try{e=JSON.parse(e)}catch(n){return}e=i(e),t.achatroomFn.apply(t,arguments)}),e.on("chatWait10s",function(e){e&&o.Warning(e,3e3)}),e.on("cmsg",function(e){try{e=JSON.parse(e)}catch(n){return}e=i(e),t.liveroomCFn.apply(t,arguments)}),e.on("setmsg",function(e){try{e=JSON.parse(e)}catch(n){return}e=i(e),t.liveroomSFn.apply(t,arguments)}),e},l}),define("module/V2-C-SetRF",["require","exports","module","module/V2-M-Helper"],function(e){var t=e("./V2-M-Helper").QueryString,n=t(window.location.href,"rf");$(".go-download-page").attr("href","/mm_downloads"+(n?"?rf="+n:"")),$(".login-container .go-live-page").attr("href","/live"+(n?"?rf="+n:""))}),define("module/V2-C",["require","exports","module","module/chatroom/room-C-Socket","module/V2-C-SetRF","module/V2-C-Socket"],function(e){var t=t||{};return window.roomSocket=e("./chatroom/room-C-Socket"),t.init=function(){e("./V2-C-SetRF");var t=e("./V2-C-Socket");window.winC=t.init()},t}),!function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(n>>16);return a<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function a(e,a,i,o,r,l){return t(n(t(t(a,e),t(o,l)),r),i)}function i(e,t,n,i,o,r,l){return a(t&n|~t&i,e,t,o,r,l)}function o(e,t,n,i,o,r,l){return a(t&i|n&~i,e,t,o,r,l)}function r(e,t,n,i,o,r,l){return a(t^n^i,e,t,o,r,l)}function l(e,t,n,i,o,r,l){return a(n^(t|~i),e,t,o,r,l)}function s(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var a,s,c,u,d,m=1732584193,f=-271733879,p=-1732584194,h=271733878;for(a=0;a<e.length;a+=16)s=m,c=f,u=p,d=h,m=i(m,f,p,h,e[a],7,-680876936),h=i(h,m,f,p,e[a+1],12,-389564586),p=i(p,h,m,f,e[a+2],17,606105819),f=i(f,p,h,m,e[a+3],22,-1044525330),m=i(m,f,p,h,e[a+4],7,-176418897),h=i(h,m,f,p,e[a+5],12,1200080426),p=i(p,h,m,f,e[a+6],17,-1473231341),f=i(f,p,h,m,e[a+7],22,-45705983),m=i(m,f,p,h,e[a+8],7,1770035416),h=i(h,m,f,p,e[a+9],12,-1958414417),p=i(p,h,m,f,e[a+10],17,-42063),f=i(f,p,h,m,e[a+11],22,-1990404162),m=i(m,f,p,h,e[a+12],7,1804603682),h=i(h,m,f,p,e[a+13],12,-40341101),p=i(p,h,m,f,e[a+14],17,-1502002290),f=i(f,p,h,m,e[a+15],22,1236535329),m=o(m,f,p,h,e[a+1],5,-165796510),h=o(h,m,f,p,e[a+6],9,-1069501632),p=o(p,h,m,f,e[a+11],14,643717713),f=o(f,p,h,m,e[a],20,-373897302),m=o(m,f,p,h,e[a+5],5,-701558691),h=o(h,m,f,p,e[a+10],9,38016083),p=o(p,h,m,f,e[a+15],14,-660478335),f=o(f,p,h,m,e[a+4],20,-405537848),m=o(m,f,p,h,e[a+9],5,568446438),h=o(h,m,f,p,e[a+14],9,-1019803690),p=o(p,h,m,f,e[a+3],14,-187363961),f=o(f,p,h,m,e[a+8],20,1163531501),m=o(m,f,p,h,e[a+13],5,-1444681467),h=o(h,m,f,p,e[a+2],9,-51403784),p=o(p,h,m,f,e[a+7],14,1735328473),f=o(f,p,h,m,e[a+12],20,-1926607734),m=r(m,f,p,h,e[a+5],4,-378558),h=r(h,m,f,p,e[a+8],11,-2022574463),p=r(p,h,m,f,e[a+11],16,1839030562),f=r(f,p,h,m,e[a+14],23,-35309556),m=r(m,f,p,h,e[a+1],4,-1530992060),h=r(h,m,f,p,e[a+4],11,1272893353),p=r(p,h,m,f,e[a+7],16,-155497632),f=r(f,p,h,m,e[a+10],23,-1094730640),m=r(m,f,p,h,e[a+13],4,681279174),h=r(h,m,f,p,e[a],11,-358537222),p=r(p,h,m,f,e[a+3],16,-722521979),f=r(f,p,h,m,e[a+6],23,76029189),m=r(m,f,p,h,e[a+9],4,-640364487),h=r(h,m,f,p,e[a+12],11,-421815835),p=r(p,h,m,f,e[a+15],16,530742520),f=r(f,p,h,m,e[a+2],23,-995338651),m=l(m,f,p,h,e[a],6,-198630844),h=l(h,m,f,p,e[a+7],10,1126891415),p=l(p,h,m,f,e[a+14],15,-1416354905),f=l(f,p,h,m,e[a+5],21,-57434055),m=l(m,f,p,h,e[a+12],6,1700485571),h=l(h,m,f,p,e[a+3],10,-1894986606),p=l(p,h,m,f,e[a+10],15,-1051523),f=l(f,p,h,m,e[a+1],21,-2054922799),m=l(m,f,p,h,e[a+8],6,1873313359),h=l(h,m,f,p,e[a+15],10,-30611744),p=l(p,h,m,f,e[a+6],15,-1560198380),f=l(f,p,h,m,e[a+13],21,1309151649),m=l(m,f,p,h,e[a+4],6,-145523070),h=l(h,m,f,p,e[a+11],10,-1120210379),p=l(p,h,m,f,e[a+2],15,718787259),f=l(f,p,h,m,e[a+9],21,-343485551),m=t(m,s),f=t(f,c),p=t(p,u),h=t(h,d);return[m,f,p,h]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){return c(s(u(e),8*e.length))}function m(e,t){var n,a,i=u(e),o=[],r=[];for(o[15]=r[15]=void 0,i.length>16&&(i=s(i,8*e.length)),n=0;16>n;n+=1)o[n]=909522486^i[n],r[n]=1549556828^i[n];return a=s(o.concat(u(t)),512+8*t.length),c(s(r.concat(a),640))}function f(e){var t,n,a="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=a.charAt(t>>>4&15)+a.charAt(15&t);return i}function p(e){return unescape(encodeURIComponent(e))}function h(e){return d(p(e))}function g(e){return f(h(e))}function v(e,t){return m(p(e),p(t))}function y(e,t){return f(v(e,t))}function b(e,t,n){return t?n?v(t,e):y(t,e):n?h(e):g(e)}"function"==typeof define&&define.amd?define("lib/md5.min",[],function(){return b}):e.md5=b}(this),define("module/login",["require","exports","module","module/V2-V-Variable","lib/md5.min","module/V2-C","module/V2-M","module/momolive/LIVE-M-Variable","module/V2-M-Variable","module/V2-V-Layer","module/V2-API","module/momolive/LIVE-API","module/V2-V","module/V2-C-IsClient","module/V2-C-Observe","lib/collectError","lib/js.cookie","module/V2-M-Helper","view/liveMyAnchorItem"],function(e){var t=e("./V2-V-Variable"),n=e("../lib/md5.min"),a=e("./V2-C"),i=e("./V2-M"),o=e("./momolive/LIVE-M-Variable"),r=e("./V2-M-Variable"),l=e("./V2-V-Layer"),s=e("./V2-API"),c=e("./momolive/LIVE-API"),u=e("./V2-V"),d=e("./V2-C-IsClient").isClient,m=e("./V2-C-Observe"),f=e("../lib/collectError"),p=e("../lib/js.cookie");i.helper=e("./V2-M-Helper");var h=e("../view/liveMyAnchorItem"),g=function(){if($("body").attr("class","chat-skin"),$(".login-container").addClass("hide"),$(".view-container").addClass("hide"),$(".chat-container .chat-box .tab").removeClass("hide"),$(".chat-container").removeClass("hide"),$(".page-container").removeClass("hide"),a.init(),i.init(),"/live"==window.location.pathname||window.location.pathname.match(/^\/live\/\d+/)||c.getMyAnchorNum(function(e,t){if(!e){var n=t||[];o.onShowAnchor=0,n[0]&&parseInt(n[0].stid)===window.momoid&&n.splice(0,1);for(var a=0,i=n.length;a<i;a++)n[a].live&&(o.onShowAnchor+=1,o.status.hasAnchorOnLive||(o.anchorOnLive.push(n[a]),o.status.hasAnchorOnLive=!0));$(".operate-content .myAnchor-guide-tip .onShowAnchor").html(o.onShowAnchor),r.liveHelper.myAnchorGuide();var l="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(h({list:n})),$(".anchor-groupList").append(l)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(h({list:n})),$(".anchor-liveShow-list").append(l)),o.hasLiveAPI&&o.hasLiveAPI.reinitialise(),o.status.showAnchor=!1}}),d){var e=document.createElement("script");e.type="text/javascript",e.src="/pc/momo-v1.3.js",e.id="momo-pc",document.getElementById("momo-pc")||document.body.appendChild(e)}};if(d){$(".wx-login").removeAttr("target");var v=navigator.userAgent;v.indexOf("momo/v0.2.2")>-1&&$("#client-update-tip-box")[0]&&"0"==$("#client-update-tip-box").attr("data-closed")&&$("#client-update-tip-box").show(),$("#client-update-tip-box").on("click",".ignore, .download-link",function(e){$("#client-update-tip-box").hide(),$("#client-update-tip-box").attr("data-closed","1")})}var y=i.helper.QueryString(window.location.href,"rf"),b=$("#login-qr-code");b.attr("src",b.attr("src")+(y?(b.attr("src").indexOf("?")==-1?"?":"&")+"m="+y:"")),r.loginFlag=".from-login-page";var x=!1,w=!1;"/"!=window.location.pathname&&(t.momoidEle=$(".from-layer-login .pre-momoid"),t.passEle=$(".from-layer-login .pre-password"),t.submitBtn=$(".from-layer-login .login-info .submit"),t.theCodeNav=$(".from-layer-login .theCodeNav"),t.theCodeImg=$(".from-layer-login .theCodeImg"),t.msgInfo=$(".from-layer-login p.msg"));var k=function(){t.momoidEle[0]&&t.momoidEle.val().trim().length>0&&t.passEle.val().trim().length>0?t.submitBtn.addClass("on"):t.submitBtn.removeClass("on")},M=function(e){if("/"==window.location.pathname){if(e.parents(".login-form-content").hasClass("from-layer-login"))return}else{if(e.parents(".login-form-content").hasClass("from-login-page"))return;r.loginFlag=".from-layer-login"}};if(window.localStorage){var C=localStorage.getItem("WEBIM_LOGIN_IDHISTORY")||"{}";C&&(C=JSON.parse(C),C.momoid&&C.momoid.length>0&&(t.momoidEle.val(C.momoid[0]),t.passEle.focus()))}$(".pre-momoid").on("focusout",function(){k()}).on("change",function(){k()}),$(".codePre").on("focusin",function(e){0==$(this).val().length&&($(".code-border-list li").removeClass("on"),$(".code-border-list li:first-child").addClass("on"))}).on("focusout",function(){$(".code-border-list li").removeClass("on")}),$(".get-code").on("click",function(){if(!x)if(x=!0,M($(this)),k(),$(r.loginFlag+" .login-info .submit").hasClass("on")){var e=$(r.loginFlag+" .pre-momoid").val(),t=$(r.loginFlag+" .pre-password").val(),s=$(r.loginFlag+" .theCodeNav").val().toUpperCase();if(localStorage){var u=localStorage.getItem("WEBIM_LOGIN_IDHISTORY")||"{}";if(u=JSON.parse(u),u.momoid=u.momoid||[],u&&u.momoid){var d=u.momoid.indexOf(e);d>-1&&u.momoid.slice(d,1)}u.momoid.unshift(e),u.momoid.length>10&&(u.momoid.length=10),localStorage.setItem("WEBIM_LOGIN_IDHISTORY",JSON.stringify(u))}t=n(t);var m=i.helper.QueryString(window.location.href,"rf")||"";$.post("/sendCode",{momoid:e,password:t,imgv:s,symbol:window.location.pathname+"?rf="+m}).done(function(e){if(x=!1,$(r.loginFlag+" p.msg").html(""),$(".login-box").removeClass("hasImgCode"),$(r.loginFlag+".login-form-content").removeClass("hasImgCode"),$(r.loginFlag+" .theCodeNav").val(""),$(r.loginFlag+" .theCodeNav").css("display","none"),$(r.loginFlag+" .theCodeImg").css("display","none"),$(r.loginFlag+" .theCodeTip").css("display","none"),e&&200===e.ec&&e.result===!0)$(r.loginFlag+" .login-info").css("left","-300px"),$(r.loginFlag+" .login-form").css("left","0px"),$(r.loginFlag+" .codePre").val("").focus(),$(r.loginFlag+" .submitcode").removeClass("on");else if(e&&407===e.ec&&e.result)$(".login-box").addClass("hasImgCode"),$(r.loginFlag+" p.msg").addClass("error").html(e.em),$(r.loginFlag+" .theCodeTip").css("display","inline-block"),$(r.loginFlag+" .theCodeNav").css("display","inline"),$(r.loginFlag+" .theCodeImg").css("display","inline").attr("src",e.result);else if(e&&"goHome"===e.result){if(window.momoid=e.momoid,window.token=e.token,window.enMomoid=e.encodeMomoid,"/"==window.location.pathname)g();else{l.Off(),a.init(),".from-layer-login"==r.loginFlag&&(r.status.innerLogin=!0),i.init();var t,n=window.location.pathname||"";if("/live"==n||"/live/"==n||n.match(/^\/live\/\d+/)){if(/^\/live\/\d\-\d+/.test(n)){if(t=n.match(/^\/live\/(\d)\-(\d+)/)){var s=t[1],u=t[2];o.profile={},c.getRoomDetail({rt:s,rid:u},!0)}}else if(/^\/live\/\d+$/.test(n)&&(t=n.match(/^\/live\/(\d+)$/))){var d=t[1];o.profile={},c.getRoomDetail({stid:d},!0)}}else c.getMyAnchorNum(function(e,t){if(!e){var n=t||[];o.onShowAnchor=0,n[0]&&parseInt(n[0].stid)===window.momoid&&n.splice(0,1);for(var a=0,i=n.length;a<i;a++)n[a].live&&(o.onShowAnchor+=1,o.status.hasAnchorOnLive||(o.anchorOnLive.push(n[a]),o.status.hasAnchorOnLive=!0));$(".operate-content .myAnchor-guide-tip .onShowAnchor").html(o.onShowAnchor),r.liveHelper.myAnchorGuide();var l="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(h({list:n})),$(".anchor-groupList").append(l)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(h({list:n})),$(".anchor-liveShow-list").append(l)),o.hasLiveAPI&&o.hasLiveAPI.reinitialise(),o.status.showAnchor=!1}})}$.get("/data/log"+window.location.pathname+"?rf="+m)}else e&&e.em?$(r.loginFlag+" p.msg").addClass("error").html(e.em):$(r.loginFlag+" p.msg").addClass("error").html("获取验证码错误")})}else x=!1,$(r.loginFlag+" p.msg").addClass("error").html("请输入陌陌号和密码")}),$(".theCodeImg, .theCodeTip").on("click",function(){M($(this)),$.get("/changeImgCode").done(function(e){200===e.ec?$(r.loginFlag+" .theCodeImg").css("display","inline").attr("src",e.result):$(r.loginFlag+" p.msg").addClass("error").html(e.em)})}),$(".login-form-content").on("click",".submitcode",function(){if(!w)if(w=!0,M($(this)),$(this).hasClass("on")){var e=$(r.loginFlag+" .pre-momoid").val(),t=$(r.loginFlag+" .pre-password").val();t=n(t);var s=$(r.loginFlag+" .codePre").val().trim();if(!e||!s)return w=!1,$(r.loginFlag+" p.msg").attr("class","msg error").html("请填写正确的验证码"),!1;$(r.loginFlag+" p.codemsg").attr("class","codemsg logining").html("正在登录...");var u=i.helper.QueryString(window.location.href,"rf")||"";$.post("/login",{momoid:e,password:t,verify:s,symbol:window.location.pathname+"?rf="+u},function(e){if(w=!1,e&&200==e.ec){if(window.momoid=e.momoid,window.token=e.token,window.enMomoid=e.encodeMomoid,"/"==window.location.pathname)g();else{l.Off(),a.init(),".from-layer-login"==r.loginFlag&&(r.status.innerLogin=!0),i.init();var t,n=window.location.pathname||"";if("/live"==n||"/live/"==n||n.match(/^\/live\/\d+/)){if(/^\/live\/\d\-\d+/.test(n)){if(t=n.match(/^\/live\/(\d)\-(\d+)/)){var s=t[1],d=t[2];o.profile={},c.getRoomDetail({rt:s,rid:d},!0)}}else if(/^\/live\/\d+$/.test(n)&&(t=n.match(/^\/live\/(\d+)$/))){var m=t[1];o.profile={},c.getRoomDetail({stid:m},!0)}}else c.getMyAnchorNum(function(e,t){if(!e){var n=t||[];o.onShowAnchor=0,n[0]&&parseInt(n[0].stid)===window.momoid&&n.splice(0,1);for(var a=0,i=n.length;a<i;a++)n[a].live&&(o.onShowAnchor+=1,o.status.hasAnchorOnLive||(o.anchorOnLive.push(n[a]),o.status.hasAnchorOnLive=!0));$(".operate-content .myAnchor-guide-tip .onShowAnchor").html(o.onShowAnchor),r.liveHelper.myAnchorGuide();var l="<p class='otherAnchor'><span><< 其他热门主播<span></p>";$(".recommend-haslive-list-box .anchor-groupList")[0]?($(".anchor-groupList").html(h({list:n})),$(".anchor-groupList").append(l)):$(".recommend-nolive-list-box .anchor-liveShow-list")[0]&&($(".anchor-liveShow-list").html(h({list:n})),$(".anchor-liveShow-list").append(l)),o.hasLiveAPI&&o.hasLiveAPI.reinitialise(),o.status.showAnchor=!1}})}$.get("/data/log"+window.location.pathname+"?rf="+u)}else e&&e.em?(403==e.ec&&($(r.loginFlag+" .login-info").css("left","0px"),$(r.loginFlag+" .login-form").css("left","300px")),$(r.loginFlag+" p.codemsg").attr("class","codemsg error").html(e.em)):(w=!1,$(r.loginFlag+" p.codemsg").attr("class","codemsg error").html("登录错误，请稍后重试"))})}else w=!1,$(r.loginFlag+" p.codemsg").attr("class","codemsg error").html("请输入验证码")}),$(".login-form-content").on("keyup",function(e){
if(M($(this)),13==e.which&&($(r.loginFlag+" .pre-momoid").val().trim().length>0&&$(r.loginFlag+" .pre-password").val().trim().length>0&&$(e.target).hasClass("codePre")?$(r.loginFlag+" .submitcode").trigger("click"):$(r.loginFlag+" .get-code").trigger("click")),20==e.which&&($(r.loginFlag+" .login-info p.msg").hasClass("upcase")?$(r.loginFlag+" .login-info p.msg").attr("class","msg").html(""):$(r.loginFlag+" .login-info p.msg").attr("class","msg upcase").html("大写锁定已打开")),($(e.target).hasClass("pre-password")||$(e.target).hasClass("pre-momoid"))&&$(r.loginFlag+" .login-info p.msg").hasClass("error")&&$(r.loginFlag+" p.msg").removeClass("error").html(""),$(e.target).hasClass("codePre")){var t=$(e.target).val(),n=$(e.target).val().length;n>6&&($(e.target).val(parseInt(t/10)),n=6),$(".code-border-list li").removeClass("on"),$(".code-border-list li:nth-child("+parseInt(n+1)+")").addClass("on"),6==n?$(r.loginFlag+" .submitcode").addClass("on"):$(r.loginFlag+" .submitcode").removeClass("on")}k()}),$(".login-form-content").on("keydown",function(e){M($(this)),9==e.which&&(e.preventDefault(),$(e.target).hasClass("pre-momoid")&&setTimeout(function(){$(r.loginFlag+" .pre-password").focus()},10),$(e.target).hasClass("pre-password")&&($(r.loginFlag+" .theCodeImg").attr("src").length>0?setTimeout(function(){$(r.loginFlag+" .theCodeNav").focus()},10):setTimeout(function(){$(r.loginFlag+" .pre-momoid").focus()},10)),$(e.target).hasClass("theCodeNav")&&setTimeout(function(){$(r.loginFlag+" .pre-momoid").focus()},10))}),$(".layer").on("click",l.Off),$(".layer").on("click",".layer-content",function(e){e.stopPropagation()}),$(".login-container .submit-feedback").on("click",function(){l.onOff("feedback")}),$(".layer").on("click",".feedback-btn",function(){if(!window.momoid){var e=$(".layer").find(".feedback-area").val();s.pushFeedBack(e)}}),$(".login-tip span").on("click",function(){M($(this)),$(r.loginFlag+" .login-info").css("left","0px"),$(r.loginFlag+" .login-form").css("left","300px"),$(r.loginFlag+" p.codemsg").text("")}),$(".go-live-page").on("click",function(){var e=window.location.pathname;e=e.indexOf("/live")!=-1?"live":e.indexOf("/chat")!=-1?"chat":"",f.postDot({m:"entirety",a:"glp-"+e,u:"c-"+p.get("cId")},r.url.loginDot)}),$(".go-download-page").on("click",function(){var e=window.location.pathname;e=e.indexOf("/live")!=-1?"live":e.indexOf("/chat")!=-1?"chat":"",f.postDot({m:"entirety",a:"gdp-"+e,u:"c-"+p.get("cId")},r.url.loginDot)}),$(".go-to-box .right").on("click",function(){var e="layer-login";$(this).parents(".go-to-box").siblings(".login-form-content").hasClass("from-login-page")&&(e="login-page"),f.postDot({fr:e,u:"c-"+p.get("cId")},r.url.loginDot)}),$("#qr-code-btn, .layer #qr-code-btn").on("click",function(){$(".login-qr-code").removeClass("hide"),$(".login-info").addClass("hide"),$(".login-form-content").css({"border-bottom":"none"}),$(".login-content .login-other").css({border:"1px solid #ccc","border-top":"none"}),$(".layer .login-other").removeAttr("style"),$(".login-other").css({color:"#191919"}),$(".login-other>i:first-child").css({visibility:"visible"}),$(".login-other .login-other-title>span:last-child").html("第三方帐号直接网页注册")}),$(".close-btn").on("click",function(){$(".login-qr-code").addClass("hide"),$(".login-info").removeClass("hide"),$(".login-form-content").removeAttr("style"),$(".login-content .login-other").removeAttr("style"),$(".layer .login-other").removeAttr("style"),$(".login-other").removeAttr("style"),$(".login-other>i:first-child").removeAttr("style"),$(".login-other .login-other-title>span:last-child").html("第三方帐号快速登录")}),"/"!=window.location.pathname||window.momoid||i.helper.getHotLiveList(),$(".preview-live-list").on("click",".liveShowItem",function(){var e=$(this).attr("data-momoid");t.momoidEle=$(".from-layer-login .pre-momoid"),t.passEle=$(".from-layer-login .pre-password"),t.submitBtn=$(".from-layer-login .login-info .submit"),t.theCodeNav=$(".from-layer-login .theCodeNav"),t.theCodeImg=$(".from-layer-login .theCodeImg"),t.msgInfo=$(".from-layer-login p.msg");var n=navigator.userAgent?(""+navigator.userAgent).toLowerCase():"";n&&(n.indexOf("msie 8.0")>-1||n.indexOf("msie 9.0")>-1)?window.location.href="/live/"+e:(i.helper.pushState({type:"live"},"","/live/"+e),r.liveSource="login_list",u.init())}),$(".change-btn").on("click",function(){if(!$(this).hasClass("current")){var e=navigator.userAgent?(""+navigator.userAgent).toLowerCase():"";if($(this).hasClass("go-msg-bord"))e&&(e.indexOf("msie 8.0")>-1||e.indexOf("msie 9.0")>-1)?window.location.href="/":(i.helper.pushState({type:""},"","/"),u.init());else if($(this).hasClass("go-chat-room"))e&&(e.indexOf("msie 8.0")>-1||e.indexOf("msie 9.0")>-1)?window.location.href="/chat":(i.helper.pushState({type:"chat"},"","/chat"),u.init());else if($(this).hasClass("go-live")){var t="/live",n=$(".playerContent").attr("data-rtype"),a=$(".playerContent").attr("data-rd"),o=$(".playerContent").attr("data-momoid");0===parseInt(n)&&a?t="/live/0-"+a:parseInt(o)>=1e4&&(t="/live/"+o),e&&(e.indexOf("msie 8.0")>-1||e.indexOf("msie 9.0")>-1)?window.location.href=t:(i.helper.pushState({type:"live"},"",t),u.init())}}}),d&&m.subscriber("wx-not-support",function(e){$(".layer").removeClass("hide"),l.onOff("download-new-client",{})})}),window.console=window.console||{log:function(){}},requirejs(["collectError"],function(e){window.onerror=function(t,n,a){e.init(t,n,a)}}),requirejs(["helper/isEqual","helper/getValue","helper/compare"]);var ua=window.navigator.userAgent.toLowerCase();(ua.match(/rv:([\d.]+)\) like gecko/)||ua.match(/msie ([\d.]+)/))&&requirejs(["lib/es5-shim.min"]);var changePageEvent=function(e,t,n,a){$(".change-btn").on("click",function(){if($("#tips").remove(),!$(this).hasClass("current"))if($(this).hasClass("go-msg-bord"))e.pushState({type:""},"","/"),t.init();else if($(this).hasClass("go-chat-room"))e.pushState({type:"chat"},"","/chat"),t.init();else if($(this).hasClass("go-live")){var n="/live";$(".playerContent").attr("data-momoid")&&(n="/live/"+$(".playerContent").attr("data-momoid")),e.pushState({type:"live"},"",n),t.init()}else if($(this).hasClass("go-mylive")){var n="/mylive";e.pushState({type:"mylive"},"",n),t.init()}})};if(ua.indexOf("momoclient")!==-1||ua.indexOf("electron")!==-1){var script=document.createElement("script");script.type="text/javascript",script.src="/pc/momo-v1.3.js",script.id="momo-pc",document.getElementById("momo-pc")||document.body.appendChild(script)}requirejs(["module/V2-C-Observe"],function(e){window.winObs=e}),window.momoid?requirejs(["module/V2-M","module/V2-C"],function(e,t){$("body").attr("class","chat-skin"),$(".login-container").addClass("hide"),$(".view-container").addClass("hide"),$(".chat-container .chat-box .tab").removeClass("hide"),$(".chat-container").removeClass("hide"),$(".page-container").removeClass("hide"),t.init(),e.init()}):"/chat"==window.location.pathname?requirejs(["module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C"],function(e,t,n,a){$(function(){t.init(),requirejs(["module/login"]),changePageEvent(e,t,n,a)})}):"/live"==window.location.pathname||"/live/"==window.location.pathname||window.location.pathname.match(/^\/live\/\d+/)?requirejs(["module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C"],function(e,t,n,a){$(function(){t.init(),requirejs(["module/login"]),changePageEvent(e,t,n,a)})}):"/mylive"==window.location.pathname?requirejs(["module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C"],function(e,t,n,a){$(function(){t.init(),requirejs(["module/login"]),changePageEvent(e,t,n,a)})}):($("body").attr("class","login-skin"),requirejs(["module/login"])),define("v2",["collectError","helper/isEqual","helper/getValue","helper/compare","lib/es5-shim.min","module/V2-C-Observe","module/V2-M","module/V2-C","module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C","module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C","module/V2-M-Helper","module/V2-V","module/V2-M","module/V2-C","module/login"],function(){});